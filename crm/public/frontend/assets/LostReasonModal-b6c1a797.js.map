{"version":3,"file":"LostReasonModal-b6c1a797.js","sources":["../../../../frontend/src/components/Modals/LostReasonModal.vue"],"sourcesContent":["<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{ title: __('Lost reason') }\"\n    @close=\"cancel\"\n  >\n    <template #body-content>\n      <div class=\"-mt-3 mb-4 text-p-base text-ink-gray-7\">\n        {{ __('Please provide a reason for marking this deal as lost') }}\n      </div>\n      <div class=\"flex flex-col gap-3\">\n        <div>\n          <div class=\"mb-2 text-sm text-ink-gray-5\">\n            {{ __('Lost reason') }}\n            <span class=\"text-ink-red-2\">*</span>\n          </div>\n          <Link\n            class=\"form-control flex-1 truncate\"\n            :value=\"lostReason\"\n            doctype=\"CRM Lost Reason\"\n            @change=\"(v) => (lostReason = v)\"\n            :onCreate=\"onCreate\"\n          />\n        </div>\n        <div>\n          <div class=\"mb-2 text-sm text-ink-gray-5\">\n            {{ __('Lost notes') }}\n            <span v-if=\"lostReason == 'Other'\" class=\"text-ink-red-2\">*</span>\n          </div>\n          <FormControl\n            class=\"form-control flex-1 truncate\"\n            type=\"textarea\"\n            :value=\"lostNotes\"\n            @change=\"(e) => (lostNotes = e.target.value)\"\n          />\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex justify-between items-center gap-2\">\n        <div><ErrorMessage :message=\"error\" /></div>\n        <div class=\"flex gap-2\">\n          <Button :label=\"__('Cancel')\" @click=\"cancel\" />\n          <Button variant=\"solid\" :label=\"__('Save')\" @click=\"save\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport Link from '@/components/Controls/Link.vue'\nimport { createDocument } from '@/composables/document'\nimport { Dialog } from 'frappe-ui'\nimport { ref } from 'vue'\n\nconst props = defineProps({\n  deal: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst show = defineModel()\n\nconst lostReason = ref(props.deal.doc.lost_reason || '')\nconst lostNotes = ref(props.deal.doc.lost_notes || '')\nconst error = ref('')\n\nfunction cancel() {\n  show.value = false\n  error.value = ''\n  lostReason.value = ''\n  lostNotes.value = ''\n  props.deal.doc.status = props.deal.originalDoc.status\n}\n\nfunction save() {\n  if (!lostReason.value) {\n    error.value = __('Lost reason is required')\n    return\n  }\n  if (lostReason.value === 'Other' && !lostNotes.value) {\n    error.value = __('Lost notes are required when lost reason is \"Other\"')\n    return\n  }\n\n  error.value = ''\n  show.value = false\n\n  props.deal.doc.lost_reason = lostReason.value\n  props.deal.doc.lost_notes = lostNotes.value\n  props.deal.save.submit()\n}\n\nfunction onCreate(value, close) {\n  createDocument('CRM Lost Reason', value, close)\n}\n</script>\n"],"names":["props","__props","show","_useModel","lostReason","ref","lostNotes","error","cancel","save","onCreate","value","close","createDocument"],"mappings":"+nBAuDA,MAAMA,EAAQC,EAORC,EAAOC,EAAYF,EAAA,YAAA,EAEnBG,EAAaC,EAAIL,EAAM,KAAK,IAAI,aAAe,EAAE,EACjDM,EAAYD,EAAIL,EAAM,KAAK,IAAI,YAAc,EAAE,EAC/CO,EAAQF,EAAI,EAAE,EAEpB,SAASG,GAAS,CAChBN,EAAK,MAAQ,GACbK,EAAM,MAAQ,GACdH,EAAW,MAAQ,GACnBE,EAAU,MAAQ,GAClBN,EAAM,KAAK,IAAI,OAASA,EAAM,KAAK,YAAY,MACjD,CAEA,SAASS,GAAO,CACd,GAAI,CAACL,EAAW,MAAO,CACrBG,EAAM,MAAQ,GAAG,yBAAyB,EAC1C,MACF,CACA,GAAIH,EAAW,QAAU,SAAW,CAACE,EAAU,MAAO,CACpDC,EAAM,MAAQ,GAAG,qDAAqD,EACtE,MACF,CAEAA,EAAM,MAAQ,GACdL,EAAK,MAAQ,GAEbF,EAAM,KAAK,IAAI,YAAcI,EAAW,MACxCJ,EAAM,KAAK,IAAI,WAAaM,EAAU,MACtCN,EAAM,KAAK,KAAK,OAAO,CACzB,CAEA,SAASU,EAASC,EAAOC,EAAO,CAC9BC,EAAe,kBAAmBF,EAAOC,CAAK,CAChD"}