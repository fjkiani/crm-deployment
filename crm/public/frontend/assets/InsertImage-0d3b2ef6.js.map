{"version":3,"file":"InsertImage-0d3b2ef6.js","sources":["../../../../node_modules/frappe-ui/src/components/TextEditor/InsertImage.vue"],"sourcesContent":["<template>\n  <slot v-bind=\"{ onClick: openFileSelector }\"></slot>\n  <input\n    ref=\"fileInput\"\n    type=\"file\"\n    class=\"hidden\"\n    @change=\"onImageSelect\"\n    accept=\"image/*\"\n    multiple\n  />\n  <ImageGroupUploadDialog\n    v-if=\"showModal\"\n    mode=\"new\"\n    v-model=\"showModal\"\n    v-model:files=\"selectedFiles\"\n    :editor=\"editor\"\n    @close=\"handleCancel\"\n  />\n</template>\n<script setup lang=\"ts\">\nimport { ref, useTemplateRef } from 'vue'\nimport type { Editor } from '@tiptap/vue-3'\nimport ImageGroupUploadDialog from './extensions/image-group/ImageGroupUploadDialog.vue'\n\nconst props = defineProps<{\n  editor: Editor\n}>()\n\nconst fileInput = useTemplateRef<HTMLInputElement>('fileInput')\nconst showModal = ref(false)\nconst selectedFiles = ref<File[]>([])\n\nfunction openFileSelector() {\n  fileInput.value?.click()\n}\n\nfunction onImageSelect(e: Event) {\n  const target = e.target as HTMLInputElement\n  const files = target.files\n  if (files && files.length > 0) {\n    if (files.length === 1) {\n      props.editor.chain().focus().uploadImage(files[0]).run()\n    } else {\n      selectedFiles.value = Array.from(files)\n      showModal.value = true\n    }\n  }\n}\n\nfunction handleCancel() {\n  showModal.value = false\n  selectedFiles.value = []\n}\n</script>\n"],"names":["props","__props","fileInput","useTemplateRef","showModal","ref","selectedFiles","openFileSelector","_a","onImageSelect","e","files","handleCancel"],"mappings":"yLAwBA,MAAMA,EAAQC,EAIRC,EAAYC,EAAiC,WAAW,EACxDC,EAAYC,EAAI,EAAK,EACrBC,EAAgBD,EAAY,CAAA,CAAE,EAEpC,SAASE,GAAmB,QAC1BC,EAAAN,EAAU,QAAV,MAAAM,EAAiB,OACnB,CAEA,SAASC,EAAcC,EAAU,CAE/B,MAAMC,EADSD,EAAE,OACI,MACjBC,GAASA,EAAM,OAAS,IACtBA,EAAM,SAAW,EACbX,EAAA,OAAO,MAAM,EAAE,MAAM,EAAE,YAAYW,EAAM,CAAC,CAAC,EAAE,OAErCL,EAAA,MAAQ,MAAM,KAAKK,CAAK,EACtCP,EAAU,MAAQ,IAGxB,CAEA,SAASQ,GAAe,CACtBR,EAAU,MAAQ,GAClBE,EAAc,MAAQ,EACxB","x_google_ignoreList":[0]}