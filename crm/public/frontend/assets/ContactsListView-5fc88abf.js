import{N as b,$ as N,O as h,y as x,a0 as R,z as T,l as q,e as V,f as o,c as m,b as n,w as u,u as r,F as $,r as P,g as c,n as w,B as p,Y as I,d as O,t as B,a1 as S}from"./index-eede9189.js";import{H as A,_ as H}from"./ListBulkActions-812861c6.js";import{P as j}from"./PhoneIcon-c9717bab.js";import{_ as E,a as J,b as Y,c as G,d as K,e as Q}from"./DeleteLinkedDocModal-18c0d44a.js";import{a as F}from"./UserAvatar-e2caba65.js";import{D as X}from"./index-acfc619b.js";import{_ as Z}from"./ListFooter-abffa02e.js";const ee={key:0},te={key:1},oe={key:2},se=["onClick"],le={key:1},ae={key:2},ie=["onClick"],fe={__name:"ContactsListView",props:b({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:b(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(a,{expose:L,emit:M}){const d=M,v=N(),f=h(a,"modelValue"),k=h(a,"list"),U=x(()=>{var s,t;return!!((t=(s=k.value.params)==null?void 0:s.filters)!=null&&t._liked_by)}),{user:z}=R();function g(s){if(s)return JSON.parse(s).includes(z)}T(f,(s,t)=>{s!==t&&d("updatePageCount",s)});const y=q(null);return L({customListActions:x(()=>{var s;return(s=y.value)==null?void 0:s.customListActions})}),(s,t)=>{const C=V("Button"),W=V("FormControl");return o(),m($,null,[n(r(Q),{class:w(s.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:r(v).query.view,viewType:r(v).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name","onUpdate:selections":t[2]||(t[2]=e=>d("selectionsChanged",e))},{default:u(()=>[n(r(E),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:t[1]||(t[1]=e=>d("columnWidthUpdated"))},{default:u(()=>[(o(!0),m($,null,P(a.columns,e=>(o(),c(r(J),{key:e.key,item:e,onColumnWidthUpdated:i=>d("columnWidthUpdated",e)},{default:u(()=>[e.key=="_liked_by"?(o(),c(C,{key:0,variant:"ghosted",class:w(["!h-4",U.value?"fill-red-500":"fill-white"]),onClick:t[0]||(t[0]=()=>d("applyLikeFilter"))},{default:u(()=>[n(A,{class:"h-4 w-4"})]),_:1},8,["class"])):p("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),n(Y,{class:"mx-3 sm:mx-5",rows:a.rows,doctype:"Contact"},{default:u(({idx:e,column:i,item:l})=>[n(r(G),{item:l,align:i.align},{prefix:u(()=>[i.key==="full_name"?(o(),m("div",ee,[l.label?(o(),c(r(F),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="company_name"?(o(),m("div",te,[l.label?(o(),c(r(F),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="mobile_no"?(o(),m("div",oe,[n(j,{class:"h-4 w-4"})])):p("",!0)]),default:u(({label:D})=>[["modified","creation"].includes(i.key)?(o(),m("div",{key:0,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},[n(r(I),{text:l.label},{default:u(()=>[O("div",null,B(l.timeAgo),1)]),_:2},1032,["text"])],8,se)):i.type==="Check"?(o(),m("div",le,[n(W,{type:"checkbox",modelValue:l,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):i.key==="_liked_by"?(o(),m("div",ae,[i.key=="_liked_by"?(o(),c(C,{key:0,variant:"ghosted",class:w(g(l)?"fill-red-500":"fill-white"),onClick:S(()=>d("likeDoc",{name:s.row.name,liked:g(l)}),["stop","prevent"])},{default:u(()=>[n(A,{class:"h-4 w-4"})]),_:2},1032,["class","onClick"])):p("",!0)])):(o(),m("div",{key:3,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},B(D),9,ie))]),_:2},1032,["item","align"])]),_:1},8,["rows"]),n(r(K),null,{actions:u(({selections:e,unselectAll:i})=>[n(r(X),{options:y.value.bulkActions(e,i)},{default:u(()=>[n(C,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),f.value?(o(),c(r(Z),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:t[4]||(t[4]=e=>d("loadMore"))},null,8,["modelValue","options"])):p("",!0),n(H,{ref_key:"listBulkActionsRef",ref:y,modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{fe as _};
//# sourceMappingURL=ContactsListView-5fc88abf.js.map
