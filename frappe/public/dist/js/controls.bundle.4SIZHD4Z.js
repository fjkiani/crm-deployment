(()=>{var J_=Object.create;var vo=Object.defineProperty,Z_=Object.defineProperties,X_=Object.getOwnPropertyDescriptor,Q_=Object.getOwnPropertyDescriptors,ty=Object.getOwnPropertyNames,yo=Object.getOwnPropertySymbols,ey=Object.getPrototypeOf,da=Object.prototype.hasOwnProperty,Nc=Object.prototype.propertyIsEnumerable;var ha=(r,t,e)=>t in r?vo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Pt=(r,t)=>{for(var e in t||(t={}))da.call(t,e)&&ha(r,e,t[e]);if(yo)for(var e of yo(t))Nc.call(t,e)&&ha(r,e,t[e]);return r},hr=(r,t)=>Z_(r,Q_(t));var sn=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var pa=(r,t)=>{var e={};for(var i in r)da.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&yo)for(var i of yo(r))t.indexOf(i)<0&&Nc.call(r,i)&&(e[i]=r[i]);return e};var wt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),ry=(r,t)=>{for(var e in t)vo(r,e,{get:t[e],enumerable:!0})},iy=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ty(t))!da.call(r,n)&&n!==e&&vo(r,n,{get:()=>t[n],enumerable:!(i=X_(t,n))||i.enumerable});return r};var Gt=(r,t,e)=>(e=r!=null?J_(ey(r)):{},iy(t||!r||!r.__esModule?vo(e,"default",{value:r,enumerable:!0}):e,r));var at=(r,t,e)=>(ha(r,typeof t!="symbol"?t+"":t,e),e);var Lc=wt((exports,module)=>{var bo;frappe.ui.form.ControlInt=(bo=class extends frappe.ui.form.ControlData{make(){super.make()}make_input(){super.make_input(),this.$input.on("focus",()=>{var r,t;return(t=(r=document.activeElement)==null?void 0:r.select)==null||t.call(r),!1})}validate(r){return this.parse(r)}eval_expression(value){if(typeof value=="string"){let parsed_components=value.match(/[^\d.,]+|[\d.,]+/g);var parsed_value=value;if(parsed_components!==null&&(parsed_value=parsed_components.map(r=>isNaN(parseFloat(r))?r:flt(r)).join("")),parsed_value.match(/^[0-9+\-/*.() ]+$/))try{return eval(parsed_value)}catch(r){return value}}return value}parse(r){return cint(this.eval_expression(r),null)}},at(bo,"trigger_change_on_input_event",!1),at(bo,"input_mode","numeric"),bo);frappe.ui.form.ControlLongInt=frappe.ui.form.ControlInt});var ln=wt((gL,xo)=>{(function(){var r=function(a,l){var f=this;r.count=(r.count||0)+1,this.count=r.count,this.isOpened=!1,this.input=n(a),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=l=l||{},e(this,{minChars:2,maxItems:10,autoFirst:!1,data:r.DATA,filter:r.FILTER_CONTAINS,sort:l.sort===!1?!1:r.SORT_BYLENGTH,container:r.CONTAINER,item:r.ITEM,replace:r.REPLACE,tabSelect:!1},l),this.index=-1,this.container=this.container(a),this.ul=n.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:this.minChars!=0?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(p){var y=p.keyCode;f.opened&&(y===13&&f.selected?(p.preventDefault(),f.select(void 0,void 0,p)):y===9&&f.selected&&f.tabSelect?f.select(void 0,void 0,p):y===27?f.close({reason:"esc"}):(y===38||y===40)&&(p.preventDefault(),f[y===38?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(p){p.preventDefault()},click:function(p){var y=p.target;if(y!==this){for(;y&&!/li/i.test(y.nodeName);)y=y.parentNode;y&&p.button===0&&(p.preventDefault(),f.select(y,p.target,p))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||l.list||[],r.all.push(this)};r.prototype={set list(a){if(Array.isArray(a))this._list=a;else if(typeof a=="string"&&a.indexOf(",")>-1)this._list=a.split(/\s*,\s*/);else if(a=n(a),a&&a.children){var l=[];i.apply(a.children).forEach(function(f){if(!f.disabled){var p=f.textContent.trim(),y=f.value||p,h=f.label||p;y!==""&&l.push({label:h,value:y})}}),this._list=l}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(a){!this.opened||(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),n.fire(this.input,"awesomplete-close",a||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&this.index===-1&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){if(n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form),!this.options.container){var a=this.container.parentNode;a.insertBefore(this.input,this.container),a.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var l=r.all.indexOf(this);l!==-1&&r.all.splice(l,1)},next:function(){var a=this.ul.children.length;this.goto(this.index<a-1?this.index+1:a?0:-1)},previous:function(){var a=this.ul.children.length,l=this.index-1;this.goto(this.selected&&l!==-1?l:a-1)},goto:function(a){var l=this.ul.children;this.selected&&l[this.index].setAttribute("aria-selected","false"),this.index=a,a>-1&&l.length>0&&(l[a].setAttribute("aria-selected","true"),this.status.textContent=l[a].textContent+", list item "+(a+1)+" of "+l.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=l[a].offsetTop-this.ul.clientHeight+l[a].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(a,l,f){if(a?this.index=n.siblingIndex(a):a=this.ul.children[this.index],a){var p=this.suggestions[this.index],y=n.fire(this.input,"awesomplete-select",{text:p,origin:l||a,originalEvent:f});y&&(this.replace(p),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:p,originalEvent:f}))}},evaluate:function(){var a=this,l=this.input.value;l.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(f){return new t(a.data(f,l))}).filter(function(f){return a.filter(f,l)}),this.sort!==!1&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(f,p){a.ul.appendChild(a.item(f,l,p))}),this.ul.children.length===0?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},r.all=[],r.FILTER_CONTAINS=function(a,l){return RegExp(n.regExpEscape(l.trim()),"i").test(a)},r.FILTER_STARTSWITH=function(a,l){return RegExp("^"+n.regExpEscape(l.trim()),"i").test(a)},r.SORT_BYLENGTH=function(a,l){return a.length!==l.length?a.length-l.length:a<l?-1:1},r.CONTAINER=function(a){return n.create("div",{className:"awesomplete",around:a})},r.ITEM=function(a,l,f){var p=l.trim()===""?a:a.replace(RegExp(n.regExpEscape(l.trim()),"gi"),"<mark>$&</mark>");return n.create("li",{innerHTML:p,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+f})},r.REPLACE=function(a){this.input.value=a.value},r.DATA=function(a){return a};function t(a){var l=Array.isArray(a)?{label:a[0],value:a[1]}:typeof a=="object"&&"label"in a&&"value"in a?a:{label:a,value:a};this.label=l.label||l.value,this.value=l.value}Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};function e(a,l,f){for(var p in l){var y=l[p],h=a.input.getAttribute("data-"+p.toLowerCase());typeof y=="number"?a[p]=parseInt(h):y===!1?a[p]=h!==null:y instanceof Function?a[p]=null:a[p]=h,!a[p]&&a[p]!==0&&(a[p]=p in f?f[p]:y)}}var i=Array.prototype.slice;function n(a,l){return typeof a=="string"?(l||document).querySelector(a):a||null}function o(a,l){return i.call((l||document).querySelectorAll(a))}n.create=function(a,l){var f=document.createElement(a);for(var p in l){var y=l[p];if(p==="inside")n(y).appendChild(f);else if(p==="around"){var h=n(y);h.parentNode.insertBefore(f,h),f.appendChild(h),h.getAttribute("autofocus")!=null&&h.focus()}else p in f?f[p]=y:f.setAttribute(p,y)}return f},n.bind=function(a,l){if(a)for(var f in l){var p=l[f];f.split(/\s+/).forEach(function(y){a.addEventListener(y,p)})}},n.unbind=function(a,l){if(a)for(var f in l){var p=l[f];f.split(/\s+/).forEach(function(y){a.removeEventListener(y,p)})}},n.fire=function(a,l,f){var p=document.createEvent("HTMLEvents");p.initEvent(l,!0,!0);for(var y in f)p[y]=f[y];return a.dispatchEvent(p)},n.regExpEscape=function(a){return a.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(a){for(var l=0;a=a.previousElementSibling;l++);return l};function s(){o("input.awesomplete").forEach(function(a){new r(a)})}return typeof self!="undefined"&&(self.Awesomplete=r),typeof Document!="undefined"&&(document.readyState!=="loading"?s():document.addEventListener("DOMContentLoaded",s)),r.$=n,r.$$=o,typeof xo=="object"&&xo.exports&&(xo.exports=r),r})()});var rd=wt((Xq,ed)=>{var ke=-1,fe=1,re=0;function yn(r,t,e,i,n){if(r===t)return r?[[re,r]]:[];if(e!=null){var o=Yw(r,t,e);if(o)return o}var s=ja(r,t),a=r.substring(0,s);r=r.substring(s),t=t.substring(s),s=Zo(r,t);var l=r.substring(r.length-s);r=r.substring(0,r.length-s),t=t.substring(0,t.length-s);var f=Fw(r,t);return a&&f.unshift([re,a]),l&&f.push([re,l]),Ra(f,n),i&&zw(f),f}function Fw(r,t){var e;if(!r)return[[fe,t]];if(!t)return[[ke,r]];var i=r.length>t.length?r:t,n=r.length>t.length?t:r,o=i.indexOf(n);if(o!==-1)return e=[[fe,i.substring(0,o)],[re,n],[fe,i.substring(o+n.length)]],r.length>t.length&&(e[0][0]=e[2][0]=ke),e;if(n.length===1)return[[ke,r],[fe,t]];var s=Hw(r,t);if(s){var a=s[0],l=s[1],f=s[2],p=s[3],y=s[4],h=yn(a,f),d=yn(l,p);return h.concat([[re,y]],d)}return Uw(r,t)}function Uw(r,t){for(var e=r.length,i=t.length,n=Math.ceil((e+i)/2),o=n,s=2*n,a=new Array(s),l=new Array(s),f=0;f<s;f++)a[f]=-1,l[f]=-1;a[o+1]=0,l[o+1]=0;for(var p=e-i,y=p%2!==0,h=0,d=0,u=0,c=0,m=0;m<n;m++){for(var _=-m+h;_<=m-d;_+=2){var g=o+_,v;_===-m||_!==m&&a[g-1]<a[g+1]?v=a[g+1]:v=a[g-1]+1;for(var w=v-_;v<e&&w<i&&r.charAt(v)===t.charAt(w);)v++,w++;if(a[g]=v,v>e)d+=2;else if(w>i)h+=2;else if(y){var x=o+p-_;if(x>=0&&x<s&&l[x]!==-1){var b=e-l[x];if(v>=b)return Gh(r,t,v,w)}}}for(var k=-m+u;k<=m-c;k+=2){var x=o+k,b;k===-m||k!==m&&l[x-1]<l[x+1]?b=l[x+1]:b=l[x-1]+1;for(var T=b-k;b<e&&T<i&&r.charAt(e-b-1)===t.charAt(i-T-1);)b++,T++;if(l[x]=b,b>e)c+=2;else if(T>i)u+=2;else if(!y){var g=o+p-k;if(g>=0&&g<s&&a[g]!==-1){var v=a[g],w=o+v-g;if(b=e-b,v>=b)return Gh(r,t,v,w)}}}}return[[ke,r],[fe,t]]}function Gh(r,t,e,i){var n=r.substring(0,e),o=t.substring(0,i),s=r.substring(e),a=t.substring(i),l=yn(n,o),f=yn(s,a);return l.concat(f)}function ja(r,t){if(!r||!t||r.charAt(0)!==t.charAt(0))return 0;for(var e=0,i=Math.min(r.length,t.length),n=i,o=0;e<n;)r.substring(o,n)==t.substring(o,n)?(e=n,o=e):i=n,n=Math.floor((i-e)/2+e);return Zh(r.charCodeAt(n-1))&&n--,n}function Kh(r,t){var e=r.length,i=t.length;if(e==0||i==0)return 0;e>i?r=r.substring(e-i):e<i&&(t=t.substring(0,e));var n=Math.min(e,i);if(r==t)return n;for(var o=0,s=1;;){var a=r.substring(n-s),l=t.indexOf(a);if(l==-1)return o;s+=l,(l==0||r.substring(n-s)==t.substring(0,s))&&(o=s,s++)}}function Zo(r,t){if(!r||!t||r.slice(-1)!==t.slice(-1))return 0;for(var e=0,i=Math.min(r.length,t.length),n=i,o=0;e<n;)r.substring(r.length-n,r.length-o)==t.substring(t.length-n,t.length-o)?(e=n,o=e):i=n,n=Math.floor((i-e)/2+e);return Xh(r.charCodeAt(r.length-n))&&n--,n}function Hw(r,t){var e=r.length>t.length?r:t,i=r.length>t.length?t:r;if(e.length<4||i.length*2<e.length)return null;function n(d,u,c){for(var m=d.substring(c,c+Math.floor(d.length/4)),_=-1,g="",v,w,x,b;(_=u.indexOf(m,_+1))!==-1;){var k=ja(d.substring(c),u.substring(_)),T=Zo(d.substring(0,c),u.substring(0,_));g.length<T+k&&(g=u.substring(_-T,_)+u.substring(_,_+k),v=d.substring(0,c-T),w=d.substring(c+k),x=u.substring(0,_-T),b=u.substring(_+k))}return g.length*2>=d.length?[v,w,x,b,g]:null}var o=n(e,i,Math.ceil(e.length/4)),s=n(e,i,Math.ceil(e.length/2)),a;if(!o&&!s)return null;s?o?a=o[4].length>s[4].length?o:s:a=s:a=o;var l,f,p,y;r.length>t.length?(l=a[0],f=a[1],p=a[2],y=a[3]):(p=a[0],y=a[1],l=a[2],f=a[3]);var h=a[4];return[l,f,p,y,h]}function zw(r){for(var t=!1,e=[],i=0,n=null,o=0,s=0,a=0,l=0,f=0;o<r.length;)r[o][0]==re?(e[i++]=o,s=l,a=f,l=0,f=0,n=r[o][1]):(r[o][0]==fe?l+=r[o][1].length:f+=r[o][1].length,n&&n.length<=Math.max(s,a)&&n.length<=Math.max(l,f)&&(r.splice(e[i-1],0,[ke,n]),r[e[i-1]+1][0]=fe,i--,i--,o=i>0?e[i-1]:-1,s=0,a=0,l=0,f=0,n=null,t=!0)),o++;for(t&&Ra(r),Kw(r),o=1;o<r.length;){if(r[o-1][0]==ke&&r[o][0]==fe){var p=r[o-1][1],y=r[o][1],h=Kh(p,y),d=Kh(y,p);h>=d?(h>=p.length/2||h>=y.length/2)&&(r.splice(o,0,[re,y.substring(0,h)]),r[o-1][1]=p.substring(0,p.length-h),r[o+1][1]=y.substring(h),o++):(d>=p.length/2||d>=y.length/2)&&(r.splice(o,0,[re,p.substring(0,d)]),r[o-1][0]=fe,r[o-1][1]=y.substring(0,y.length-d),r[o+1][0]=ke,r[o+1][1]=p.substring(d),o++),o++}o++}}var Wh=/[^a-zA-Z0-9]/,Yh=/\s/,Jh=/[\r\n]/,Vw=/\n\r?\n$/,Gw=/^\r?\n\r?\n/;function Kw(r){function t(d,u){if(!d||!u)return 6;var c=d.charAt(d.length-1),m=u.charAt(0),_=c.match(Wh),g=m.match(Wh),v=_&&c.match(Yh),w=g&&m.match(Yh),x=v&&c.match(Jh),b=w&&m.match(Jh),k=x&&d.match(Vw),T=b&&u.match(Gw);return k||T?5:x||b?4:_&&!v&&w?3:v||w?2:_||g?1:0}for(var e=1;e<r.length-1;){if(r[e-1][0]==re&&r[e+1][0]==re){var i=r[e-1][1],n=r[e][1],o=r[e+1][1],s=Zo(i,n);if(s){var a=n.substring(n.length-s);i=i.substring(0,i.length-s),n=a+n.substring(0,n.length-s),o=a+o}for(var l=i,f=n,p=o,y=t(i,n)+t(n,o);n.charAt(0)===o.charAt(0);){i+=n.charAt(0),n=n.substring(1)+o.charAt(0),o=o.substring(1);var h=t(i,n)+t(n,o);h>=y&&(y=h,l=i,f=n,p=o)}r[e-1][1]!=l&&(l?r[e-1][1]=l:(r.splice(e-1,1),e--),r[e][1]=f,p?r[e+1][1]=p:(r.splice(e+1,1),e--))}e++}}function Ra(r,t){r.push([re,""]);for(var e=0,i=0,n=0,o="",s="",a;e<r.length;){if(e<r.length-1&&!r[e][1]){r.splice(e,1);continue}switch(r[e][0]){case fe:n++,s+=r[e][1],e++;break;case ke:i++,o+=r[e][1],e++;break;case re:var l=e-n-i-1;if(t){if(l>=0&&td(r[l][1])){var f=r[l][1].slice(-1);if(r[l][1]=r[l][1].slice(0,-1),o=f+o,s=f+s,!r[l][1]){r.splice(l,1),e--;var p=l-1;r[p]&&r[p][0]===fe&&(n++,s=r[p][1]+s,p--),r[p]&&r[p][0]===ke&&(i++,o=r[p][1]+o,p--),l=p}}if(Qh(r[e][1])){var f=r[e][1].charAt(0);r[e][1]=r[e][1].slice(1),o+=f,s+=f}}if(e<r.length-1&&!r[e][1]){r.splice(e,1);break}if(o.length>0||s.length>0){o.length>0&&s.length>0&&(a=ja(s,o),a!==0&&(l>=0?r[l][1]+=s.substring(0,a):(r.splice(0,0,[re,s.substring(0,a)]),e++),s=s.substring(a),o=o.substring(a)),a=Zo(s,o),a!==0&&(r[e][1]=s.substring(s.length-a)+r[e][1],s=s.substring(0,s.length-a),o=o.substring(0,o.length-a)));var y=n+i;o.length===0&&s.length===0?(r.splice(e-y,y),e=e-y):o.length===0?(r.splice(e-y,y,[fe,s]),e=e-y+1):s.length===0?(r.splice(e-y,y,[ke,o]),e=e-y+1):(r.splice(e-y,y,[ke,o],[fe,s]),e=e-y+2)}e!==0&&r[e-1][0]===re?(r[e-1][1]+=r[e][1],r.splice(e,1)):e++,n=0,i=0,o="",s="";break}}r[r.length-1][1]===""&&r.pop();var h=!1;for(e=1;e<r.length-1;)r[e-1][0]===re&&r[e+1][0]===re&&(r[e][1].substring(r[e][1].length-r[e-1][1].length)===r[e-1][1]?(r[e][1]=r[e-1][1]+r[e][1].substring(0,r[e][1].length-r[e-1][1].length),r[e+1][1]=r[e-1][1]+r[e+1][1],r.splice(e-1,1),h=!0):r[e][1].substring(0,r[e+1][1].length)==r[e+1][1]&&(r[e-1][1]+=r[e+1][1],r[e][1]=r[e][1].substring(r[e+1][1].length)+r[e+1][1],r.splice(e+1,1),h=!0)),e++;h&&Ra(r,t)}function Zh(r){return r>=55296&&r<=56319}function Xh(r){return r>=56320&&r<=57343}function Qh(r){return Xh(r.charCodeAt(0))}function td(r){return Zh(r.charCodeAt(r.length-1))}function Ww(r){for(var t=[],e=0;e<r.length;e++)r[e][1].length>0&&t.push(r[e]);return t}function Pa(r,t,e,i){return td(r)||Qh(i)?null:Ww([[re,r],[ke,t],[fe,e],[re,i]])}function Yw(r,t,e){var i=typeof e=="number"?{index:e,length:0}:e.oldRange,n=typeof e=="number"?null:e.newRange,o=r.length,s=t.length;if(i.length===0&&(n===null||n.length===0)){var a=i.index,l=r.slice(0,a),f=r.slice(a),p=n?n.index:null;t:{var y=a+s-o;if(p!==null&&p!==y||y<0||y>s)break t;var h=t.slice(0,y),d=t.slice(y);if(d!==f)break t;var u=Math.min(a,y),c=l.slice(0,u),m=h.slice(0,u);if(c!==m)break t;var _=l.slice(u),g=h.slice(u);return Pa(c,_,g,f)}t:{if(p!==null&&p!==a)break t;var v=a,h=t.slice(0,v),d=t.slice(v);if(h!==l)break t;var w=Math.min(o-v,s-v),x=f.slice(f.length-w),b=d.slice(d.length-w);if(x!==b)break t;var _=f.slice(0,f.length-w),g=d.slice(0,d.length-w);return Pa(l,_,g,x)}}if(i.length>0&&n&&n.length===0){t:{var c=r.slice(0,i.index),x=r.slice(i.index+i.length),u=c.length,w=x.length;if(s<u+w)break t;var m=t.slice(0,u),b=t.slice(s-w);if(c!==m||x!==b)break t;var _=r.slice(u,o-w),g=t.slice(u,s-w);return Pa(c,_,g,x)}}return null}function Xo(r,t,e,i){return yn(r,t,e,i,!0)}Xo.INSERT=fe;Xo.DELETE=ke;Xo.EQUAL=re;ed.exports=Xo});var Ya=wt((vn,Si)=>{var Jw=200,pd="__lodash_hash_undefined__",md=9007199254740991,Ua="[object Arguments]",Zw="[object Array]",gd="[object Boolean]",_d="[object Date]",Xw="[object Error]",Ha="[object Function]",yd="[object GeneratorFunction]",Qo="[object Map]",vd="[object Number]",za="[object Object]",id="[object Promise]",bd="[object RegExp]",ts="[object Set]",wd="[object String]",xd="[object Symbol]",qa="[object WeakMap]",kd="[object ArrayBuffer]",es="[object DataView]",Ed="[object Float32Array]",Od="[object Float64Array]",Ad="[object Int8Array]",Sd="[object Int16Array]",Td="[object Int32Array]",Cd="[object Uint8Array]",Nd="[object Uint8ClampedArray]",Ld="[object Uint16Array]",Pd="[object Uint32Array]",Qw=/[\\^$.*+?()[\]{}|]/g,tx=/\w*$/,ex=/^\[object .+?Constructor\]$/,rx=/^(?:0|[1-9]\d*)$/,Mt={};Mt[Ua]=Mt[Zw]=Mt[kd]=Mt[es]=Mt[gd]=Mt[_d]=Mt[Ed]=Mt[Od]=Mt[Ad]=Mt[Sd]=Mt[Td]=Mt[Qo]=Mt[vd]=Mt[za]=Mt[bd]=Mt[ts]=Mt[wd]=Mt[xd]=Mt[Cd]=Mt[Nd]=Mt[Ld]=Mt[Pd]=!0;Mt[Xw]=Mt[Ha]=Mt[qa]=!1;var ix=typeof global=="object"&&global&&global.Object===Object&&global,nx=typeof self=="object"&&self&&self.Object===Object&&self,er=ix||nx||Function("return this")(),jd=typeof vn=="object"&&vn&&!vn.nodeType&&vn,nd=jd&&typeof Si=="object"&&Si&&!Si.nodeType&&Si,ox=nd&&nd.exports===jd;function sx(r,t){return r.set(t[0],t[1]),r}function ax(r,t){return r.add(t),r}function lx(r,t){for(var e=-1,i=r?r.length:0;++e<i&&t(r[e],e,r)!==!1;);return r}function ux(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}function Rd(r,t,e,i){var n=-1,o=r?r.length:0;for(i&&o&&(e=r[++n]);++n<o;)e=t(e,r[n],n,r);return e}function cx(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}function fx(r,t){return r==null?void 0:r[t]}function Id(r){var t=!1;if(r!=null&&typeof r.toString!="function")try{t=!!(r+"")}catch(e){}return t}function od(r){var t=-1,e=Array(r.size);return r.forEach(function(i,n){e[++t]=[n,i]}),e}function Va(r,t){return function(e){return r(t(e))}}function sd(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var hx=Array.prototype,dx=Function.prototype,rs=Object.prototype,Ia=er["__core-js_shared__"],ad=function(){var r=/[^.]+$/.exec(Ia&&Ia.keys&&Ia.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),qd=dx.toString,xr=rs.hasOwnProperty,is=rs.toString,px=RegExp("^"+qd.call(xr).replace(Qw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ld=ox?er.Buffer:void 0,ud=er.Symbol,cd=er.Uint8Array,mx=Va(Object.getPrototypeOf,Object),gx=Object.create,_x=rs.propertyIsEnumerable,yx=hx.splice,fd=Object.getOwnPropertySymbols,vx=ld?ld.isBuffer:void 0,bx=Va(Object.keys,Object),Da=Ni(er,"DataView"),bn=Ni(er,"Map"),Ma=Ni(er,"Promise"),$a=Ni(er,"Set"),Ba=Ni(er,"WeakMap"),wn=Ni(Object,"create"),wx=Vr(Da),xx=Vr(bn),kx=Vr(Ma),Ex=Vr($a),Ox=Vr(Ba),hd=ud?ud.prototype:void 0,dd=hd?hd.valueOf:void 0;function zr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function Ax(){this.__data__=wn?wn(null):{}}function Sx(r){return this.has(r)&&delete this.__data__[r]}function Tx(r){var t=this.__data__;if(wn){var e=t[r];return e===pd?void 0:e}return xr.call(t,r)?t[r]:void 0}function Cx(r){var t=this.__data__;return wn?t[r]!==void 0:xr.call(t,r)}function Nx(r,t){var e=this.__data__;return e[r]=wn&&t===void 0?pd:t,this}zr.prototype.clear=Ax;zr.prototype.delete=Sx;zr.prototype.get=Tx;zr.prototype.has=Cx;zr.prototype.set=Nx;function rr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function Lx(){this.__data__=[]}function Px(r){var t=this.__data__,e=ns(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():yx.call(t,e,1),!0}function jx(r){var t=this.__data__,e=ns(t,r);return e<0?void 0:t[e][1]}function Rx(r){return ns(this.__data__,r)>-1}function Ix(r,t){var e=this.__data__,i=ns(e,r);return i<0?e.push([r,t]):e[i][1]=t,this}rr.prototype.clear=Lx;rr.prototype.delete=Px;rr.prototype.get=jx;rr.prototype.has=Rx;rr.prototype.set=Ix;function Ti(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function qx(){this.__data__={hash:new zr,map:new(bn||rr),string:new zr}}function Dx(r){return os(this,r).delete(r)}function Mx(r){return os(this,r).get(r)}function $x(r){return os(this,r).has(r)}function Bx(r,t){return os(this,r).set(r,t),this}Ti.prototype.clear=qx;Ti.prototype.delete=Dx;Ti.prototype.get=Mx;Ti.prototype.has=$x;Ti.prototype.set=Bx;function Ci(r){this.__data__=new rr(r)}function Fx(){this.__data__=new rr}function Ux(r){return this.__data__.delete(r)}function Hx(r){return this.__data__.get(r)}function zx(r){return this.__data__.has(r)}function Vx(r,t){var e=this.__data__;if(e instanceof rr){var i=e.__data__;if(!bn||i.length<Jw-1)return i.push([r,t]),this;e=this.__data__=new Ti(i)}return e.set(r,t),this}Ci.prototype.clear=Fx;Ci.prototype.delete=Ux;Ci.prototype.get=Hx;Ci.prototype.has=zx;Ci.prototype.set=Vx;function Gx(r,t){var e=Ka(r)||gk(r)?cx(r.length,String):[],i=e.length,n=!!i;for(var o in r)(t||xr.call(r,o))&&!(n&&(o=="length"||hk(o,i)))&&e.push(o);return e}function Dd(r,t,e){var i=r[t];(!(xr.call(r,t)&&Fd(i,e))||e===void 0&&!(t in r))&&(r[t]=e)}function ns(r,t){for(var e=r.length;e--;)if(Fd(r[e][0],t))return e;return-1}function Kx(r,t){return r&&Md(t,Wa(t),r)}function Fa(r,t,e,i,n,o,s){var a;if(i&&(a=o?i(r,n,o,s):i(r)),a!==void 0)return a;if(!ss(r))return r;var l=Ka(r);if(l){if(a=uk(r),!t)return sk(r,a)}else{var f=Hr(r),p=f==Ha||f==yd;if(yk(r))return Qx(r,t);if(f==za||f==Ua||p&&!o){if(Id(r))return o?r:{};if(a=ck(p?{}:r),!t)return ak(r,Kx(a,r))}else{if(!Mt[f])return o?r:{};a=fk(r,f,Fa,t)}}s||(s=new Ci);var y=s.get(r);if(y)return y;if(s.set(r,a),!l)var h=e?lk(r):Wa(r);return lx(h||r,function(d,u){h&&(u=d,d=r[u]),Dd(a,u,Fa(d,t,e,i,u,r,s))}),a}function Wx(r){return ss(r)?gx(r):{}}function Yx(r,t,e){var i=t(r);return Ka(r)?i:ux(i,e(r))}function Jx(r){return is.call(r)}function Zx(r){if(!ss(r)||pk(r))return!1;var t=Hd(r)||Id(r)?px:ex;return t.test(Vr(r))}function Xx(r){if(!Bd(r))return bx(r);var t=[];for(var e in Object(r))xr.call(r,e)&&e!="constructor"&&t.push(e);return t}function Qx(r,t){if(t)return r.slice();var e=new r.constructor(r.length);return r.copy(e),e}function Ga(r){var t=new r.constructor(r.byteLength);return new cd(t).set(new cd(r)),t}function tk(r,t){var e=t?Ga(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}function ek(r,t,e){var i=t?e(od(r),!0):od(r);return Rd(i,sx,new r.constructor)}function rk(r){var t=new r.constructor(r.source,tx.exec(r));return t.lastIndex=r.lastIndex,t}function ik(r,t,e){var i=t?e(sd(r),!0):sd(r);return Rd(i,ax,new r.constructor)}function nk(r){return dd?Object(dd.call(r)):{}}function ok(r,t){var e=t?Ga(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}function sk(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}function Md(r,t,e,i){e||(e={});for(var n=-1,o=t.length;++n<o;){var s=t[n],a=i?i(e[s],r[s],s,e,r):void 0;Dd(e,s,a===void 0?r[s]:a)}return e}function ak(r,t){return Md(r,$d(r),t)}function lk(r){return Yx(r,Wa,$d)}function os(r,t){var e=r.__data__;return dk(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Ni(r,t){var e=fx(r,t);return Zx(e)?e:void 0}var $d=fd?Va(fd,Object):wk,Hr=Jx;(Da&&Hr(new Da(new ArrayBuffer(1)))!=es||bn&&Hr(new bn)!=Qo||Ma&&Hr(Ma.resolve())!=id||$a&&Hr(new $a)!=ts||Ba&&Hr(new Ba)!=qa)&&(Hr=function(r){var t=is.call(r),e=t==za?r.constructor:void 0,i=e?Vr(e):void 0;if(i)switch(i){case wx:return es;case xx:return Qo;case kx:return id;case Ex:return ts;case Ox:return qa}return t});function uk(r){var t=r.length,e=r.constructor(t);return t&&typeof r[0]=="string"&&xr.call(r,"index")&&(e.index=r.index,e.input=r.input),e}function ck(r){return typeof r.constructor=="function"&&!Bd(r)?Wx(mx(r)):{}}function fk(r,t,e,i){var n=r.constructor;switch(t){case kd:return Ga(r);case gd:case _d:return new n(+r);case es:return tk(r,i);case Ed:case Od:case Ad:case Sd:case Td:case Cd:case Nd:case Ld:case Pd:return ok(r,i);case Qo:return ek(r,i,e);case vd:case wd:return new n(r);case bd:return rk(r);case ts:return ik(r,i,e);case xd:return nk(r)}}function hk(r,t){return t=t==null?md:t,!!t&&(typeof r=="number"||rx.test(r))&&r>-1&&r%1==0&&r<t}function dk(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function pk(r){return!!ad&&ad in r}function Bd(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||rs;return r===e}function Vr(r){if(r!=null){try{return qd.call(r)}catch(t){}try{return r+""}catch(t){}}return""}function mk(r){return Fa(r,!0,!0)}function Fd(r,t){return r===t||r!==r&&t!==t}function gk(r){return _k(r)&&xr.call(r,"callee")&&(!_x.call(r,"callee")||is.call(r)==Ua)}var Ka=Array.isArray;function Ud(r){return r!=null&&vk(r.length)&&!Hd(r)}function _k(r){return bk(r)&&Ud(r)}var yk=vx||xk;function Hd(r){var t=ss(r)?is.call(r):"";return t==Ha||t==yd}function vk(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=md}function ss(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function bk(r){return!!r&&typeof r=="object"}function Wa(r){return Ud(r)?Gx(r):Xx(r)}function wk(){return[]}function xk(){return!1}Si.exports=mk});var al=wt((xn,Pi)=>{var kk=200,sl="__lodash_hash_undefined__",ps=1,ep=2,rp=9007199254740991,as="[object Arguments]",Qa="[object Array]",Ek="[object AsyncFunction]",ip="[object Boolean]",np="[object Date]",op="[object Error]",sp="[object Function]",Ok="[object GeneratorFunction]",ls="[object Map]",ap="[object Number]",Ak="[object Null]",Li="[object Object]",zd="[object Promise]",Sk="[object Proxy]",lp="[object RegExp]",us="[object Set]",up="[object String]",Tk="[object Symbol]",Ck="[object Undefined]",tl="[object WeakMap]",cp="[object ArrayBuffer]",cs="[object DataView]",Nk="[object Float32Array]",Lk="[object Float64Array]",Pk="[object Int8Array]",jk="[object Int16Array]",Rk="[object Int32Array]",Ik="[object Uint8Array]",qk="[object Uint8ClampedArray]",Dk="[object Uint16Array]",Mk="[object Uint32Array]",$k=/[\\^$.*+?()[\]{}|]/g,Bk=/^\[object .+?Constructor\]$/,Fk=/^(?:0|[1-9]\d*)$/,Bt={};Bt[Nk]=Bt[Lk]=Bt[Pk]=Bt[jk]=Bt[Rk]=Bt[Ik]=Bt[qk]=Bt[Dk]=Bt[Mk]=!0;Bt[as]=Bt[Qa]=Bt[cp]=Bt[ip]=Bt[cs]=Bt[np]=Bt[op]=Bt[sp]=Bt[ls]=Bt[ap]=Bt[Li]=Bt[lp]=Bt[us]=Bt[up]=Bt[tl]=!1;var fp=typeof global=="object"&&global&&global.Object===Object&&global,Uk=typeof self=="object"&&self&&self.Object===Object&&self,ir=fp||Uk||Function("return this")(),hp=typeof xn=="object"&&xn&&!xn.nodeType&&xn,Vd=hp&&typeof Pi=="object"&&Pi&&!Pi.nodeType&&Pi,dp=Vd&&Vd.exports===hp,Ja=dp&&fp.process,Gd=function(){try{return Ja&&Ja.binding&&Ja.binding("util")}catch(r){}}(),Kd=Gd&&Gd.isTypedArray;function Hk(r,t){for(var e=-1,i=r==null?0:r.length,n=0,o=[];++e<i;){var s=r[e];t(s,e,r)&&(o[n++]=s)}return o}function zk(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}function Vk(r,t){for(var e=-1,i=r==null?0:r.length;++e<i;)if(t(r[e],e,r))return!0;return!1}function Gk(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}function Kk(r){return function(t){return r(t)}}function Wk(r,t){return r.has(t)}function Yk(r,t){return r==null?void 0:r[t]}function Jk(r){var t=-1,e=Array(r.size);return r.forEach(function(i,n){e[++t]=[n,i]}),e}function Zk(r,t){return function(e){return r(t(e))}}function Xk(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var Qk=Array.prototype,tE=Function.prototype,ms=Object.prototype,Za=ir["__core-js_shared__"],pp=tE.toString,Ge=ms.hasOwnProperty,Wd=function(){var r=/[^.]+$/.exec(Za&&Za.keys&&Za.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),mp=ms.toString,eE=RegExp("^"+pp.call(Ge).replace($k,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yd=dp?ir.Buffer:void 0,fs=ir.Symbol,Jd=ir.Uint8Array,gp=ms.propertyIsEnumerable,rE=Qk.splice,Gr=fs?fs.toStringTag:void 0,Zd=Object.getOwnPropertySymbols,iE=Yd?Yd.isBuffer:void 0,nE=Zk(Object.keys,Object),el=ji(ir,"DataView"),kn=ji(ir,"Map"),rl=ji(ir,"Promise"),il=ji(ir,"Set"),nl=ji(ir,"WeakMap"),En=ji(Object,"create"),oE=Yr(el),sE=Yr(kn),aE=Yr(rl),lE=Yr(il),uE=Yr(nl),Xd=fs?fs.prototype:void 0,Xa=Xd?Xd.valueOf:void 0;function Kr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function cE(){this.__data__=En?En(null):{},this.size=0}function fE(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}function hE(r){var t=this.__data__;if(En){var e=t[r];return e===sl?void 0:e}return Ge.call(t,r)?t[r]:void 0}function dE(r){var t=this.__data__;return En?t[r]!==void 0:Ge.call(t,r)}function pE(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=En&&t===void 0?sl:t,this}Kr.prototype.clear=cE;Kr.prototype.delete=fE;Kr.prototype.get=hE;Kr.prototype.has=dE;Kr.prototype.set=pE;function nr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function mE(){this.__data__=[],this.size=0}function gE(r){var t=this.__data__,e=gs(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():rE.call(t,e,1),--this.size,!0}function _E(r){var t=this.__data__,e=gs(t,r);return e<0?void 0:t[e][1]}function yE(r){return gs(this.__data__,r)>-1}function vE(r,t){var e=this.__data__,i=gs(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}nr.prototype.clear=mE;nr.prototype.delete=gE;nr.prototype.get=_E;nr.prototype.has=yE;nr.prototype.set=vE;function Wr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function bE(){this.size=0,this.__data__={hash:new Kr,map:new(kn||nr),string:new Kr}}function wE(r){var t=_s(this,r).delete(r);return this.size-=t?1:0,t}function xE(r){return _s(this,r).get(r)}function kE(r){return _s(this,r).has(r)}function EE(r,t){var e=_s(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}Wr.prototype.clear=bE;Wr.prototype.delete=wE;Wr.prototype.get=xE;Wr.prototype.has=kE;Wr.prototype.set=EE;function hs(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Wr;++t<e;)this.add(r[t])}function OE(r){return this.__data__.set(r,sl),this}function AE(r){return this.__data__.has(r)}hs.prototype.add=hs.prototype.push=OE;hs.prototype.has=AE;function Er(r){var t=this.__data__=new nr(r);this.size=t.size}function SE(){this.__data__=new nr,this.size=0}function TE(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function CE(r){return this.__data__.get(r)}function NE(r){return this.__data__.has(r)}function LE(r,t){var e=this.__data__;if(e instanceof nr){var i=e.__data__;if(!kn||i.length<kk-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new Wr(i)}return e.set(r,t),this.size=e.size,this}Er.prototype.clear=SE;Er.prototype.delete=TE;Er.prototype.get=CE;Er.prototype.has=NE;Er.prototype.set=LE;function PE(r,t){var e=ds(r),i=!e&&KE(r),n=!e&&!i&&ol(r),o=!e&&!i&&!n&&kp(r),s=e||i||n||o,a=s?Gk(r.length,String):[],l=a.length;for(var f in r)(t||Ge.call(r,f))&&!(s&&(f=="length"||n&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||UE(f,l)))&&a.push(f);return a}function gs(r,t){for(var e=r.length;e--;)if(vp(r[e][0],t))return e;return-1}function jE(r,t,e){var i=t(r);return ds(r)?i:zk(i,e(r))}function An(r){return r==null?r===void 0?Ck:Ak:Gr&&Gr in Object(r)?BE(r):GE(r)}function Qd(r){return On(r)&&An(r)==as}function _p(r,t,e,i,n){return r===t?!0:r==null||t==null||!On(r)&&!On(t)?r!==r&&t!==t:RE(r,t,e,i,_p,n)}function RE(r,t,e,i,n,o){var s=ds(r),a=ds(t),l=s?Qa:kr(r),f=a?Qa:kr(t);l=l==as?Li:l,f=f==as?Li:f;var p=l==Li,y=f==Li,h=l==f;if(h&&ol(r)){if(!ol(t))return!1;s=!0,p=!1}if(h&&!p)return o||(o=new Er),s||kp(r)?yp(r,t,e,i,n,o):ME(r,t,l,e,i,n,o);if(!(e&ps)){var d=p&&Ge.call(r,"__wrapped__"),u=y&&Ge.call(t,"__wrapped__");if(d||u){var c=d?r.value():r,m=u?t.value():t;return o||(o=new Er),n(c,m,e,i,o)}}return h?(o||(o=new Er),$E(r,t,e,i,n,o)):!1}function IE(r){if(!xp(r)||zE(r))return!1;var t=bp(r)?eE:Bk;return t.test(Yr(r))}function qE(r){return On(r)&&wp(r.length)&&!!Bt[An(r)]}function DE(r){if(!VE(r))return nE(r);var t=[];for(var e in Object(r))Ge.call(r,e)&&e!="constructor"&&t.push(e);return t}function yp(r,t,e,i,n,o){var s=e&ps,a=r.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var f=o.get(r);if(f&&o.get(t))return f==t;var p=-1,y=!0,h=e&ep?new hs:void 0;for(o.set(r,t),o.set(t,r);++p<a;){var d=r[p],u=t[p];if(i)var c=s?i(u,d,p,t,r,o):i(d,u,p,r,t,o);if(c!==void 0){if(c)continue;y=!1;break}if(h){if(!Vk(t,function(m,_){if(!Wk(h,_)&&(d===m||n(d,m,e,i,o)))return h.push(_)})){y=!1;break}}else if(!(d===u||n(d,u,e,i,o))){y=!1;break}}return o.delete(r),o.delete(t),y}function ME(r,t,e,i,n,o,s){switch(e){case cs:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case cp:return!(r.byteLength!=t.byteLength||!o(new Jd(r),new Jd(t)));case ip:case np:case ap:return vp(+r,+t);case op:return r.name==t.name&&r.message==t.message;case lp:case up:return r==t+"";case ls:var a=Jk;case us:var l=i&ps;if(a||(a=Xk),r.size!=t.size&&!l)return!1;var f=s.get(r);if(f)return f==t;i|=ep,s.set(r,t);var p=yp(a(r),a(t),i,n,o,s);return s.delete(r),p;case Tk:if(Xa)return Xa.call(r)==Xa.call(t)}return!1}function $E(r,t,e,i,n,o){var s=e&ps,a=tp(r),l=a.length,f=tp(t),p=f.length;if(l!=p&&!s)return!1;for(var y=l;y--;){var h=a[y];if(!(s?h in t:Ge.call(t,h)))return!1}var d=o.get(r);if(d&&o.get(t))return d==t;var u=!0;o.set(r,t),o.set(t,r);for(var c=s;++y<l;){h=a[y];var m=r[h],_=t[h];if(i)var g=s?i(_,m,h,t,r,o):i(m,_,h,r,t,o);if(!(g===void 0?m===_||n(m,_,e,i,o):g)){u=!1;break}c||(c=h=="constructor")}if(u&&!c){var v=r.constructor,w=t.constructor;v!=w&&"constructor"in r&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof w=="function"&&w instanceof w)&&(u=!1)}return o.delete(r),o.delete(t),u}function tp(r){return jE(r,JE,FE)}function _s(r,t){var e=r.__data__;return HE(t)?e[typeof t=="string"?"string":"hash"]:e.map}function ji(r,t){var e=Yk(r,t);return IE(e)?e:void 0}function BE(r){var t=Ge.call(r,Gr),e=r[Gr];try{r[Gr]=void 0;var i=!0}catch(o){}var n=mp.call(r);return i&&(t?r[Gr]=e:delete r[Gr]),n}var FE=Zd?function(r){return r==null?[]:(r=Object(r),Hk(Zd(r),function(t){return gp.call(r,t)}))}:ZE,kr=An;(el&&kr(new el(new ArrayBuffer(1)))!=cs||kn&&kr(new kn)!=ls||rl&&kr(rl.resolve())!=zd||il&&kr(new il)!=us||nl&&kr(new nl)!=tl)&&(kr=function(r){var t=An(r),e=t==Li?r.constructor:void 0,i=e?Yr(e):"";if(i)switch(i){case oE:return cs;case sE:return ls;case aE:return zd;case lE:return us;case uE:return tl}return t});function UE(r,t){return t=t==null?rp:t,!!t&&(typeof r=="number"||Fk.test(r))&&r>-1&&r%1==0&&r<t}function HE(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function zE(r){return!!Wd&&Wd in r}function VE(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||ms;return r===e}function GE(r){return mp.call(r)}function Yr(r){if(r!=null){try{return pp.call(r)}catch(t){}try{return r+""}catch(t){}}return""}function vp(r,t){return r===t||r!==r&&t!==t}var KE=Qd(function(){return arguments}())?Qd:function(r){return On(r)&&Ge.call(r,"callee")&&!gp.call(r,"callee")},ds=Array.isArray;function WE(r){return r!=null&&wp(r.length)&&!bp(r)}var ol=iE||XE;function YE(r,t){return _p(r,t)}function bp(r){if(!xp(r))return!1;var t=An(r);return t==sp||t==Ok||t==Ek||t==Sk}function wp(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=rp}function xp(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function On(r){return r!=null&&typeof r=="object"}var kp=Kd?Kk(Kd):qE;function JE(r){return WE(r)?PE(r):DE(r)}function ZE(){return[]}function XE(){return!1}Pi.exports=YE});var Ep=wt(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var QE=Ya(),tO=al(),ll;(function(r){function t(o={},s={},a=!1){typeof o!="object"&&(o={}),typeof s!="object"&&(s={});let l=QE(s);a||(l=Object.keys(l).reduce((f,p)=>(l[p]!=null&&(f[p]=l[p]),f),{}));for(let f in o)o[f]!==void 0&&s[f]===void 0&&(l[f]=o[f]);return Object.keys(l).length>0?l:void 0}r.compose=t;function e(o={},s={}){typeof o!="object"&&(o={}),typeof s!="object"&&(s={});let a=Object.keys(o).concat(Object.keys(s)).reduce((l,f)=>(tO(o[f],s[f])||(l[f]=s[f]===void 0?null:s[f]),l),{});return Object.keys(a).length>0?a:void 0}r.diff=e;function i(o={},s={}){o=o||{};let a=Object.keys(s).reduce((l,f)=>(s[f]!==o[f]&&o[f]!==void 0&&(l[f]=s[f]),l),{});return Object.keys(o).reduce((l,f)=>(o[f]!==s[f]&&s[f]===void 0&&(l[f]=null),l),a)}r.invert=i;function n(o,s,a=!1){if(typeof o!="object")return s;if(typeof s!="object")return;if(!a)return s;let l=Object.keys(s).reduce((f,p)=>(o[p]===void 0&&(f[p]=s[p]),f),{});return Object.keys(l).length>0?l:void 0}r.transform=n})(ll||(ll={}));ul.default=ll});var hl=wt(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var cl;(function(r){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}r.length=t})(cl||(cl={}));fl.default=cl});var Ap=wt(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var Op=hl(),dl=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);let e=this.ops[this.index];if(e){let i=this.offset,n=Op.default.length(e);if(t>=n-i?(t=n-i,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{let o={};return e.attributes&&(o.attributes=e.attributes),typeof e.retain=="number"?o.retain=t:typeof e.retain=="object"&&e.retain!==null?o.retain=e.retain:typeof e.insert=="string"?o.insert=e.insert.substr(i,t):o.insert=e.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Op.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let t=this.offset,e=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(n)}}else return[]}};pl.default=dl});var Ee=wt((sr,vs)=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.AttributeMap=sr.OpIterator=sr.Op=void 0;var ys=rd(),eO=Ya(),ml=al(),Jr=Ep();sr.AttributeMap=Jr.default;var or=hl();sr.Op=or.default;var je=Ap();sr.OpIterator=je.default;var rO=String.fromCharCode(0),Sp=(r,t)=>{if(typeof r!="object"||r===null)throw new Error(`cannot retain a ${typeof r}`);if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);let e=Object.keys(r)[0];if(!e||e!==Object.keys(t)[0])throw new Error(`embed types not matched: ${e} != ${Object.keys(t)[0]}`);return[e,r[e],t[e]]},zt=class{constructor(t){Array.isArray(t)?this.ops=t:t!=null&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){let e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){let i={};return typeof t=="string"&&t.length===0?this:(i.insert=t,e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if(typeof t=="number"&&t<=0)return this;let i={retain:t};return e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=eO(t),typeof i=="object"){if(typeof t.delete=="number"&&typeof i.delete=="number")return this.ops[e-1]={delete:i.delete+t.delete},this;if(typeof i.delete=="number"&&t.insert!=null&&(e-=1,i=this.ops[e-1],typeof i!="object"))return this.ops.unshift(t),this;if(ml(t.attributes,i.attributes)){if(typeof t.insert=="string"&&typeof i.insert=="string")return this.ops[e-1]={insert:i.insert+t.insert},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this;if(typeof t.retain=="number"&&typeof i.retain=="number")return this.ops[e-1]={retain:i.retain+t.retain},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){let t=this.ops[this.ops.length-1];return t&&typeof t.retain=="number"&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){let e=[],i=[];return this.forEach(n=>{(t(n)?e:i).push(n)}),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce((t,e)=>e.insert?t+or.default.length(e):e.delete?t-e.delete:t,0)}length(){return this.reduce((t,e)=>t+or.default.length(e),0)}slice(t=0,e=1/0){let i=[],n=new je.default(this.ops),o=0;for(;o<e&&n.hasNext();){let s;o<t?s=n.next(t-o):(s=n.next(e-o),i.push(s)),o+=or.default.length(s)}return new zt(i)}compose(t){let e=new je.default(this.ops),i=new je.default(t.ops),n=[],o=i.peek();if(o!=null&&typeof o.retain=="number"&&o.attributes==null){let a=o.retain;for(;e.peekType()==="insert"&&e.peekLength()<=a;)a-=e.peekLength(),n.push(e.next());o.retain-a>0&&i.next(o.retain-a)}let s=new zt(n);for(;e.hasNext()||i.hasNext();)if(i.peekType()==="insert")s.push(i.next());else if(e.peekType()==="delete")s.push(e.next());else{let a=Math.min(e.peekLength(),i.peekLength()),l=e.next(a),f=i.next(a);if(f.retain){let p={};if(typeof l.retain=="number")p.retain=typeof f.retain=="number"?a:f.retain;else if(typeof f.retain=="number")l.retain==null?p.insert=l.insert:p.retain=l.retain;else{let h=l.retain==null?"insert":"retain",[d,u,c]=Sp(l[h],f.retain),m=zt.getHandler(d);p[h]={[d]:m.compose(u,c,h==="retain")}}let y=Jr.default.compose(l.attributes,f.attributes,typeof l.retain=="number");if(y&&(p.attributes=y),s.push(p),!i.hasNext()&&ml(s.ops[s.ops.length-1],p)){let h=new zt(e.rest());return s.concat(h).chop()}}else typeof f.delete=="number"&&(typeof l.retain=="number"||typeof l.retain=="object"&&l.retain!==null)&&s.push(f)}return s.chop()}concat(t){let e=new zt(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new zt;let i=[this,t].map(l=>l.map(f=>{if(f.insert!=null)return typeof f.insert=="string"?f.insert:rO;let p=l===t?"on":"with";throw new Error("diff() called "+p+" non-document")}).join("")),n=new zt,o=ys(i[0],i[1],e,!0),s=new je.default(this.ops),a=new je.default(t.ops);return o.forEach(l=>{let f=l[1].length;for(;f>0;){let p=0;switch(l[0]){case ys.INSERT:p=Math.min(a.peekLength(),f),n.push(a.next(p));break;case ys.DELETE:p=Math.min(f,s.peekLength()),s.next(p),n.delete(p);break;case ys.EQUAL:p=Math.min(s.peekLength(),a.peekLength(),f);let y=s.next(p),h=a.next(p);ml(y.insert,h.insert)?n.retain(p,Jr.default.diff(y.attributes,h.attributes)):n.push(h).delete(p);break}f-=p}}),n.chop()}eachLine(t,e=`
`){let i=new je.default(this.ops),n=new zt,o=0;for(;i.hasNext();){if(i.peekType()!=="insert")return;let s=i.peek(),a=or.default.length(s)-i.peekLength(),l=typeof s.insert=="string"?s.insert.indexOf(e,a)-a:-1;if(l<0)n.push(i.next());else if(l>0)n.push(i.next(l));else{if(t(n,i.next(1).attributes||{},o)===!1)return;o+=1,n=new zt}}n.length()>0&&t(n,{},o)}invert(t){let e=new zt;return this.reduce((i,n)=>{if(n.insert)e.delete(or.default.length(n));else{if(typeof n.retain=="number"&&n.attributes==null)return e.retain(n.retain),i+n.retain;if(n.delete||typeof n.retain=="number"){let o=n.delete||n.retain;return t.slice(i,i+o).forEach(a=>{n.delete?e.push(a):n.retain&&n.attributes&&e.retain(or.default.length(a),Jr.default.invert(n.attributes,a.attributes))}),i+o}else if(typeof n.retain=="object"&&n.retain!==null){let o=t.slice(i,i+1),s=new je.default(o.ops).next(),[a,l,f]=Sp(n.retain,s.insert),p=zt.getHandler(a);return e.retain({[a]:p.invert(l,f)},Jr.default.invert(n.attributes,s.attributes)),i+1}}return i},0),e.chop()}transform(t,e=!1){if(e=!!e,typeof t=="number")return this.transformPosition(t,e);let i=t,n=new je.default(this.ops),o=new je.default(i.ops),s=new zt;for(;n.hasNext()||o.hasNext();)if(n.peekType()==="insert"&&(e||o.peekType()!=="insert"))s.retain(or.default.length(n.next()));else if(o.peekType()==="insert")s.push(o.next());else{let a=Math.min(n.peekLength(),o.peekLength()),l=n.next(a),f=o.next(a);if(l.delete)continue;if(f.delete)s.push(f);else{let p=l.retain,y=f.retain,h=typeof y=="object"&&y!==null?y:a;if(typeof p=="object"&&p!==null&&typeof y=="object"&&y!==null){let d=Object.keys(p)[0];if(d===Object.keys(y)[0]){let u=zt.getHandler(d);u&&(h={[d]:u.transform(p[d],y[d],e)})}}s.retain(h,Jr.default.transform(l.attributes,f.attributes,e))}}return s.chop()}transformPosition(t,e=!1){e=!!e;let i=new je.default(this.ops),n=0;for(;i.hasNext()&&n<=t;){let o=i.peekLength(),s=i.peekType();if(i.next(),s==="delete"){t-=Math.min(o,t-n);continue}else s==="insert"&&(n<t||!e)&&(t+=o);n+=o}return t}};zt.Op=or.default;zt.OpIterator=je.default;zt.AttributeMap=Jr.default;zt.handlers={};sr.default=zt;typeof vs=="object"&&(vs.exports=zt,vs.exports.default=zt)});var Np=wt((yD,yl)=>{"use strict";var nO=Object.prototype.hasOwnProperty,he="~";function Cn(){}Object.create&&(Cn.prototype=Object.create(null),new Cn().__proto__||(he=!1));function oO(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function Cp(r,t,e,i,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new oO(e,i||r,n),s=he?he+t:t;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function bs(r,t){--r._eventsCount===0?r._events=new Cn:delete r._events[t]}function le(){this._events=new Cn,this._eventsCount=0}le.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)nO.call(e,i)&&t.push(he?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};le.prototype.listeners=function(t){var e=he?he+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s};le.prototype.listenerCount=function(t){var e=he?he+t:t,i=this._events[e];return i?i.fn?1:i.length:0};le.prototype.emit=function(t,e,i,n,o,s){var a=he?he+t:t;if(!this._events[a])return!1;var l=this._events[a],f=arguments.length,p,y;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,o),!0;case 6:return l.fn.call(l.context,e,i,n,o,s),!0}for(y=1,p=new Array(f-1);y<f;y++)p[y-1]=arguments[y];l.fn.apply(l.context,p)}else{var h=l.length,d;for(y=0;y<h;y++)switch(l[y].once&&this.removeListener(t,l[y].fn,void 0,!0),f){case 1:l[y].fn.call(l[y].context);break;case 2:l[y].fn.call(l[y].context,e);break;case 3:l[y].fn.call(l[y].context,e,i);break;case 4:l[y].fn.call(l[y].context,e,i,n);break;default:if(!p)for(d=1,p=new Array(f-1);d<f;d++)p[d-1]=arguments[d];l[y].fn.apply(l[y].context,p)}}return!0};le.prototype.on=function(t,e,i){return Cp(this,t,e,i,!1)};le.prototype.once=function(t,e,i){return Cp(this,t,e,i,!0)};le.prototype.removeListener=function(t,e,i,n){var o=he?he+t:t;if(!this._events[o])return this;if(!e)return bs(this,o),this;var s=this._events[o];if(s.fn)s.fn===e&&(!n||s.once)&&(!i||s.context===i)&&bs(this,o);else{for(var a=0,l=[],f=s.length;a<f;a++)(s[a].fn!==e||n&&!s[a].once||i&&s[a].context!==i)&&l.push(s[a]);l.length?this._events[o]=l.length===1?l[0]:l:bs(this,o)}return this};le.prototype.removeAllListeners=function(t){var e;return t?(e=he?he+t:t,this._events[e]&&bs(this,e)):(this._events=new Cn,this._eventsCount=0),this};le.prototype.off=le.prototype.removeListener;le.prototype.addListener=le.prototype.on;le.prefixed=he;le.EventEmitter=le;typeof yl!="undefined"&&(yl.exports=le)});var Nm=wt((Qn,iu)=>{(function(r,t){typeof Qn=="object"&&typeof iu=="object"?iu.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Qn=="object"?Qn.ImageResize=t():r.ImageResize=t()})(Qn,function(){return function(r){function t(i){if(e[i])return e[i].exports;var n=e[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var e={};return t.m=r,t.c=e,t.i=function(i){return i},t.d=function(i,n,o){t.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(n,"a",n),n},t.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},t.p="",t(t.s=41)}([function(r,t){function e(i){var n=typeof i;return i!=null&&(n=="object"||n=="function")}r.exports=e},function(r,t,e){var i=e(23),n=typeof self=="object"&&self&&self.Object===Object&&self,o=i||n||Function("return this")();r.exports=o},function(r,t){function e(i){return i!=null&&typeof i=="object"}r.exports=e},function(r,t,e){function i(f){var p=-1,y=f==null?0:f.length;for(this.clear();++p<y;){var h=f[p];this.set(h[0],h[1])}}var n=e(82),o=e(83),s=e(84),a=e(85),l=e(86);i.prototype.clear=n,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,t,e){function i(o,s){for(var a=o.length;a--;)if(n(o[a][0],s))return a;return-1}var n=e(8);r.exports=i},function(r,t,e){function i(p){return p==null?p===void 0?l:a:f&&f in Object(p)?o(p):s(p)}var n=e(17),o=e(71),s=e(94),a="[object Null]",l="[object Undefined]",f=n?n.toStringTag:void 0;r.exports=i},function(r,t,e){function i(o,s){var a=o.__data__;return n(s)?a[typeof s=="string"?"string":"hash"]:a.map}var n=e(80);r.exports=i},function(r,t,e){var i=e(11),n=i(Object,"create");r.exports=n},function(r,t){function e(i,n){return i===n||i!==i&&n!==n}r.exports=e},function(r,t,e){"use strict";function i(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}e.d(t,"a",function(){return n});var n=function o(s){i(this,o),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=s.overlay,this.img=s.img,this.options=s.options,this.requestUpdate=s.onUpdate}},function(r,t,e){function i(o,s,a){s=="__proto__"&&n?n(o,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[s]=a}var n=e(22);r.exports=i},function(r,t,e){function i(s,a){var l=o(s,a);return n(l)?l:void 0}var n=e(55),o=e(72);r.exports=i},function(r,t,e){function i(s){return s!=null&&o(s.length)&&!n(s)}var n=e(13),o=e(32);r.exports=i},function(r,t,e){function i(p){if(!o(p))return!1;var y=n(p);return y==a||y==l||y==s||y==f}var n=e(5),o=e(0),s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",f="[object Proxy]";r.exports=i},function(r,t){r.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(r,t,e){(function(i){(function(n,o){r.exports=o()})(typeof self!="undefined"&&self,function(){return function(n){function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return n[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}var s={};return o.m=n,o.c=s,o.d=function(a,l,f){o.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:f})},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=109)}([function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=s(17),l=s(18),f=s(19),p=s(45),y=s(46),h=s(47),d=s(48),u=s(49),c=s(12),m=s(32),_=s(33),g=s(31),v=s(1),w={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:a.default,Format:l.default,Leaf:f.default,Embed:d.default,Scroll:p.default,Block:h.default,Inline:y.default,Text:u.default,Attributor:{Attribute:c.default,Class:m.default,Style:_.default,Store:g.default}};o.default=w},function(n,o,s){"use strict";function a(g,v){var w=f(g);if(w==null)throw new h("Unable to create "+g+" blot");var x=w;return new x(g instanceof Node||g.nodeType===Node.TEXT_NODE?g:x.create(v),v)}function l(g,v){return v===void 0&&(v=!1),g==null?null:g[o.DATA_KEY]!=null?g[o.DATA_KEY].blot:v?l(g.parentNode,v):null}function f(g,v){v===void 0&&(v=_.ANY);var w;if(typeof g=="string")w=m[g]||d[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)w=m.text;else if(typeof g=="number")g&_.LEVEL&_.BLOCK?w=m.block:g&_.LEVEL&_.INLINE&&(w=m.inline);else if(g instanceof HTMLElement){var x=(g.getAttribute("class")||"").split(/\s+/);for(var b in x)if(w=u[x[b]])break;w=w||c[g.tagName]}return w==null?null:v&_.LEVEL&w.scope&&v&_.TYPE&w.scope?w:null}function p(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];if(g.length>1)return g.map(function(b){return p(b)});var w=g[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new h("Invalid definition");if(w.blotName==="abstract")throw new h("Cannot register abstract class");if(m[w.blotName||w.attrName]=w,typeof w.keyName=="string")d[w.keyName]=w;else if(w.className!=null&&(u[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(b){return b.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var x=Array.isArray(w.tagName)?w.tagName:[w.tagName];x.forEach(function(b){c[b]!=null&&w.className!=null||(c[b]=w)})}return w}var y=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var x in w)w.hasOwnProperty(x)&&(v[x]=w[x])};return function(v,w){function x(){this.constructor=v}g(v,w),v.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}}();Object.defineProperty(o,"__esModule",{value:!0});var h=function(g){function v(w){var x=this;return w="[Parchment] "+w,x=g.call(this,w)||this,x.message=w,x.name=x.constructor.name,x}return y(v,g),v}(Error);o.ParchmentError=h;var d={},u={},c={},m={};o.DATA_KEY="__blot";var _;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(_=o.Scope||(o.Scope={})),o.create=a,o.find=l,o.query=f,o.register=p},function(n,o,s){var a=s(51),l=s(11),f=s(3),p=s(20),y=String.fromCharCode(0),h=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};h.prototype.insert=function(d,u){var c={};return d.length===0?this:(c.insert=d,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(c.attributes=u),this.push(c))},h.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},h.prototype.retain=function(d,u){if(d<=0)return this;var c={retain:d};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(c.attributes=u),this.push(c)},h.prototype.push=function(d){var u=this.ops.length,c=this.ops[u-1];if(d=f(!0,{},d),typeof c=="object"){if(typeof d.delete=="number"&&typeof c.delete=="number")return this.ops[u-1]={delete:c.delete+d.delete},this;if(typeof c.delete=="number"&&d.insert!=null&&(u-=1,typeof(c=this.ops[u-1])!="object"))return this.ops.unshift(d),this;if(l(d.attributes,c.attributes)){if(typeof d.insert=="string"&&typeof c.insert=="string")return this.ops[u-1]={insert:c.insert+d.insert},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof c.retain=="number")return this.ops[u-1]={retain:c.retain+d.retain},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this}}return u===this.ops.length?this.ops.push(d):this.ops.splice(u,0,d),this},h.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},h.prototype.filter=function(d){return this.ops.filter(d)},h.prototype.forEach=function(d){this.ops.forEach(d)},h.prototype.map=function(d){return this.ops.map(d)},h.prototype.partition=function(d){var u=[],c=[];return this.forEach(function(m){(d(m)?u:c).push(m)}),[u,c]},h.prototype.reduce=function(d,u){return this.ops.reduce(d,u)},h.prototype.changeLength=function(){return this.reduce(function(d,u){return u.insert?d+p.length(u):u.delete?d-u.delete:d},0)},h.prototype.length=function(){return this.reduce(function(d,u){return d+p.length(u)},0)},h.prototype.slice=function(d,u){d=d||0,typeof u!="number"&&(u=1/0);for(var c=[],m=p.iterator(this.ops),_=0;_<u&&m.hasNext();){var g;_<d?g=m.next(d-_):(g=m.next(u-_),c.push(g)),_+=p.length(g)}return new h(c)},h.prototype.compose=function(d){var u=p.iterator(this.ops),c=p.iterator(d.ops),m=[],_=c.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var g=_.retain;u.peekType()==="insert"&&u.peekLength()<=g;)g-=u.peekLength(),m.push(u.next());_.retain-g>0&&c.next(_.retain-g)}for(var v=new h(m);u.hasNext()||c.hasNext();)if(c.peekType()==="insert")v.push(c.next());else if(u.peekType()==="delete")v.push(u.next());else{var w=Math.min(u.peekLength(),c.peekLength()),x=u.next(w),b=c.next(w);if(typeof b.retain=="number"){var k={};typeof x.retain=="number"?k.retain=w:k.insert=x.insert;var T=p.attributes.compose(x.attributes,b.attributes,typeof x.retain=="number");if(T&&(k.attributes=T),v.push(k),!c.hasNext()&&l(v.ops[v.ops.length-1],k)){var P=new h(u.rest());return v.concat(P).chop()}}else typeof b.delete=="number"&&typeof x.retain=="number"&&v.push(b)}return v.chop()},h.prototype.concat=function(d){var u=new h(this.ops.slice());return d.ops.length>0&&(u.push(d.ops[0]),u.ops=u.ops.concat(d.ops.slice(1))),u},h.prototype.diff=function(d,u){if(this.ops===d.ops)return new h;var c=[this,d].map(function(w){return w.map(function(x){if(x.insert!=null)return typeof x.insert=="string"?x.insert:y;var b=w===d?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),m=new h,_=a(c[0],c[1],u),g=p.iterator(this.ops),v=p.iterator(d.ops);return _.forEach(function(w){for(var x=w[1].length;x>0;){var b=0;switch(w[0]){case a.INSERT:b=Math.min(v.peekLength(),x),m.push(v.next(b));break;case a.DELETE:b=Math.min(x,g.peekLength()),g.next(b),m.delete(b);break;case a.EQUAL:b=Math.min(g.peekLength(),v.peekLength(),x);var k=g.next(b),T=v.next(b);l(k.insert,T.insert)?m.retain(b,p.attributes.diff(k.attributes,T.attributes)):m.push(T).delete(b)}x-=b}}),m.chop()},h.prototype.eachLine=function(d,u){u=u||`
`;for(var c=p.iterator(this.ops),m=new h,_=0;c.hasNext();){if(c.peekType()!=="insert")return;var g=c.peek(),v=p.length(g)-c.peekLength(),w=typeof g.insert=="string"?g.insert.indexOf(u,v)-v:-1;if(w<0)m.push(c.next());else if(w>0)m.push(c.next(w));else{if(d(m,c.next(1).attributes||{},_)===!1)return;_+=1,m=new h}}m.length()>0&&d(m,{},_)},h.prototype.transform=function(d,u){if(u=!!u,typeof d=="number")return this.transformPosition(d,u);for(var c=p.iterator(this.ops),m=p.iterator(d.ops),_=new h;c.hasNext()||m.hasNext();)if(c.peekType()!=="insert"||!u&&m.peekType()==="insert")if(m.peekType()==="insert")_.push(m.next());else{var g=Math.min(c.peekLength(),m.peekLength()),v=c.next(g),w=m.next(g);if(v.delete)continue;w.delete?_.push(w):_.retain(g,p.attributes.transform(v.attributes,w.attributes,u))}else _.retain(p.length(c.next()));return _.chop()},h.prototype.transformPosition=function(d,u){u=!!u;for(var c=p.iterator(this.ops),m=0;c.hasNext()&&m<=d;){var _=c.peekLength(),g=c.peekType();c.next(),g!=="delete"?(g==="insert"&&(m<d||!u)&&(d+=_),m+=_):d-=Math.min(_,d-m)}return d},n.exports=h},function(n,o){"use strict";var s=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,p=function(u){return typeof Array.isArray=="function"?Array.isArray(u):a.call(u)==="[object Array]"},y=function(u){if(!u||a.call(u)!=="[object Object]")return!1;var c=s.call(u,"constructor"),m=u.constructor&&u.constructor.prototype&&s.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!m)return!1;var _;for(_ in u);return _===void 0||s.call(u,_)},h=function(u,c){l&&c.name==="__proto__"?l(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},d=function(u,c){if(c==="__proto__"){if(!s.call(u,c))return;if(f)return f(u,c).value}return u[c]};n.exports=function u(){var c,m,_,g,v,w,x=arguments[0],b=1,k=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<k;++b)if((c=arguments[b])!=null)for(m in c)_=d(x,m),g=d(c,m),x!==g&&(T&&g&&(y(g)||(v=p(g)))?(v?(v=!1,w=_&&p(_)?_:[]):w=_&&y(_)?_:{},h(x,{name:m,newValue:u(T,w,g)})):g!==void 0&&h(x,{name:m,newValue:g}));return x}},function(n,o,s){"use strict";function a(R){return R&&R.__esModule?R:{default:R}}function l(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function f(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?R:O}function p(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}function y(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null?O:(typeof R.formats=="function"&&(O=(0,c.default)(O,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope?O:y(R.parent,O))}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BlockEmbed=o.bubbleFormats=void 0;var h=function(){function R(O,C){for(var q=0;q<C.length;q++){var M=C[q];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}return function(O,C,q){return C&&R(O.prototype,C),q&&R(O,q),O}}(),d=function R(O,C,q){O===null&&(O=Function.prototype);var M=Object.getOwnPropertyDescriptor(O,C);if(M===void 0){var V=Object.getPrototypeOf(O);return V===null?void 0:R(V,C,q)}if("value"in M)return M.value;var W=M.get;if(W!==void 0)return W.call(q)},u=s(3),c=a(u),m=s(2),_=a(m),g=s(0),v=a(g),w=s(16),x=a(w),b=s(6),k=a(b),T=s(7),P=a(T),N=function(R){function O(){return l(this,O),f(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return p(O,R),h(O,[{key:"attach",value:function(){d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new v.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new _.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,q){var M=v.default.query(C,v.default.Scope.BLOCK_ATTRIBUTE);M!=null&&this.attributes.attribute(M,q)}},{key:"formatAt",value:function(C,q,M,V){this.format(M,V)}},{key:"insertAt",value:function(C,q,M){if(typeof q=="string"&&q.endsWith(`
`)){var V=v.default.create(S.blotName);this.parent.insertBefore(V,C===0?this:this.next),V.insertAt(0,q.slice(0,-1))}else d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,C,q,M)}}]),O}(v.default.Embed);N.scope=v.default.Scope.BLOCK_BLOT;var S=function(R){function O(C){l(this,O);var q=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C));return q.cache={},q}return p(O,R),h(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(v.default.Leaf).reduce(function(C,q){return q.length()===0?C:C.insert(q.value(),y(q))},new _.default).insert(`
`,y(this))),this.cache.delta}},{key:"deleteAt",value:function(C,q){d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,C,q),this.cache={}}},{key:"formatAt",value:function(C,q,M,V){q<=0||(v.default.query(M,v.default.Scope.BLOCK)?C+q===this.length()&&this.format(M,V):d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,C,Math.min(q,this.length()-C-1),M,V),this.cache={})}},{key:"insertAt",value:function(C,q,M){if(M!=null)return d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,C,q,M);if(q.length!==0){var V=q.split(`
`),W=V.shift();W.length>0&&(C<this.length()-1||this.children.tail==null?d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),W):this.children.tail.insertAt(this.children.tail.length(),W),this.cache={});var rt=this;V.reduce(function(tt,Q){return rt=rt.split(tt,!0),rt.insertAt(0,Q),Q.length},C+W.length)}}},{key:"insertBefore",value:function(C,q){var M=this.children.head;d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,C,q),M instanceof x.default&&M.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(C,q){d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,C,q),this.cache={}}},{key:"optimize",value:function(C){d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var q=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(q&&(C===0||C>=this.length()-1)){var M=this.clone();return C===0?(this.parent.insertBefore(M,this),this):(this.parent.insertBefore(M,this.next),M)}var V=d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,C,q);return this.cache={},V}}]),O}(v.default.Block);S.blotName="block",S.tagName="P",S.defaultChild="break",S.allowedChildren=[k.default,v.default.Embed,P.default],o.bubbleFormats=y,o.BlockEmbed=N,o.default=S},function(n,o,s){"use strict";function a(Q){return Q&&Q.__esModule?Q:{default:Q}}function l(Q,I,H){return I in Q?Object.defineProperty(Q,I,{value:H,enumerable:!0,configurable:!0,writable:!0}):Q[I]=H,Q}function f(Q,I){if(!(Q instanceof I))throw new TypeError("Cannot call a class as a function")}function p(Q,I){if(I=(0,C.default)(!0,{container:Q,modules:{clipboard:!0,keyboard:!0,history:!0}},I),I.theme&&I.theme!==tt.DEFAULTS.theme){if(I.theme=tt.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?")}else I.theme=W.default;var H=(0,C.default)(!0,{},I.theme.DEFAULTS);[H,I].forEach(function(X){X.modules=X.modules||{},Object.keys(X.modules).forEach(function(J){X.modules[J]===!0&&(X.modules[J]={})})});var B=Object.keys(H.modules).concat(Object.keys(I.modules)),K=B.reduce(function(X,J){var U=tt.import("modules/"+J);return U==null?rt.error("Cannot load "+J+" module. Are you sure you registered it?"):X[J]=U.DEFAULTS||{},X},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,C.default)(!0,{},tt.DEFAULTS,{modules:K},H,I),["bounds","container","scrollingContainer"].forEach(function(X){typeof I[X]=="string"&&(I[X]=document.querySelector(I[X]))}),I.modules=Object.keys(I.modules).reduce(function(X,J){return I.modules[J]&&(X[J]=I.modules[J]),X},{}),I}function y(Q,I,H,B){if(this.options.strict&&!this.isEnabled()&&I===b.default.sources.USER)return new g.default;var K=H==null?null:this.getSelection(),X=this.editor.delta,J=Q();if(K!=null&&(H===!0&&(H=K.index),B==null?K=d(K,J,I):B!==0&&(K=d(K,H,B,I)),this.setSelection(K,b.default.sources.SILENT)),J.length()>0){var U,G=[b.default.events.TEXT_CHANGE,J,X,I];if((U=this.emitter).emit.apply(U,[b.default.events.EDITOR_CHANGE].concat(G)),I!==b.default.sources.SILENT){var nt;(nt=this.emitter).emit.apply(nt,G)}}return J}function h(Q,I,H,B,K){var X={};return typeof Q.index=="number"&&typeof Q.length=="number"?typeof I!="number"?(K=B,B=H,H=I,I=Q.length,Q=Q.index):(I=Q.length,Q=Q.index):typeof I!="number"&&(K=B,B=H,H=I,I=0),(H===void 0?"undefined":u(H))==="object"?(X=H,K=B):typeof H=="string"&&(B!=null?X[H]=B:K=H),K=K||b.default.sources.API,[Q,I,X,K]}function d(Q,I,H,B){if(Q==null)return null;var K=void 0,X=void 0;if(I instanceof g.default){var J=[Q.index,Q.index+Q.length].map(function(ft){return I.transformPosition(ft,B!==b.default.sources.USER)}),U=c(J,2);K=U[0],X=U[1]}else{var G=[Q.index,Q.index+Q.length].map(function(ft){return ft<I||ft===I&&B===b.default.sources.USER?ft:H>=0?ft+H:Math.max(I,ft+H)}),nt=c(G,2);K=nt[0],X=nt[1]}return new S.Range(K,X-K)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.overload=o.expandConfig=void 0;var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},c=function(){function Q(I,H){var B=[],K=!0,X=!1,J=void 0;try{for(var U,G=I[Symbol.iterator]();!(K=(U=G.next()).done)&&(B.push(U.value),!H||B.length!==H);K=!0);}catch(nt){X=!0,J=nt}finally{try{!K&&G.return&&G.return()}finally{if(X)throw J}}return B}return function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return Q(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function Q(I,H){for(var B=0;B<H.length;B++){var K=H[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(I,K.key,K)}}return function(I,H,B){return H&&Q(I.prototype,H),B&&Q(I,B),I}}();s(50);var _=s(2),g=a(_),v=s(14),w=a(v),x=s(8),b=a(x),k=s(9),T=a(k),P=s(0),N=a(P),S=s(15),R=a(S),O=s(3),C=a(O),q=s(10),M=a(q),V=s(34),W=a(V),rt=(0,M.default)("quill"),tt=function(){function Q(I){var H=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(f(this,Q),this.options=p(I,B),this.container=this.options.container,this.container==null)return rt.error("Invalid Quill container",I);this.options.debug&&Q.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new b.default,this.scroll=N.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new w.default(this.scroll),this.selection=new R.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(b.default.events.EDITOR_CHANGE,function(J){J===b.default.events.TEXT_CHANGE&&H.root.classList.toggle("ql-blank",H.editor.isBlank())}),this.emitter.on(b.default.events.SCROLL_UPDATE,function(J,U){var G=H.selection.lastRange,nt=G&&G.length===0?G.index:void 0;y.call(H,function(){return H.editor.update(null,U,nt)},J)});var X=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(X),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return m(Q,null,[{key:"debug",value:function(I){I===!0&&(I="log"),M.default.level(I)}},{key:"find",value:function(I){return I.__quill||N.default.find(I)}},{key:"import",value:function(I){return this.imports[I]==null&&rt.error("Cannot import "+I+". Are you sure it was registered?"),this.imports[I]}},{key:"register",value:function(I,H){var B=this,K=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(typeof I!="string"){var X=I.attrName||I.blotName;typeof X=="string"?this.register("formats/"+X,I,H):Object.keys(I).forEach(function(J){B.register(J,I[J],H)})}else this.imports[I]==null||K||rt.warn("Overwriting "+I+" with",H),this.imports[I]=H,(I.startsWith("blots/")||I.startsWith("formats/"))&&H.blotName!=="abstract"?N.default.register(H):I.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]),m(Q,[{key:"addContainer",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof I=="string"){var B=I;I=document.createElement("div"),I.classList.add(B)}return this.container.insertBefore(I,H),I}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(I,H,B){var K=this,X=h(I,H,B),J=c(X,4);return I=J[0],H=J[1],B=J[3],y.call(this,function(){return K.editor.deleteText(I,H)},B,I,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var I=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(I),this.container.classList.toggle("ql-disabled",!I)}},{key:"focus",value:function(){var I=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=I,this.scrollIntoView()}},{key:"format",value:function(I,H){var B=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;return y.call(this,function(){var X=B.getSelection(!0),J=new g.default;if(X==null)return J;if(N.default.query(I,N.default.Scope.BLOCK))J=B.editor.formatLine(X.index,X.length,l({},I,H));else{if(X.length===0)return B.selection.format(I,H),J;J=B.editor.formatText(X.index,X.length,l({},I,H))}return B.setSelection(X,b.default.sources.SILENT),J},K)}},{key:"formatLine",value:function(I,H,B,K,X){var J=this,U=void 0,G=h(I,H,B,K,X),nt=c(G,4);return I=nt[0],H=nt[1],U=nt[2],X=nt[3],y.call(this,function(){return J.editor.formatLine(I,H,U)},X,I,0)}},{key:"formatText",value:function(I,H,B,K,X){var J=this,U=void 0,G=h(I,H,B,K,X),nt=c(G,4);return I=nt[0],H=nt[1],U=nt[2],X=nt[3],y.call(this,function(){return J.editor.formatText(I,H,U)},X,I,0)}},{key:"getBounds",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=void 0;B=typeof I=="number"?this.selection.getBounds(I,H):this.selection.getBounds(I.index,I.length);var K=this.container.getBoundingClientRect();return{bottom:B.bottom-K.top,height:B.height,left:B.left-K.left,right:B.right-K.left,top:B.top-K.top,width:B.width}}},{key:"getContents",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,B=h(I,H),K=c(B,2);return I=K[0],H=K[1],this.editor.getContents(I,H)}},{key:"getFormat",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof I=="number"?this.editor.getFormat(I,H):this.editor.getFormat(I.index,I.length)}},{key:"getIndex",value:function(I){return I.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(I){return this.scroll.leaf(I)}},{key:"getLine",value:function(I){return this.scroll.line(I)}},{key:"getLines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof I!="number"?this.scroll.lines(I.index,I.length):this.scroll.lines(I,H)}},{key:"getModule",value:function(I){return this.theme.modules[I]}},{key:"getSelection",value:function(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,B=h(I,H),K=c(B,2);return I=K[0],H=K[1],this.editor.getText(I,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(I,H,B){var K=this,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Q.sources.API;return y.call(this,function(){return K.editor.insertEmbed(I,H,B)},X,I)}},{key:"insertText",value:function(I,H,B,K,X){var J=this,U=void 0,G=h(I,0,B,K,X),nt=c(G,4);return I=nt[0],U=nt[2],X=nt[3],y.call(this,function(){return J.editor.insertText(I,H,U)},X,I,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(I,H,B){this.clipboard.dangerouslyPasteHTML(I,H,B)}},{key:"removeFormat",value:function(I,H,B){var K=this,X=h(I,H,B),J=c(X,4);return I=J[0],H=J[1],B=J[3],y.call(this,function(){return K.editor.removeFormat(I,H)},B,I)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(I){var H=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.default.sources.API;return y.call(this,function(){I=new g.default(I);var K=H.getLength(),X=H.editor.deleteText(0,K),J=H.editor.applyDelta(I),U=J.ops[J.ops.length-1];return U!=null&&typeof U.insert=="string"&&U.insert[U.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),J.delete(1)),X.compose(J)},B)}},{key:"setSelection",value:function(I,H,B){if(I==null)this.selection.setRange(null,H||Q.sources.API);else{var K=h(I,H,B),X=c(K,4);I=X[0],H=X[1],B=X[3],this.selection.setRange(new S.Range(I,H),B),B!==b.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.default.sources.API,B=new g.default().insert(I);return this.setContents(B,H)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,H=this.scroll.update(I);return this.selection.update(I),H}},{key:"updateContents",value:function(I){var H=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.default.sources.API;return y.call(this,function(){return I=new g.default(I),H.editor.applyDelta(I,B)},B,!0)}}]),Q}();tt.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},tt.events=b.default.events,tt.sources=b.default.sources,tt.version="1.3.7",tt.imports={delta:g.default,parchment:N.default,"core/module":T.default,"core/theme":W.default},o.expandConfig=p,o.overload=h,o.default=tt},function(n,o,s){"use strict";function a(g){return g&&g.__esModule?g:{default:g}}function l(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?g:v}function p(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}Object.defineProperty(o,"__esModule",{value:!0});var y=function(){function g(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&g(v.prototype,w),x&&g(v,x),v}}(),h=function g(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var k=Object.getPrototypeOf(v);return k===null?void 0:g(k,w,x)}if("value"in b)return b.value;var T=b.get;if(T!==void 0)return T.call(x)},d=s(7),u=a(d),c=s(0),m=a(c),_=function(g){function v(){return l(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return p(v,g),y(v,[{key:"formatAt",value:function(w,x,b,k){if(v.compare(this.statics.blotName,b)<0&&m.default.query(b,m.default.Scope.BLOT)){var T=this.isolate(w,x);k&&T.wrap(b,k)}else h(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,w,x,b,k)}},{key:"optimize",value:function(w){if(h(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var x=this.parent.isolate(this.offset(),this.length());this.moveChildren(x),x.wrap(this)}}}],[{key:"compare",value:function(w,x){var b=v.order.indexOf(w),k=v.order.indexOf(x);return b>=0||k>=0?b-k:w===x?0:w<x?-1:1}}]),v}(m.default.Inline);_.allowedChildren=[_,m.default.Embed,u.default],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],o.default=_},function(n,o,s){"use strict";function a(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function f(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}Object.defineProperty(o,"__esModule",{value:!0});var p=s(0),y=function(d){return d&&d.__esModule?d:{default:d}}(p),h=function(d){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,d),u}(y.default.Text);o.default=h},function(n,o,s){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function f(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?v:w}function p(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}Object.defineProperty(o,"__esModule",{value:!0});var y=function(){function v(w,x){for(var b=0;b<x.length;b++){var k=x[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,x,b){return x&&v(w.prototype,x),b&&v(w,b),w}}(),h=function v(w,x,b){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,x);if(k===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:v(T,x,b)}if("value"in k)return k.value;var P=k.get;if(P!==void 0)return P.call(b)},d=s(54),u=a(d),c=s(10),m=a(c),_=(0,m.default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(v){document.addEventListener(v,function(){for(var w=arguments.length,x=Array(w),b=0;b<w;b++)x[b]=arguments[b];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var T;(T=k.__quill.emitter).handleDOM.apply(T,x)}})})});var g=function(v){function w(){l(this,w);var x=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return x.listeners={},x.on("error",_.error),x}return p(w,v),y(w,[{key:"emit",value:function(){_.log.apply(_,arguments),h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(x){for(var b=arguments.length,k=Array(b>1?b-1:0),T=1;T<b;T++)k[T-1]=arguments[T];(this.listeners[x.type]||[]).forEach(function(P){var N=P.node,S=P.handler;(x.target===N||N.contains(x.target))&&S.apply(void 0,[x].concat(k))})}},{key:"listenDOM",value:function(x,b,k){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push({node:b,handler:k})}}]),w}(u.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},o.default=g},function(n,o,s){"use strict";function a(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var l=function f(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,f),this.quill=p,this.options=y};l.DEFAULTS={},o.default=l},function(n,o,s){"use strict";function a(y){if(f.indexOf(y)<=f.indexOf(p)){for(var h,d=arguments.length,u=Array(d>1?d-1:0),c=1;c<d;c++)u[c-1]=arguments[c];(h=console)[y].apply(h,u)}}function l(y){return f.reduce(function(h,d){return h[d]=a.bind(console,d,y),h},{})}Object.defineProperty(o,"__esModule",{value:!0});var f=["error","warn","log","info"],p="warn";a.level=l.level=function(y){p=y},o.default=l},function(n,o,s){function a(u){return u==null}function l(u){return!(!u||typeof u!="object"||typeof u.length!="number")&&typeof u.copy=="function"&&typeof u.slice=="function"&&!(u.length>0&&typeof u[0]!="number")}function f(u,c,m){var _,g;if(a(u)||a(c)||u.prototype!==c.prototype)return!1;if(h(u))return!!h(c)&&(u=p.call(u),c=p.call(c),d(u,c,m));if(l(u)){if(!l(c)||u.length!==c.length)return!1;for(_=0;_<u.length;_++)if(u[_]!==c[_])return!1;return!0}try{var v=y(u),w=y(c)}catch(x){return!1}if(v.length!=w.length)return!1;for(v.sort(),w.sort(),_=v.length-1;_>=0;_--)if(v[_]!=w[_])return!1;for(_=v.length-1;_>=0;_--)if(g=v[_],!d(u[g],c[g],m))return!1;return typeof u==typeof c}var p=Array.prototype.slice,y=s(52),h=s(53),d=n.exports=function(u,c,m){return m||(m={}),u===c||(u instanceof Date&&c instanceof Date?u.getTime()===c.getTime():!u||!c||typeof u!="object"&&typeof c!="object"?m.strict?u===c:u==c:f(u,c,m))}},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=s(1),l=function(){function f(p,y,h){h===void 0&&(h={}),this.attrName=p,this.keyName=y;var d=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|d:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return f.keys=function(p){return[].map.call(p.attributes,function(y){return y.name})},f.prototype.add=function(p,y){return!!this.canAdd(p,y)&&(p.setAttribute(this.keyName,y),!0)},f.prototype.canAdd=function(p,y){return a.query(p,a.Scope.BLOT&(this.scope|a.Scope.TYPE))!=null&&(this.whitelist==null||(typeof y=="string"?this.whitelist.indexOf(y.replace(/["']/g,""))>-1:this.whitelist.indexOf(y)>-1))},f.prototype.remove=function(p){p.removeAttribute(this.keyName)},f.prototype.value=function(p){var y=p.getAttribute(this.keyName);return this.canAdd(p,y)&&y?y:""},f}();o.default=l},function(n,o,s){"use strict";function a(N){return N&&N.__esModule?N:{default:N}}function l(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function f(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?N:S}function p(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.Code=void 0;var y=function(){function N(S,R){var O=[],C=!0,q=!1,M=void 0;try{for(var V,W=S[Symbol.iterator]();!(C=(V=W.next()).done)&&(O.push(V.value),!R||O.length!==R);C=!0);}catch(rt){q=!0,M=rt}finally{try{!C&&W.return&&W.return()}finally{if(q)throw M}}return O}return function(S,R){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return N(S,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function N(S,R){for(var O=0;O<R.length;O++){var C=R[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,R,O){return R&&N(S.prototype,R),O&&N(S,O),S}}(),d=function N(S,R,O){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,R);if(C===void 0){var q=Object.getPrototypeOf(S);return q===null?void 0:N(q,R,O)}if("value"in C)return C.value;var M=C.get;if(M!==void 0)return M.call(O)},u=s(2),c=a(u),m=s(0),_=a(m),g=s(4),v=a(g),w=s(6),x=a(w),b=s(7),k=a(b),T=function(N){function S(){return l(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return p(S,N),S}(x.default);T.blotName="code",T.tagName="CODE";var P=function(N){function S(){return l(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return p(S,N),h(S,[{key:"delta",value:function(){var R=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(C,q){return C.insert(q).insert(`
`,R.formats())},new c.default)}},{key:"format",value:function(R,O){if(R!==this.statics.blotName||!O){var C=this.descendant(k.default,this.length()-1),q=y(C,1),M=q[0];M!=null&&M.deleteAt(M.length()-1,1),d(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,R,O)}}},{key:"formatAt",value:function(R,O,C,q){if(O!==0&&_.default.query(C,_.default.Scope.BLOCK)!=null&&(C!==this.statics.blotName||q!==this.statics.formats(this.domNode))){var M=this.newlineIndex(R);if(!(M<0||M>=R+O)){var V=this.newlineIndex(R,!0)+1,W=M-V+1,rt=this.isolate(V,W),tt=rt.next;rt.format(C,q),tt instanceof S&&tt.formatAt(0,R-V+O-W,C,q)}}}},{key:"insertAt",value:function(R,O,C){if(C==null){var q=this.descendant(k.default,R),M=y(q,2),V=M[0],W=M[1];V.insertAt(W,O)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){if(arguments.length>1&&arguments[1]!==void 0&&arguments[1])return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var O=this.domNode.textContent.slice(R).indexOf(`
`);return O>-1?R+O:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(_.default.create("text",`
`)),d(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,R);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(R),O.moveChildren(this),O.remove())}},{key:"replace",value:function(R){d(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var C=_.default.find(O);C==null?O.parentNode.removeChild(O):C instanceof _.default.Embed?C.remove():C.unwrap()})}}],[{key:"create",value:function(R){var O=d(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,R);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),S}(v.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",o.Code=T,o.default=P},function(n,o,s){"use strict";function a(Q){return Q&&Q.__esModule?Q:{default:Q}}function l(Q,I,H){return I in Q?Object.defineProperty(Q,I,{value:H,enumerable:!0,configurable:!0,writable:!0}):Q[I]=H,Q}function f(Q,I){if(!(Q instanceof I))throw new TypeError("Cannot call a class as a function")}function p(Q,I){return Object.keys(I).reduce(function(H,B){return Q[B]==null||(I[B]===Q[B]?H[B]=I[B]:Array.isArray(I[B])?I[B].indexOf(Q[B])<0&&(H[B]=I[B].concat([Q[B]])):H[B]=[I[B],Q[B]]),H},{})}function y(Q){return Q.reduce(function(I,H){if(H.insert===1){var B=(0,C.default)(H.attributes);return delete B.image,I.insert({image:H.attributes.image},B)}if(H.attributes==null||H.attributes.list!==!0&&H.attributes.bullet!==!0||(H=(0,C.default)(H),H.attributes.list?H.attributes.list="ordered":(H.attributes.list="bullet",delete H.attributes.bullet)),typeof H.insert=="string"){var K=H.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(K,H.attributes)}return I.push(H)},new m.default)}Object.defineProperty(o,"__esModule",{value:!0});var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},d=function(){function Q(I,H){var B=[],K=!0,X=!1,J=void 0;try{for(var U,G=I[Symbol.iterator]();!(K=(U=G.next()).done)&&(B.push(U.value),!H||B.length!==H);K=!0);}catch(nt){X=!0,J=nt}finally{try{!K&&G.return&&G.return()}finally{if(X)throw J}}return B}return function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return Q(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function Q(I,H){for(var B=0;B<H.length;B++){var K=H[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(I,K.key,K)}}return function(I,H,B){return H&&Q(I.prototype,H),B&&Q(I,B),I}}(),c=s(2),m=a(c),_=s(20),g=a(_),v=s(0),w=a(v),x=s(13),b=a(x),k=s(24),T=a(k),P=s(4),N=a(P),S=s(16),R=a(S),O=s(21),C=a(O),q=s(11),M=a(q),V=s(3),W=a(V),rt=/^[ -~]*$/,tt=function(){function Q(I){f(this,Q),this.scroll=I,this.delta=this.getDelta()}return u(Q,[{key:"applyDelta",value:function(I){var H=this,B=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),I=y(I),I.reduce(function(X,J){var U=J.retain||J.delete||J.insert.length||1,G=J.attributes||{};if(J.insert!=null){if(typeof J.insert=="string"){var nt=J.insert;nt.endsWith(`
`)&&B&&(B=!1,nt=nt.slice(0,-1)),X>=K&&!nt.endsWith(`
`)&&(B=!0),H.scroll.insertAt(X,nt);var ft=H.scroll.line(X),ct=d(ft,2),gt=ct[0],bt=ct[1],Et=(0,W.default)({},(0,P.bubbleFormats)(gt));if(gt instanceof N.default){var Ot=gt.descendant(w.default.Leaf,bt),Ct=d(Ot,1),Ut=Ct[0];Et=(0,W.default)(Et,(0,P.bubbleFormats)(Ut))}G=g.default.attributes.diff(Et,G)||{}}else if(h(J.insert)==="object"){var qt=Object.keys(J.insert)[0];if(qt==null)return X;H.scroll.insertAt(X,qt,J.insert[qt])}K+=U}return Object.keys(G).forEach(function(E){H.scroll.formatAt(X,U,E,G[E])}),X+U},0),I.reduce(function(X,J){return typeof J.delete=="number"?(H.scroll.deleteAt(X,J.delete),X):X+(J.retain||J.insert.length||1)},0),this.scroll.batchEnd(),this.update(I)}},{key:"deleteText",value:function(I,H){return this.scroll.deleteAt(I,H),this.update(new m.default().retain(I).delete(H))}},{key:"formatLine",value:function(I,H){var B=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(X){if(B.scroll.whitelist==null||B.scroll.whitelist[X]){var J=B.scroll.lines(I,Math.max(H,1)),U=H;J.forEach(function(G){var nt=G.length();if(G instanceof b.default){var ft=I-G.offset(B.scroll),ct=G.newlineIndex(ft+U)-ft+1;G.formatAt(ft,ct,X,K[X])}else G.format(X,K[X]);U-=nt})}}),this.scroll.optimize(),this.update(new m.default().retain(I).retain(H,(0,C.default)(K)))}},{key:"formatText",value:function(I,H){var B=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(X){B.scroll.formatAt(I,H,X,K[X])}),this.update(new m.default().retain(I).retain(H,(0,C.default)(K)))}},{key:"getContents",value:function(I,H){return this.delta.slice(I,I+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(I,H){return I.concat(H.delta())},new m.default)}},{key:"getFormat",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],K=[];H===0?this.scroll.path(I).forEach(function(J){var U=d(J,1),G=U[0];G instanceof N.default?B.push(G):G instanceof w.default.Leaf&&K.push(G)}):(B=this.scroll.lines(I,H),K=this.scroll.descendants(w.default.Leaf,I,H));var X=[B,K].map(function(J){if(J.length===0)return{};for(var U=(0,P.bubbleFormats)(J.shift());Object.keys(U).length>0;){var G=J.shift();if(G==null)return U;U=p((0,P.bubbleFormats)(G),U)}return U});return W.default.apply(W.default,X)}},{key:"getText",value:function(I,H){return this.getContents(I,H).filter(function(B){return typeof B.insert=="string"}).map(function(B){return B.insert}).join("")}},{key:"insertEmbed",value:function(I,H,B){return this.scroll.insertAt(I,H,B),this.update(new m.default().retain(I).insert(l({},H,B)))}},{key:"insertText",value:function(I,H){var B=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(I,H),Object.keys(K).forEach(function(X){B.scroll.formatAt(I,H.length,X,K[X])}),this.update(new m.default().retain(I).insert(H,(0,C.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var I=this.scroll.children.head;return I.statics.blotName===N.default.blotName&&!(I.children.length>1)&&I.children.head instanceof R.default}},{key:"removeFormat",value:function(I,H){var B=this.getText(I,H),K=this.scroll.line(I+H),X=d(K,2),J=X[0],U=X[1],G=0,nt=new m.default;J!=null&&(G=J instanceof b.default?J.newlineIndex(U)-U+1:J.length()-U,nt=J.delta().slice(U,U+G-1).insert(`
`));var ft=this.getContents(I,H+G),ct=ft.diff(new m.default().insert(B).concat(nt)),gt=new m.default().retain(I).concat(ct);return this.applyDelta(gt)}},{key:"update",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(rt)&&w.default.find(H[0].target)){var X=w.default.find(H[0].target),J=(0,P.bubbleFormats)(X),U=X.offset(this.scroll),G=H[0].oldValue.replace(T.default.CONTENTS,""),nt=new m.default().insert(G),ft=new m.default().insert(X.value());I=new m.default().retain(U).concat(nt.diff(ft,B)).reduce(function(ct,gt){return gt.insert?ct.insert(gt.insert,J):ct.push(gt)},new m.default),this.delta=K.compose(I)}else this.delta=this.getDelta(),I&&(0,M.default)(K.compose(I),this.delta)||(I=K.diff(this.delta,B));return I}}]),Q}();o.default=tt},function(n,o,s){"use strict";function a(N){return N&&N.__esModule?N:{default:N}}function l(N){if(Array.isArray(N)){for(var S=0,R=Array(N.length);S<N.length;S++)R[S]=N[S];return R}return Array.from(N)}function f(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function p(N,S){try{S.parentNode}catch(R){return!1}return S instanceof Text&&(S=S.parentNode),N.contains(S)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.Range=void 0;var y=function(){function N(S,R){var O=[],C=!0,q=!1,M=void 0;try{for(var V,W=S[Symbol.iterator]();!(C=(V=W.next()).done)&&(O.push(V.value),!R||O.length!==R);C=!0);}catch(rt){q=!0,M=rt}finally{try{!C&&W.return&&W.return()}finally{if(q)throw M}}return O}return function(S,R){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return N(S,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function N(S,R){for(var O=0;O<R.length;O++){var C=R[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,R,O){return R&&N(S.prototype,R),O&&N(S,O),S}}(),d=s(0),u=a(d),c=s(21),m=a(c),_=s(11),g=a(_),v=s(8),w=a(v),x=s(10),b=a(x),k=(0,b.default)("quill:selection"),T=function N(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;f(this,N),this.index=S,this.length=R},P=function(){function N(S,R){var O=this;f(this,N),this.emitter=R,this.scroll=S,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){O.mouseDown||setTimeout(O.update.bind(O,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(C,q){C===w.default.events.TEXT_CHANGE&&q.length()>0&&O.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(O.hasFocus()){var C=O.getNativeRange();C!=null&&C.start.node!==O.cursor.textNode&&O.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{O.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch(q){}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(C,q){if(q.range){var M=q.range,V=M.startNode,W=M.startOffset,rt=M.endNode,tt=M.endOffset;O.setNativeRange(V,W,rt,tt)}}),this.update(w.default.sources.SILENT)}return h(N,[{key:"handleComposition",value:function(){var S=this;this.root.addEventListener("compositionstart",function(){S.composing=!0}),this.root.addEventListener("compositionend",function(){if(S.composing=!1,S.cursor.parent){var R=S.cursor.restore();if(!R)return;setTimeout(function(){S.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var S=this;this.emitter.listenDOM("mousedown",document.body,function(){S.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){S.mouseDown=!1,S.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(S,R){if(this.scroll.whitelist==null||this.scroll.whitelist[S]){this.scroll.update();var O=this.getNativeRange();if(O!=null&&O.native.collapsed&&!u.default.query(S,u.default.Scope.BLOCK)){if(O.start.node!==this.cursor.textNode){var C=u.default.find(O.start.node,!1);if(C==null)return;if(C instanceof u.default.Leaf){var q=C.split(O.start.offset);C.parent.insertBefore(this.cursor,q)}else C.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(S,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();S=Math.min(S,O-1),R=Math.min(S+R,O-1)-S;var C=void 0,q=this.scroll.leaf(S),M=y(q,2),V=M[0],W=M[1];if(V==null)return null;var rt=V.position(W,!0),tt=y(rt,2);C=tt[0],W=tt[1];var Q=document.createRange();if(R>0){Q.setStart(C,W);var I=this.scroll.leaf(S+R),H=y(I,2);if(V=H[0],W=H[1],V==null)return null;var B=V.position(W,!0),K=y(B,2);return C=K[0],W=K[1],Q.setEnd(C,W),Q.getBoundingClientRect()}var X="left",J=void 0;return C instanceof Text?(W<C.data.length?(Q.setStart(C,W),Q.setEnd(C,W+1)):(Q.setStart(C,W-1),Q.setEnd(C,W),X="right"),J=Q.getBoundingClientRect()):(J=V.domNode.getBoundingClientRect(),W>0&&(X="right")),{bottom:J.top+J.height,height:J.height,left:J[X],right:J[X],top:J.top,width:0}}},{key:"getNativeRange",value:function(){var S=document.getSelection();if(S==null||S.rangeCount<=0)return null;var R=S.getRangeAt(0);if(R==null)return null;var O=this.normalizeNative(R);return k.info("getNativeRange",O),O}},{key:"getRange",value:function(){var S=this.getNativeRange();return S==null?[null,null]:[this.normalizedToRange(S),S]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(S){var R=this,O=[[S.start.node,S.start.offset]];S.native.collapsed||O.push([S.end.node,S.end.offset]);var C=O.map(function(V){var W=y(V,2),rt=W[0],tt=W[1],Q=u.default.find(rt,!0),I=Q.offset(R.scroll);return tt===0?I:Q instanceof u.default.Container?I+Q.length():I+Q.index(rt,tt)}),q=Math.min(Math.max.apply(Math,l(C)),this.scroll.length()-1),M=Math.min.apply(Math,[q].concat(l(C)));return new T(M,q-M)}},{key:"normalizeNative",value:function(S){if(!p(this.root,S.startContainer)||!S.collapsed&&!p(this.root,S.endContainer))return null;var R={start:{node:S.startContainer,offset:S.startOffset},end:{node:S.endContainer,offset:S.endOffset},native:S};return[R.start,R.end].forEach(function(O){for(var C=O.node,q=O.offset;!(C instanceof Text)&&C.childNodes.length>0;)if(C.childNodes.length>q)C=C.childNodes[q],q=0;else{if(C.childNodes.length!==q)break;C=C.lastChild,q=C instanceof Text?C.data.length:C.childNodes.length+1}O.node=C,O.offset=q}),R}},{key:"rangeToNative",value:function(S){var R=this,O=S.collapsed?[S.index]:[S.index,S.index+S.length],C=[],q=this.scroll.length();return O.forEach(function(M,V){M=Math.min(q-1,M);var W=void 0,rt=R.scroll.leaf(M),tt=y(rt,2),Q=tt[0],I=tt[1],H=Q.position(I,V!==0),B=y(H,2);W=B[0],I=B[1],C.push(W,I)}),C.length<2&&(C=C.concat(C)),C}},{key:"scrollIntoView",value:function(S){var R=this.lastRange;if(R!=null){var O=this.getBounds(R.index,R.length);if(O!=null){var C=this.scroll.length()-1,q=this.scroll.line(Math.min(R.index,C)),M=y(q,1),V=M[0],W=V;if(R.length>0){var rt=this.scroll.line(Math.min(R.index+R.length,C));W=y(rt,1)[0]}if(V!=null&&W!=null){var tt=S.getBoundingClientRect();O.top<tt.top?S.scrollTop-=tt.top-O.top:O.bottom>tt.bottom&&(S.scrollTop+=O.bottom-tt.bottom)}}}}},{key:"setNativeRange",value:function(S,R){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,q=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(k.info("setNativeRange",S,R,O,C),S==null||this.root.parentNode!=null&&S.parentNode!=null&&O.parentNode!=null){var M=document.getSelection();if(M!=null)if(S!=null){this.hasFocus()||this.root.focus();var V=(this.getNativeRange()||{}).native;if(V==null||q||S!==V.startContainer||R!==V.startOffset||O!==V.endContainer||C!==V.endOffset){S.tagName=="BR"&&(R=[].indexOf.call(S.parentNode.childNodes,S),S=S.parentNode),O.tagName=="BR"&&(C=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var W=document.createRange();W.setStart(S,R),W.setEnd(O,C),M.removeAllRanges(),M.addRange(W)}}else M.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof R=="string"&&(O=R,R=!1),k.info("setRange",S),S!=null){var C=this.rangeToNative(S);this.setNativeRange.apply(this,l(C).concat([R]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,R=this.lastRange,O=this.getRange(),C=y(O,2),q=C[0],M=C[1];if(this.lastRange=q,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,g.default)(R,this.lastRange)){var V;!this.composing&&M!=null&&M.native.collapsed&&M.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[w.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(R),S];if((V=this.emitter).emit.apply(V,[w.default.events.EDITOR_CHANGE].concat(W)),S!==w.default.sources.SILENT){var rt;(rt=this.emitter).emit.apply(rt,W)}}}}]),N}();o.Range=T,o.default=P},function(n,o,s){"use strict";function a(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function l(c,m){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?c:m}function f(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(c,m):c.__proto__=m)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function c(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&c(m.prototype,_),g&&c(m,g),m}}(),y=function c(m,_,g){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,_);if(v===void 0){var w=Object.getPrototypeOf(m);return w===null?void 0:c(w,_,g)}if("value"in v)return v.value;var x=v.get;if(x!==void 0)return x.call(g)},h=s(0),d=function(c){return c&&c.__esModule?c:{default:c}}(h),u=function(c){function m(){return a(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return f(m,c),p(m,[{key:"insertInto",value:function(_,g){_.children.length===0?y(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertInto",this).call(this,_,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),m}(d.default.Embed);u.blotName="break",u.tagName="BR",o.default=u},function(n,o,s){"use strict";function a(d){var u=y.find(d);if(u==null)try{u=y.create(d)}catch(c){u=y.create(y.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(m){u.domNode.appendChild(m)}),d.parentNode&&d.parentNode.replaceChild(u.domNode,d),u.attach()}return u}var l=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var m in c)c.hasOwnProperty(m)&&(u[m]=c[m])};return function(u,c){function m(){this.constructor=u}d(u,c),u.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}();Object.defineProperty(o,"__esModule",{value:!0});var f=s(44),p=s(30),y=s(1),h=function(d){function u(c){var m=d.call(this,c)||this;return m.build(),m}return l(u,d),u.prototype.appendChild=function(c){this.insertBefore(c)},u.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(c){c.attach()})},u.prototype.build=function(){var c=this;this.children=new f.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(m){try{var _=a(m);c.insertBefore(_,c.children.head||void 0)}catch(g){if(g instanceof y.ParchmentError)return;throw g}})},u.prototype.deleteAt=function(c,m){if(c===0&&m===this.length())return this.remove();this.children.forEachAt(c,m,function(_,g,v){_.deleteAt(g,v)})},u.prototype.descendant=function(c,m){var _=this.children.find(m),g=_[0],v=_[1];return c.blotName==null&&c(g)||c.blotName!=null&&g instanceof c?[g,v]:g instanceof u?g.descendant(c,v):[null,-1]},u.prototype.descendants=function(c,m,_){m===void 0&&(m=0),_===void 0&&(_=Number.MAX_VALUE);var g=[],v=_;return this.children.forEachAt(m,_,function(w,x,b){(c.blotName==null&&c(w)||c.blotName!=null&&w instanceof c)&&g.push(w),w instanceof u&&(g=g.concat(w.descendants(c,x,v))),v-=b}),g},u.prototype.detach=function(){this.children.forEach(function(c){c.detach()}),d.prototype.detach.call(this)},u.prototype.formatAt=function(c,m,_,g){this.children.forEachAt(c,m,function(v,w,x){v.formatAt(w,x,_,g)})},u.prototype.insertAt=function(c,m,_){var g=this.children.find(c),v=g[0],w=g[1];if(v)v.insertAt(w,m,_);else{var x=_==null?y.create("text",m):y.create(m,_);this.appendChild(x)}},u.prototype.insertBefore=function(c,m){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(_){return c instanceof _}))throw new y.ParchmentError("Cannot insert "+c.statics.blotName+" into "+this.statics.blotName);c.insertInto(this,m)},u.prototype.length=function(){return this.children.reduce(function(c,m){return c+m.length()},0)},u.prototype.moveChildren=function(c,m){this.children.forEach(function(_){c.insertBefore(_,m)})},u.prototype.optimize=function(c){if(d.prototype.optimize.call(this,c),this.children.length===0)if(this.statics.defaultChild!=null){var m=y.create(this.statics.defaultChild);this.appendChild(m),m.optimize(c)}else this.remove()},u.prototype.path=function(c,m){m===void 0&&(m=!1);var _=this.children.find(c,m),g=_[0],v=_[1],w=[[this,c]];return g instanceof u?w.concat(g.path(v,m)):(g!=null&&w.push([g,v]),w)},u.prototype.removeChild=function(c){this.children.remove(c)},u.prototype.replace=function(c){c instanceof u&&c.moveChildren(this),d.prototype.replace.call(this,c)},u.prototype.split=function(c,m){if(m===void 0&&(m=!1),!m){if(c===0)return this;if(c===this.length())return this.next}var _=this.clone();return this.parent.insertBefore(_,this.next),this.children.forEachAt(c,this.length(),function(g,v,w){g=g.split(v,m),_.appendChild(g)}),_},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(c,m){var _=this,g=[],v=[];c.forEach(function(w){w.target===_.domNode&&w.type==="childList"&&(g.push.apply(g,w.addedNodes),v.push.apply(v,w.removedNodes))}),v.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var x=y.find(w);x!=null&&(x.domNode.parentNode!=null&&x.domNode.parentNode!==_.domNode||x.detach())}}),g.filter(function(w){return w.parentNode==_.domNode}).sort(function(w,x){return w===x?0:w.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var x=null;w.nextSibling!=null&&(x=y.find(w.nextSibling));var b=a(w);b.next==x&&b.next!=null||(b.parent!=null&&b.parent.removeChild(_),_.insertBefore(b,x||void 0))})},u}(p.default);o.default=h},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var m in c)c.hasOwnProperty(m)&&(u[m]=c[m])};return function(u,c){function m(){this.constructor=u}d(u,c),u.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(12),f=s(31),p=s(17),y=s(1),h=function(d){function u(c){var m=d.call(this,c)||this;return m.attributes=new f.default(m.domNode),m}return a(u,d),u.formats=function(c){return typeof this.tagName=="string"||(Array.isArray(this.tagName)?c.tagName.toLowerCase():void 0)},u.prototype.format=function(c,m){var _=y.query(c);_ instanceof l.default?this.attributes.attribute(_,m):m&&(_==null||c===this.statics.blotName&&this.formats()[c]===m||this.replaceWith(c,m))},u.prototype.formats=function(){var c=this.attributes.values(),m=this.statics.formats(this.domNode);return m!=null&&(c[this.statics.blotName]=m),c},u.prototype.replaceWith=function(c,m){var _=d.prototype.replaceWith.call(this,c,m);return this.attributes.copy(_),_},u.prototype.update=function(c,m){var _=this;d.prototype.update.call(this,c,m),c.some(function(g){return g.target===_.domNode&&g.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(c,m){var _=d.prototype.wrap.call(this,c,m);return _ instanceof u&&_.statics.scope===this.statics.scope&&this.attributes.move(_),_},u}(p.default);o.default=h},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){function u(){this.constructor=h}y(h,d),h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(30),f=s(1),p=function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return a(h,y),h.value=function(d){return!0},h.prototype.index=function(d,u){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},h.prototype.position=function(d,u){var c=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(c+=1),[this.parent.domNode,c]},h.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},h.scope=f.Scope.INLINE_BLOT,h}(l.default);o.default=p},function(n,o,s){function a(y){this.ops=y,this.index=0,this.offset=0}var l=s(11),f=s(3),p={attributes:{compose:function(y,h,d){typeof y!="object"&&(y={}),typeof h!="object"&&(h={});var u=f(!0,{},h);d||(u=Object.keys(u).reduce(function(m,_){return u[_]!=null&&(m[_]=u[_]),m},{}));for(var c in y)y[c]!==void 0&&h[c]===void 0&&(u[c]=y[c]);return Object.keys(u).length>0?u:void 0},diff:function(y,h){typeof y!="object"&&(y={}),typeof h!="object"&&(h={});var d=Object.keys(y).concat(Object.keys(h)).reduce(function(u,c){return l(y[c],h[c])||(u[c]=h[c]===void 0?null:h[c]),u},{});return Object.keys(d).length>0?d:void 0},transform:function(y,h,d){if(typeof y!="object")return h;if(typeof h=="object"){if(!d)return h;var u=Object.keys(h).reduce(function(c,m){return y[m]===void 0&&(c[m]=h[m]),c},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(y){return new a(y)},length:function(y){return typeof y.delete=="number"?y.delete:typeof y.retain=="number"?y.retain:typeof y.insert=="string"?y.insert.length:1}};a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(y){y||(y=1/0);var h=this.ops[this.index];if(h){var d=this.offset,u=p.length(h);if(y>=u-d?(y=u-d,this.index+=1,this.offset=0):this.offset+=y,typeof h.delete=="number")return{delete:y};var c={};return h.attributes&&(c.attributes=h.attributes),typeof h.retain=="number"?c.retain=y:typeof h.insert=="string"?c.insert=h.insert.substr(d,y):c.insert=h.insert,c}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?p.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var y=this.offset,h=this.index,d=this.next(),u=this.ops.slice(this.index);return this.offset=y,this.index=h,[d].concat(u)}return[]},n.exports=p},function(n,o){var s=function(){"use strict";function a(_,g){return g!=null&&_ instanceof g}function l(_,g,v,w,x){function b(N,S){if(N===null)return null;if(S===0)return N;var R,O;if(typeof N!="object")return N;if(a(N,u))R=new u;else if(a(N,c))R=new c;else if(a(N,m))R=new m(function(I,H){N.then(function(B){I(b(B,S-1))},function(B){H(b(B,S-1))})});else if(l.__isArray(N))R=[];else if(l.__isRegExp(N))R=new RegExp(N.source,d(N)),N.lastIndex&&(R.lastIndex=N.lastIndex);else if(l.__isDate(N))R=new Date(N.getTime());else{if(P&&i.isBuffer(N))return R=i.allocUnsafe?i.allocUnsafe(N.length):new i(N.length),N.copy(R),R;a(N,Error)?R=Object.create(N):w===void 0?(O=Object.getPrototypeOf(N),R=Object.create(O)):(R=Object.create(w),O=w)}if(g){var C=k.indexOf(N);if(C!=-1)return T[C];k.push(N),T.push(R)}a(N,u)&&N.forEach(function(I,H){var B=b(H,S-1),K=b(I,S-1);R.set(B,K)}),a(N,c)&&N.forEach(function(I){var H=b(I,S-1);R.add(H)});for(var q in N){var M;O&&(M=Object.getOwnPropertyDescriptor(O,q)),M&&M.set==null||(R[q]=b(N[q],S-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(N),q=0;q<V.length;q++){var W=V[q],rt=Object.getOwnPropertyDescriptor(N,W);(!rt||rt.enumerable||x)&&(R[W]=b(N[W],S-1),rt.enumerable||Object.defineProperty(R,W,{enumerable:!1}))}if(x)for(var tt=Object.getOwnPropertyNames(N),q=0;q<tt.length;q++){var Q=tt[q],rt=Object.getOwnPropertyDescriptor(N,Q);rt&&rt.enumerable||(R[Q]=b(N[Q],S-1),Object.defineProperty(R,Q,{enumerable:!1}))}return R}typeof g=="object"&&(v=g.depth,w=g.prototype,x=g.includeNonEnumerable,g=g.circular);var k=[],T=[],P=i!==void 0;return g===void 0&&(g=!0),v===void 0&&(v=1/0),b(_,v)}function f(_){return Object.prototype.toString.call(_)}function p(_){return typeof _=="object"&&f(_)==="[object Date]"}function y(_){return typeof _=="object"&&f(_)==="[object Array]"}function h(_){return typeof _=="object"&&f(_)==="[object RegExp]"}function d(_){var g="";return _.global&&(g+="g"),_.ignoreCase&&(g+="i"),_.multiline&&(g+="m"),g}var u;try{u=Map}catch(_){u=function(){}}var c;try{c=Set}catch(_){c=function(){}}var m;try{m=Promise}catch(_){m=function(){}}return l.clonePrototype=function(_){if(_===null)return null;var g=function(){};return g.prototype=_,new g},l.__objToStr=f,l.__isDate=p,l.__isArray=y,l.__isRegExp=h,l.__getRegExpFlags=d,l}();typeof n=="object"&&n.exports&&(n.exports=s)},function(n,o,s){"use strict";function a(R){return R&&R.__esModule?R:{default:R}}function l(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function f(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?R:O}function p(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}function y(R){return R instanceof w.default||R instanceof v.BlockEmbed}Object.defineProperty(o,"__esModule",{value:!0});var h=function(){function R(O,C){var q=[],M=!0,V=!1,W=void 0;try{for(var rt,tt=O[Symbol.iterator]();!(M=(rt=tt.next()).done)&&(q.push(rt.value),!C||q.length!==C);M=!0);}catch(Q){V=!0,W=Q}finally{try{!M&&tt.return&&tt.return()}finally{if(V)throw W}}return q}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return R(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function R(O,C){for(var q=0;q<C.length;q++){var M=C[q];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}return function(O,C,q){return C&&R(O.prototype,C),q&&R(O,q),O}}(),u=function R(O,C,q){O===null&&(O=Function.prototype);var M=Object.getOwnPropertyDescriptor(O,C);if(M===void 0){var V=Object.getPrototypeOf(O);return V===null?void 0:R(V,C,q)}if("value"in M)return M.value;var W=M.get;if(W!==void 0)return W.call(q)},c=s(0),m=a(c),_=s(8),g=a(_),v=s(4),w=a(v),x=s(16),b=a(x),k=s(13),T=a(k),P=s(25),N=a(P),S=function(R){function O(C,q){l(this,O);var M=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C));return M.emitter=q.emitter,Array.isArray(q.whitelist)&&(M.whitelist=q.whitelist.reduce(function(V,W){return V[W]=!0,V},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return p(O,R),d(O,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(C,q){var M=this.line(C),V=h(M,2),W=V[0],rt=V[1],tt=this.line(C+q),Q=h(tt,1),I=Q[0];if(u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,C,q),I!=null&&W!==I&&rt>0){if(W instanceof v.BlockEmbed||I instanceof v.BlockEmbed)return void this.optimize();if(W instanceof T.default){var H=W.newlineIndex(W.length(),!0);if(H>-1&&(W=W.split(H+1))===I)return void this.optimize()}else if(I instanceof T.default){var B=I.newlineIndex(0);B>-1&&I.split(B+1)}var K=I.children.head instanceof b.default?null:I.children.head;W.moveChildren(I,K),W.remove()}this.optimize()}},{key:"enable",value:function(){var C=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",C)}},{key:"formatAt",value:function(C,q,M,V){(this.whitelist==null||this.whitelist[M])&&(u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,C,q,M,V),this.optimize())}},{key:"insertAt",value:function(C,q,M){if(M==null||this.whitelist==null||this.whitelist[q]){if(C>=this.length())if(M==null||m.default.query(q,m.default.Scope.BLOCK)==null){var V=m.default.create(this.statics.defaultChild);this.appendChild(V),M==null&&q.endsWith(`
`)&&(q=q.slice(0,-1)),V.insertAt(0,q,M)}else{var W=m.default.create(q,M);this.appendChild(W)}else u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,C,q,M);this.optimize()}}},{key:"insertBefore",value:function(C,q){if(C.statics.scope===m.default.Scope.INLINE_BLOT){var M=m.default.create(this.statics.defaultChild);M.appendChild(C),C=M}u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,C,q)}},{key:"leaf",value:function(C){return this.path(C).pop()||[null,-1]}},{key:"line",value:function(C){return C===this.length()?this.line(C-1):this.descendant(y,C)}},{key:"lines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return function M(V,W,rt){var tt=[],Q=rt;return V.children.forEachAt(W,rt,function(I,H,B){y(I)?tt.push(I):I instanceof m.default.Container&&(tt=tt.concat(M(I,H,Q))),Q-=B}),tt}(this,C,q)}},{key:"optimize",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,C,q),C.length>0&&this.emitter.emit(g.default.events.SCROLL_OPTIMIZE,C,q))}},{key:"path",value:function(C){return u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,C).slice(1)}},{key:"update",value:function(C){if(this.batch!==!0){var q=g.default.sources.USER;typeof C=="string"&&(q=C),Array.isArray(C)||(C=this.observer.takeRecords()),C.length>0&&this.emitter.emit(g.default.events.SCROLL_BEFORE_UPDATE,q,C),u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"update",this).call(this,C.concat([])),C.length>0&&this.emitter.emit(g.default.events.SCROLL_UPDATE,q,C)}}}]),O}(m.default.Scroll);S.blotName="scroll",S.className="ql-editor",S.tagName="DIV",S.defaultChild="block",S.allowedChildren=[w.default,v.BlockEmbed,N.default],o.default=S},function(n,o,s){"use strict";function a(U){return U&&U.__esModule?U:{default:U}}function l(U,G,nt){return G in U?Object.defineProperty(U,G,{value:nt,enumerable:!0,configurable:!0,writable:!0}):U[G]=nt,U}function f(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function p(U,G){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||typeof G!="object"&&typeof G!="function"?U:G}function y(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(U,G):U.__proto__=G)}function h(U,G){var nt,ft=U===J.keys.LEFT?"prefix":"suffix";return nt={key:U,shiftKey:G,altKey:null},l(nt,ft,/^$/),l(nt,"handler",function(ct){var gt=ct.index;U===J.keys.RIGHT&&(gt+=ct.length+1);var bt=this.quill.getLeaf(gt);return!(x(bt,1)[0]instanceof W.default.Embed)||(U===J.keys.LEFT?G?this.quill.setSelection(ct.index-1,ct.length+1,tt.default.sources.USER):this.quill.setSelection(ct.index-1,tt.default.sources.USER):G?this.quill.setSelection(ct.index,ct.length+1,tt.default.sources.USER):this.quill.setSelection(ct.index+ct.length+1,tt.default.sources.USER),!1)}),nt}function d(U,G){if(!(U.index===0||this.quill.getLength()<=1)){var nt=this.quill.getLine(U.index),ft=x(nt,1),ct=ft[0],gt={};if(G.offset===0){var bt=this.quill.getLine(U.index-1),Et=x(bt,1),Ot=Et[0];if(Ot!=null&&Ot.length()>1){var Ct=ct.formats(),Ut=this.quill.getFormat(U.index-1,1);gt=M.default.attributes.diff(Ct,Ut)||{}}}var qt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(G.prefix)?2:1;this.quill.deleteText(U.index-qt,qt,tt.default.sources.USER),Object.keys(gt).length>0&&this.quill.formatLine(U.index-qt,qt,gt,tt.default.sources.USER),this.quill.focus()}}function u(U,G){var nt=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(G.suffix)?2:1;if(!(U.index>=this.quill.getLength()-nt)){var ft={},ct=0,gt=this.quill.getLine(U.index),bt=x(gt,1),Et=bt[0];if(G.offset>=Et.length()-1){var Ot=this.quill.getLine(U.index+1),Ct=x(Ot,1),Ut=Ct[0];if(Ut){var qt=Et.formats(),E=this.quill.getFormat(U.index,1);ft=M.default.attributes.diff(qt,E)||{},ct=Ut.length()}}this.quill.deleteText(U.index,nt,tt.default.sources.USER),Object.keys(ft).length>0&&this.quill.formatLine(U.index+ct-1,nt,ft,tt.default.sources.USER)}}function c(U){var G=this.quill.getLines(U),nt={};if(G.length>1){var ft=G[0].formats(),ct=G[G.length-1].formats();nt=M.default.attributes.diff(ct,ft)||{}}this.quill.deleteText(U,tt.default.sources.USER),Object.keys(nt).length>0&&this.quill.formatLine(U.index,1,nt,tt.default.sources.USER),this.quill.setSelection(U.index,tt.default.sources.SILENT),this.quill.focus()}function m(U,G){var nt=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var ft=Object.keys(G.format).reduce(function(ct,gt){return W.default.query(gt,W.default.Scope.BLOCK)&&!Array.isArray(G.format[gt])&&(ct[gt]=G.format[gt]),ct},{});this.quill.insertText(U.index,`
`,ft,tt.default.sources.USER),this.quill.setSelection(U.index+1,tt.default.sources.SILENT),this.quill.focus(),Object.keys(G.format).forEach(function(ct){ft[ct]==null&&(Array.isArray(G.format[ct])||ct!=="link"&&nt.quill.format(ct,G.format[ct],tt.default.sources.USER))})}function _(U){return{key:J.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(G){var nt=W.default.query("code-block"),ft=G.index,ct=G.length,gt=this.quill.scroll.descendant(nt,ft),bt=x(gt,2),Et=bt[0],Ot=bt[1];if(Et!=null){var Ct=this.quill.getIndex(Et),Ut=Et.newlineIndex(Ot,!0)+1,qt=Et.newlineIndex(Ct+Ot+ct),E=Et.domNode.textContent.slice(Ut,qt).split(`
`);Ot=0,E.forEach(function(A,j){U?(Et.insertAt(Ut+Ot,nt.TAB),Ot+=nt.TAB.length,j===0?ft+=nt.TAB.length:ct+=nt.TAB.length):A.startsWith(nt.TAB)&&(Et.deleteAt(Ut+Ot,nt.TAB.length),Ot-=nt.TAB.length,j===0?ft-=nt.TAB.length:ct-=nt.TAB.length),Ot+=A.length+1}),this.quill.update(tt.default.sources.USER),this.quill.setSelection(ft,ct,tt.default.sources.SILENT)}}}}function g(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(G,nt){this.quill.format(U,!nt.format[U],tt.default.sources.USER)}}}function v(U){if(typeof U=="string"||typeof U=="number")return v({key:U});if((U===void 0?"undefined":w(U))==="object"&&(U=(0,T.default)(U,!1)),typeof U.key=="string")if(J.keys[U.key.toUpperCase()]!=null)U.key=J.keys[U.key.toUpperCase()];else{if(U.key.length!==1)return null;U.key=U.key.toUpperCase().charCodeAt(0)}return U.shortKey&&(U[X]=U.shortKey,delete U.shortKey),U}Object.defineProperty(o,"__esModule",{value:!0}),o.SHORTKEY=o.default=void 0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},x=function(){function U(G,nt){var ft=[],ct=!0,gt=!1,bt=void 0;try{for(var Et,Ot=G[Symbol.iterator]();!(ct=(Et=Ot.next()).done)&&(ft.push(Et.value),!nt||ft.length!==nt);ct=!0);}catch(Ct){gt=!0,bt=Ct}finally{try{!ct&&Ot.return&&Ot.return()}finally{if(gt)throw bt}}return ft}return function(G,nt){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return U(G,nt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function U(G,nt){for(var ft=0;ft<nt.length;ft++){var ct=nt[ft];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(G,ct.key,ct)}}return function(G,nt,ft){return nt&&U(G.prototype,nt),ft&&U(G,ft),G}}(),k=s(21),T=a(k),P=s(11),N=a(P),S=s(3),R=a(S),O=s(2),C=a(O),q=s(20),M=a(q),V=s(0),W=a(V),rt=s(5),tt=a(rt),Q=s(10),I=a(Q),H=s(9),B=a(H),K=(0,I.default)("quill:keyboard"),X=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=function(U){function G(nt,ft){f(this,G);var ct=p(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,nt,ft));return ct.bindings={},Object.keys(ct.options.bindings).forEach(function(gt){(gt!=="list autofill"||nt.scroll.whitelist==null||nt.scroll.whitelist.list)&&ct.options.bindings[gt]&&ct.addBinding(ct.options.bindings[gt])}),ct.addBinding({key:G.keys.ENTER,shiftKey:null},m),ct.addBinding({key:G.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ct.addBinding({key:G.keys.BACKSPACE},{collapsed:!0},d),ct.addBinding({key:G.keys.DELETE},{collapsed:!0},u)):(ct.addBinding({key:G.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},d),ct.addBinding({key:G.keys.DELETE},{collapsed:!0,suffix:/^.?$/},u)),ct.addBinding({key:G.keys.BACKSPACE},{collapsed:!1},c),ct.addBinding({key:G.keys.DELETE},{collapsed:!1},c),ct.addBinding({key:G.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},d),ct.listen(),ct}return y(G,U),b(G,null,[{key:"match",value:function(nt,ft){return ft=v(ft),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(ct){return!!ft[ct]!==nt[ct]&&ft[ct]!==null})&&ft.key===(nt.which||nt.keyCode)}}]),b(G,[{key:"addBinding",value:function(nt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},gt=v(nt);if(gt==null||gt.key==null)return K.warn("Attempted to add invalid keyboard binding",gt);typeof ft=="function"&&(ft={handler:ft}),typeof ct=="function"&&(ct={handler:ct}),gt=(0,R.default)(gt,ft,ct),this.bindings[gt.key]=this.bindings[gt.key]||[],this.bindings[gt.key].push(gt)}},{key:"listen",value:function(){var nt=this;this.quill.root.addEventListener("keydown",function(ft){if(!ft.defaultPrevented){var ct=ft.which||ft.keyCode,gt=(nt.bindings[ct]||[]).filter(function(St){return G.match(ft,St)});if(gt.length!==0){var bt=nt.quill.getSelection();if(bt!=null&&nt.quill.hasFocus()){var Et=nt.quill.getLine(bt.index),Ot=x(Et,2),Ct=Ot[0],Ut=Ot[1],qt=nt.quill.getLeaf(bt.index),E=x(qt,2),A=E[0],j=E[1],z=bt.length===0?[A,j]:nt.quill.getLeaf(bt.index+bt.length),Y=x(z,2),st=Y[0],_t=Y[1],xt=A instanceof W.default.Text?A.value().slice(0,j):"",Lt=st instanceof W.default.Text?st.value().slice(_t):"",At={collapsed:bt.length===0,empty:bt.length===0&&Ct.length()<=1,format:nt.quill.getFormat(bt),offset:Ut,prefix:xt,suffix:Lt};gt.some(function(St){if(St.collapsed!=null&&St.collapsed!==At.collapsed||St.empty!=null&&St.empty!==At.empty||St.offset!=null&&St.offset!==At.offset)return!1;if(Array.isArray(St.format)){if(St.format.every(function(Ft){return At.format[Ft]==null}))return!1}else if(w(St.format)==="object"&&!Object.keys(St.format).every(function(Ft){return St.format[Ft]===!0?At.format[Ft]!=null:St.format[Ft]===!1?At.format[Ft]==null:(0,N.default)(St.format[Ft],At.format[Ft])}))return!1;return!(St.prefix!=null&&!St.prefix.test(At.prefix))&&!(St.suffix!=null&&!St.suffix.test(At.suffix))&&St.handler.call(nt,bt,At)!==!0})&&ft.preventDefault()}}}})}}]),G}(B.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:g("bold"),italic:g("italic"),underline:g("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(U,G){if(G.collapsed&&G.offset!==0)return!0;this.quill.format("indent","+1",tt.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(U,G){if(G.collapsed&&G.offset!==0)return!0;this.quill.format("indent","-1",tt.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(U,G){G.format.indent!=null?this.quill.format("indent","-1",tt.default.sources.USER):G.format.list!=null&&this.quill.format("list",!1,tt.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(U){this.quill.deleteText(U.index-1,1,tt.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(U){this.quill.history.cutoff();var G=new C.default().retain(U.index).delete(U.length).insert("	");this.quill.updateContents(G,tt.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index+1,tt.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(U,G){this.quill.format("list",!1,tt.default.sources.USER),G.format.indent&&this.quill.format("indent",!1,tt.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(U){var G=this.quill.getLine(U.index),nt=x(G,2),ft=nt[0],ct=nt[1],gt=(0,R.default)({},ft.formats(),{list:"checked"}),bt=new C.default().retain(U.index).insert(`
`,gt).retain(ft.length()-ct-1).retain(1,{list:"unchecked"});this.quill.updateContents(bt,tt.default.sources.USER),this.quill.setSelection(U.index+1,tt.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(U,G){var nt=this.quill.getLine(U.index),ft=x(nt,2),ct=ft[0],gt=ft[1],bt=new C.default().retain(U.index).insert(`
`,G.format).retain(ct.length()-gt-1).retain(1,{header:null});this.quill.updateContents(bt,tt.default.sources.USER),this.quill.setSelection(U.index+1,tt.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(U,G){var nt=G.prefix.length,ft=this.quill.getLine(U.index),ct=x(ft,2),gt=ct[0],bt=ct[1];if(bt>nt)return!0;var Et=void 0;switch(G.prefix.trim()){case"[]":case"[ ]":Et="unchecked";break;case"[x]":Et="checked";break;case"-":case"*":Et="bullet";break;default:Et="ordered"}this.quill.insertText(U.index," ",tt.default.sources.USER),this.quill.history.cutoff();var Ot=new C.default().retain(U.index-bt).delete(nt+1).retain(gt.length()-2-bt).retain(1,{list:Et});this.quill.updateContents(Ot,tt.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index-nt,tt.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(U){var G=this.quill.getLine(U.index),nt=x(G,2),ft=nt[0],ct=nt[1],gt=new C.default().retain(U.index+ft.length()-ct-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(gt,tt.default.sources.USER)}},"embed left":h(J.keys.LEFT,!1),"embed left shift":h(J.keys.LEFT,!0),"embed right":h(J.keys.RIGHT,!1),"embed right shift":h(J.keys.RIGHT,!0)}},o.default=J,o.SHORTKEY=X},function(n,o,s){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function f(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?v:w}function p(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}Object.defineProperty(o,"__esModule",{value:!0});var y=function(){function v(w,x){var b=[],k=!0,T=!1,P=void 0;try{for(var N,S=w[Symbol.iterator]();!(k=(N=S.next()).done)&&(b.push(N.value),!x||b.length!==x);k=!0);}catch(R){T=!0,P=R}finally{try{!k&&S.return&&S.return()}finally{if(T)throw P}}return b}return function(w,x){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return v(w,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function v(w,x,b){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,x);if(k===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:v(T,x,b)}if("value"in k)return k.value;var P=k.get;if(P!==void 0)return P.call(b)},d=function(){function v(w,x){for(var b=0;b<x.length;b++){var k=x[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,x,b){return x&&v(w.prototype,x),b&&v(w,b),w}}(),u=s(0),c=a(u),m=s(7),_=a(m),g=function(v){function w(x,b){l(this,w);var k=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,x));return k.selection=b,k.textNode=document.createTextNode(w.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return p(w,v),d(w,null,[{key:"value",value:function(){}}]),d(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(x,b){if(this._length!==0)return h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,x,b);for(var k=this,T=0;k!=null&&k.statics.scope!==c.default.Scope.BLOCK_BLOT;)T+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=w.CONTENTS.length,k.optimize(),k.formatAt(T,w.CONTENTS.length,x,b),this._length=0)}},{key:"index",value:function(x,b){return x===this.textNode?0:h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,x,b)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&this.parent!=null){var x=this.textNode,b=this.selection.getNativeRange(),k=void 0,T=void 0,P=void 0;if(b!=null&&b.start.node===x&&b.end.node===x){var N=[x,b.start.offset,b.end.offset];k=N[0],T=N[1],P=N[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var S=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof _.default?(k=this.next.domNode,this.next.insertAt(0,S),this.textNode.data=w.CONTENTS):(this.textNode.data=S,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var R=[T,P].map(function(C){return Math.max(0,Math.min(k.data.length,C-1))}),O=y(R,2);return T=O[0],P=O[1],{startNode:k,startOffset:T,endNode:k,endOffset:P}}}}},{key:"update",value:function(x,b){var k=this;if(x.some(function(P){return P.type==="characterData"&&P.target===k.textNode})){var T=this.restore();T&&(b.range=T)}}},{key:"value",value:function(){return""}}]),w}(c.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",o.default=g},function(n,o,s){"use strict";function a(m){return m&&m.__esModule?m:{default:m}}function l(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function f(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?m:_}function p(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}Object.defineProperty(o,"__esModule",{value:!0});var y=s(0),h=a(y),d=s(4),u=a(d),c=function(m){function _(){return l(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return p(_,m),_}(h.default.Container);c.allowedChildren=[u.default,d.BlockEmbed,c],o.default=c},function(n,o,s){"use strict";function a(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function l(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?_:g}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}Object.defineProperty(o,"__esModule",{value:!0}),o.ColorStyle=o.ColorClass=o.ColorAttributor=void 0;var p=function(){function _(g,v){for(var w=0;w<v.length;w++){var x=v[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,v,w){return v&&_(g.prototype,v),w&&_(g,w),g}}(),y=function _(g,v,w){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,v);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:_(b,v,w)}if("value"in x)return x.value;var k=x.get;if(k!==void 0)return k.call(w)},h=s(0),d=function(_){return _&&_.__esModule?_:{default:_}}(h),u=function(_){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,_),p(g,[{key:"value",value:function(v){var w=y(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,v);return w.startsWith("rgb(")?(w=w.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+w.split(",").map(function(x){return("00"+parseInt(x).toString(16)).slice(-2)}).join("")):w}}]),g}(d.default.Attributor.Style),c=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),m=new u("color","color",{scope:d.default.Scope.INLINE});o.ColorAttributor=u,o.ColorClass=c,o.ColorStyle=m},function(n,o,s){"use strict";function a(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function l(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?m:_}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}function p(m,_){var g=document.createElement("a");g.href=m;var v=g.href.slice(0,g.href.indexOf(":"));return _.indexOf(v)>-1}Object.defineProperty(o,"__esModule",{value:!0}),o.sanitize=o.default=void 0;var y=function(){function m(_,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),h=function m(_,g,v){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,g);if(w===void 0){var x=Object.getPrototypeOf(_);return x===null?void 0:m(x,g,v)}if("value"in w)return w.value;var b=w.get;if(b!==void 0)return b.call(v)},d=s(6),u=function(m){return m&&m.__esModule?m:{default:m}}(d),c=function(m){function _(){return a(this,_),l(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return f(_,m),y(_,[{key:"format",value:function(g,v){if(g!==this.statics.blotName||!v)return h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,g,v);v=this.constructor.sanitize(v),this.domNode.setAttribute("href",v)}}],[{key:"create",value:function(g){var v=h(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,g);return g=this.sanitize(g),v.setAttribute("href",g),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank"),v}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return p(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),_}(u.default);c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],o.default=c,o.sanitize=p},function(n,o,s){"use strict";function a(g){return g&&g.__esModule?g:{default:g}}function l(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){g.setAttribute(v,g.getAttribute(v)!=="true")}Object.defineProperty(o,"__esModule",{value:!0});var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},y=function(){function g(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&g(v.prototype,w),x&&g(v,x),v}}(),h=s(23),d=a(h),u=s(107),c=a(u),m=0,_=function(){function g(v){var w=this;l(this,g),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(x){switch(x.keyCode){case d.default.keys.ENTER:w.togglePicker();break;case d.default.keys.ESCAPE:w.escape(),x.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return y(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var w=this,x=document.createElement("span");return x.tabIndex="0",x.setAttribute("role","button"),x.classList.add("ql-picker-item"),v.hasAttribute("value")&&x.setAttribute("data-value",v.getAttribute("value")),v.textContent&&x.setAttribute("data-label",v.textContent),x.addEventListener("click",function(){w.selectItem(x,!0)}),x.addEventListener("keydown",function(b){switch(b.keyCode){case d.default.keys.ENTER:w.selectItem(x,!0),b.preventDefault();break;case d.default.keys.ESCAPE:w.escape(),b.preventDefault()}}),x}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=c.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(x){var b=v.buildItem(x);w.appendChild(b),x.selected===!0&&v.selectItem(b)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(w){v.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var w=arguments.length>1&&arguments[1]!==void 0&&arguments[1],x=this.container.querySelector(".ql-selected");if(v!==x&&(x!=null&&x.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event=="undefined"?"undefined":p(Event))==="object"){var b=document.createEvent("Event");b.initEvent("change",!0,!0),this.select.dispatchEvent(b)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var x=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",x)}}]),g}();o.default=_},function(n,o,s){"use strict";function a(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(o,"__esModule",{value:!0});var l=s(0),f=a(l),p=s(5),y=a(p),h=s(4),d=a(h),u=s(16),c=a(u),m=s(25),_=a(m),g=s(24),v=a(g),w=s(35),x=a(w),b=s(6),k=a(b),T=s(22),P=a(T),N=s(7),S=a(N),R=s(55),O=a(R),C=s(42),q=a(C),M=s(23),V=a(M);y.default.register({"blots/block":d.default,"blots/block/embed":h.BlockEmbed,"blots/break":c.default,"blots/container":_.default,"blots/cursor":v.default,"blots/embed":x.default,"blots/inline":k.default,"blots/scroll":P.default,"blots/text":S.default,"modules/clipboard":O.default,"modules/history":q.default,"modules/keyboard":V.default}),f.default.register(d.default,c.default,v.default,k.default,P.default,S.default),o.default=y.default},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=s(1),l=function(){function f(p){this.domNode=p,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(f.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),f.create=function(p){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var y;return Array.isArray(this.tagName)?(typeof p=="string"&&(p=p.toUpperCase(),parseInt(p).toString()===p&&(p=parseInt(p))),y=typeof p=="number"?document.createElement(this.tagName[p-1]):this.tagName.indexOf(p)>-1?document.createElement(p):document.createElement(this.tagName[0])):y=document.createElement(this.tagName),this.className&&y.classList.add(this.className),y},f.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},f.prototype.clone=function(){var p=this.domNode.cloneNode(!1);return a.create(p)},f.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},f.prototype.deleteAt=function(p,y){this.isolate(p,y).remove()},f.prototype.formatAt=function(p,y,h,d){var u=this.isolate(p,y);if(a.query(h,a.Scope.BLOT)!=null&&d)u.wrap(h,d);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var c=a.create(this.statics.scope);u.wrap(c),c.format(h,d)}},f.prototype.insertAt=function(p,y,h){var d=h==null?a.create("text",y):a.create(y,h),u=this.split(p);this.parent.insertBefore(d,u)},f.prototype.insertInto=function(p,y){y===void 0&&(y=null),this.parent!=null&&this.parent.children.remove(this);var h=null;p.children.insertBefore(this,y),y!=null&&(h=y.domNode),this.domNode.parentNode==p.domNode&&this.domNode.nextSibling==h||p.domNode.insertBefore(this.domNode,h),this.parent=p,this.attach()},f.prototype.isolate=function(p,y){var h=this.split(p);return h.split(y),h},f.prototype.length=function(){return 1},f.prototype.offset=function(p){return p===void 0&&(p=this.parent),this.parent==null||this==p?0:this.parent.children.offset(this)+this.parent.offset(p)},f.prototype.optimize=function(p){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},f.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},f.prototype.replace=function(p){p.parent!=null&&(p.parent.insertBefore(this,p.next),p.remove())},f.prototype.replaceWith=function(p,y){var h=typeof p=="string"?a.create(p,y):p;return h.replace(this),h},f.prototype.split=function(p,y){return p===0?this:this.next},f.prototype.update=function(p,y){},f.prototype.wrap=function(p,y){var h=typeof p=="string"?a.create(p,y):p;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},f.blotName="abstract",f}();o.default=l},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=s(12),l=s(32),f=s(33),p=s(1),y=function(){function h(d){this.attributes={},this.domNode=d,this.build()}return h.prototype.attribute=function(d,u){u?d.add(this.domNode,u)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},h.prototype.build=function(){var d=this;this.attributes={};var u=a.default.keys(this.domNode),c=l.default.keys(this.domNode),m=f.default.keys(this.domNode);u.concat(c).concat(m).forEach(function(_){var g=p.query(_,p.Scope.ATTRIBUTE);g instanceof a.default&&(d.attributes[g.attrName]=g)})},h.prototype.copy=function(d){var u=this;Object.keys(this.attributes).forEach(function(c){var m=u.attributes[c].value(u.domNode);d.format(c,m)})},h.prototype.move=function(d){var u=this;this.copy(d),Object.keys(this.attributes).forEach(function(c){u.attributes[c].remove(u.domNode)}),this.attributes={}},h.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(u,c){return u[c]=d.attributes[c].value(d.domNode),u},{})},h}();o.default=y},function(n,o,s){"use strict";function a(y,h){return(y.getAttribute("class")||"").split(/\s+/).filter(function(d){return d.indexOf(h+"-")===0})}var l=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){function u(){this.constructor=h}y(h,d),h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(o,"__esModule",{value:!0});var f=s(12),p=function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return l(h,y),h.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},h.prototype.add=function(d,u){return!!this.canAdd(d,u)&&(this.remove(d),d.classList.add(this.keyName+"-"+u),!0)},h.prototype.remove=function(d){a(d,this.keyName).forEach(function(u){d.classList.remove(u)}),d.classList.length===0&&d.removeAttribute("class")},h.prototype.value=function(d){var u=a(d,this.keyName)[0]||"",c=u.slice(this.keyName.length+1);return this.canAdd(d,c)?c:""},h}(f.default);o.default=p},function(n,o,s){"use strict";function a(y){var h=y.split("-"),d=h.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return h[0]+d}var l=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){function u(){this.constructor=h}y(h,d),h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(o,"__esModule",{value:!0});var f=s(12),p=function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return l(h,y),h.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(u){return u.split(":")[0].trim()})},h.prototype.add=function(d,u){return!!this.canAdd(d,u)&&(d.style[a(this.keyName)]=u,!0)},h.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},h.prototype.value=function(d){var u=d.style[a(this.keyName)];return this.canAdd(d,u)?u:""},h}(f.default);o.default=p},function(n,o,s){"use strict";function a(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var l=function(){function p(y,h){for(var d=0;d<h.length;d++){var u=h[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(y,u.key,u)}}return function(y,h,d){return h&&p(y.prototype,h),d&&p(y,d),y}}(),f=function(){function p(y,h){a(this,p),this.quill=y,this.options=h,this.modules={}}return l(p,[{key:"init",value:function(){var y=this;Object.keys(this.options.modules).forEach(function(h){y.modules[h]==null&&y.addModule(h)})}},{key:"addModule",value:function(y){var h=this.quill.constructor.import("modules/"+y);return this.modules[y]=new h(this.quill,this.options.modules[y]||{}),this.modules[y]}}]),p}();f.DEFAULTS={modules:{}},f.themes={default:f},o.default=f},function(n,o,s){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function f(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?v:w}function p(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}Object.defineProperty(o,"__esModule",{value:!0});var y=function(){function v(w,x){for(var b=0;b<x.length;b++){var k=x[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,x,b){return x&&v(w.prototype,x),b&&v(w,b),w}}(),h=function v(w,x,b){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,x);if(k===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:v(T,x,b)}if("value"in k)return k.value;var P=k.get;if(P!==void 0)return P.call(b)},d=s(0),u=a(d),c=s(7),m=a(c),_="\uFEFF",g=function(v){function w(x){l(this,w);var b=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,x));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(k){b.contentNode.appendChild(k)}),b.leftGuard=document.createTextNode(_),b.rightGuard=document.createTextNode(_),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return p(w,v),y(w,[{key:"index",value:function(x,b){return x===this.leftGuard?0:x===this.rightGuard?1:h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,x,b)}},{key:"restore",value:function(x){var b=void 0,k=void 0,T=x.data.split(_).join("");if(x===this.leftGuard)if(this.prev instanceof m.default){var P=this.prev.length();this.prev.insertAt(P,T),b={startNode:this.prev.domNode,startOffset:P+T.length}}else k=document.createTextNode(T),this.parent.insertBefore(u.default.create(k),this),b={startNode:k,startOffset:T.length};else x===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,T),b={startNode:this.next.domNode,startOffset:T.length}):(k=document.createTextNode(T),this.parent.insertBefore(u.default.create(k),this.next),b={startNode:k,startOffset:T.length}));return x.data=_,b}},{key:"update",value:function(x,b){var k=this;x.forEach(function(T){if(T.type==="characterData"&&(T.target===k.leftGuard||T.target===k.rightGuard)){var P=k.restore(T.target);P&&(b.range=P)}})}}]),w}(u.default.Embed);o.default=g},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.AlignStyle=o.AlignClass=o.AlignAttribute=void 0;var a=s(0),l=function(d){return d&&d.__esModule?d:{default:d}}(a),f={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},p=new l.default.Attributor.Attribute("align","align",f),y=new l.default.Attributor.Class("align","ql-align",f),h=new l.default.Attributor.Style("align","text-align",f);o.AlignAttribute=p,o.AlignClass=y,o.AlignStyle=h},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.BackgroundStyle=o.BackgroundClass=void 0;var a=s(0),l=function(h){return h&&h.__esModule?h:{default:h}}(a),f=s(26),p=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),y=new f.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});o.BackgroundClass=p,o.BackgroundStyle=y},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.DirectionStyle=o.DirectionClass=o.DirectionAttribute=void 0;var a=s(0),l=function(d){return d&&d.__esModule?d:{default:d}}(a),f={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},p=new l.default.Attributor.Attribute("direction","dir",f),y=new l.default.Attributor.Class("direction","ql-direction",f),h=new l.default.Attributor.Style("direction","direction",f);o.DirectionAttribute=p,o.DirectionClass=y,o.DirectionStyle=h},function(n,o,s){"use strict";function a(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function l(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?g:v}function f(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}Object.defineProperty(o,"__esModule",{value:!0}),o.FontClass=o.FontStyle=void 0;var p=function(){function g(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&g(v.prototype,w),x&&g(v,x),v}}(),y=function g(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var k=Object.getPrototypeOf(v);return k===null?void 0:g(k,w,x)}if("value"in b)return b.value;var T=b.get;if(T!==void 0)return T.call(x)},h=s(0),d=function(g){return g&&g.__esModule?g:{default:g}}(h),u={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new d.default.Attributor.Class("font","ql-font",u),m=function(g){function v(){return a(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return f(v,g),p(v,[{key:"value",value:function(w){return y(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,w).replace(/["']/g,"")}}]),v}(d.default.Attributor.Style),_=new m("font","font-family",u);o.FontStyle=_,o.FontClass=c},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.SizeStyle=o.SizeClass=void 0;var a=s(0),l=function(y){return y&&y.__esModule?y:{default:y}}(a),f=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),p=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});o.SizeClass=f,o.SizeStyle=p},function(n,o,s){"use strict";n.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}},function(n,o,s){"use strict";function a(x){return x&&x.__esModule?x:{default:x}}function l(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function f(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?x:b}function p(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}function y(x){var b=x.ops[x.ops.length-1];return b!=null&&(b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null&&Object.keys(b.attributes).some(function(k){return c.default.query(k,c.default.Scope.BLOCK)!=null}))}function h(x){var b=x.reduce(function(T,P){return T+=P.delete||0},0),k=x.length()-b;return y(x)&&(k-=1),k}Object.defineProperty(o,"__esModule",{value:!0}),o.getLastChangeIndex=o.default=void 0;var d=function(){function x(b,k){for(var T=0;T<k.length;T++){var P=k[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,k,T){return k&&x(b.prototype,k),T&&x(b,T),b}}(),u=s(0),c=a(u),m=s(5),_=a(m),g=s(9),v=a(g),w=function(x){function b(k,T){l(this,b);var P=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,k,T));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(_.default.events.EDITOR_CHANGE,function(N,S,R,O){N!==_.default.events.TEXT_CHANGE||P.ignoreChange||(P.options.userOnly&&O!==_.default.sources.USER?P.transform(S):P.record(S,R))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return p(b,x),d(b,[{key:"change",value:function(k,T){if(this.stack[k].length!==0){var P=this.stack[k].pop();this.stack[T].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[k],_.default.sources.USER),this.ignoreChange=!1;var N=h(P[k]);this.quill.setSelection(N)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,T){if(k.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(T),N=Date.now();if(this.lastRecorded+this.options.delay>N&&this.stack.undo.length>0){var S=this.stack.undo.pop();P=P.compose(S.undo),k=S.redo.compose(k)}else this.lastRecorded=N;this.stack.undo.push({redo:k,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(T){T.undo=k.transform(T.undo,!0),T.redo=k.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=k.transform(T.undo,!0),T.redo=k.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(v.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},o.default=w,o.getLastChangeIndex=h},function(n,o,s){"use strict";function a(B){return B&&B.__esModule?B:{default:B}}function l(B,K){if(!(B instanceof K))throw new TypeError("Cannot call a class as a function")}function f(B,K){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!K||typeof K!="object"&&typeof K!="function"?B:K}function p(B,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);B.prototype=Object.create(K&&K.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(B,K):B.__proto__=K)}function y(B){var K=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":B}function h(B,K){var X=arguments.length>2&&arguments[2]!==void 0&&arguments[2];K.forEach(function(J){var U=document.createElement("option");J===X?U.setAttribute("selected","selected"):U.setAttribute("value",J),B.appendChild(U)})}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BaseTooltip=void 0;var d=function(){function B(K,X){for(var J=0;J<X.length;J++){var U=X[J];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(K,U.key,U)}}return function(K,X,J){return X&&B(K.prototype,X),J&&B(K,J),K}}(),u=function B(K,X,J){K===null&&(K=Function.prototype);var U=Object.getOwnPropertyDescriptor(K,X);if(U===void 0){var G=Object.getPrototypeOf(K);return G===null?void 0:B(G,X,J)}if("value"in U)return U.value;var nt=U.get;if(nt!==void 0)return nt.call(J)},c=s(3),m=a(c),_=s(2),g=a(_),v=s(8),w=a(v),x=s(23),b=a(x),k=s(34),T=a(k),P=s(59),N=a(P),S=s(60),R=a(S),O=s(28),C=a(O),q=s(61),M=a(q),V=[!1,"center","right","justify"],W=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],rt=[!1,"serif","monospace"],tt=["1","2","3",!1],Q=["small",!1,"large","huge"],I=function(B){function K(X,J){l(this,K);var U=f(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,X,J)),G=function nt(ft){if(!document.body.contains(X.root))return document.body.removeEventListener("click",nt);U.tooltip==null||U.tooltip.root.contains(ft.target)||document.activeElement===U.tooltip.textbox||U.quill.hasFocus()||U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(ct){ct.container.contains(ft.target)||ct.close()})};return X.emitter.listenDOM("click",document.body,G),U}return p(K,B),d(K,[{key:"addModule",value:function(X){var J=u(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,X);return X==="toolbar"&&this.extendToolbar(J),J}},{key:"buildButtons",value:function(X,J){X.forEach(function(U){(U.getAttribute("class")||"").split(/\s+/).forEach(function(G){if(G.startsWith("ql-")&&(G=G.slice(3),J[G]!=null))if(G==="direction")U.innerHTML=J[G][""]+J[G].rtl;else if(typeof J[G]=="string")U.innerHTML=J[G];else{var nt=U.value||"";nt!=null&&J[G][nt]&&(U.innerHTML=J[G][nt])}})})}},{key:"buildPickers",value:function(X,J){var U=this;this.pickers=X.map(function(nt){if(nt.classList.contains("ql-align"))return nt.querySelector("option")==null&&h(nt,V),new R.default(nt,J.align);if(nt.classList.contains("ql-background")||nt.classList.contains("ql-color")){var ft=nt.classList.contains("ql-background")?"background":"color";return nt.querySelector("option")==null&&h(nt,W,ft==="background"?"#ffffff":"#000000"),new N.default(nt,J[ft])}return nt.querySelector("option")==null&&(nt.classList.contains("ql-font")?h(nt,rt):nt.classList.contains("ql-header")?h(nt,tt):nt.classList.contains("ql-size")&&h(nt,Q)),new C.default(nt)});var G=function(){U.pickers.forEach(function(nt){nt.update()})};this.quill.on(w.default.events.EDITOR_CHANGE,G)}}]),K}(T.default);I.DEFAULTS=(0,m.default)(!0,{},T.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var B=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var X=new FileReader;X.onload=function(J){var U=B.quill.getSelection(!0);B.quill.updateContents(new g.default().retain(U.index).delete(U.length).insert({image:J.target.result}),w.default.sources.USER),B.quill.setSelection(U.index+1,w.default.sources.SILENT),K.value=""},X.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(B){function K(X,J){l(this,K);var U=f(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,X,J));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return p(K,B),d(K,[{key:"listen",value:function(){var X=this;this.textbox.addEventListener("keydown",function(J){b.default.match(J,"enter")?(X.save(),J.preventDefault()):b.default.match(J,"escape")&&(X.cancel(),J.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),J!=null?this.textbox.value=J:X!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+X)||""),this.root.setAttribute("data-mode",X)}},{key:"restoreFocus",value:function(){var X=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=X}},{key:"save",value:function(){var X=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var J=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",X,w.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",X,w.default.sources.USER)),this.quill.root.scrollTop=J;break;case"video":X=y(X);case"formula":if(!X)break;var U=this.quill.getSelection(!0);if(U!=null){var G=U.index+U.length;this.quill.insertEmbed(G,this.root.getAttribute("data-mode"),X,w.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(G+1," ",w.default.sources.USER),this.quill.setSelection(G+2,w.default.sources.USER)}}this.textbox.value="",this.hide()}}]),K}(M.default);o.BaseTooltip=H,o.default=I},function(n,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];this.insertBefore(f[0],null),f.length>1&&this.append.apply(this,f.slice(1))},l.prototype.contains=function(f){for(var p,y=this.iterator();p=y();)if(p===f)return!0;return!1},l.prototype.insertBefore=function(f,p){f&&(f.next=p,p!=null?(f.prev=p.prev,p.prev!=null&&(p.prev.next=f),p.prev=f,p===this.head&&(this.head=f)):this.tail!=null?(this.tail.next=f,f.prev=this.tail,this.tail=f):(f.prev=null,this.head=this.tail=f),this.length+=1)},l.prototype.offset=function(f){for(var p=0,y=this.head;y!=null;){if(y===f)return p;p+=y.length(),y=y.next}return-1},l.prototype.remove=function(f){this.contains(f)&&(f.prev!=null&&(f.prev.next=f.next),f.next!=null&&(f.next.prev=f.prev),f===this.head&&(this.head=f.next),f===this.tail&&(this.tail=f.prev),this.length-=1)},l.prototype.iterator=function(f){return f===void 0&&(f=this.head),function(){var p=f;return f!=null&&(f=f.next),p}},l.prototype.find=function(f,p){p===void 0&&(p=!1);for(var y,h=this.iterator();y=h();){var d=y.length();if(f<d||p&&f===d&&(y.next==null||y.next.length()!==0))return[y,f];f-=d}return[null,0]},l.prototype.forEach=function(f){for(var p,y=this.iterator();p=y();)f(p)},l.prototype.forEachAt=function(f,p,y){if(!(p<=0))for(var h,d=this.find(f),u=d[0],c=d[1],m=f-c,_=this.iterator(u);(h=_())&&m<f+p;){var g=h.length();f>m?y(h,f-m,Math.min(p,m+g-f)):y(h,0,Math.min(g,f+p-m)),m+=g}},l.prototype.map=function(f){return this.reduce(function(p,y){return p.push(f(y)),p},[])},l.prototype.reduce=function(f,p){for(var y,h=this.iterator();y=h();)p=f(p,y);return p},l}();o.default=a},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var c in u)u.hasOwnProperty(c)&&(d[c]=u[c])};return function(d,u){function c(){this.constructor=d}h(d,u),d.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(17),f=s(1),p={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},y=function(h){function d(u){var c=h.call(this,u)||this;return c.scroll=c,c.observer=new MutationObserver(function(m){c.update(m)}),c.observer.observe(c.domNode,p),c.attach(),c}return a(d,h),d.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(u,c){this.update(),u===0&&c===this.length()?this.children.forEach(function(m){m.remove()}):h.prototype.deleteAt.call(this,u,c)},d.prototype.formatAt=function(u,c,m,_){this.update(),h.prototype.formatAt.call(this,u,c,m,_)},d.prototype.insertAt=function(u,c,m){this.update(),h.prototype.insertAt.call(this,u,c,m)},d.prototype.optimize=function(u,c){var m=this;u===void 0&&(u=[]),c===void 0&&(c={}),h.prototype.optimize.call(this,c);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)u.push(_.pop());for(var g=function(b,k){k===void 0&&(k=!0),b!=null&&b!==m&&b.domNode.parentNode!=null&&(b.domNode[f.DATA_KEY].mutations==null&&(b.domNode[f.DATA_KEY].mutations=[]),k&&g(b.parent))},v=function(b){b.domNode[f.DATA_KEY]!=null&&b.domNode[f.DATA_KEY].mutations!=null&&(b instanceof l.default&&b.children.forEach(v),b.optimize(c))},w=u,x=0;w.length>0;x+=1){if(x>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(b){var k=f.find(b.target,!0);k!=null&&(k.domNode===b.target&&(b.type==="childList"?(g(f.find(b.previousSibling,!1)),[].forEach.call(b.addedNodes,function(T){var P=f.find(T,!1);g(P,!1),P instanceof l.default&&P.children.forEach(function(N){g(N,!1)})})):b.type==="attributes"&&g(k.prev)),g(k))}),this.children.forEach(v),w=[].slice.call(this.observer.takeRecords()),_=w.slice();_.length>0;)u.push(_.pop())}},d.prototype.update=function(u,c){var m=this;c===void 0&&(c={}),u=u||this.observer.takeRecords(),u.map(function(_){var g=f.find(_.target,!0);return g==null?null:g.domNode[f.DATA_KEY].mutations==null?(g.domNode[f.DATA_KEY].mutations=[_],g):(g.domNode[f.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_!=null&&_!==m&&_.domNode[f.DATA_KEY]!=null&&_.update(_.domNode[f.DATA_KEY].mutations||[],c)}),this.domNode[f.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[f.DATA_KEY].mutations,c),this.optimize(u,c)},d.blotName="scroll",d.defaultChild="block",d.scope=f.Scope.BLOCK_BLOT,d.tagName="DIV",d}(l.default);o.default=y},function(n,o,s){"use strict";function a(h,d){if(Object.keys(h).length!==Object.keys(d).length)return!1;for(var u in h)if(h[u]!==d[u])return!1;return!0}var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var c in u)u.hasOwnProperty(c)&&(d[c]=u[c])};return function(d,u){function c(){this.constructor=d}h(d,u),d.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}();Object.defineProperty(o,"__esModule",{value:!0});var f=s(18),p=s(1),y=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return l(d,h),d.formats=function(u){if(u.tagName!==d.tagName)return h.formats.call(this,u)},d.prototype.format=function(u,c){var m=this;u!==this.statics.blotName||c?h.prototype.format.call(this,u,c):(this.children.forEach(function(_){_ instanceof f.default||(_=_.wrap(d.blotName,!0)),m.attributes.copy(_)}),this.unwrap())},d.prototype.formatAt=function(u,c,m,_){this.formats()[m]!=null||p.query(m,p.Scope.ATTRIBUTE)?this.isolate(u,c).format(m,_):h.prototype.formatAt.call(this,u,c,m,_)},d.prototype.optimize=function(u){h.prototype.optimize.call(this,u);var c=this.formats();if(Object.keys(c).length===0)return this.unwrap();var m=this.next;m instanceof d&&m.prev===this&&a(c,m.formats())&&(m.moveChildren(this),m.remove())},d.blotName="inline",d.scope=p.Scope.INLINE_BLOT,d.tagName="SPAN",d}(f.default);o.default=y},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){function u(){this.constructor=h}y(h,d),h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(18),f=s(1),p=function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return a(h,y),h.formats=function(d){var u=f.query(h.blotName).tagName;if(d.tagName!==u)return y.formats.call(this,d)},h.prototype.format=function(d,u){f.query(d,f.Scope.BLOCK)!=null&&(d!==this.statics.blotName||u?y.prototype.format.call(this,d,u):this.replaceWith(h.blotName))},h.prototype.formatAt=function(d,u,c,m){f.query(c,f.Scope.BLOCK)!=null?this.format(c,m):y.prototype.formatAt.call(this,d,u,c,m)},h.prototype.insertAt=function(d,u,c){if(c==null||f.query(u,f.Scope.INLINE)!=null)y.prototype.insertAt.call(this,d,u,c);else{var m=this.split(d),_=f.create(u,c);m.parent.insertBefore(_,m)}},h.prototype.update=function(d,u){navigator.userAgent.match(/Trident/)?this.build():y.prototype.update.call(this,d,u)},h.blotName="block",h.scope=f.Scope.BLOCK_BLOT,h.tagName="P",h}(l.default);o.default=p},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,h){y.__proto__=h}||function(y,h){for(var d in h)h.hasOwnProperty(d)&&(y[d]=h[d])};return function(y,h){function d(){this.constructor=y}p(y,h),y.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(19),f=function(p){function y(){return p!==null&&p.apply(this,arguments)||this}return a(y,p),y.formats=function(h){},y.prototype.format=function(h,d){p.prototype.formatAt.call(this,0,this.length(),h,d)},y.prototype.formatAt=function(h,d,u,c){h===0&&d===this.length()?this.format(u,c):p.prototype.formatAt.call(this,h,d,u,c)},y.prototype.formats=function(){return this.statics.formats(this.domNode)},y}(l.default);o.default=f},function(n,o,s){"use strict";var a=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var u in d)d.hasOwnProperty(u)&&(h[u]=d[u])};return function(h,d){function u(){this.constructor=h}y(h,d),h.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(o,"__esModule",{value:!0});var l=s(19),f=s(1),p=function(y){function h(d){var u=y.call(this,d)||this;return u.text=u.statics.value(u.domNode),u}return a(h,y),h.create=function(d){return document.createTextNode(d)},h.value=function(d){var u=d.data;return u.normalize&&(u=u.normalize()),u},h.prototype.deleteAt=function(d,u){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+u)},h.prototype.index=function(d,u){return this.domNode===d?u:-1},h.prototype.insertAt=function(d,u,c){c==null?(this.text=this.text.slice(0,d)+u+this.text.slice(d),this.domNode.data=this.text):y.prototype.insertAt.call(this,d,u,c)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(d){y.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(d,u){return u===void 0&&(u=!1),[this.domNode,d]},h.prototype.split=function(d,u){if(u===void 0&&(u=!1),!u){if(d===0)return this;if(d===this.length())return this.next}var c=f.create(this.domNode.splitText(d));return this.parent.insertBefore(c,this.next),this.text=this.statics.value(this.domNode),c},h.prototype.update=function(d,u){var c=this;d.some(function(m){return m.type==="characterData"&&m.target===c.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=f.Scope.INLINE_BLOT,h}(l.default);o.default=p},function(n,o,s){"use strict";var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(f,p){return arguments.length>1&&!this.contains(f)==!p?p:l.call(this,f)}}String.prototype.startsWith||(String.prototype.startsWith=function(f,p){return p=p||0,this.substr(p,f.length)===f}),String.prototype.endsWith||(String.prototype.endsWith=function(f,p){var y=this.toString();(typeof p!="number"||!isFinite(p)||Math.floor(p)!==p||p>y.length)&&(p=y.length),p-=f.length;var h=y.indexOf(f,p);return h!==-1&&h===p}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(f){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof f!="function")throw new TypeError("predicate must be a function");for(var p,y=Object(this),h=y.length>>>0,d=arguments[1],u=0;u<h;u++)if(p=y[u],f.call(d,p,u,y))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,o){function s(b,k,T){if(b==k)return b?[[w,b]]:[];(T<0||b.length<T)&&(T=null);var P=p(b,k),N=b.substring(0,P);b=b.substring(P),k=k.substring(P),P=y(b,k);var S=b.substring(b.length-P);b=b.substring(0,b.length-P),k=k.substring(0,k.length-P);var R=a(b,k);return N&&R.unshift([w,N]),S&&R.push([w,S]),d(R),T!=null&&(R=c(R,T)),R=m(R)}function a(b,k){var T;if(!b)return[[v,k]];if(!k)return[[g,b]];var P=b.length>k.length?b:k,N=b.length>k.length?k:b,S=P.indexOf(N);if(S!=-1)return T=[[v,P.substring(0,S)],[w,N],[v,P.substring(S+N.length)]],b.length>k.length&&(T[0][0]=T[2][0]=g),T;if(N.length==1)return[[g,b],[v,k]];var R=h(b,k);if(R){var O=R[0],C=R[1],q=R[2],M=R[3],V=R[4],W=s(O,q),rt=s(C,M);return W.concat([[w,V]],rt)}return l(b,k)}function l(b,k){for(var T=b.length,P=k.length,N=Math.ceil((T+P)/2),S=N,R=2*N,O=new Array(R),C=new Array(R),q=0;q<R;q++)O[q]=-1,C[q]=-1;O[S+1]=0,C[S+1]=0;for(var M=T-P,V=M%2!=0,W=0,rt=0,tt=0,Q=0,I=0;I<N;I++){for(var H=-I+W;H<=I-rt;H+=2){var B,K=S+H;B=H==-I||H!=I&&O[K-1]<O[K+1]?O[K+1]:O[K-1]+1;for(var X=B-H;B<T&&X<P&&b.charAt(B)==k.charAt(X);)B++,X++;if(O[K]=B,B>T)rt+=2;else if(X>P)W+=2;else if(V){var J=S+M-H;if(J>=0&&J<R&&C[J]!=-1){var U=T-C[J];if(B>=U)return f(b,k,B,X)}}}for(var G=-I+tt;G<=I-Q;G+=2){var U,J=S+G;U=G==-I||G!=I&&C[J-1]<C[J+1]?C[J+1]:C[J-1]+1;for(var nt=U-G;U<T&&nt<P&&b.charAt(T-U-1)==k.charAt(P-nt-1);)U++,nt++;if(C[J]=U,U>T)Q+=2;else if(nt>P)tt+=2;else if(!V){var K=S+M-G;if(K>=0&&K<R&&O[K]!=-1){var B=O[K],X=S+B-K;if(U=T-U,B>=U)return f(b,k,B,X)}}}}return[[g,b],[v,k]]}function f(b,k,T,P){var N=b.substring(0,T),S=k.substring(0,P),R=b.substring(T),O=k.substring(P),C=s(N,S),q=s(R,O);return C.concat(q)}function p(b,k){if(!b||!k||b.charAt(0)!=k.charAt(0))return 0;for(var T=0,P=Math.min(b.length,k.length),N=P,S=0;T<N;)b.substring(S,N)==k.substring(S,N)?(T=N,S=T):P=N,N=Math.floor((P-T)/2+T);return N}function y(b,k){if(!b||!k||b.charAt(b.length-1)!=k.charAt(k.length-1))return 0;for(var T=0,P=Math.min(b.length,k.length),N=P,S=0;T<N;)b.substring(b.length-N,b.length-S)==k.substring(k.length-N,k.length-S)?(T=N,S=T):P=N,N=Math.floor((P-T)/2+T);return N}function h(b,k){function T(W,rt,tt){for(var Q,I,H,B,K=W.substring(tt,tt+Math.floor(W.length/4)),X=-1,J="";(X=rt.indexOf(K,X+1))!=-1;){var U=p(W.substring(tt),rt.substring(X)),G=y(W.substring(0,tt),rt.substring(0,X));J.length<G+U&&(J=rt.substring(X-G,X)+rt.substring(X,X+U),Q=W.substring(0,tt-G),I=W.substring(tt+U),H=rt.substring(0,X-G),B=rt.substring(X+U))}return 2*J.length>=W.length?[Q,I,H,B,J]:null}var P=b.length>k.length?b:k,N=b.length>k.length?k:b;if(P.length<4||2*N.length<P.length)return null;var S,R=T(P,N,Math.ceil(P.length/4)),O=T(P,N,Math.ceil(P.length/2));if(!R&&!O)return null;S=O?R&&R[4].length>O[4].length?R:O:R;var C,q,M,V;return b.length>k.length?(C=S[0],q=S[1],M=S[2],V=S[3]):(M=S[0],V=S[1],C=S[2],q=S[3]),[C,q,M,V,S[4]]}function d(b){b.push([w,""]);for(var k,T=0,P=0,N=0,S="",R="";T<b.length;)switch(b[T][0]){case v:N++,R+=b[T][1],T++;break;case g:P++,S+=b[T][1],T++;break;case w:P+N>1?(P!==0&&N!==0&&(k=p(R,S),k!==0&&(T-P-N>0&&b[T-P-N-1][0]==w?b[T-P-N-1][1]+=R.substring(0,k):(b.splice(0,0,[w,R.substring(0,k)]),T++),R=R.substring(k),S=S.substring(k)),(k=y(R,S))!==0&&(b[T][1]=R.substring(R.length-k)+b[T][1],R=R.substring(0,R.length-k),S=S.substring(0,S.length-k))),P===0?b.splice(T-N,P+N,[v,R]):N===0?b.splice(T-P,P+N,[g,S]):b.splice(T-P-N,P+N,[g,S],[v,R]),T=T-P-N+(P?1:0)+(N?1:0)+1):T!==0&&b[T-1][0]==w?(b[T-1][1]+=b[T][1],b.splice(T,1)):T++,N=0,P=0,S="",R=""}b[b.length-1][1]===""&&b.pop();var O=!1;for(T=1;T<b.length-1;)b[T-1][0]==w&&b[T+1][0]==w&&(b[T][1].substring(b[T][1].length-b[T-1][1].length)==b[T-1][1]?(b[T][1]=b[T-1][1]+b[T][1].substring(0,b[T][1].length-b[T-1][1].length),b[T+1][1]=b[T-1][1]+b[T+1][1],b.splice(T-1,1),O=!0):b[T][1].substring(0,b[T+1][1].length)==b[T+1][1]&&(b[T-1][1]+=b[T+1][1],b[T][1]=b[T][1].substring(b[T+1][1].length)+b[T+1][1],b.splice(T+1,1),O=!0)),T++;O&&d(b)}function u(b,k){if(k===0)return[w,b];for(var T=0,P=0;P<b.length;P++){var N=b[P];if(N[0]===g||N[0]===w){var S=T+N[1].length;if(k===S)return[P+1,b];if(k<S){b=b.slice();var R=k-T,O=[N[0],N[1].slice(0,R)],C=[N[0],N[1].slice(R)];return b.splice(P,1,O,C),[P+1,b]}T=S}}throw new Error("cursor_pos is out of bounds!")}function c(b,k){var T=u(b,k),P=T[1],N=T[0],S=P[N],R=P[N+1];if(S==null||S[0]!==w)return b;if(R!=null&&S[1]+R[1]===R[1]+S[1])return P.splice(N,2,R,S),_(P,N,2);if(R!=null&&R[1].indexOf(S[1])===0){P.splice(N,2,[R[0],S[1]],[0,S[1]]);var O=R[1].slice(S[1].length);return O.length>0&&P.splice(N+2,0,[R[0],O]),_(P,N,3)}return b}function m(b){for(var k=!1,T=function(S){return S.charCodeAt(0)>=56320&&S.charCodeAt(0)<=57343},P=2;P<b.length;P+=1)b[P-2][0]===w&&function(S){return S.charCodeAt(S.length-1)>=55296&&S.charCodeAt(S.length-1)<=56319}(b[P-2][1])&&b[P-1][0]===g&&T(b[P-1][1])&&b[P][0]===v&&T(b[P][1])&&(k=!0,b[P-1][1]=b[P-2][1].slice(-1)+b[P-1][1],b[P][1]=b[P-2][1].slice(-1)+b[P][1],b[P-2][1]=b[P-2][1].slice(0,-1));if(!k)return b;for(var N=[],P=0;P<b.length;P+=1)b[P][1].length>0&&N.push(b[P]);return N}function _(b,k,T){for(var P=k+T-1;P>=0&&P>=k-1;P--)if(P+1<b.length){var N=b[P],S=b[P+1];N[0]===S[1]&&b.splice(P,2,[N[0],N[1]+S[1]])}return b}var g=-1,v=1,w=0,x=s;x.INSERT=v,x.DELETE=g,x.EQUAL=w,n.exports=x},function(n,o){function s(a){var l=[];for(var f in a)l.push(f);return l}o=n.exports=typeof Object.keys=="function"?Object.keys:s,o.shim=s},function(n,o){function s(f){return Object.prototype.toString.call(f)=="[object Arguments]"}function a(f){return f&&typeof f=="object"&&typeof f.length=="number"&&Object.prototype.hasOwnProperty.call(f,"callee")&&!Object.prototype.propertyIsEnumerable.call(f,"callee")||!1}var l=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";o=n.exports=l?s:a,o.supported=s,o.unsupported=a},function(n,o){"use strict";function s(){}function a(y,h,d){this.fn=y,this.context=h,this.once=d||!1}function l(){this._events=new s,this._eventsCount=0}var f=Object.prototype.hasOwnProperty,p="~";Object.create&&(s.prototype=Object.create(null),new s().__proto__||(p=!1)),l.prototype.eventNames=function(){var y,h,d=[];if(this._eventsCount===0)return d;for(h in y=this._events)f.call(y,h)&&d.push(p?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(y)):d},l.prototype.listeners=function(y,h){var d=p?p+y:y,u=this._events[d];if(h)return!!u;if(!u)return[];if(u.fn)return[u.fn];for(var c=0,m=u.length,_=new Array(m);c<m;c++)_[c]=u[c].fn;return _},l.prototype.emit=function(y,h,d,u,c,m){var _=p?p+y:y;if(!this._events[_])return!1;var g,v,w=this._events[_],x=arguments.length;if(w.fn){switch(w.once&&this.removeListener(y,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,d),!0;case 4:return w.fn.call(w.context,h,d,u),!0;case 5:return w.fn.call(w.context,h,d,u,c),!0;case 6:return w.fn.call(w.context,h,d,u,c,m),!0}for(v=1,g=new Array(x-1);v<x;v++)g[v-1]=arguments[v];w.fn.apply(w.context,g)}else{var b,k=w.length;for(v=0;v<k;v++)switch(w[v].once&&this.removeListener(y,w[v].fn,void 0,!0),x){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,h);break;case 3:w[v].fn.call(w[v].context,h,d);break;case 4:w[v].fn.call(w[v].context,h,d,u);break;default:if(!g)for(b=1,g=new Array(x-1);b<x;b++)g[b-1]=arguments[b];w[v].fn.apply(w[v].context,g)}}return!0},l.prototype.on=function(y,h,d){var u=new a(h,d||this),c=p?p+y:y;return this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],u]:this._events[c].push(u):(this._events[c]=u,this._eventsCount++),this},l.prototype.once=function(y,h,d){var u=new a(h,d||this,!0),c=p?p+y:y;return this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],u]:this._events[c].push(u):(this._events[c]=u,this._eventsCount++),this},l.prototype.removeListener=function(y,h,d,u){var c=p?p+y:y;if(!this._events[c])return this;if(!h)return--this._eventsCount==0?this._events=new s:delete this._events[c],this;var m=this._events[c];if(m.fn)m.fn!==h||u&&!m.once||d&&m.context!==d||(--this._eventsCount==0?this._events=new s:delete this._events[c]);else{for(var _=0,g=[],v=m.length;_<v;_++)(m[_].fn!==h||u&&!m[_].once||d&&m[_].context!==d)&&g.push(m[_]);g.length?this._events[c]=g.length===1?g[0]:g:--this._eventsCount==0?this._events=new s:delete this._events[c]}return this},l.prototype.removeAllListeners=function(y){var h;return y?(h=p?p+y:y,this._events[h]&&(--this._eventsCount==0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=p,l.EventEmitter=l,n!==void 0&&(n.exports=l)},function(n,o,s){"use strict";function a(E){return E&&E.__esModule?E:{default:E}}function l(E,A,j){return A in E?Object.defineProperty(E,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):E[A]=j,E}function f(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function p(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?E:A}function y(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}function h(E,A,j){return(A===void 0?"undefined":S(A))==="object"?Object.keys(A).reduce(function(z,Y){return h(z,Y,A[Y])},E):E.reduce(function(z,Y){return Y.attributes&&Y.attributes[A]?z.push(Y):z.insert(Y.insert,(0,q.default)({},l({},A,j),Y.attributes))},new V.default)}function d(E){return E.nodeType!==Node.ELEMENT_NODE?{}:E["__ql-computed-style"]||(E["__ql-computed-style"]=window.getComputedStyle(E))}function u(E,A){for(var j="",z=E.ops.length-1;z>=0&&j.length<A.length;--z){var Y=E.ops[z];if(typeof Y.insert!="string")break;j=Y.insert+j}return j.slice(-1*A.length)===A}function c(E){return E.childNodes.length!==0&&["block","list-item"].indexOf(d(E).display)>-1}function m(E,A,j){return E.nodeType===E.TEXT_NODE?j.reduce(function(z,Y){return Y(E,z)},new V.default):E.nodeType===E.ELEMENT_NODE?[].reduce.call(E.childNodes||[],function(z,Y){var st=m(Y,A,j);return Y.nodeType===E.ELEMENT_NODE&&(st=A.reduce(function(_t,xt){return xt(Y,_t)},st),st=(Y[Et]||[]).reduce(function(_t,xt){return xt(Y,_t)},st)),z.concat(st)},new V.default):new V.default}function _(E,A,j){return h(j,E,!0)}function g(E,A){var j=rt.default.Attributor.Attribute.keys(E),z=rt.default.Attributor.Class.keys(E),Y=rt.default.Attributor.Style.keys(E),st={};return j.concat(z).concat(Y).forEach(function(_t){var xt=rt.default.query(_t,rt.default.Scope.ATTRIBUTE);xt!=null&&(st[xt.attrName]=xt.value(E),st[xt.attrName])||(xt=Ct[_t],xt==null||xt.attrName!==_t&&xt.keyName!==_t||(st[xt.attrName]=xt.value(E)||void 0),(xt=Ut[_t])==null||xt.attrName!==_t&&xt.keyName!==_t||(xt=Ut[_t],st[xt.attrName]=xt.value(E)||void 0))}),Object.keys(st).length>0&&(A=h(A,st)),A}function v(E,A){var j=rt.default.query(E);if(j==null)return A;if(j.prototype instanceof rt.default.Embed){var z={},Y=j.value(E);Y!=null&&(z[j.blotName]=Y,A=new V.default().insert(z,j.formats(E)))}else typeof j.formats=="function"&&(A=h(A,j.blotName,j.formats(E)));return A}function w(E,A){return u(A,`
`)||A.insert(`
`),A}function x(){return new V.default}function b(E,A){var j=rt.default.query(E);if(j==null||j.blotName!=="list-item"||!u(A,`
`))return A;for(var z=-1,Y=E.parentNode;!Y.classList.contains("ql-clipboard");)(rt.default.query(Y)||{}).blotName==="list"&&(z+=1),Y=Y.parentNode;return z<=0?A:A.compose(new V.default().retain(A.length()-1).retain(1,{indent:z}))}function k(E,A){return u(A,`
`)||(c(E)||A.length()>0&&E.nextSibling&&c(E.nextSibling))&&A.insert(`
`),A}function T(E,A){if(c(E)&&E.nextElementSibling!=null&&!u(A,`

`)){var j=E.offsetHeight+parseFloat(d(E).marginTop)+parseFloat(d(E).marginBottom);E.nextElementSibling.offsetTop>E.offsetTop+1.5*j&&A.insert(`
`)}return A}function P(E,A){var j={},z=E.style||{};return z.fontStyle&&d(E).fontStyle==="italic"&&(j.italic=!0),z.fontWeight&&(d(E).fontWeight.startsWith("bold")||parseInt(d(E).fontWeight)>=700)&&(j.bold=!0),Object.keys(j).length>0&&(A=h(A,j)),parseFloat(z.textIndent||0)>0&&(A=new V.default().insert("	").concat(A)),A}function N(E,A){var j=E.data;if(E.parentNode.tagName==="O:P")return A.insert(j.trim());if(j.trim().length===0&&E.parentNode.classList.contains("ql-clipboard"))return A;if(!d(E.parentNode).whiteSpace.startsWith("pre")){var z=function(Y,st){return st=st.replace(/[^\u00a0]/g,""),st.length<1&&Y?" ":st};j=j.replace(/\r\n/g," ").replace(/\n/g," "),j=j.replace(/\s\s+/g,z.bind(z,!0)),(E.previousSibling==null&&c(E.parentNode)||E.previousSibling!=null&&c(E.previousSibling))&&(j=j.replace(/^\s+/,z.bind(z,!1))),(E.nextSibling==null&&c(E.parentNode)||E.nextSibling!=null&&c(E.nextSibling))&&(j=j.replace(/\s+$/,z.bind(z,!1)))}return A.insert(j)}Object.defineProperty(o,"__esModule",{value:!0}),o.matchText=o.matchSpacing=o.matchNewline=o.matchBlot=o.matchAttributor=o.default=void 0;var S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},R=function(){function E(A,j){var z=[],Y=!0,st=!1,_t=void 0;try{for(var xt,Lt=A[Symbol.iterator]();!(Y=(xt=Lt.next()).done)&&(z.push(xt.value),!j||z.length!==j);Y=!0);}catch(At){st=!0,_t=At}finally{try{!Y&&Lt.return&&Lt.return()}finally{if(st)throw _t}}return z}return function(A,j){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function E(A,j){for(var z=0;z<j.length;z++){var Y=j[z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(A,Y.key,Y)}}return function(A,j,z){return j&&E(A.prototype,j),z&&E(A,z),A}}(),C=s(3),q=a(C),M=s(2),V=a(M),W=s(0),rt=a(W),tt=s(5),Q=a(tt),I=s(10),H=a(I),B=s(9),K=a(B),X=s(36),J=s(37),U=s(13),G=a(U),nt=s(26),ft=s(38),ct=s(39),gt=s(40),bt=(0,H.default)("quill:clipboard"),Et="__ql-matcher",Ot=[[Node.TEXT_NODE,N],[Node.TEXT_NODE,k],["br",w],[Node.ELEMENT_NODE,k],[Node.ELEMENT_NODE,v],[Node.ELEMENT_NODE,T],[Node.ELEMENT_NODE,g],[Node.ELEMENT_NODE,P],["li",b],["b",_.bind(_,"bold")],["i",_.bind(_,"italic")],["style",x]],Ct=[X.AlignAttribute,ft.DirectionAttribute].reduce(function(E,A){return E[A.keyName]=A,E},{}),Ut=[X.AlignStyle,J.BackgroundStyle,nt.ColorStyle,ft.DirectionStyle,ct.FontStyle,gt.SizeStyle].reduce(function(E,A){return E[A.keyName]=A,E},{}),qt=function(E){function A(j,z){f(this,A);var Y=p(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,j,z));return Y.quill.root.addEventListener("paste",Y.onPaste.bind(Y)),Y.container=Y.quill.addContainer("ql-clipboard"),Y.container.setAttribute("contenteditable",!0),Y.container.setAttribute("tabindex",-1),Y.matchers=[],Ot.concat(Y.options.matchers).forEach(function(st){var _t=R(st,2),xt=_t[0],Lt=_t[1];(z.matchVisual||Lt!==T)&&Y.addMatcher(xt,Lt)}),Y}return y(A,E),O(A,[{key:"addMatcher",value:function(j,z){this.matchers.push([j,z])}},{key:"convert",value:function(j){if(typeof j=="string")return this.container.innerHTML=j.replace(/\>\r?\n +\</g,"><"),this.convert();var z=this.quill.getFormat(this.quill.selection.savedRange.index);if(z[G.default.blotName]){var Y=this.container.innerText;return this.container.innerHTML="",new V.default().insert(Y,l({},G.default.blotName,z[G.default.blotName]))}var st=this.prepareMatching(),_t=R(st,2),xt=_t[0],Lt=_t[1],At=m(this.container,xt,Lt);return u(At,`
`)&&At.ops[At.ops.length-1].attributes==null&&(At=At.compose(new V.default().retain(At.length()-1).delete(1))),bt.log("convert",this.container.innerHTML,At),this.container.innerHTML="",At}},{key:"dangerouslyPasteHTML",value:function(j,z){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q.default.sources.API;if(typeof j=="string")this.quill.setContents(this.convert(j),z),this.quill.setSelection(0,Q.default.sources.SILENT);else{var st=this.convert(z);this.quill.updateContents(new V.default().retain(j).concat(st),Y),this.quill.setSelection(j+st.length(),Q.default.sources.SILENT)}}},{key:"onPaste",value:function(j){var z=this;if(!j.defaultPrevented&&this.quill.isEnabled()){var Y=this.quill.getSelection(),st=new V.default().retain(Y.index),_t=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(Q.default.sources.SILENT),setTimeout(function(){st=st.concat(z.convert()).delete(Y.length),z.quill.updateContents(st,Q.default.sources.USER),z.quill.setSelection(st.length()-Y.length,Q.default.sources.SILENT),z.quill.scrollingContainer.scrollTop=_t,z.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var j=this,z=[],Y=[];return this.matchers.forEach(function(st){var _t=R(st,2),xt=_t[0],Lt=_t[1];switch(xt){case Node.TEXT_NODE:Y.push(Lt);break;case Node.ELEMENT_NODE:z.push(Lt);break;default:[].forEach.call(j.container.querySelectorAll(xt),function(At){At[Et]=At[Et]||[],At[Et].push(Lt)})}}),[z,Y]}}]),A}(K.default);qt.DEFAULTS={matchers:[],matchVisual:!0},o.default=qt,o.matchAttributor=g,o.matchBlot=v,o.matchNewline=k,o.matchSpacing=T,o.matchText=N},function(n,o,s){"use strict";function a(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function l(c,m){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?c:m}function f(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(c,m):c.__proto__=m)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function c(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&c(m.prototype,_),g&&c(m,g),m}}(),y=function c(m,_,g){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,_);if(v===void 0){var w=Object.getPrototypeOf(m);return w===null?void 0:c(w,_,g)}if("value"in v)return v.value;var x=v.get;if(x!==void 0)return x.call(g)},h=s(6),d=function(c){return c&&c.__esModule?c:{default:c}}(h),u=function(c){function m(){return a(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return f(m,c),p(m,[{key:"optimize",value:function(_){y(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,_),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return y(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),m}(d.default);u.blotName="bold",u.tagName=["STRONG","B"],o.default=u},function(n,o,s){"use strict";function a(O){return O&&O.__esModule?O:{default:O}}function l(O,C,q){return C in O?Object.defineProperty(O,C,{value:q,enumerable:!0,configurable:!0,writable:!0}):O[C]=q,O}function f(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}function p(O,C){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?O:C}function y(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);O.prototype=Object.create(C&&C.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(O,C):O.__proto__=C)}function h(O,C,q){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+C),q!=null&&(M.value=q),O.appendChild(M)}function d(O,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(q){var M=document.createElement("span");M.classList.add("ql-formats"),q.forEach(function(V){if(typeof V=="string")h(M,V);else{var W=Object.keys(V)[0],rt=V[W];Array.isArray(rt)?u(M,W,rt):h(M,W,rt)}}),O.appendChild(M)})}function u(O,C,q){var M=document.createElement("select");M.classList.add("ql-"+C),q.forEach(function(V){var W=document.createElement("option");V!==!1?W.setAttribute("value",V):W.setAttribute("selected","selected"),M.appendChild(W)}),O.appendChild(M)}Object.defineProperty(o,"__esModule",{value:!0}),o.addControls=o.default=void 0;var c=function(){function O(C,q){var M=[],V=!0,W=!1,rt=void 0;try{for(var tt,Q=C[Symbol.iterator]();!(V=(tt=Q.next()).done)&&(M.push(tt.value),!q||M.length!==q);V=!0);}catch(I){W=!0,rt=I}finally{try{!V&&Q.return&&Q.return()}finally{if(W)throw rt}}return M}return function(C,q){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return O(C,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function O(C,q){for(var M=0;M<q.length;M++){var V=q[M];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(C,V.key,V)}}return function(C,q,M){return q&&O(C.prototype,q),M&&O(C,M),C}}(),_=s(2),g=a(_),v=s(0),w=a(v),x=s(5),b=a(x),k=s(10),T=a(k),P=s(9),N=a(P),S=(0,T.default)("quill:toolbar"),R=function(O){function C(q,M){f(this,C);var V=p(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,q,M));if(Array.isArray(V.options.container)){var W=document.createElement("div");d(W,V.options.container),q.container.parentNode.insertBefore(W,q.container),V.container=W}else typeof V.options.container=="string"?V.container=document.querySelector(V.options.container):V.container=V.options.container;if(!(V.container instanceof HTMLElement)){var rt;return rt=S.error("Container required for toolbar",V.options),p(V,rt)}return V.container.classList.add("ql-toolbar"),V.controls=[],V.handlers={},Object.keys(V.options.handlers).forEach(function(tt){V.addHandler(tt,V.options.handlers[tt])}),[].forEach.call(V.container.querySelectorAll("button, select"),function(tt){V.attach(tt)}),V.quill.on(b.default.events.EDITOR_CHANGE,function(tt,Q){tt===b.default.events.SELECTION_CHANGE&&V.update(Q)}),V.quill.on(b.default.events.SCROLL_OPTIMIZE,function(){var tt=V.quill.selection.getRange(),Q=c(tt,1),I=Q[0];V.update(I)}),V}return y(C,O),m(C,[{key:"addHandler",value:function(q,M){this.handlers[q]=M}},{key:"attach",value:function(q){var M=this,V=[].find.call(q.classList,function(rt){return rt.indexOf("ql-")===0});if(V){if(V=V.slice(3),q.tagName==="BUTTON"&&q.setAttribute("type","button"),this.handlers[V]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[V]==null)return void S.warn("ignoring attaching to disabled format",V,q);if(w.default.query(V)==null)return void S.warn("ignoring attaching to nonexistent format",V,q)}var W=q.tagName==="SELECT"?"change":"click";q.addEventListener(W,function(rt){var tt=void 0;if(q.tagName==="SELECT"){if(q.selectedIndex<0)return;var Q=q.options[q.selectedIndex];tt=!Q.hasAttribute("selected")&&(Q.value||!1)}else tt=!q.classList.contains("ql-active")&&(q.value||!q.hasAttribute("value")),rt.preventDefault();M.quill.focus();var I=M.quill.selection.getRange(),H=c(I,1),B=H[0];if(M.handlers[V]!=null)M.handlers[V].call(M,tt);else if(w.default.query(V).prototype instanceof w.default.Embed){if(!(tt=prompt("Enter "+V)))return;M.quill.updateContents(new g.default().retain(B.index).delete(B.length).insert(l({},V,tt)),b.default.sources.USER)}else M.quill.format(V,tt,b.default.sources.USER);M.update(B)}),this.controls.push([V,q])}}},{key:"update",value:function(q){var M=q==null?{}:this.quill.getFormat(q);this.controls.forEach(function(V){var W=c(V,2),rt=W[0],tt=W[1];if(tt.tagName==="SELECT"){var Q=void 0;if(q==null)Q=null;else if(M[rt]==null)Q=tt.querySelector("option[selected]");else if(!Array.isArray(M[rt])){var I=M[rt];typeof I=="string"&&(I=I.replace(/\"/g,'\\"')),Q=tt.querySelector('option[value="'+I+'"]')}Q==null?(tt.value="",tt.selectedIndex=-1):Q.selected=!0}else if(q==null)tt.classList.remove("ql-active");else if(tt.hasAttribute("value")){var H=M[rt]===tt.getAttribute("value")||M[rt]!=null&&M[rt].toString()===tt.getAttribute("value")||M[rt]==null&&!tt.getAttribute("value");tt.classList.toggle("ql-active",H)}else tt.classList.toggle("ql-active",M[rt]!=null)})}}]),C}(N.default);R.DEFAULTS={},R.DEFAULTS={container:null,handlers:{clean:function(){var O=this,C=this.quill.getSelection();if(C!=null)if(C.length==0){var q=this.quill.getFormat();Object.keys(q).forEach(function(M){w.default.query(M,w.default.Scope.INLINE)!=null&&O.quill.format(M,!1)})}else this.quill.removeFormat(C,b.default.sources.USER)},direction:function(O){var C=this.quill.getFormat().align;O==="rtl"&&C==null?this.quill.format("align","right",b.default.sources.USER):O||C!=="right"||this.quill.format("align",!1,b.default.sources.USER),this.quill.format("direction",O,b.default.sources.USER)},indent:function(O){var C=this.quill.getSelection(),q=this.quill.getFormat(C),M=parseInt(q.indent||0);if(O==="+1"||O==="-1"){var V=O==="+1"?1:-1;q.direction==="rtl"&&(V*=-1),this.quill.format("indent",M+V,b.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,b.default.sources.USER)},list:function(O){var C=this.quill.getSelection(),q=this.quill.getFormat(C);O==="check"?q.list==="checked"||q.list==="unchecked"?this.quill.format("list",!1,b.default.sources.USER):this.quill.format("list","unchecked",b.default.sources.USER):this.quill.format("list",O,b.default.sources.USER)}}},o.default=R,o.addControls=d},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,o,s){"use strict";function a(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function l(c,m){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?c:m}function f(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(c,m):c.__proto__=m)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function c(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&c(m.prototype,_),g&&c(m,g),m}}(),y=function c(m,_,g){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,_);if(v===void 0){var w=Object.getPrototypeOf(m);return w===null?void 0:c(w,_,g)}if("value"in v)return v.value;var x=v.get;if(x!==void 0)return x.call(g)},h=s(28),d=function(c){return c&&c.__esModule?c:{default:c}}(h),u=function(c){function m(_,g){a(this,m);var v=l(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return v.label.innerHTML=g,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),v}return f(m,c),p(m,[{key:"buildItem",value:function(_){var g=y(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"buildItem",this).call(this,_);return g.style.backgroundColor=_.getAttribute("value")||"",g}},{key:"selectItem",value:function(_,g){y(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,_,g);var v=this.label.querySelector(".ql-color-label"),w=_&&_.getAttribute("data-value")||"";v&&(v.tagName==="line"?v.style.stroke=w:v.style.fill=w)}}]),m}(d.default);o.default=u},function(n,o,s){"use strict";function a(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function l(c,m){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?c:m}function f(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(c,m):c.__proto__=m)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function c(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&c(m.prototype,_),g&&c(m,g),m}}(),y=function c(m,_,g){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,_);if(v===void 0){var w=Object.getPrototypeOf(m);return w===null?void 0:c(w,_,g)}if("value"in v)return v.value;var x=v.get;if(x!==void 0)return x.call(g)},h=s(28),d=function(c){return c&&c.__esModule?c:{default:c}}(h),u=function(c){function m(_,g){a(this,m);var v=l(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,_));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=g[w.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return f(m,c),p(m,[{key:"selectItem",value:function(_,g){y(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,_,g),_=_||this.defaultItem,this.label.innerHTML=_.innerHTML}}]),m}(d.default);o.default=u},function(n,o,s){"use strict";function a(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var l=function(){function p(y,h){for(var d=0;d<h.length;d++){var u=h[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(y,u.key,u)}}return function(y,h,d){return h&&p(y.prototype,h),d&&p(y,d),y}}(),f=function(){function p(y,h){var d=this;a(this,p),this.quill=y,this.boundsContainer=h||document.body,this.root=y.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return l(p,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(y){var h=y.left+y.width/2-this.root.offsetWidth/2,d=y.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var u=this.boundsContainer.getBoundingClientRect(),c=this.root.getBoundingClientRect(),m=0;if(c.right>u.right&&(m=u.right-c.right,this.root.style.left=h+m+"px"),c.left<u.left&&(m=u.left-c.left,this.root.style.left=h+m+"px"),c.bottom>u.bottom){var _=c.bottom-c.top,g=y.bottom-y.top+_;this.root.style.top=d-g+"px",this.root.classList.add("ql-flip")}return m}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),p}();o.default=f},function(n,o,s){"use strict";function a(R){return R&&R.__esModule?R:{default:R}}function l(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function f(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?R:O}function p(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}Object.defineProperty(o,"__esModule",{value:!0});var y=function(){function R(O,C){var q=[],M=!0,V=!1,W=void 0;try{for(var rt,tt=O[Symbol.iterator]();!(M=(rt=tt.next()).done)&&(q.push(rt.value),!C||q.length!==C);M=!0);}catch(Q){V=!0,W=Q}finally{try{!M&&tt.return&&tt.return()}finally{if(V)throw W}}return q}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return R(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function R(O,C,q){O===null&&(O=Function.prototype);var M=Object.getOwnPropertyDescriptor(O,C);if(M===void 0){var V=Object.getPrototypeOf(O);return V===null?void 0:R(V,C,q)}if("value"in M)return M.value;var W=M.get;if(W!==void 0)return W.call(q)},d=function(){function R(O,C){for(var q=0;q<C.length;q++){var M=C[q];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}return function(O,C,q){return C&&R(O.prototype,C),q&&R(O,q),O}}(),u=s(3),c=a(u),m=s(8),_=a(m),g=s(43),v=a(g),w=s(27),x=a(w),b=s(15),k=s(41),T=a(k),P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],N=function(R){function O(C,q){l(this,O),q.modules.toolbar!=null&&q.modules.toolbar.container==null&&(q.modules.toolbar.container=P);var M=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C,q));return M.quill.container.classList.add("ql-snow"),M}return p(O,R),d(O,[{key:"extendToolbar",value:function(C){C.container.classList.add("ql-snow"),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),T.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),T.default),this.tooltip=new S(this.quill,this.options.bounds),C.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(q,M){C.handlers.link.call(C,!M.format.link)})}}]),O}(v.default);N.DEFAULTS=(0,c.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var O=this.quill.getSelection();if(O==null||O.length==0)return;var C=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(C)&&C.indexOf("mailto:")!==0&&(C="mailto:"+C),this.quill.theme.tooltip.edit("link",C)}else this.quill.format("link",!1)}}}}});var S=function(R){function O(C,q){l(this,O);var M=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C,q));return M.preview=M.root.querySelector("a.ql-preview"),M}return p(O,R),d(O,[{key:"listen",value:function(){var C=this;h(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(q){C.root.classList.contains("ql-editing")?C.save():C.edit("link",C.preview.textContent),q.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(q){if(C.linkRange!=null){var M=C.linkRange;C.restoreFocus(),C.quill.formatText(M,"link",!1,_.default.sources.USER),delete C.linkRange}q.preventDefault(),C.hide()}),this.quill.on(_.default.events.SELECTION_CHANGE,function(q,M,V){if(q!=null){if(q.length===0&&V===_.default.sources.USER){var W=C.quill.scroll.descendant(x.default,q.index),rt=y(W,2),tt=rt[0],Q=rt[1];if(tt!=null){C.linkRange=new b.Range(q.index-Q,tt.length());var I=x.default.formats(tt.domNode);return C.preview.textContent=I,C.preview.setAttribute("href",I),C.show(),void C.position(C.quill.getBounds(C.linkRange))}}else delete C.linkRange;C.hide()}})}},{key:"show",value:function(){h(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),O}(g.BaseTooltip);S.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),o.default=N},function(n,o,s){"use strict";function a(st){return st&&st.__esModule?st:{default:st}}Object.defineProperty(o,"__esModule",{value:!0});var l=s(29),f=a(l),p=s(36),y=s(38),h=s(64),d=s(65),u=a(d),c=s(66),m=a(c),_=s(67),g=a(_),v=s(37),w=s(26),x=s(39),b=s(40),k=s(56),T=a(k),P=s(68),N=a(P),S=s(27),R=a(S),O=s(69),C=a(O),q=s(70),M=a(q),V=s(71),W=a(V),rt=s(72),tt=a(rt),Q=s(73),I=a(Q),H=s(13),B=a(H),K=s(74),X=a(K),J=s(75),U=a(J),G=s(57),nt=a(G),ft=s(41),ct=a(ft),gt=s(28),bt=a(gt),Et=s(59),Ot=a(Et),Ct=s(60),Ut=a(Ct),qt=s(61),E=a(qt),A=s(108),j=a(A),z=s(62),Y=a(z);f.default.register({"attributors/attribute/direction":y.DirectionAttribute,"attributors/class/align":p.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":y.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":p.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":y.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":b.SizeStyle},!0),f.default.register({"formats/align":p.AlignClass,"formats/direction":y.DirectionClass,"formats/indent":h.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":x.FontClass,"formats/size":b.SizeClass,"formats/blockquote":u.default,"formats/code-block":B.default,"formats/header":m.default,"formats/list":g.default,"formats/bold":T.default,"formats/code":H.Code,"formats/italic":N.default,"formats/link":R.default,"formats/script":C.default,"formats/strike":M.default,"formats/underline":W.default,"formats/image":tt.default,"formats/video":I.default,"formats/list/item":_.ListItem,"modules/formula":X.default,"modules/syntax":U.default,"modules/toolbar":nt.default,"themes/bubble":j.default,"themes/snow":Y.default,"ui/icons":ct.default,"ui/picker":bt.default,"ui/icon-picker":Ut.default,"ui/color-picker":Ot.default,"ui/tooltip":E.default},!0),o.default=f.default},function(n,o,s){"use strict";function a(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function l(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?m:_}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}Object.defineProperty(o,"__esModule",{value:!0}),o.IndentClass=void 0;var p=function(){function m(_,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),y=function m(_,g,v){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,g);if(w===void 0){var x=Object.getPrototypeOf(_);return x===null?void 0:m(x,g,v)}if("value"in w)return w.value;var b=w.get;if(b!==void 0)return b.call(v)},h=s(0),d=function(m){return m&&m.__esModule?m:{default:m}}(h),u=function(m){function _(){return a(this,_),l(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return f(_,m),p(_,[{key:"add",value:function(g,v){if(v==="+1"||v==="-1"){var w=this.value(g)||0;v=v==="+1"?w+1:w-1}return v===0?(this.remove(g),!0):y(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,g,v)}},{key:"canAdd",value:function(g,v){return y(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,g,v)||y(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,g,parseInt(v))}},{key:"value",value:function(g){return parseInt(y(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,g))||void 0}}]),_}(d.default.Attributor.Class),c=new u("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});o.IndentClass=c},function(n,o,s){"use strict";function a(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function f(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}Object.defineProperty(o,"__esModule",{value:!0});var p=s(4),y=function(d){return d&&d.__esModule?d:{default:d}}(p),h=function(d){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,d),u}(y.default);h.blotName="blockquote",h.tagName="blockquote",o.default=h},function(n,o,s){"use strict";function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}function l(u,c){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?u:c}function f(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);u.prototype=Object.create(c&&c.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(u,c):u.__proto__=c)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function u(c,m){for(var _=0;_<m.length;_++){var g=m[_];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}return function(c,m,_){return m&&u(c.prototype,m),_&&u(c,_),c}}(),y=s(4),h=function(u){return u&&u.__esModule?u:{default:u}}(y),d=function(u){function c(){return a(this,c),l(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return f(c,u),p(c,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),c}(h.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],o.default=d},function(n,o,s){"use strict";function a(b){return b&&b.__esModule?b:{default:b}}function l(b,k,T){return k in b?Object.defineProperty(b,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[k]=T,b}function f(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}function p(b,k){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||typeof k!="object"&&typeof k!="function"?b:k}function y(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(b,k):b.__proto__=k)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.ListItem=void 0;var h=function(){function b(k,T){for(var P=0;P<T.length;P++){var N=T[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(k,N.key,N)}}return function(k,T,P){return T&&b(k.prototype,T),P&&b(k,P),k}}(),d=function b(k,T,P){k===null&&(k=Function.prototype);var N=Object.getOwnPropertyDescriptor(k,T);if(N===void 0){var S=Object.getPrototypeOf(k);return S===null?void 0:b(S,T,P)}if("value"in N)return N.value;var R=N.get;if(R!==void 0)return R.call(P)},u=s(0),c=a(u),m=s(4),_=a(m),g=s(25),v=a(g),w=function(b){function k(){return f(this,k),p(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return y(k,b),h(k,[{key:"format",value:function(T,P){T!==x.blotName||P?d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,T,P):this.replaceWith(c.default.create(this.statics.scope))}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,P){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,P),this):(this.parent.unwrap(),d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,T,P))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:d(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,T)}}]),k}(_.default);w.blotName="list-item",w.tagName="LI";var x=function(b){function k(T){f(this,k);var P=p(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,T)),N=function(S){if(S.target.parentNode===T){var R=P.statics.formats(T),O=c.default.find(S.target);R==="checked"?O.format("list","unchecked"):R==="unchecked"&&O.format("list","checked")}};return T.addEventListener("touchstart",N),T.addEventListener("mousedown",N),P}return y(k,b),h(k,null,[{key:"create",value:function(T){var P=T==="ordered"?"OL":"UL",N=d(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,P);return T!=="checked"&&T!=="unchecked"||N.setAttribute("data-checked",T==="checked"),N}},{key:"formats",value:function(T){return T.tagName==="OL"?"ordered":T.tagName==="UL"?T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet":void 0}}]),h(k,[{key:"format",value:function(T,P){this.children.length>0&&this.children.tail.format(T,P)}},{key:"formats",value:function(){return l({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,P){if(T instanceof w)d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,T,P);else{var N=P==null?this.length():P.offset(this),S=this.split(N);S.parent.insertBefore(T,S)}}},{key:"optimize",value:function(T){d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,T);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var P=c.default.create(this.statics.defaultChild);T.moveChildren(P),this.appendChild(P)}d(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,T)}}]),k}(v.default);x.blotName="list",x.scope=c.default.Scope.BLOCK_BLOT,x.tagName=["OL","UL"],x.defaultChild="list-item",x.allowedChildren=[w],o.ListItem=w,o.default=x},function(n,o,s){"use strict";function a(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function f(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}Object.defineProperty(o,"__esModule",{value:!0});var p=s(56),y=function(d){return d&&d.__esModule?d:{default:d}}(p),h=function(d){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,d),u}(y.default);h.blotName="italic",h.tagName=["EM","I"],o.default=h},function(n,o,s){"use strict";function a(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function l(c,m){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?c:m}function f(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(c,m):c.__proto__=m)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function c(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&c(m.prototype,_),g&&c(m,g),m}}(),y=function c(m,_,g){m===null&&(m=Function.prototype);var v=Object.getOwnPropertyDescriptor(m,_);if(v===void 0){var w=Object.getPrototypeOf(m);return w===null?void 0:c(w,_,g)}if("value"in v)return v.value;var x=v.get;if(x!==void 0)return x.call(g)},h=s(6),d=function(c){return c&&c.__esModule?c:{default:c}}(h),u=function(c){function m(){return a(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return f(m,c),p(m,null,[{key:"create",value:function(_){return _==="super"?document.createElement("sup"):_==="sub"?document.createElement("sub"):y(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,_)}},{key:"formats",value:function(_){return _.tagName==="SUB"?"sub":_.tagName==="SUP"?"super":void 0}}]),m}(d.default);u.blotName="script",u.tagName=["SUB","SUP"],o.default=u},function(n,o,s){"use strict";function a(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function f(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}Object.defineProperty(o,"__esModule",{value:!0});var p=s(6),y=function(d){return d&&d.__esModule?d:{default:d}}(p),h=function(d){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,d),u}(y.default);h.blotName="strike",h.tagName="S",o.default=h},function(n,o,s){"use strict";function a(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function f(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}Object.defineProperty(o,"__esModule",{value:!0});var p=s(6),y=function(d){return d&&d.__esModule?d:{default:d}}(p),h=function(d){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,d),u}(y.default);h.blotName="underline",h.tagName="U",o.default=h},function(n,o,s){"use strict";function a(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function l(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?_:g}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function _(g,v){for(var w=0;w<v.length;w++){var x=v[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,v,w){return v&&_(g.prototype,v),w&&_(g,w),g}}(),y=function _(g,v,w){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,v);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:_(b,v,w)}if("value"in x)return x.value;var k=x.get;if(k!==void 0)return k.call(w)},h=s(0),d=function(_){return _&&_.__esModule?_:{default:_}}(h),u=s(27),c=["alt","height","width"],m=function(_){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,_),p(g,[{key:"format",value:function(v,w){c.indexOf(v)>-1?w?this.domNode.setAttribute(v,w):this.domNode.removeAttribute(v):y(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,w)}}],[{key:"create",value:function(v){var w=y(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return typeof v=="string"&&w.setAttribute("src",this.sanitize(v)),w}},{key:"formats",value:function(v){return c.reduce(function(w,x){return v.hasAttribute(x)&&(w[x]=v.getAttribute(x)),w},{})}},{key:"match",value:function(v){return/\.(jpe?g|gif|png)$/.test(v)||/^data:image\/.+;base64/.test(v)}},{key:"sanitize",value:function(v){return(0,u.sanitize)(v,["http","https","data"])?v:"//:0"}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(d.default.Embed);m.blotName="image",m.tagName="IMG",o.default=m},function(n,o,s){"use strict";function a(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function l(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?_:g}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}Object.defineProperty(o,"__esModule",{value:!0});var p=function(){function _(g,v){for(var w=0;w<v.length;w++){var x=v[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,v,w){return v&&_(g.prototype,v),w&&_(g,w),g}}(),y=function _(g,v,w){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,v);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:_(b,v,w)}if("value"in x)return x.value;var k=x.get;if(k!==void 0)return k.call(w)},h=s(4),d=s(27),u=function(_){return _&&_.__esModule?_:{default:_}}(d),c=["height","width"],m=function(_){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,_),p(g,[{key:"format",value:function(v,w){c.indexOf(v)>-1?w?this.domNode.setAttribute(v,w):this.domNode.removeAttribute(v):y(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,w)}}],[{key:"create",value:function(v){var w=y(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return w.setAttribute("frameborder","0"),w.setAttribute("allowfullscreen",!0),w.setAttribute("src",this.sanitize(v)),w}},{key:"formats",value:function(v){return c.reduce(function(w,x){return v.hasAttribute(x)&&(w[x]=v.getAttribute(x)),w},{})}},{key:"sanitize",value:function(v){return u.default.sanitize(v)}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(h.BlockEmbed);m.blotName="video",m.className="ql-video",m.tagName="IFRAME",o.default=m},function(n,o,s){"use strict";function a(x){return x&&x.__esModule?x:{default:x}}function l(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function f(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?x:b}function p(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.FormulaBlot=void 0;var y=function(){function x(b,k){for(var T=0;T<k.length;T++){var P=k[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,k,T){return k&&x(b.prototype,k),T&&x(b,T),b}}(),h=function x(b,k,T){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,k);if(P===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:x(N,k,T)}if("value"in P)return P.value;var S=P.get;if(S!==void 0)return S.call(T)},d=s(35),u=a(d),c=s(5),m=a(c),_=s(9),g=a(_),v=function(x){function b(){return l(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return p(b,x),y(b,null,[{key:"create",value:function(k){var T=h(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",k)),T}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),b}(u.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var w=function(x){function b(){l(this,b);var k=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return p(b,x),y(b,null,[{key:"register",value:function(){m.default.register(v,!0)}}]),b}(g.default);o.FormulaBlot=v,o.default=w},function(n,o,s){"use strict";function a(T){return T&&T.__esModule?T:{default:T}}function l(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function f(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?T:P}function p(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.CodeToken=o.CodeBlock=void 0;var y=function(){function T(P,N){for(var S=0;S<N.length;S++){var R=N[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(P,R.key,R)}}return function(P,N,S){return N&&T(P.prototype,N),S&&T(P,S),P}}(),h=function T(P,N,S){P===null&&(P=Function.prototype);var R=Object.getOwnPropertyDescriptor(P,N);if(R===void 0){var O=Object.getPrototypeOf(P);return O===null?void 0:T(O,N,S)}if("value"in R)return R.value;var C=R.get;if(C!==void 0)return C.call(S)},d=s(0),u=a(d),c=s(5),m=a(c),_=s(9),g=a(_),v=s(13),w=a(v),x=function(T){function P(){return l(this,P),f(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return p(P,T),y(P,[{key:"replaceWith",value:function(N){this.domNode.textContent=this.domNode.textContent,this.attach(),h(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,N)}},{key:"highlight",value:function(N){var S=this.domNode.textContent;this.cachedText!==S&&((S.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=N(S),this.domNode.normalize(),this.attach()),this.cachedText=S)}}]),P}(w.default);x.className="ql-syntax";var b=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),k=function(T){function P(N,S){l(this,P);var R=f(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,N,S));if(typeof R.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var O=null;return R.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(O),O=setTimeout(function(){R.highlight(),O=null},R.options.interval)}),R.highlight(),R}return p(P,T),y(P,null,[{key:"register",value:function(){m.default.register(b,!0),m.default.register(x,!0)}}]),y(P,[{key:"highlight",value:function(){var N=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var S=this.quill.getSelection();this.quill.scroll.descendants(x).forEach(function(R){R.highlight(N.options.highlight)}),this.quill.update(m.default.sources.SILENT),S!=null&&this.quill.setSelection(S,m.default.sources.SILENT)}}}]),P}(g.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(T){return window.hljs.highlightAuto(T).value}}(),interval:1e3},o.CodeBlock=x,o.CodeToken=b,o.default=k},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,o){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,o){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,o){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,o){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,o){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,o,s){"use strict";function a(P){return P&&P.__esModule?P:{default:P}}function l(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function f(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?P:N}function p(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BubbleTooltip=void 0;var y=function P(N,S,R){N===null&&(N=Function.prototype);var O=Object.getOwnPropertyDescriptor(N,S);if(O===void 0){var C=Object.getPrototypeOf(N);return C===null?void 0:P(C,S,R)}if("value"in O)return O.value;var q=O.get;if(q!==void 0)return q.call(R)},h=function(){function P(N,S){for(var R=0;R<S.length;R++){var O=S[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(N,O.key,O)}}return function(N,S,R){return S&&P(N.prototype,S),R&&P(N,R),N}}(),d=s(3),u=a(d),c=s(8),m=a(c),_=s(43),g=a(_),v=s(15),w=s(41),x=a(w),b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(P){function N(S,R){l(this,N),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=b);var O=f(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,R));return O.quill.container.classList.add("ql-bubble"),O}return p(N,P),h(N,[{key:"extendToolbar",value:function(S){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(S.container),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),x.default)}}]),N}(g.default);k.DEFAULTS=(0,u.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(P){function N(S,R){l(this,N);var O=f(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,R));return O.quill.on(m.default.events.EDITOR_CHANGE,function(C,q,M,V){if(C===m.default.events.SELECTION_CHANGE)if(q!=null&&q.length>0&&V===m.default.sources.USER){O.show(),O.root.style.left="0px",O.root.style.width="",O.root.style.width=O.root.offsetWidth+"px";var W=O.quill.getLines(q.index,q.length);if(W.length===1)O.position(O.quill.getBounds(q));else{var rt=W[W.length-1],tt=O.quill.getIndex(rt),Q=Math.min(rt.length()-1,q.index+q.length-tt),I=O.quill.getBounds(new v.Range(tt,Q));O.position(I)}}else document.activeElement!==O.textbox&&O.quill.hasFocus()&&O.hide()}),O}return p(N,P),h(N,[{key:"listen",value:function(){var S=this;y(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){S.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!S.root.classList.contains("ql-hidden")){var R=S.quill.getSelection();R!=null&&S.position(S.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(S){var R=y(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"position",this).call(this,S),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",R===0)return R;O.style.marginLeft=-1*R-O.offsetWidth/2+"px"}}]),N}(_.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),o.BubbleTooltip=T,o.default=k},function(n,o,s){n.exports=s(63)}]).default})}).call(t,e(43).Buffer)},function(r,t,e){var i=e(11),n=e(1),o=i(n,"Map");r.exports=o},function(r,t,e){var i=e(1),n=i.Symbol;r.exports=n},function(r,t){function e(i,n,o){switch(o.length){case 0:return i.call(n);case 1:return i.call(n,o[0]);case 2:return i.call(n,o[0],o[1]);case 3:return i.call(n,o[0],o[1],o[2])}return i.apply(n,o)}r.exports=e},function(r,t,e){function i(s,a,l){(l===void 0||o(s[a],l))&&(l!==void 0||a in s)||n(s,a,l)}var n=e(10),o=e(8);r.exports=i},function(r,t,e){function i(y,h,d,u,c){y!==h&&s(h,function(m,_){if(c||(c=new n),l(m))a(y,h,_,d,i,u,c);else{var g=u?u(p(y,_),m,_+"",y,h,c):void 0;g===void 0&&(g=m),o(y,_,g)}},f)}var n=e(48),o=e(19),s=e(53),a=e(58),l=e(0),f=e(34),p=e(27);r.exports=i},function(r,t,e){function i(a,l){return s(o(a,l,n),a+"")}var n=e(28),o=e(96),s=e(97);r.exports=i},function(r,t,e){var i=e(11),n=function(){try{var o=i(Object,"defineProperty");return o({},"",{}),o}catch(s){}}();r.exports=n},function(r,t,e){(function(i){var n=typeof i=="object"&&i&&i.Object===Object&&i;r.exports=n}).call(t,e(35))},function(r,t,e){var i=e(95),n=i(Object.getPrototypeOf,Object);r.exports=n},function(r,t){function e(o,s){var a=typeof o;return!!(s=s==null?i:s)&&(a=="number"||a!="symbol"&&n.test(o))&&o>-1&&o%1==0&&o<s}var i=9007199254740991,n=/^(?:0|[1-9]\d*)$/;r.exports=e},function(r,t){function e(n){var o=n&&n.constructor;return n===(typeof o=="function"&&o.prototype||i)}var i=Object.prototype;r.exports=e},function(r,t){function e(i,n){if((n!=="constructor"||typeof i[n]!="function")&&n!="__proto__")return i[n]}r.exports=e},function(r,t){function e(i){return i}r.exports=e},function(r,t,e){var i=e(54),n=e(2),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(f){return n(f)&&s.call(f,"callee")&&!a.call(f,"callee")};r.exports=l},function(r,t){var e=Array.isArray;r.exports=e},function(r,t,e){(function(i){var n=e(1),o=e(109),s=typeof t=="object"&&t&&!t.nodeType&&t,a=s&&typeof i=="object"&&i&&!i.nodeType&&i,l=a&&a.exports===s,f=l?n.Buffer:void 0,p=f?f.isBuffer:void 0,y=p||o;i.exports=y}).call(t,e(14)(r))},function(r,t){function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=i}var i=9007199254740991;r.exports=e},function(r,t,e){var i=e(56),n=e(61),o=e(93),s=o&&o.isTypedArray,a=s?n(s):i;r.exports=a},function(r,t,e){function i(a){return s(a)?n(a,!0):o(a)}var n=e(50),o=e(57),s=e(12);r.exports=i},function(r,t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(i){typeof window=="object"&&(e=window)}r.exports=e},function(r,t,e){"use strict";t.a={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}}},function(r,t,e){"use strict";function i(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?l:f}function o(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}e.d(t,"a",function(){return a});var s=e(9),a=function(l){function f(){var p,y,h,d;i(this,f);for(var u=arguments.length,c=Array(u),m=0;m<u;m++)c[m]=arguments[m];return y=h=n(this,(p=f.__proto__||Object.getPrototypeOf(f)).call.apply(p,[this].concat(c))),h.onCreate=function(){h.display=document.createElement("div"),Object.assign(h.display.style,h.options.displayStyles),h.overlay.appendChild(h.display)},h.onDestroy=function(){},h.onUpdate=function(){if(h.display&&h.img){var _=h.getCurrentSize();if(h.display.innerHTML=_.join(" &times; "),_[0]>120&&_[1]>30)Object.assign(h.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(h.img.style.float=="right"){var g=h.display.getBoundingClientRect();Object.assign(h.display.style,{right:"auto",bottom:"-"+(g.height+4)+"px",left:"-"+(g.width+4)+"px"})}else{var v=h.display.getBoundingClientRect();Object.assign(h.display.style,{right:"-"+(v.width+4)+"px",bottom:"-"+(v.height+4)+"px",left:"auto"})}}},h.getCurrentSize=function(){return[h.img.width,Math.round(h.img.width/h.img.naturalWidth*h.img.naturalHeight)]},d=y,n(h,d)}return o(f,l),f}(s.a)},function(r,t,e){"use strict";function i(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?l:f}function o(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}e.d(t,"a",function(){return a});var s=e(9),a=function(l){function f(){var p,y,h,d;i(this,f);for(var u=arguments.length,c=Array(u),m=0;m<u;m++)c[m]=arguments[m];return y=h=n(this,(p=f.__proto__||Object.getPrototypeOf(f)).call.apply(p,[this].concat(c))),h.onCreate=function(){h.boxes=[],h.addBox("nwse-resize"),h.addBox("nesw-resize"),h.addBox("nwse-resize"),h.addBox("nesw-resize"),h.positionBoxes()},h.onDestroy=function(){h.setCursor("")},h.positionBoxes=function(){var _=-parseFloat(h.options.handleStyles.width)/2+"px",g=-parseFloat(h.options.handleStyles.height)/2+"px";[{left:_,top:g},{right:_,top:g},{right:_,bottom:g},{left:_,bottom:g}].forEach(function(v,w){Object.assign(h.boxes[w].style,v)})},h.addBox=function(_){var g=document.createElement("div");Object.assign(g.style,h.options.handleStyles),g.style.cursor=_,g.style.width=h.options.handleStyles.width+"px",g.style.height=h.options.handleStyles.height+"px",g.addEventListener("mousedown",h.handleMousedown,!1),h.overlay.appendChild(g),h.boxes.push(g)},h.handleMousedown=function(_){h.dragBox=_.target,h.dragStartX=_.clientX,h.preDragWidth=h.img.width||h.img.naturalWidth,h.setCursor(h.dragBox.style.cursor),document.addEventListener("mousemove",h.handleDrag,!1),document.addEventListener("mouseup",h.handleMouseup,!1)},h.handleMouseup=function(){h.setCursor(""),document.removeEventListener("mousemove",h.handleDrag),document.removeEventListener("mouseup",h.handleMouseup)},h.handleDrag=function(_){if(h.img){var g=_.clientX-h.dragStartX;h.dragBox===h.boxes[0]||h.dragBox===h.boxes[3]?h.img.width=Math.round(h.preDragWidth-g):h.img.width=Math.round(h.preDragWidth+g),h.requestUpdate()}},h.setCursor=function(_){[document.body,h.img].forEach(function(g){g.style.cursor=_})},d=y,n(h,d)}return o(f,l),f}(s.a)},function(r,t,e){"use strict";function i(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}function n(b,k){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||typeof k!="object"&&typeof k!="function"?b:k}function o(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(b,k):b.__proto__=k)}e.d(t,"a",function(){return x});var s=e(15),a=e.n(s),l=e(112),f=e.n(l),p=e(111),y=e.n(p),h=e(113),d=e.n(h),u=e(9),c=function(){function b(k,T){for(var P=0;P<T.length;P++){var N=T[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(k,N.key,N)}}return function(k,T,P){return T&&b(k.prototype,T),P&&b(k,P),k}}(),m=a.a.imports.parchment,_=(new m.Attributor.Style("float","float"),new m.Attributor.Style("margin","margin"),new m.Attributor.Style("margin-left","margin-left")),g=new m.Attributor.Style("margin-right","margin-right"),v=new m.Attributor.Style("display","display"),w=new m.Attributor.Attribute("nameClass","class",{scope:m.Scope.INLINE});a.a.register(w);var x=function(b){function k(){var T,P,N,S;i(this,k);for(var R=arguments.length,O=Array(R),C=0;C<R;C++)O[C]=arguments[C];return P=N=n(this,(T=k.__proto__||Object.getPrototypeOf(k)).call.apply(T,[this].concat(O))),N.onCreate=function(){N.toolbar=document.createElement("div"),Object.assign(N.toolbar.style,N.options.toolbarStyles),N.overlay.appendChild(N.toolbar),N._defineAlignments(),N._addToolbarButtons()},N.onDestroy=function(){},N.onUpdate=function(){},N._defineAlignments=function(){N.alignments=[{icon:f.a,apply:function(){N._makeBlock(),g.add(N.img,"auto")},isApplied:function(){return g.value(N.img)=="auto"&&_.value(N.img)!=="auto"}},{icon:y.a,apply:function(){N._makeBlock(),g.add(N.img,"auto"),_.add(N.img,"auto")},isApplied:function(){return _.value(N.img)=="auto"&&g.value(N.img)=="auto"}},{icon:d.a,apply:function(){N._makeBlock(),_.add(N.img,"auto")},isApplied:function(){return _.value(N.img)=="auto"&&g.value(N.img)!=="auto"}}]},N._addToolbarButtons=function(){var q=[];N.alignments.forEach(function(M,V){var W=document.createElement("span");q.push(W),W.innerHTML=M.icon,W.addEventListener("click",function(){q.forEach(function(rt){return rt.style.filter=""}),M.isApplied()?N._unApplyStyles():(N._selectButton(W),N._unApplyStyles(),M.apply()),N.requestUpdate()}),Object.assign(W.style,N.options.toolbarButtonStyles),V>0&&(W.style.borderLeftWidth="0"),Object.assign(W.children[0].style,N.options.toolbarButtonSvgStyles),M.isApplied()&&N._selectButton(W),N.toolbar.appendChild(W)})},N._selectButton=function(q){q.style.filter="invert(20%)"},S=P,n(N,S)}return o(k,b),c(k,[{key:"_unApplyStyles",value:function(){_.remove(this.img),g.remove(this.img),v.remove(this.img)}},{key:"_makeBlock",value:function(){v.add(this.img,"block")}}]),k}(u.a)},function(r,t,e){var i=e(18),n=e(21),o=e(70),s=e(108),a=n(function(l){return l.push(void 0,o),i(s,void 0,l)});r.exports=a},function(r,t,e){"use strict";function i(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?x:b}function n(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}function o(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=e(15),a=e.n(s),l=e(40),f=e.n(l),p=e(36),y=e(37),h=e(39),d=e(38),u=function(){function x(b,k){for(var T=0;T<k.length;T++){var P=k[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,k,T){return k&&x(b.prototype,k),T&&x(b,T),b}}(),c=function x(b,k,T){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,k);if(P===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:x(N,k,T)}if("value"in P)return P.value;var S=P.get;if(S!==void 0)return S.call(T)},m={DisplaySize:y.a,Toolbar:h.a,Resize:d.a},_=function x(b){var k=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,x),this.initializeModules=function(){k.removeModules(),k.modules=k.moduleClasses.map(function(N){return new(m[N]||N)(k)}),k.modules.forEach(function(N){N.onCreate()}),k.onUpdate()},this.onUpdate=function(){k.repositionElements(),k.modules.forEach(function(N){N.onUpdate()})},this.removeModules=function(){k.modules.forEach(function(N){N.onDestroy()}),k.modules=[]},this.handleClick=function(N){if(N.target&&N.target.tagName&&N.target.tagName.toUpperCase()==="IMG"){if(k.img===N.target)return;k.img&&k.hide(),k.show(N.target),N.preventDefault()}else k.img&&k.hide()},this.handleScroll=function(N){k.hide()},this.show=function(N){k.img=N,k.showOverlay(),k.initializeModules()},this.showOverlay=function(){k.overlay&&k.hideOverlay(),k.quill.setSelection(null),k.setUserSelect("none"),document.addEventListener("keyup",k.checkImage,!0),k.quill.root.addEventListener("input",k.checkImage,!0),k.overlay=document.createElement("div"),Object.assign(k.overlay.style,k.options.overlayStyles),k.quill.root.parentNode.appendChild(k.overlay),k.repositionElements()},this.hideOverlay=function(){k.overlay&&(k.quill.root.parentNode.removeChild(k.overlay),k.overlay=void 0,document.removeEventListener("keyup",k.checkImage),k.quill.root.removeEventListener("input",k.checkImage),k.setUserSelect(""))},this.repositionElements=function(){if(k.overlay&&k.img){var N=k.quill.root.parentNode,S=k.img.getBoundingClientRect(),R=N.getBoundingClientRect();Object.assign(k.overlay.style,{left:S.left-R.left-1+N.scrollLeft+"px",top:S.top-R.top+N.scrollTop+"px",width:S.width+"px",height:S.height+"px"})}},this.hide=function(){k.hideOverlay(),k.removeModules(),k.img=void 0},this.setUserSelect=function(N){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(S){k.quill.root.style[S]=N,document.documentElement.style[S]=N})},this.checkImage=function(N){k.img&&(N.keyCode!=46&&N.keyCode!=8||(window.Quill||a.a).find(k.img).deleteAt(0),k.hide())},this.quill=b;var P=!1;T.modules&&(P=T.modules.slice()),this.options=f()({},T,p.a),P!==!1&&(this.options.modules=P),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.addEventListener("mscontrolselect",this.handleClick,!1),this.quill.root.addEventListener("scroll",this.handleScroll,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]};if(t.default=_,window.Quill){var g=["alt","height","width","style"],v=window.Quill.import("formats/image"),w=function(x){function b(){return o(this,b),i(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return n(b,x),u(b,[{key:"format",value:function(k,T){g.indexOf(k)>-1?T?this.domNode.setAttribute(k,T):this.domNode.removeAttribute(k):c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,k,T)}}],[{key:"formats",value:function(k){return g.reduce(function(T,P){return k.hasAttribute(P)&&(T[P]=k.getAttribute(P)),T},{})}}]),b}(v);window.Quill.register(w,!0),typeof Object.assign!="function"&&(Object.assign=function(x){if(x==null)throw new TypeError("Cannot convert undefined or null to object");x=Object(x);for(var b=1;b<arguments.length;b++){var k=arguments[b];if(k!=null)for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(x[T]=k[T])}return x}),window.Quill.register("modules/imageResize",_)}},function(r,t,e){"use strict";function i(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=m.indexOf("=");return g===-1&&(g=_),[g,g===_?0:4-g%4]}function n(m){var _=i(m),g=_[0],v=_[1];return 3*(g+v)/4-v}function o(m,_,g){return 3*(_+g)/4-g}function s(m){var _,g,v=i(m),w=v[0],x=v[1],b=new h(o(m,w,x)),k=0,T=x>0?w-4:w;for(g=0;g<T;g+=4)_=y[m.charCodeAt(g)]<<18|y[m.charCodeAt(g+1)]<<12|y[m.charCodeAt(g+2)]<<6|y[m.charCodeAt(g+3)],b[k++]=_>>16&255,b[k++]=_>>8&255,b[k++]=255&_;return x===2&&(_=y[m.charCodeAt(g)]<<2|y[m.charCodeAt(g+1)]>>4,b[k++]=255&_),x===1&&(_=y[m.charCodeAt(g)]<<10|y[m.charCodeAt(g+1)]<<4|y[m.charCodeAt(g+2)]>>2,b[k++]=_>>8&255,b[k++]=255&_),b}function a(m){return p[m>>18&63]+p[m>>12&63]+p[m>>6&63]+p[63&m]}function l(m,_,g){for(var v,w=[],x=_;x<g;x+=3)v=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(255&m[x+2]),w.push(a(v));return w.join("")}function f(m){for(var _,g=m.length,v=g%3,w=[],x=0,b=g-v;x<b;x+=16383)w.push(l(m,x,x+16383>b?b:x+16383));return v===1?(_=m[g-1],w.push(p[_>>2]+p[_<<4&63]+"==")):v===2&&(_=(m[g-2]<<8)+m[g-1],w.push(p[_>>10]+p[_>>4&63]+p[_<<2&63]+"=")),w.join("")}t.byteLength=n,t.toByteArray=s,t.fromByteArray=f;for(var p=[],y=[],h=typeof Uint8Array!="undefined"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=d.length;u<c;++u)p[u]=d[u],y[d.charCodeAt(u)]=u;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},function(r,t,e){"use strict";(function(i){function n(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(E,A){if(n()<A)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(E=new Uint8Array(A),E.__proto__=s.prototype):(E===null&&(E=new s(A)),E.length=A),E}function s(E,A,j){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(E,A,j);if(typeof E=="number"){if(typeof A=="string")throw new Error("If encoding is specified then the first argument must be a string");return p(this,E)}return a(this,E,A,j)}function a(E,A,j,z){if(typeof A=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&A instanceof ArrayBuffer?d(E,A,j,z):typeof A=="string"?y(E,A,j):u(E,A)}function l(E){if(typeof E!="number")throw new TypeError('"size" argument must be a number');if(E<0)throw new RangeError('"size" argument must not be negative')}function f(E,A,j,z){return l(A),A<=0?o(E,A):j!==void 0?typeof z=="string"?o(E,A).fill(j,z):o(E,A).fill(j):o(E,A)}function p(E,A){if(l(A),E=o(E,A<0?0:0|c(A)),!s.TYPED_ARRAY_SUPPORT)for(var j=0;j<A;++j)E[j]=0;return E}function y(E,A,j){if(typeof j=="string"&&j!==""||(j="utf8"),!s.isEncoding(j))throw new TypeError('"encoding" must be a valid string encoding');var z=0|_(A,j);E=o(E,z);var Y=E.write(A,j);return Y!==z&&(E=E.slice(0,Y)),E}function h(E,A){var j=A.length<0?0:0|c(A.length);E=o(E,j);for(var z=0;z<j;z+=1)E[z]=255&A[z];return E}function d(E,A,j,z){if(A.byteLength,j<0||A.byteLength<j)throw new RangeError("'offset' is out of bounds");if(A.byteLength<j+(z||0))throw new RangeError("'length' is out of bounds");return A=j===void 0&&z===void 0?new Uint8Array(A):z===void 0?new Uint8Array(A,j):new Uint8Array(A,j,z),s.TYPED_ARRAY_SUPPORT?(E=A,E.__proto__=s.prototype):E=h(E,A),E}function u(E,A){if(s.isBuffer(A)){var j=0|c(A.length);return E=o(E,j),E.length===0||A.copy(E,0,0,j),E}if(A){if(typeof ArrayBuffer!="undefined"&&A.buffer instanceof ArrayBuffer||"length"in A)return typeof A.length!="number"||bt(A.length)?o(E,0):h(E,A);if(A.type==="Buffer"&&Ct(A.data))return h(E,A.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function c(E){if(E>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|E}function m(E){return+E!=E&&(E=0),s.alloc(+E)}function _(E,A){if(s.isBuffer(E))return E.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(E)||E instanceof ArrayBuffer))return E.byteLength;typeof E!="string"&&(E=""+E);var j=E.length;if(j===0)return 0;for(var z=!1;;)switch(A){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return G(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return ct(E).length;default:if(z)return G(E).length;A=(""+A).toLowerCase(),z=!0}}function g(E,A,j){var z=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,A>>>=0,j<=A))return"";for(E||(E="utf8");;)switch(E){case"hex":return V(this,A,j);case"utf8":case"utf-8":return O(this,A,j);case"ascii":return q(this,A,j);case"latin1":case"binary":return M(this,A,j);case"base64":return R(this,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,A,j);default:if(z)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),z=!0}}function v(E,A,j){var z=E[A];E[A]=E[j],E[j]=z}function w(E,A,j,z,Y){if(E.length===0)return-1;if(typeof j=="string"?(z=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,isNaN(j)&&(j=Y?0:E.length-1),j<0&&(j=E.length+j),j>=E.length){if(Y)return-1;j=E.length-1}else if(j<0){if(!Y)return-1;j=0}if(typeof A=="string"&&(A=s.from(A,z)),s.isBuffer(A))return A.length===0?-1:x(E,A,j,z,Y);if(typeof A=="number")return A&=255,s.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(E,A,j):Uint8Array.prototype.lastIndexOf.call(E,A,j):x(E,[A],j,z,Y);throw new TypeError("val must be string, number or Buffer")}function x(E,A,j,z,Y){function st(en,rn){return _t===1?en[rn]:en.readUInt16BE(rn*_t)}var _t=1,xt=E.length,Lt=A.length;if(z!==void 0&&((z=String(z).toLowerCase())==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(E.length<2||A.length<2)return-1;_t=2,xt/=2,Lt/=2,j/=2}var At;if(Y){var St=-1;for(At=j;At<xt;At++)if(st(E,At)===st(A,St===-1?0:At-St)){if(St===-1&&(St=At),At-St+1===Lt)return St*_t}else St!==-1&&(At-=At-St),St=-1}else for(j+Lt>xt&&(j=xt-Lt),At=j;At>=0;At--){for(var Ft=!0,$r=0;$r<Lt;$r++)if(st(E,At+$r)!==st(A,$r)){Ft=!1;break}if(Ft)return At}return-1}function b(E,A,j,z){j=Number(j)||0;var Y=E.length-j;z?(z=Number(z))>Y&&(z=Y):z=Y;var st=A.length;if(st%2!=0)throw new TypeError("Invalid hex string");z>st/2&&(z=st/2);for(var _t=0;_t<z;++_t){var xt=parseInt(A.substr(2*_t,2),16);if(isNaN(xt))return _t;E[j+_t]=xt}return _t}function k(E,A,j,z){return gt(G(A,E.length-j),E,j,z)}function T(E,A,j,z){return gt(nt(A),E,j,z)}function P(E,A,j,z){return T(E,A,j,z)}function N(E,A,j,z){return gt(ct(A),E,j,z)}function S(E,A,j,z){return gt(ft(A,E.length-j),E,j,z)}function R(E,A,j){return A===0&&j===E.length?Et.fromByteArray(E):Et.fromByteArray(E.slice(A,j))}function O(E,A,j){j=Math.min(E.length,j);for(var z=[],Y=A;Y<j;){var st=E[Y],_t=null,xt=st>239?4:st>223?3:st>191?2:1;if(Y+xt<=j){var Lt,At,St,Ft;switch(xt){case 1:st<128&&(_t=st);break;case 2:Lt=E[Y+1],(192&Lt)==128&&(Ft=(31&st)<<6|63&Lt)>127&&(_t=Ft);break;case 3:Lt=E[Y+1],At=E[Y+2],(192&Lt)==128&&(192&At)==128&&(Ft=(15&st)<<12|(63&Lt)<<6|63&At)>2047&&(Ft<55296||Ft>57343)&&(_t=Ft);break;case 4:Lt=E[Y+1],At=E[Y+2],St=E[Y+3],(192&Lt)==128&&(192&At)==128&&(192&St)==128&&(Ft=(15&st)<<18|(63&Lt)<<12|(63&At)<<6|63&St)>65535&&Ft<1114112&&(_t=Ft)}}_t===null?(_t=65533,xt=1):_t>65535&&(_t-=65536,z.push(_t>>>10&1023|55296),_t=56320|1023&_t),z.push(_t),Y+=xt}return C(z)}function C(E){var A=E.length;if(A<=Ut)return String.fromCharCode.apply(String,E);for(var j="",z=0;z<A;)j+=String.fromCharCode.apply(String,E.slice(z,z+=Ut));return j}function q(E,A,j){var z="";j=Math.min(E.length,j);for(var Y=A;Y<j;++Y)z+=String.fromCharCode(127&E[Y]);return z}function M(E,A,j){var z="";j=Math.min(E.length,j);for(var Y=A;Y<j;++Y)z+=String.fromCharCode(E[Y]);return z}function V(E,A,j){var z=E.length;(!A||A<0)&&(A=0),(!j||j<0||j>z)&&(j=z);for(var Y="",st=A;st<j;++st)Y+=U(E[st]);return Y}function W(E,A,j){for(var z=E.slice(A,j),Y="",st=0;st<z.length;st+=2)Y+=String.fromCharCode(z[st]+256*z[st+1]);return Y}function rt(E,A,j){if(E%1!=0||E<0)throw new RangeError("offset is not uint");if(E+A>j)throw new RangeError("Trying to access beyond buffer length")}function tt(E,A,j,z,Y,st){if(!s.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>Y||A<st)throw new RangeError('"value" argument is out of bounds');if(j+z>E.length)throw new RangeError("Index out of range")}function Q(E,A,j,z){A<0&&(A=65535+A+1);for(var Y=0,st=Math.min(E.length-j,2);Y<st;++Y)E[j+Y]=(A&255<<8*(z?Y:1-Y))>>>8*(z?Y:1-Y)}function I(E,A,j,z){A<0&&(A=4294967295+A+1);for(var Y=0,st=Math.min(E.length-j,4);Y<st;++Y)E[j+Y]=A>>>8*(z?Y:3-Y)&255}function H(E,A,j,z,Y,st){if(j+z>E.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function B(E,A,j,z,Y){return Y||H(E,A,j,4,34028234663852886e22,-34028234663852886e22),Ot.write(E,A,j,z,23,4),j+4}function K(E,A,j,z,Y){return Y||H(E,A,j,8,17976931348623157e292,-17976931348623157e292),Ot.write(E,A,j,z,52,8),j+8}function X(E){if(E=J(E).replace(qt,""),E.length<2)return"";for(;E.length%4!=0;)E+="=";return E}function J(E){return E.trim?E.trim():E.replace(/^\s+|\s+$/g,"")}function U(E){return E<16?"0"+E.toString(16):E.toString(16)}function G(E,A){A=A||1/0;for(var j,z=E.length,Y=null,st=[],_t=0;_t<z;++_t){if((j=E.charCodeAt(_t))>55295&&j<57344){if(!Y){if(j>56319){(A-=3)>-1&&st.push(239,191,189);continue}if(_t+1===z){(A-=3)>-1&&st.push(239,191,189);continue}Y=j;continue}if(j<56320){(A-=3)>-1&&st.push(239,191,189),Y=j;continue}j=65536+(Y-55296<<10|j-56320)}else Y&&(A-=3)>-1&&st.push(239,191,189);if(Y=null,j<128){if((A-=1)<0)break;st.push(j)}else if(j<2048){if((A-=2)<0)break;st.push(j>>6|192,63&j|128)}else if(j<65536){if((A-=3)<0)break;st.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;st.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return st}function nt(E){for(var A=[],j=0;j<E.length;++j)A.push(255&E.charCodeAt(j));return A}function ft(E,A){for(var j,z,Y,st=[],_t=0;_t<E.length&&!((A-=2)<0);++_t)j=E.charCodeAt(_t),z=j>>8,Y=j%256,st.push(Y),st.push(z);return st}function ct(E){return Et.toByteArray(X(E))}function gt(E,A,j,z){for(var Y=0;Y<z&&!(Y+j>=A.length||Y>=E.length);++Y)A[Y+j]=E[Y];return Y}function bt(E){return E!==E}var Et=e(42),Ot=e(44),Ct=e(45);t.Buffer=s,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var E=new Uint8Array(1);return E.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},E.foo()===42&&typeof E.subarray=="function"&&E.subarray(1,1).byteLength===0}catch(A){return!1}}(),t.kMaxLength=n(),s.poolSize=8192,s._augment=function(E){return E.__proto__=s.prototype,E},s.from=function(E,A,j){return a(null,E,A,j)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(E,A,j){return f(null,E,A,j)},s.allocUnsafe=function(E){return p(null,E)},s.allocUnsafeSlow=function(E){return p(null,E)},s.isBuffer=function(E){return!(E==null||!E._isBuffer)},s.compare=function(E,A){if(!s.isBuffer(E)||!s.isBuffer(A))throw new TypeError("Arguments must be Buffers");if(E===A)return 0;for(var j=E.length,z=A.length,Y=0,st=Math.min(j,z);Y<st;++Y)if(E[Y]!==A[Y]){j=E[Y],z=A[Y];break}return j<z?-1:z<j?1:0},s.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(E,A){if(!Ct(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return s.alloc(0);var j;if(A===void 0)for(A=0,j=0;j<E.length;++j)A+=E[j].length;var z=s.allocUnsafe(A),Y=0;for(j=0;j<E.length;++j){var st=E[j];if(!s.isBuffer(st))throw new TypeError('"list" argument must be an Array of Buffers');st.copy(z,Y),Y+=st.length}return z},s.byteLength=_,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var E=this.length;if(E%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<E;A+=2)v(this,A,A+1);return this},s.prototype.swap32=function(){var E=this.length;if(E%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<E;A+=4)v(this,A,A+3),v(this,A+1,A+2);return this},s.prototype.swap64=function(){var E=this.length;if(E%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<E;A+=8)v(this,A,A+7),v(this,A+1,A+6),v(this,A+2,A+5),v(this,A+3,A+4);return this},s.prototype.toString=function(){var E=0|this.length;return E===0?"":arguments.length===0?O(this,0,E):g.apply(this,arguments)},s.prototype.equals=function(E){if(!s.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E||s.compare(this,E)===0},s.prototype.inspect=function(){var E="",A=t.INSPECT_MAX_BYTES;return this.length>0&&(E=this.toString("hex",0,A).match(/.{2}/g).join(" "),this.length>A&&(E+=" ... ")),"<Buffer "+E+">"},s.prototype.compare=function(E,A,j,z,Y){if(!s.isBuffer(E))throw new TypeError("Argument must be a Buffer");if(A===void 0&&(A=0),j===void 0&&(j=E?E.length:0),z===void 0&&(z=0),Y===void 0&&(Y=this.length),A<0||j>E.length||z<0||Y>this.length)throw new RangeError("out of range index");if(z>=Y&&A>=j)return 0;if(z>=Y)return-1;if(A>=j)return 1;if(A>>>=0,j>>>=0,z>>>=0,Y>>>=0,this===E)return 0;for(var st=Y-z,_t=j-A,xt=Math.min(st,_t),Lt=this.slice(z,Y),At=E.slice(A,j),St=0;St<xt;++St)if(Lt[St]!==At[St]){st=Lt[St],_t=At[St];break}return st<_t?-1:_t<st?1:0},s.prototype.includes=function(E,A,j){return this.indexOf(E,A,j)!==-1},s.prototype.indexOf=function(E,A,j){return w(this,E,A,j,!0)},s.prototype.lastIndexOf=function(E,A,j){return w(this,E,A,j,!1)},s.prototype.write=function(E,A,j,z){if(A===void 0)z="utf8",j=this.length,A=0;else if(j===void 0&&typeof A=="string")z=A,j=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A|=0,isFinite(j)?(j|=0,z===void 0&&(z="utf8")):(z=j,j=void 0)}var Y=this.length-A;if((j===void 0||j>Y)&&(j=Y),E.length>0&&(j<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var st=!1;;)switch(z){case"hex":return b(this,E,A,j);case"utf8":case"utf-8":return k(this,E,A,j);case"ascii":return T(this,E,A,j);case"latin1":case"binary":return P(this,E,A,j);case"base64":return N(this,E,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,E,A,j);default:if(st)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),st=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ut=4096;s.prototype.slice=function(E,A){var j=this.length;E=~~E,A=A===void 0?j:~~A,E<0?(E+=j)<0&&(E=0):E>j&&(E=j),A<0?(A+=j)<0&&(A=0):A>j&&(A=j),A<E&&(A=E);var z;if(s.TYPED_ARRAY_SUPPORT)z=this.subarray(E,A),z.__proto__=s.prototype;else{var Y=A-E;z=new s(Y,void 0);for(var st=0;st<Y;++st)z[st]=this[st+E]}return z},s.prototype.readUIntLE=function(E,A,j){E|=0,A|=0,j||rt(E,A,this.length);for(var z=this[E],Y=1,st=0;++st<A&&(Y*=256);)z+=this[E+st]*Y;return z},s.prototype.readUIntBE=function(E,A,j){E|=0,A|=0,j||rt(E,A,this.length);for(var z=this[E+--A],Y=1;A>0&&(Y*=256);)z+=this[E+--A]*Y;return z},s.prototype.readUInt8=function(E,A){return A||rt(E,1,this.length),this[E]},s.prototype.readUInt16LE=function(E,A){return A||rt(E,2,this.length),this[E]|this[E+1]<<8},s.prototype.readUInt16BE=function(E,A){return A||rt(E,2,this.length),this[E]<<8|this[E+1]},s.prototype.readUInt32LE=function(E,A){return A||rt(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+16777216*this[E+3]},s.prototype.readUInt32BE=function(E,A){return A||rt(E,4,this.length),16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])},s.prototype.readIntLE=function(E,A,j){E|=0,A|=0,j||rt(E,A,this.length);for(var z=this[E],Y=1,st=0;++st<A&&(Y*=256);)z+=this[E+st]*Y;return Y*=128,z>=Y&&(z-=Math.pow(2,8*A)),z},s.prototype.readIntBE=function(E,A,j){E|=0,A|=0,j||rt(E,A,this.length);for(var z=A,Y=1,st=this[E+--z];z>0&&(Y*=256);)st+=this[E+--z]*Y;return Y*=128,st>=Y&&(st-=Math.pow(2,8*A)),st},s.prototype.readInt8=function(E,A){return A||rt(E,1,this.length),128&this[E]?-1*(255-this[E]+1):this[E]},s.prototype.readInt16LE=function(E,A){A||rt(E,2,this.length);var j=this[E]|this[E+1]<<8;return 32768&j?4294901760|j:j},s.prototype.readInt16BE=function(E,A){A||rt(E,2,this.length);var j=this[E+1]|this[E]<<8;return 32768&j?4294901760|j:j},s.prototype.readInt32LE=function(E,A){return A||rt(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},s.prototype.readInt32BE=function(E,A){return A||rt(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},s.prototype.readFloatLE=function(E,A){return A||rt(E,4,this.length),Ot.read(this,E,!0,23,4)},s.prototype.readFloatBE=function(E,A){return A||rt(E,4,this.length),Ot.read(this,E,!1,23,4)},s.prototype.readDoubleLE=function(E,A){return A||rt(E,8,this.length),Ot.read(this,E,!0,52,8)},s.prototype.readDoubleBE=function(E,A){return A||rt(E,8,this.length),Ot.read(this,E,!1,52,8)},s.prototype.writeUIntLE=function(E,A,j,z){E=+E,A|=0,j|=0,!z&&tt(this,E,A,j,Math.pow(2,8*j)-1,0);var Y=1,st=0;for(this[A]=255&E;++st<j&&(Y*=256);)this[A+st]=E/Y&255;return A+j},s.prototype.writeUIntBE=function(E,A,j,z){E=+E,A|=0,j|=0,!z&&tt(this,E,A,j,Math.pow(2,8*j)-1,0);var Y=j-1,st=1;for(this[A+Y]=255&E;--Y>=0&&(st*=256);)this[A+Y]=E/st&255;return A+j},s.prototype.writeUInt8=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,1,255,0),s.TYPED_ARRAY_SUPPORT||(E=Math.floor(E)),this[A]=255&E,A+1},s.prototype.writeUInt16LE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[A]=255&E,this[A+1]=E>>>8):Q(this,E,A,!0),A+2},s.prototype.writeUInt16BE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[A]=E>>>8,this[A+1]=255&E):Q(this,E,A,!1),A+2},s.prototype.writeUInt32LE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[A+3]=E>>>24,this[A+2]=E>>>16,this[A+1]=E>>>8,this[A]=255&E):I(this,E,A,!0),A+4},s.prototype.writeUInt32BE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[A]=E>>>24,this[A+1]=E>>>16,this[A+2]=E>>>8,this[A+3]=255&E):I(this,E,A,!1),A+4},s.prototype.writeIntLE=function(E,A,j,z){if(E=+E,A|=0,!z){var Y=Math.pow(2,8*j-1);tt(this,E,A,j,Y-1,-Y)}var st=0,_t=1,xt=0;for(this[A]=255&E;++st<j&&(_t*=256);)E<0&&xt===0&&this[A+st-1]!==0&&(xt=1),this[A+st]=(E/_t>>0)-xt&255;return A+j},s.prototype.writeIntBE=function(E,A,j,z){if(E=+E,A|=0,!z){var Y=Math.pow(2,8*j-1);tt(this,E,A,j,Y-1,-Y)}var st=j-1,_t=1,xt=0;for(this[A+st]=255&E;--st>=0&&(_t*=256);)E<0&&xt===0&&this[A+st+1]!==0&&(xt=1),this[A+st]=(E/_t>>0)-xt&255;return A+j},s.prototype.writeInt8=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,1,127,-128),s.TYPED_ARRAY_SUPPORT||(E=Math.floor(E)),E<0&&(E=255+E+1),this[A]=255&E,A+1},s.prototype.writeInt16LE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[A]=255&E,this[A+1]=E>>>8):Q(this,E,A,!0),A+2},s.prototype.writeInt16BE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[A]=E>>>8,this[A+1]=255&E):Q(this,E,A,!1),A+2},s.prototype.writeInt32LE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[A]=255&E,this[A+1]=E>>>8,this[A+2]=E>>>16,this[A+3]=E>>>24):I(this,E,A,!0),A+4},s.prototype.writeInt32BE=function(E,A,j){return E=+E,A|=0,j||tt(this,E,A,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),s.TYPED_ARRAY_SUPPORT?(this[A]=E>>>24,this[A+1]=E>>>16,this[A+2]=E>>>8,this[A+3]=255&E):I(this,E,A,!1),A+4},s.prototype.writeFloatLE=function(E,A,j){return B(this,E,A,!0,j)},s.prototype.writeFloatBE=function(E,A,j){return B(this,E,A,!1,j)},s.prototype.writeDoubleLE=function(E,A,j){return K(this,E,A,!0,j)},s.prototype.writeDoubleBE=function(E,A,j){return K(this,E,A,!1,j)},s.prototype.copy=function(E,A,j,z){if(j||(j=0),z||z===0||(z=this.length),A>=E.length&&(A=E.length),A||(A=0),z>0&&z<j&&(z=j),z===j||E.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("sourceStart out of bounds");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),E.length-A<z-j&&(z=E.length-A+j);var Y,st=z-j;if(this===E&&j<A&&A<z)for(Y=st-1;Y>=0;--Y)E[Y+A]=this[Y+j];else if(st<1e3||!s.TYPED_ARRAY_SUPPORT)for(Y=0;Y<st;++Y)E[Y+A]=this[Y+j];else Uint8Array.prototype.set.call(E,this.subarray(j,j+st),A);return st},s.prototype.fill=function(E,A,j,z){if(typeof E=="string"){if(typeof A=="string"?(z=A,A=0,j=this.length):typeof j=="string"&&(z=j,j=this.length),E.length===1){var Y=E.charCodeAt(0);Y<256&&(E=Y)}if(z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!s.isEncoding(z))throw new TypeError("Unknown encoding: "+z)}else typeof E=="number"&&(E&=255);if(A<0||this.length<A||this.length<j)throw new RangeError("Out of range index");if(j<=A)return this;A>>>=0,j=j===void 0?this.length:j>>>0,E||(E=0);var st;if(typeof E=="number")for(st=A;st<j;++st)this[st]=E;else{var _t=s.isBuffer(E)?E:G(new s(E,z).toString()),xt=_t.length;for(st=0;st<j-A;++st)this[st+A]=_t[st%xt]}return this};var qt=/[^+\/0-9A-Za-z-_]/g}).call(t,e(35))},function(r,t){t.read=function(e,i,n,o,s){var a,l,f=8*s-o-1,p=(1<<f)-1,y=p>>1,h=-7,d=n?s-1:0,u=n?-1:1,c=e[i+d];for(d+=u,a=c&(1<<-h)-1,c>>=-h,h+=f;h>0;a=256*a+e[i+d],d+=u,h-=8);for(l=a&(1<<-h)-1,a>>=-h,h+=o;h>0;l=256*l+e[i+d],d+=u,h-=8);if(a===0)a=1-y;else{if(a===p)return l?NaN:1/0*(c?-1:1);l+=Math.pow(2,o),a-=y}return(c?-1:1)*l*Math.pow(2,a-o)},t.write=function(e,i,n,o,s,a){var l,f,p,y=8*a-s-1,h=(1<<y)-1,d=h>>1,u=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=o?0:a-1,m=o?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(f=isNaN(i)?1:0,l=h):(l=Math.floor(Math.log(i)/Math.LN2),i*(p=Math.pow(2,-l))<1&&(l--,p*=2),i+=l+d>=1?u/p:u*Math.pow(2,1-d),i*p>=2&&(l++,p/=2),l+d>=h?(f=0,l=h):l+d>=1?(f=(i*p-1)*Math.pow(2,s),l+=d):(f=i*Math.pow(2,d-1)*Math.pow(2,s),l=0));s>=8;e[n+c]=255&f,c+=m,f/=256,s-=8);for(l=l<<s|f,y+=s;y>0;e[n+c]=255&l,c+=m,l/=256,y-=8);e[n+c-m]|=128*_}},function(r,t){var e={}.toString;r.exports=Array.isArray||function(i){return e.call(i)=="[object Array]"}},function(r,t,e){function i(f){var p=-1,y=f==null?0:f.length;for(this.clear();++p<y;){var h=f[p];this.set(h[0],h[1])}}var n=e(73),o=e(74),s=e(75),a=e(76),l=e(77);i.prototype.clear=n,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,t,e){function i(f){var p=-1,y=f==null?0:f.length;for(this.clear();++p<y;){var h=f[p];this.set(h[0],h[1])}}var n=e(87),o=e(88),s=e(89),a=e(90),l=e(91);i.prototype.clear=n,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,t,e){function i(p){var y=this.__data__=new n(p);this.size=y.size}var n=e(3),o=e(99),s=e(100),a=e(101),l=e(102),f=e(103);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=f,r.exports=i},function(r,t,e){var i=e(1),n=i.Uint8Array;r.exports=n},function(r,t,e){function i(h,d){var u=s(h),c=!u&&o(h),m=!u&&!c&&a(h),_=!u&&!c&&!m&&f(h),g=u||c||m||_,v=g?n(h.length,String):[],w=v.length;for(var x in h)!d&&!y.call(h,x)||g&&(x=="length"||m&&(x=="offset"||x=="parent")||_&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||l(x,w))||v.push(x);return v}var n=e(60),o=e(29),s=e(30),a=e(31),l=e(25),f=e(33),p=Object.prototype,y=p.hasOwnProperty;r.exports=i},function(r,t,e){function i(l,f,p){var y=l[f];a.call(l,f)&&o(y,p)&&(p!==void 0||f in l)||n(l,f,p)}var n=e(10),o=e(8),s=Object.prototype,a=s.hasOwnProperty;r.exports=i},function(r,t,e){var i=e(0),n=Object.create,o=function(){function s(){}return function(a){if(!i(a))return{};if(n)return n(a);s.prototype=a;var l=new s;return s.prototype=void 0,l}}();r.exports=o},function(r,t,e){var i=e(69),n=i();r.exports=n},function(r,t,e){function i(a){return o(a)&&n(a)==s}var n=e(5),o=e(2),s="[object Arguments]";r.exports=i},function(r,t,e){function i(c){return!(!s(c)||o(c))&&(n(c)?u:f).test(a(c))}var n=e(13),o=e(81),s=e(0),a=e(104),l=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,p=Function.prototype,y=Object.prototype,h=p.toString,d=y.hasOwnProperty,u=RegExp("^"+h.call(d).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");r.exports=i},function(r,t,e){function i(l){return s(l)&&o(l.length)&&!!a[n(l)]}var n=e(5),o=e(32),s=e(2),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,r.exports=i},function(r,t,e){function i(f){if(!n(f))return s(f);var p=o(f),y=[];for(var h in f)(h!="constructor"||!p&&l.call(f,h))&&y.push(h);return y}var n=e(0),o=e(26),s=e(92),a=Object.prototype,l=a.hasOwnProperty;r.exports=i},function(r,t,e){function i(v,w,x,b,k,T,P){var N=_(v,x),S=_(w,x),R=P.get(S);if(R)return void n(v,x,R);var O=T?T(N,S,x+"",v,w,P):void 0,C=O===void 0;if(C){var q=p(S),M=!q&&h(S),V=!q&&!M&&m(S);O=S,q||M||V?p(N)?O=N:y(N)?O=a(N):M?(C=!1,O=o(S,!0)):V?(C=!1,O=s(S,!0)):O=[]:c(S)||f(S)?(O=N,f(N)?O=g(N):u(N)&&!d(N)||(O=l(S))):C=!1}C&&(P.set(S,O),k(O,S,b,T,P),P.delete(S)),n(v,x,O)}var n=e(19),o=e(63),s=e(64),a=e(65),l=e(78),f=e(29),p=e(30),y=e(106),h=e(31),d=e(13),u=e(0),c=e(107),m=e(33),_=e(27),g=e(110);r.exports=i},function(r,t,e){var i=e(105),n=e(22),o=e(28),s=n?function(a,l){return n(a,"toString",{configurable:!0,enumerable:!1,value:i(l),writable:!0})}:o;r.exports=s},function(r,t){function e(i,n){for(var o=-1,s=Array(i);++o<i;)s[o]=n(o);return s}r.exports=e},function(r,t){function e(i){return function(n){return i(n)}}r.exports=e},function(r,t,e){function i(o){var s=new o.constructor(o.byteLength);return new n(s).set(new n(o)),s}var n=e(49);r.exports=i},function(r,t,e){(function(i){function n(y,h){if(h)return y.slice();var d=y.length,u=p?p(d):new y.constructor(d);return y.copy(u),u}var o=e(1),s=typeof t=="object"&&t&&!t.nodeType&&t,a=s&&typeof i=="object"&&i&&!i.nodeType&&i,l=a&&a.exports===s,f=l?o.Buffer:void 0,p=f?f.allocUnsafe:void 0;i.exports=n}).call(t,e(14)(r))},function(r,t,e){function i(o,s){var a=s?n(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.length)}var n=e(62);r.exports=i},function(r,t){function e(i,n){var o=-1,s=i.length;for(n||(n=Array(s));++o<s;)n[o]=i[o];return n}r.exports=e},function(r,t,e){function i(s,a,l,f){var p=!l;l||(l={});for(var y=-1,h=a.length;++y<h;){var d=a[y],u=f?f(l[d],s[d],d,l,s):void 0;u===void 0&&(u=s[d]),p?o(l,d,u):n(l,d,u)}return l}var n=e(51),o=e(10);r.exports=i},function(r,t,e){var i=e(1),n=i["__core-js_shared__"];r.exports=n},function(r,t,e){function i(s){return n(function(a,l){var f=-1,p=l.length,y=p>1?l[p-1]:void 0,h=p>2?l[2]:void 0;for(y=s.length>3&&typeof y=="function"?(p--,y):void 0,h&&o(l[0],l[1],h)&&(y=p<3?void 0:y,p=1),a=Object(a);++f<p;){var d=l[f];d&&s(a,d,f,y)}return a})}var n=e(21),o=e(79);r.exports=i},function(r,t){function e(i){return function(n,o,s){for(var a=-1,l=Object(n),f=s(n),p=f.length;p--;){var y=f[i?p:++a];if(o(l[y],y,l)===!1)break}return n}}r.exports=e},function(r,t,e){function i(s,a,l,f,p,y){return o(s)&&o(a)&&(y.set(a,s),n(s,a,void 0,i,y),y.delete(a)),s}var n=e(20),o=e(0);r.exports=i},function(r,t,e){function i(f){var p=s.call(f,l),y=f[l];try{f[l]=void 0;var h=!0}catch(u){}var d=a.call(f);return h&&(p?f[l]=y:delete f[l]),d}var n=e(17),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,l=n?n.toStringTag:void 0;r.exports=i},function(r,t){function e(i,n){return i==null?void 0:i[n]}r.exports=e},function(r,t,e){function i(){this.__data__=n?n(null):{},this.size=0}var n=e(7);r.exports=i},function(r,t){function e(i){var n=this.has(i)&&delete this.__data__[i];return this.size-=n?1:0,n}r.exports=e},function(r,t,e){function i(l){var f=this.__data__;if(n){var p=f[l];return p===o?void 0:p}return a.call(f,l)?f[l]:void 0}var n=e(7),o="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;r.exports=i},function(r,t,e){function i(a){var l=this.__data__;return n?l[a]!==void 0:s.call(l,a)}var n=e(7),o=Object.prototype,s=o.hasOwnProperty;r.exports=i},function(r,t,e){function i(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=n&&a===void 0?o:a,this}var n=e(7),o="__lodash_hash_undefined__";r.exports=i},function(r,t,e){function i(a){return typeof a.constructor!="function"||s(a)?{}:n(o(a))}var n=e(52),o=e(24),s=e(26);r.exports=i},function(r,t,e){function i(l,f,p){if(!a(p))return!1;var y=typeof f;return!!(y=="number"?o(p)&&s(f,p.length):y=="string"&&f in p)&&n(p[f],l)}var n=e(8),o=e(12),s=e(25),a=e(0);r.exports=i},function(r,t){function e(i){var n=typeof i;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?i!=="__proto__":i===null}r.exports=e},function(r,t,e){function i(s){return!!o&&o in s}var n=e(67),o=function(){var s=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();r.exports=i},function(r,t){function e(){this.__data__=[],this.size=0}r.exports=e},function(r,t,e){function i(a){var l=this.__data__,f=n(l,a);return!(f<0)&&(f==l.length-1?l.pop():s.call(l,f,1),--this.size,!0)}var n=e(4),o=Array.prototype,s=o.splice;r.exports=i},function(r,t,e){function i(o){var s=this.__data__,a=n(s,o);return a<0?void 0:s[a][1]}var n=e(4);r.exports=i},function(r,t,e){function i(o){return n(this.__data__,o)>-1}var n=e(4);r.exports=i},function(r,t,e){function i(o,s){var a=this.__data__,l=n(a,o);return l<0?(++this.size,a.push([o,s])):a[l][1]=s,this}var n=e(4);r.exports=i},function(r,t,e){function i(){this.size=0,this.__data__={hash:new n,map:new(s||o),string:new n}}var n=e(46),o=e(3),s=e(16);r.exports=i},function(r,t,e){function i(o){var s=n(this,o).delete(o);return this.size-=s?1:0,s}var n=e(6);r.exports=i},function(r,t,e){function i(o){return n(this,o).get(o)}var n=e(6);r.exports=i},function(r,t,e){function i(o){return n(this,o).has(o)}var n=e(6);r.exports=i},function(r,t,e){function i(o,s){var a=n(this,o),l=a.size;return a.set(o,s),this.size+=a.size==l?0:1,this}var n=e(6);r.exports=i},function(r,t){function e(i){var n=[];if(i!=null)for(var o in Object(i))n.push(o);return n}r.exports=e},function(r,t,e){(function(i){var n=e(23),o=typeof t=="object"&&t&&!t.nodeType&&t,s=o&&typeof i=="object"&&i&&!i.nodeType&&i,a=s&&s.exports===o,l=a&&n.process,f=function(){try{var p=s&&s.require&&s.require("util").types;return p||l&&l.binding&&l.binding("util")}catch(y){}}();i.exports=f}).call(t,e(14)(r))},function(r,t){function e(o){return n.call(o)}var i=Object.prototype,n=i.toString;r.exports=e},function(r,t){function e(i,n){return function(o){return i(n(o))}}r.exports=e},function(r,t,e){function i(s,a,l){return a=o(a===void 0?s.length-1:a,0),function(){for(var f=arguments,p=-1,y=o(f.length-a,0),h=Array(y);++p<y;)h[p]=f[a+p];p=-1;for(var d=Array(a+1);++p<a;)d[p]=f[p];return d[a]=l(h),n(s,this,d)}}var n=e(18),o=Math.max;r.exports=i},function(r,t,e){var i=e(59),n=e(98),o=n(i);r.exports=o},function(r,t){function e(s){var a=0,l=0;return function(){var f=o(),p=n-(f-l);if(l=f,p>0){if(++a>=i)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var i=800,n=16,o=Date.now;r.exports=e},function(r,t,e){function i(){this.__data__=new n,this.size=0}var n=e(3);r.exports=i},function(r,t){function e(i){var n=this.__data__,o=n.delete(i);return this.size=n.size,o}r.exports=e},function(r,t){function e(i){return this.__data__.get(i)}r.exports=e},function(r,t){function e(i){return this.__data__.has(i)}r.exports=e},function(r,t,e){function i(l,f){var p=this.__data__;if(p instanceof n){var y=p.__data__;if(!o||y.length<a-1)return y.push([l,f]),this.size=++p.size,this;p=this.__data__=new s(y)}return p.set(l,f),this.size=p.size,this}var n=e(3),o=e(16),s=e(47),a=200;r.exports=i},function(r,t){function e(o){if(o!=null){try{return n.call(o)}catch(s){}try{return o+""}catch(s){}}return""}var i=Function.prototype,n=i.toString;r.exports=e},function(r,t){function e(i){return function(){return i}}r.exports=e},function(r,t,e){function i(s){return o(s)&&n(s)}var n=e(12),o=e(2);r.exports=i},function(r,t,e){function i(d){if(!s(d)||n(d)!=a)return!1;var u=o(d);if(u===null)return!0;var c=y.call(u,"constructor")&&u.constructor;return typeof c=="function"&&c instanceof c&&p.call(c)==h}var n=e(5),o=e(24),s=e(2),a="[object Object]",l=Function.prototype,f=Object.prototype,p=l.toString,y=f.hasOwnProperty,h=p.call(Object);r.exports=i},function(r,t,e){var i=e(20),n=e(68),o=n(function(s,a,l,f){i(s,a,l,f)});r.exports=o},function(r,t){function e(){return!1}r.exports=e},function(r,t,e){function i(s){return n(s,o(s))}var n=e(66),o=e(34);r.exports=i},function(r,t){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
</svg>`},function(r,t){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
</svg>`},function(r,t){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
</svg>`}])})});var Lm=wt((Hs,nu)=>{(function(r,t){if(typeof Hs=="object"&&typeof nu=="object")nu.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e=t();for(var i in e)(typeof Hs=="object"?Hs:r)[i]=e[i]}})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var s in i)e.d(o,s,function(a){return i[a]}.bind(null,s));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=15)}([function(r,t,e){"use strict";function i(h){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(h)}var n=e(4),o=typeof Symbol=="function"&&i(Symbol("foo"))==="symbol",s=Object.prototype.toString,a=Array.prototype.concat,l=Object.defineProperty,f=l&&function(){var h={};try{for(var d in l(h,"x",{enumerable:!1,value:h}),h)return!1;return h.x===h}catch(u){return!1}}(),p=function(h,d,u,c){var m;(!(d in h)||typeof(m=c)=="function"&&s.call(m)==="[object Function]"&&c())&&(f?l(h,d,{configurable:!0,enumerable:!1,value:u,writable:!0}):h[d]=u)},y=function(h,d){var u=arguments.length>2?arguments[2]:{},c=n(d);o&&(c=a.call(c,Object.getOwnPropertySymbols(d)));for(var m=0;m<c.length;m+=1)p(h,c[m],d[c[m]],u[c[m]])};y.supportsDescriptors=!!f,r.exports=y},function(r,t,e){function i(p){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(p)}var n=e(16),o=e(3),s=e(12),a=e(30),l=String.fromCharCode(0),f=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};f.prototype.insert=function(p,y){var h={};return p.length===0?this:(h.insert=p,y!=null&&i(y)==="object"&&Object.keys(y).length>0&&(h.attributes=y),this.push(h))},f.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},f.prototype.retain=function(p,y){if(p<=0)return this;var h={retain:p};return y!=null&&i(y)==="object"&&Object.keys(y).length>0&&(h.attributes=y),this.push(h)},f.prototype.push=function(p){var y=this.ops.length,h=this.ops[y-1];if(p=s(!0,{},p),i(h)==="object"){if(typeof p.delete=="number"&&typeof h.delete=="number")return this.ops[y-1]={delete:h.delete+p.delete},this;if(typeof h.delete=="number"&&p.insert!=null&&(y-=1,i(h=this.ops[y-1])!=="object"))return this.ops.unshift(p),this;if(o(p.attributes,h.attributes)){if(typeof p.insert=="string"&&typeof h.insert=="string")return this.ops[y-1]={insert:h.insert+p.insert},i(p.attributes)==="object"&&(this.ops[y-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof h.retain=="number")return this.ops[y-1]={retain:h.retain+p.retain},i(p.attributes)==="object"&&(this.ops[y-1].attributes=p.attributes),this}}return y===this.ops.length?this.ops.push(p):this.ops.splice(y,0,p),this},f.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},f.prototype.filter=function(p){return this.ops.filter(p)},f.prototype.forEach=function(p){this.ops.forEach(p)},f.prototype.map=function(p){return this.ops.map(p)},f.prototype.partition=function(p){var y=[],h=[];return this.forEach(function(d){(p(d)?y:h).push(d)}),[y,h]},f.prototype.reduce=function(p,y){return this.ops.reduce(p,y)},f.prototype.changeLength=function(){return this.reduce(function(p,y){return y.insert?p+a.length(y):y.delete?p-y.delete:p},0)},f.prototype.length=function(){return this.reduce(function(p,y){return p+a.length(y)},0)},f.prototype.slice=function(p,y){p=p||0,typeof y!="number"&&(y=1/0);for(var h=[],d=a.iterator(this.ops),u=0;u<y&&d.hasNext();){var c;u<p?c=d.next(p-u):(c=d.next(y-u),h.push(c)),u+=a.length(c)}return new f(h)},f.prototype.compose=function(p){var y=a.iterator(this.ops),h=a.iterator(p.ops),d=[],u=h.peek();if(u!=null&&typeof u.retain=="number"&&u.attributes==null){for(var c=u.retain;y.peekType()==="insert"&&y.peekLength()<=c;)c-=y.peekLength(),d.push(y.next());u.retain-c>0&&h.next(u.retain-c)}for(var m=new f(d);y.hasNext()||h.hasNext();)if(h.peekType()==="insert")m.push(h.next());else if(y.peekType()==="delete")m.push(y.next());else{var _=Math.min(y.peekLength(),h.peekLength()),g=y.next(_),v=h.next(_);if(typeof v.retain=="number"){var w={};typeof g.retain=="number"?w.retain=_:w.insert=g.insert;var x=a.attributes.compose(g.attributes,v.attributes,typeof g.retain=="number");if(x&&(w.attributes=x),m.push(w),!h.hasNext()&&o(m.ops[m.ops.length-1],w)){var b=new f(y.rest());return m.concat(b).chop()}}else typeof v.delete=="number"&&typeof g.retain=="number"&&m.push(v)}return m.chop()},f.prototype.concat=function(p){var y=new f(this.ops.slice());return p.ops.length>0&&(y.push(p.ops[0]),y.ops=y.ops.concat(p.ops.slice(1))),y},f.prototype.diff=function(p,y){if(this.ops===p.ops)return new f;var h=[this,p].map(function(_){return _.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:l;throw new Error("diff() called "+(_===p?"on":"with")+" non-document")}).join("")}),d=new f,u=n(h[0],h[1],y),c=a.iterator(this.ops),m=a.iterator(p.ops);return u.forEach(function(_){for(var g=_[1].length;g>0;){var v=0;switch(_[0]){case n.INSERT:v=Math.min(m.peekLength(),g),d.push(m.next(v));break;case n.DELETE:v=Math.min(g,c.peekLength()),c.next(v),d.delete(v);break;case n.EQUAL:v=Math.min(c.peekLength(),m.peekLength(),g);var w=c.next(v),x=m.next(v);o(w.insert,x.insert)?d.retain(v,a.attributes.diff(w.attributes,x.attributes)):d.push(x).delete(v)}g-=v}}),d.chop()},f.prototype.eachLine=function(p,y){y=y||`
`;for(var h=a.iterator(this.ops),d=new f,u=0;h.hasNext();){if(h.peekType()!=="insert")return;var c=h.peek(),m=a.length(c)-h.peekLength(),_=typeof c.insert=="string"?c.insert.indexOf(y,m)-m:-1;if(_<0)d.push(h.next());else if(_>0)d.push(h.next(_));else{if(p(d,h.next(1).attributes||{},u)===!1)return;u+=1,d=new f}}d.length()>0&&p(d,{},u)},f.prototype.transform=function(p,y){if(y=!!y,typeof p=="number")return this.transformPosition(p,y);for(var h=a.iterator(this.ops),d=a.iterator(p.ops),u=new f;h.hasNext()||d.hasNext();)if(h.peekType()!=="insert"||!y&&d.peekType()==="insert")if(d.peekType()==="insert")u.push(d.next());else{var c=Math.min(h.peekLength(),d.peekLength()),m=h.next(c),_=d.next(c);if(m.delete)continue;_.delete?u.push(_):u.retain(c,a.attributes.transform(m.attributes,_.attributes,y))}else u.retain(a.length(h.next()));return u.chop()},f.prototype.transformPosition=function(p,y){y=!!y;for(var h=a.iterator(this.ops),d=0;h.hasNext()&&d<=p;){var u=h.peekLength(),c=h.peekType();h.next(),c!=="delete"?(c==="insert"&&(d<p||!y)&&(p+=u),d+=u):p-=Math.min(u,p-d)}return p},r.exports=f},function(r,t,e){"use strict";var i=e(20);r.exports=Function.prototype.bind||i},function(r,t,e){function i(u){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}var n=e(4),o=e(18),s=e(19),a=e(25),l=e(27),f=e(29),p=Date.prototype.getTime;function y(u,c,m){var _=m||{};return!!(_.strict?s(u,c):u===c)||(!u||!c||i(u)!=="object"&&i(c)!=="object"?_.strict?s(u,c):u==c:function(g,v,w){var x,b;if(i(g)!==i(v)||h(g)||h(v)||g.prototype!==v.prototype||o(g)!==o(v))return!1;var k=a(g),T=a(v);if(k!==T)return!1;if(k||T)return g.source===v.source&&l(g)===l(v);if(f(g)&&f(v))return p.call(g)===p.call(v);var P=d(g),N=d(v);if(P!==N)return!1;if(P||N){if(g.length!==v.length)return!1;for(x=0;x<g.length;x++)if(g[x]!==v[x])return!1;return!0}if(i(g)!==i(v))return!1;try{var S=n(g),R=n(v)}catch(O){return!1}if(S.length!==R.length)return!1;for(S.sort(),R.sort(),x=S.length-1;x>=0;x--)if(S[x]!=R[x])return!1;for(x=S.length-1;x>=0;x--)if(b=S[x],!y(g[b],v[b],w))return!1;return!0}(u,c,_))}function h(u){return u==null}function d(u){return!(!u||i(u)!=="object"||typeof u.length!="number")&&typeof u.copy=="function"&&typeof u.slice=="function"&&!(u.length>0&&typeof u[0]!="number")}r.exports=y},function(r,t,e){"use strict";var i=Array.prototype.slice,n=e(5),o=Object.keys,s=o?function(l){return o(l)}:e(17),a=Object.keys;s.shim=function(){return Object.keys?function(){var l=Object.keys(arguments);return l&&l.length===arguments.length}(1,2)||(Object.keys=function(l){return n(l)?a(i.call(l)):a(l)}):Object.keys=s,Object.keys||s},r.exports=s},function(r,t,e){"use strict";function i(o){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(o)}var n=Object.prototype.toString;r.exports=function(o){var s=n.call(o),a=s==="[object Arguments]";return a||(a=s!=="[object Array]"&&o!==null&&i(o)==="object"&&typeof o.length=="number"&&o.length>=0&&n.call(o.callee)==="[object Function]"),a}},function(r,t,e){"use strict";var i=e(2),n=e(21)("%Function%"),o=n.apply,s=n.call;r.exports=function(){return i.apply(s,arguments)},r.exports.apply=function(){return i.apply(o,arguments)}},function(r,t){function e(n){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){(typeof window=="undefined"?"undefined":e(window))==="object"&&(i=window)}r.exports=i},function(r,t,e){"use strict";var i=function(n){return n!=n};r.exports=function(n,o){return n===0&&o===0?1/n==1/o:n===o||!(!i(n)||!i(o))}},function(r,t,e){"use strict";var i=e(8);r.exports=function(){return typeof Object.is=="function"?Object.is:i}},function(r,t,e){"use strict";var i=Object,n=TypeError;r.exports=function(){if(this!=null&&this!==i(this))throw new n("RegExp.prototype.flags getter called on non-object");var o="";return this.global&&(o+="g"),this.ignoreCase&&(o+="i"),this.multiline&&(o+="m"),this.dotAll&&(o+="s"),this.unicode&&(o+="u"),this.sticky&&(o+="y"),o}},function(r,t,e){"use strict";var i=e(10),n=e(0).supportsDescriptors,o=Object.getOwnPropertyDescriptor,s=TypeError;r.exports=function(){if(!n)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if(/a/gim.flags==="gim"){var a=o(RegExp.prototype,"flags");if(a&&typeof a.get=="function"&&typeof/a/.dotAll=="boolean")return a.get}return i}},function(r,t,e){"use strict";function i(h){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(h)}var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(h){return typeof Array.isArray=="function"?Array.isArray(h):o.call(h)==="[object Array]"},f=function(h){if(!h||o.call(h)!=="[object Object]")return!1;var d,u=n.call(h,"constructor"),c=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!u&&!c)return!1;for(d in h);return d===void 0||n.call(h,d)},p=function(h,d){s&&d.name==="__proto__"?s(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},y=function(h,d){if(d==="__proto__"){if(!n.call(h,d))return;if(a)return a(h,d).value}return h[d]};r.exports=function h(){var d,u,c,m,_,g,v=arguments[0],w=1,x=arguments.length,b=!1;for(typeof v=="boolean"&&(b=v,v=arguments[1]||{},w=2),(v==null||i(v)!=="object"&&typeof v!="function")&&(v={});w<x;++w)if((d=arguments[w])!=null)for(u in d)c=y(v,u),v!==(m=y(d,u))&&(b&&m&&(f(m)||(_=l(m)))?(_?(_=!1,g=c&&l(c)?c:[]):g=c&&f(c)?c:{},p(v,{name:u,newValue:h(b,g,m)})):m!==void 0&&p(v,{name:u,newValue:m}));return v}},function(r,t){(function(e){r.exports=e}).call(this,{})},function(r,t,e){"use strict";function i(h,d){var u=Object.keys(h);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(h);d&&(c=c.filter(function(m){return Object.getOwnPropertyDescriptor(h,m).enumerable})),u.push.apply(u,c)}return u}function n(h,d,u){return d in h?Object.defineProperty(h,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):h[d]=u,h}function o(h){return function(d){if(Array.isArray(d))return l(d)}(h)||function(d){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(d))return Array.from(d)}(h)||a(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(h,d){return function(u){if(Array.isArray(u))return u}(h)||function(u,c){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(u)))){var m=[],_=!0,g=!1,v=void 0;try{for(var w,x=u[Symbol.iterator]();!(_=(w=x.next()).done)&&(m.push(w.value),!c||m.length!==c);_=!0);}catch(b){g=!0,v=b}finally{try{_||x.return==null||x.return()}finally{if(g)throw v}}return m}}(h,d)||a(h,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(h,d){if(h){if(typeof h=="string")return l(h,d);var u=Object.prototype.toString.call(h).slice(8,-1);return u==="Object"&&h.constructor&&(u=h.constructor.name),u==="Map"||u==="Set"?Array.from(h):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?l(h,d):void 0}}function l(h,d){(d==null||d>h.length)&&(d=h.length);for(var u=0,c=new Array(d);u<d;u++)c[u]=h[u];return c}var f=typeof URL=="undefined"?e(31).URL:URL,p=function(h,d){return d.some(function(u){return u instanceof RegExp?u.test(h):u===h})},y=function(h,d){if(d=function(x){for(var b=1;b<arguments.length;b++){var k=arguments[b]!=null?arguments[b]:{};b%2?i(Object(k),!0).forEach(function(T){n(x,T,k[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(k)):i(Object(k)).forEach(function(T){Object.defineProperty(x,T,Object.getOwnPropertyDescriptor(k,T))})}return x}({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},d),Reflect.has(d,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(d,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(d,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");if(h=h.trim(),/^data:/i.test(h))return function(x,b){var k=b.stripHash,T=x.match(/^data:(.*?),(.*?)(?:#(.*))?$/);if(!T)throw new Error("Invalid URL: ".concat(x));var P=T[1].split(";"),N=T[2],S=k?"":T[3],R=!1;P[P.length-1]==="base64"&&(P.pop(),R=!0);var O=(P.shift()||"").toLowerCase(),C=o(P.map(function(q){var M=s(q.split("=").map(function(tt){return tt.trim()}),2),V=M[0],W=M[1],rt=W===void 0?"":W;return V==="charset"&&(rt=rt.toLowerCase())==="us-ascii"?"":"".concat(V).concat(rt?"=".concat(rt):"")}).filter(Boolean));return R&&C.push("base64"),(C.length!==0||O&&O!=="text/plain")&&C.unshift(O),"data:".concat(C.join(";"),",").concat(R?N.trim():N).concat(S?"#".concat(S):"")}(h,d);var u=h.startsWith("//");!u&&/^\.*\//.test(h)||(h=h.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,d.defaultProtocol));var c=new f(h);if(d.forceHttp&&d.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(d.forceHttp&&c.protocol==="https:"&&(c.protocol="http:"),d.forceHttps&&c.protocol==="http:"&&(c.protocol="https:"),d.stripAuthentication&&(c.username="",c.password=""),d.stripHash&&(c.hash=""),c.pathname&&(c.pathname=c.pathname.replace(/((?!:).|^)\/{2,}/g,function(x,b){return/^(?!\/)/g.test(b)?"".concat(b,"/"):"/"})),c.pathname&&(c.pathname=decodeURI(c.pathname)),d.removeDirectoryIndex===!0&&(d.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(d.removeDirectoryIndex)&&d.removeDirectoryIndex.length>0){var m=c.pathname.split("/"),_=m[m.length-1];p(_,d.removeDirectoryIndex)&&(m=m.slice(0,m.length-1),c.pathname=m.slice(1).join("/")+"/")}if(c.hostname&&(c.hostname=c.hostname.replace(/\.$/,""),d.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(c.hostname)&&(c.hostname=c.hostname.replace(/^www\./,""))),Array.isArray(d.removeQueryParameters))for(var g=0,v=o(c.searchParams.keys());g<v.length;g++){var w=v[g];p(w,d.removeQueryParameters)&&c.searchParams.delete(w)}return d.sortQueryParameters&&c.searchParams.sort(),d.removeTrailingSlash&&(c.pathname=c.pathname.replace(/\/$/,"")),h=c.toString(),!d.removeTrailingSlash&&c.pathname!=="/"||c.hash!==""||(h=h.replace(/\/$/,"")),u&&!d.normalizeProtocol&&(h=h.replace(/^http:\/\//,"//")),d.stripProtocol&&(h=h.replace(/^(?:https?:)?\/\//,"")),h};r.exports=y,r.exports.default=y},function(r,t,e){"use strict";e.r(t),e.d(t,"default",function(){return u});var i=e(1),n=e.n(i),o=e(14),s=e.n(o);function a(c,m){return function(_){if(Array.isArray(_))return _}(c)||function(_,g){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(_)))){var v=[],w=!0,x=!1,b=void 0;try{for(var k,T=_[Symbol.iterator]();!(w=(k=T.next()).done)&&(v.push(k.value),!g||v.length!==g);w=!0);}catch(P){x=!0,b=P}finally{try{w||T.return==null||T.return()}finally{if(x)throw b}}return v}}(c,m)||function(_,g){if(!!_){if(typeof _=="string")return l(_,g);var v=Object.prototype.toString.call(_).slice(8,-1);if(v==="Object"&&_.constructor&&(v=_.constructor.name),v==="Map"||v==="Set")return Array.from(_);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return l(_,g)}}(c,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(c,m){(m==null||m>c.length)&&(m=c.length);for(var _=0,g=new Array(m);_<m;_++)g[_]=c[_];return g}function f(c,m){var _=Object.keys(c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);m&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable})),_.push.apply(_,g)}return _}function p(c){for(var m=1;m<arguments.length;m++){var _=arguments[m]!=null?arguments[m]:{};m%2?f(Object(_),!0).forEach(function(g){y(c,g,_[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(_)):f(Object(_)).forEach(function(g){Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(_,g))})}return c}function y(c,m,_){return m in c?Object.defineProperty(c,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):c[m]=_,c}function h(c,m){for(var _=0;_<m.length;_++){var g=m[_];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}var d={globalRegularExpression:/(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?/gi,urlRegularExpression:/(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?/i,globalMailRegularExpression:/([\w-\.]+@[\w-\.]+\.[\w-\.]+)/gi,mailRegularExpression:/([\w-\.]+@[\w-\.]+\.[\w-\.]+)/i,normalizeRegularExpression:/(https?:\/\/|www\.)[\S]+/i,normalizeUrlOptions:{stripWWW:!1}},u=function(){function c(v,w){var x=this;(function(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")})(this,c),this.quill=v,w=w||{},this.options=p(p({},d),w),this.urlNormalizer=function(b){return x.normalize(b)},this.mailNormalizer=function(b){return"mailto:".concat(b)},this.registerTypeListener(),this.registerPasteListener()}var m,_,g;return m=c,(_=[{key:"registerPasteListener",value:function(){var v=this;this.quill.clipboard.addMatcher(Node.TEXT_NODE,function(w,x){if(typeof w.data=="string"){var b=v.options.globalRegularExpression,k=v.options.globalMailRegularExpression;b.lastIndex=0,k.lastIndex=0;for(var T=new n.a,P=0,N=b.exec(w.data),S=k.exec(w.data),R=function(C,q,M){var V=w.data.substring(P,C.index);T.insert(V);var W=C[0];return T.insert(W,{link:M(W)}),P=q.lastIndex,q.exec(w.data)};N!==null||S!==null;)if(N===null)S=R(S,k,v.mailNormalizer);else if(S===null)N=R(N,b,v.urlNormalizer);else if(S.index<=N.index){for(;N!==null&&N.index<k.lastIndex;)N=b.exec(w.data);S=R(S,k,v.mailNormalizer)}else{for(;S!==null&&S.index<b.lastIndex;)S=k.exec(w.data);N=R(N,b,v.urlNormalizer)}if(P>0){var O=w.data.substring(P);T.insert(O),x.ops=T.ops}return x}})}},{key:"registerTypeListener",value:function(){var v=this;this.quill.on("text-change",function(w){var x=w.ops;if(!(!x||x.length<1||x.length>2)){var b=x[x.length-1];b.insert&&typeof b.insert=="string"&&b.insert.match(/\s/)&&v.checkTextForUrl()}})}},{key:"checkTextForUrl",value:function(){var v=this.quill.getSelection();if(v){var w=a(this.quill.getLeaf(v.index),1)[0];if(w.text&&w.parent.domNode.localName!=="a"){var x=this.quill.getIndex(w),b=w.text.match(this.options.urlRegularExpression),k=w.text.match(this.options.mailRegularExpression);b?this.textToUrl(x+b.index,b[0]):k&&this.textToMail(x+k.index,k[0])}}}},{key:"textToUrl",value:function(v,w){var x=new n.a().retain(v).retain(w.length,{link:this.urlNormalizer(w)});this.quill.updateContents(x)}},{key:"textToMail",value:function(v,w){var x=new n.a().retain(v).retain(w.length,{link:this.mailNormalizer(w)});this.quill.updateContents(x)}},{key:"normalize",value:function(v){if(this.options.normalizeRegularExpression.test(v))try{return s()(v,this.options.normalizeUrlOptions)}catch(w){console.error(w)}return v}}])&&h(m.prototype,_),g&&h(m,g),c}();window!=null&&window.Quill&&window.Quill.register("modules/magicUrl",u)},function(r,t){function e(l,f,p){if(l==f)return l?[[0,l]]:[];(p<0||l.length<p)&&(p=null);var y=n(l,f),h=l.substring(0,y);y=o(l=l.substring(y),f=f.substring(y));var d=l.substring(l.length-y),u=function(c,m){var _;if(!c)return[[1,m]];if(!m)return[[-1,c]];var g=c.length>m.length?c:m,v=c.length>m.length?m:c,w=g.indexOf(v);if(w!=-1)return _=[[1,g.substring(0,w)],[0,v],[1,g.substring(w+v.length)]],c.length>m.length&&(_[0][0]=_[2][0]=-1),_;if(v.length==1)return[[-1,c],[1,m]];var x=function(O,C){var q=O.length>C.length?O:C,M=O.length>C.length?C:O;if(q.length<4||2*M.length<q.length)return null;function V(X,J,U){for(var G,nt,ft,ct,gt=X.substring(U,U+Math.floor(X.length/4)),bt=-1,Et="";(bt=J.indexOf(gt,bt+1))!=-1;){var Ot=n(X.substring(U),J.substring(bt)),Ct=o(X.substring(0,U),J.substring(0,bt));Et.length<Ct+Ot&&(Et=J.substring(bt-Ct,bt)+J.substring(bt,bt+Ot),G=X.substring(0,U-Ct),nt=X.substring(U+Ot),ft=J.substring(0,bt-Ct),ct=J.substring(bt+Ot))}return 2*Et.length>=X.length?[G,nt,ft,ct,Et]:null}var W,rt,tt,Q,I,H=V(q,M,Math.ceil(q.length/4)),B=V(q,M,Math.ceil(q.length/2));if(!H&&!B)return null;W=B?H&&H[4].length>B[4].length?H:B:H,O.length>C.length?(rt=W[0],tt=W[1],Q=W[2],I=W[3]):(Q=W[0],I=W[1],rt=W[2],tt=W[3]);var K=W[4];return[rt,tt,Q,I,K]}(c,m);if(x){var b=x[0],k=x[1],T=x[2],P=x[3],N=x[4],S=e(b,T),R=e(k,P);return S.concat([[0,N]],R)}return function(O,C){for(var q=O.length,M=C.length,V=Math.ceil((q+M)/2),W=V,rt=2*V,tt=new Array(rt),Q=new Array(rt),I=0;I<rt;I++)tt[I]=-1,Q[I]=-1;tt[W+1]=0,Q[W+1]=0;for(var H=q-M,B=H%2!=0,K=0,X=0,J=0,U=0,G=0;G<V;G++){for(var nt=-G+K;nt<=G-X;nt+=2){for(var ft=W+nt,ct=(Ct=nt==-G||nt!=G&&tt[ft-1]<tt[ft+1]?tt[ft+1]:tt[ft-1]+1)-nt;Ct<q&&ct<M&&O.charAt(Ct)==C.charAt(ct);)Ct++,ct++;if(tt[ft]=Ct,Ct>q)X+=2;else if(ct>M)K+=2;else if(B&&(Et=W+H-nt)>=0&&Et<rt&&Q[Et]!=-1){var gt=q-Q[Et];if(Ct>=gt)return i(O,C,Ct,ct)}}for(var bt=-G+J;bt<=G-U;bt+=2){for(var Et=W+bt,Ot=(gt=bt==-G||bt!=G&&Q[Et-1]<Q[Et+1]?Q[Et+1]:Q[Et-1]+1)-bt;gt<q&&Ot<M&&O.charAt(q-gt-1)==C.charAt(M-Ot-1);)gt++,Ot++;if(Q[Et]=gt,gt>q)U+=2;else if(Ot>M)J+=2;else if(!B&&(ft=W+H-bt)>=0&&ft<rt&&tt[ft]!=-1){var Ct=tt[ft];if(ct=W+Ct-ft,Ct>=(gt=q-gt))return i(O,C,Ct,ct)}}}return[[-1,O],[1,C]]}(c,m)}(l=l.substring(0,l.length-y),f=f.substring(0,f.length-y));return h&&u.unshift([0,h]),d&&u.push([0,d]),function c(m){m.push([0,""]);for(var _,g=0,v=0,w=0,x="",b="";g<m.length;)switch(m[g][0]){case 1:w++,b+=m[g][1],g++;break;case-1:v++,x+=m[g][1],g++;break;case 0:v+w>1?(v!==0&&w!==0&&((_=n(b,x))!==0&&(g-v-w>0&&m[g-v-w-1][0]==0?m[g-v-w-1][1]+=b.substring(0,_):(m.splice(0,0,[0,b.substring(0,_)]),g++),b=b.substring(_),x=x.substring(_)),(_=o(b,x))!==0&&(m[g][1]=b.substring(b.length-_)+m[g][1],b=b.substring(0,b.length-_),x=x.substring(0,x.length-_))),v===0?m.splice(g-w,v+w,[1,b]):w===0?m.splice(g-v,v+w,[-1,x]):m.splice(g-v-w,v+w,[-1,x],[1,b]),g=g-v-w+(v?1:0)+(w?1:0)+1):g!==0&&m[g-1][0]==0?(m[g-1][1]+=m[g][1],m.splice(g,1)):g++,w=0,v=0,x="",b=""}m[m.length-1][1]===""&&m.pop();var k=!1;for(g=1;g<m.length-1;)m[g-1][0]==0&&m[g+1][0]==0&&(m[g][1].substring(m[g][1].length-m[g-1][1].length)==m[g-1][1]?(m[g][1]=m[g-1][1]+m[g][1].substring(0,m[g][1].length-m[g-1][1].length),m[g+1][1]=m[g-1][1]+m[g+1][1],m.splice(g-1,1),k=!0):m[g][1].substring(0,m[g+1][1].length)==m[g+1][1]&&(m[g-1][1]+=m[g+1][1],m[g][1]=m[g][1].substring(m[g+1][1].length)+m[g+1][1],m.splice(g+1,1),k=!0)),g++;k&&c(m)}(u),p!=null&&(u=function(c,m){var _=function(k,T){if(T===0)return[0,k];for(var P=0,N=0;N<k.length;N++){var S=k[N];if(S[0]===-1||S[0]===0){var R=P+S[1].length;if(T===R)return[N+1,k];if(T<R){k=k.slice();var O=T-P,C=[S[0],S[1].slice(0,O)],q=[S[0],S[1].slice(O)];return k.splice(N,1,C,q),[N+1,k]}P=R}}throw new Error("cursor_pos is out of bounds!")}(c,m),g=_[1],v=_[0],w=g[v],x=g[v+1];if(w==null||w[0]!==0)return c;if(x!=null&&w[1]+x[1]===x[1]+w[1])return g.splice(v,2,x,w),a(g,v,2);if(x!=null&&x[1].indexOf(w[1])===0){g.splice(v,2,[x[0],w[1]],[0,w[1]]);var b=x[1].slice(w[1].length);return b.length>0&&g.splice(v+2,0,[x[0],b]),a(g,v,3)}return c}(u,p)),u=function(c){for(var m=!1,_=function(x){return x.charCodeAt(0)>=56320&&x.charCodeAt(0)<=57343},g=2;g<c.length;g+=1)c[g-2][0]===0&&(v=c[g-2][1]).charCodeAt(v.length-1)>=55296&&v.charCodeAt(v.length-1)<=56319&&c[g-1][0]===-1&&_(c[g-1][1])&&c[g][0]===1&&_(c[g][1])&&(m=!0,c[g-1][1]=c[g-2][1].slice(-1)+c[g-1][1],c[g][1]=c[g-2][1].slice(-1)+c[g][1],c[g-2][1]=c[g-2][1].slice(0,-1));var v;if(!m)return c;var w=[];for(g=0;g<c.length;g+=1)c[g][1].length>0&&w.push(c[g]);return w}(u)}function i(l,f,p,y){var h=l.substring(0,p),d=f.substring(0,y),u=l.substring(p),c=f.substring(y),m=e(h,d),_=e(u,c);return m.concat(_)}function n(l,f){if(!l||!f||l.charAt(0)!=f.charAt(0))return 0;for(var p=0,y=Math.min(l.length,f.length),h=y,d=0;p<h;)l.substring(d,h)==f.substring(d,h)?d=p=h:y=h,h=Math.floor((y-p)/2+p);return h}function o(l,f){if(!l||!f||l.charAt(l.length-1)!=f.charAt(f.length-1))return 0;for(var p=0,y=Math.min(l.length,f.length),h=y,d=0;p<h;)l.substring(l.length-h,l.length-d)==f.substring(f.length-h,f.length-d)?d=p=h:y=h,h=Math.floor((y-p)/2+p);return h}var s=e;function a(l,f,p){for(var y=f+p-1;y>=0&&y>=f-1;y--)if(y+1<l.length){var h=l[y],d=l[y+1];h[0]===d[1]&&l.splice(y,2,[h[0],h[1]+d[1]])}return l}s.INSERT=1,s.DELETE=-1,s.EQUAL=0,r.exports=s},function(r,t,e){"use strict";function i(c){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=e(5),l=Object.prototype.propertyIsEnumerable,f=!l.call({toString:null},"toString"),p=l.call(function(){},"prototype"),y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(c){var m=c.constructor;return m&&m.prototype===c},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window=="undefined")return!1;for(var c in window)try{if(!d["$"+c]&&o.call(window,c)&&window[c]!==null&&i(window[c])==="object")try{h(window[c])}catch(m){return!0}}catch(m){return!0}return!1}();n=function(c){var m=c!==null&&i(c)==="object",_=s.call(c)==="[object Function]",g=a(c),v=m&&s.call(c)==="[object String]",w=[];if(!m&&!_&&!g)throw new TypeError("Object.keys called on a non-object");var x=p&&_;if(v&&c.length>0&&!o.call(c,0))for(var b=0;b<c.length;++b)w.push(String(b));if(g&&c.length>0)for(var k=0;k<c.length;++k)w.push(String(k));else for(var T in c)x&&T==="prototype"||!o.call(c,T)||w.push(String(T));if(f)for(var P=function(S){if(typeof window=="undefined"||!u)return h(S);try{return h(S)}catch(R){return!1}}(c),N=0;N<y.length;++N)P&&y[N]==="constructor"||!o.call(c,y[N])||w.push(y[N]);return w}}r.exports=n},function(r,t,e){"use strict";function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}var n=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol",o=Object.prototype.toString,s=function(f){return!(n&&f&&i(f)==="object"&&Symbol.toStringTag in f)&&o.call(f)==="[object Arguments]"},a=function(f){return!!s(f)||f!==null&&i(f)==="object"&&typeof f.length=="number"&&f.length>=0&&o.call(f)!=="[object Array]"&&o.call(f.callee)==="[object Function]"},l=function(){return s(arguments)}();s.isLegacyArguments=a,r.exports=l?s:a},function(r,t,e){"use strict";var i=e(0),n=e(6),o=e(8),s=e(9),a=e(24),l=n(s(),Object);i(l,{getPolyfill:s,implementation:o,shim:a}),r.exports=l},function(r,t,e){"use strict";var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString;r.exports=function(s){var a=this;if(typeof a!="function"||o.call(a)!=="[object Function]")throw new TypeError(i+a);for(var l,f=n.call(arguments,1),p=function(){if(this instanceof l){var c=a.apply(this,f.concat(n.call(arguments)));return Object(c)===c?c:this}return a.apply(s,f.concat(n.call(arguments)))},y=Math.max(0,a.length-f.length),h=[],d=0;d<y;d++)h.push("$"+d);if(l=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(p),a.prototype){var u=function(){};u.prototype=a.prototype,l.prototype=new u,u.prototype=null}return l}},function(r,t,e){"use strict";function i(g){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}var n=TypeError,o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(g){o=null}var s=function(){throw new n},a=o?function(){try{return s}catch(g){try{return o(arguments,"callee").get}catch(v){return s}}}():s,l=e(22)(),f=Object.getPrototypeOf||function(g){return g.__proto__},p=void 0,y=typeof Uint8Array=="undefined"?void 0:f(Uint8Array),h={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer=="undefined"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?f([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":p&&l&&Symbol.asyncIterator?p[Symbol.asyncIterator]():void 0,"%Atomics%":typeof Atomics=="undefined"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView=="undefined"?void 0:DataView,"%DataViewPrototype%":typeof DataView=="undefined"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array=="undefined"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array=="undefined"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array=="undefined"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array=="undefined"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array=="undefined"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array=="undefined"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array=="undefined"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array=="undefined"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array=="undefined"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array=="undefined"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?f(f([][Symbol.iterator]())):void 0,"%JSON%":(typeof JSON=="undefined"?"undefined":i(JSON))==="object"?JSON:void 0,"%JSONParse%":(typeof JSON=="undefined"?"undefined":i(JSON))==="object"?JSON.parse:void 0,"%Map%":typeof Map=="undefined"?void 0:Map,"%MapIteratorPrototype%":typeof Map!="undefined"&&l?f(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map=="undefined"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?void 0:Promise,"%PromisePrototype%":typeof Promise=="undefined"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise=="undefined"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise=="undefined"?void 0:Promise.all,"%Promise_reject%":typeof Promise=="undefined"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise=="undefined"?void 0:Promise.resolve,"%Proxy%":typeof Proxy=="undefined"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect=="undefined"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set=="undefined"?void 0:Set,"%SetIteratorPrototype%":typeof Set!="undefined"&&l?f(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set=="undefined"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer=="undefined"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?f(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:void 0,"%SymbolPrototype%":l?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":y,"%TypedArrayPrototype%":y?y.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":typeof Uint8Array=="undefined"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array=="undefined"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array=="undefined"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array=="undefined"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array=="undefined"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array=="undefined"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap=="undefined"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap=="undefined"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet=="undefined"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet=="undefined"?void 0:WeakSet.prototype},d=e(2).call(Function.call,String.prototype.replace),u=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,c=/\\(\\)?/g,m=function(g){var v=[];return d(g,u,function(w,x,b,k){v[v.length]=b?d(k,c,"$1"):x||w}),v},_=function(g,v){if(!(g in h))throw new SyntaxError("intrinsic "+g+" does not exist!");if(h[g]===void 0&&!v)throw new n("intrinsic "+g+" exists, but is not available. Please file an issue!");return h[g]};r.exports=function(g,v){if(typeof g!="string"||g.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof v!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var w=m(g),x=_("%"+(w.length>0?w[0]:"")+"%",v),b=1;b<w.length;b+=1)if(x!=null)if(o&&b+1>=w.length){var k=o(x,w[b]);if(!v&&!(w[b]in x))throw new n("base intrinsic for "+g+" exists, but the property is not available.");x=k?k.get||k.value:x[w[b]]}else x=x[w[b]];return x}},function(r,t,e){"use strict";(function(i){function n(a){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}var o=i.Symbol,s=e(23);r.exports=function(){return typeof o=="function"&&typeof Symbol=="function"&&n(o("foo"))==="symbol"&&n(Symbol("bar"))==="symbol"&&s()}}).call(this,e(7))},function(r,t,e){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}r.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(i(Symbol.iterator)==="symbol")return!0;var n={},o=Symbol("test"),s=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;for(o in n[o]=42,n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var a=Object.getOwnPropertySymbols(n);if(a.length!==1||a[0]!==o||!Object.prototype.propertyIsEnumerable.call(n,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(n,o);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},function(r,t,e){"use strict";var i=e(9),n=e(0);r.exports=function(){var o=i();return n(Object,{is:o},{is:function(){return Object.is!==o}}),o}},function(r,t,e){"use strict";function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}var n=e(26),o=RegExp.prototype.exec,s=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,l=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol";r.exports=function(f){if(!f||i(f)!=="object")return!1;if(!l)return a.call(f)==="[object RegExp]";var p=s(f,"lastIndex");return!(!p||!n(p,"value"))&&function(y){try{var h=y.lastIndex;return y.lastIndex=0,o.call(y),!0}catch(d){return!1}finally{y.lastIndex=h}}(f)}},function(r,t,e){"use strict";var i=e(2);r.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},function(r,t,e){"use strict";var i=e(0),n=e(6),o=e(10),s=e(11),a=e(28),l=n(o);i(l,{getPolyfill:s,implementation:o,shim:a}),r.exports=l},function(r,t,e){"use strict";var i=e(0).supportsDescriptors,n=e(11),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,f=/a/;r.exports=function(){if(!i||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var p=n(),y=l(f),h=o(y,"flags");return h&&h.get===p||s(y,"flags",{configurable:!0,enumerable:!1,get:p}),p}},function(r,t,e){"use strict";function i(a){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}var n=Date.prototype.getDay,o=Object.prototype.toString,s=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol";r.exports=function(a){return i(a)==="object"&&a!==null&&(s?function(l){try{return n.call(l),!0}catch(f){return!1}}(a):o.call(a)==="[object Date]")}},function(r,t,e){function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(l)}var n=e(3),o=e(12),s={attributes:{compose:function(l,f,p){i(l)!=="object"&&(l={}),i(f)!=="object"&&(f={});var y=o(!0,{},f);for(var h in p||(y=Object.keys(y).reduce(function(d,u){return y[u]!=null&&(d[u]=y[u]),d},{})),l)l[h]!==void 0&&f[h]===void 0&&(y[h]=l[h]);return Object.keys(y).length>0?y:void 0},diff:function(l,f){i(l)!=="object"&&(l={}),i(f)!=="object"&&(f={});var p=Object.keys(l).concat(Object.keys(f)).reduce(function(y,h){return n(l[h],f[h])||(y[h]=f[h]===void 0?null:f[h]),y},{});return Object.keys(p).length>0?p:void 0},transform:function(l,f,p){if(i(l)!=="object")return f;if(i(f)==="object"){if(!p)return f;var y=Object.keys(f).reduce(function(h,d){return l[d]===void 0&&(h[d]=f[d]),h},{});return Object.keys(y).length>0?y:void 0}}},iterator:function(l){return new a(l)},length:function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}};function a(l){this.ops=l,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(l){l||(l=1/0);var f=this.ops[this.index];if(f){var p=this.offset,y=s.length(f);if(l>=y-p?(l=y-p,this.index+=1,this.offset=0):this.offset+=l,typeof f.delete=="number")return{delete:l};var h={};return f.attributes&&(h.attributes=f.attributes),typeof f.retain=="number"?h.retain=l:typeof f.insert=="string"?h.insert=f.insert.substr(p,l):h.insert=f.insert,h}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,f=this.index,p=this.next(),y=this.ops.slice(this.index);return this.offset=l,this.index=f,[p].concat(y)}return[]},r.exports=s},function(r,t,e){"use strict";function i(x){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}var n=e(32),o=e(34);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=w,t.resolve=function(x,b){return w(x,!1,!0).resolve(b)},t.resolveObject=function(x,b){return x?w(x,!1,!0).resolveObject(b):b},t.format=function(x){return o.isString(x)&&(x=w(x)),x instanceof s?x.format():s.prototype.format.call(x)},t.Url=s;var a=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),y=["'"].concat(p),h=["%","/","?",";","#"].concat(y),d=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=e(35);function w(x,b,k){if(x&&o.isObject(x)&&x instanceof s)return x;var T=new s;return T.parse(x,b,k),T}s.prototype.parse=function(x,b,k){if(!o.isString(x))throw new TypeError("Parameter 'url' must be a string, not "+i(x));var T=x.indexOf("?"),P=T!==-1&&T<x.indexOf("#")?"?":"#",N=x.split(P);N[0]=N[0].replace(/\\/g,"/");var S=x=N.join(P);if(S=S.trim(),!k&&x.split("#").length===1){var R=f.exec(S);if(R)return this.path=S,this.href=S,this.pathname=R[1],R[2]?(this.search=R[2],this.query=b?v.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var O=a.exec(S);if(O){var C=(O=O[0]).toLowerCase();this.protocol=C,S=S.substr(O.length)}if(k||O||S.match(/^\/\/[^@\/]+@[^@\/]+/)){var q=S.substr(0,2)==="//";!q||O&&_[O]||(S=S.substr(2),this.slashes=!0)}if(!_[O]&&(q||O&&!g[O])){for(var M,V,W=-1,rt=0;rt<d.length;rt++)(tt=S.indexOf(d[rt]))!==-1&&(W===-1||tt<W)&&(W=tt);for((V=W===-1?S.lastIndexOf("@"):S.lastIndexOf("@",W))!==-1&&(M=S.slice(0,V),S=S.slice(V+1),this.auth=decodeURIComponent(M)),W=-1,rt=0;rt<h.length;rt++){var tt;(tt=S.indexOf(h[rt]))!==-1&&(W===-1||tt<W)&&(W=tt)}W===-1&&(W=S.length),this.host=S.slice(0,W),S=S.slice(W),this.parseHost(),this.hostname=this.hostname||"";var Q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Q)for(var I=this.hostname.split(/\./),H=(rt=0,I.length);rt<H;rt++){var B=I[rt];if(B&&!B.match(u)){for(var K="",X=0,J=B.length;X<J;X++)B.charCodeAt(X)>127?K+="x":K+=B[X];if(!K.match(u)){var U=I.slice(0,rt),G=I.slice(rt+1),nt=B.match(c);nt&&(U.push(nt[1]),G.unshift(nt[2])),G.length&&(S="/"+G.join(".")+S),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Q||(this.hostname=n.toASCII(this.hostname));var ft=this.port?":"+this.port:"",ct=this.hostname||"";this.host=ct+ft,this.href+=this.host,Q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),S[0]!=="/"&&(S="/"+S))}if(!m[C])for(rt=0,H=y.length;rt<H;rt++){var gt=y[rt];if(S.indexOf(gt)!==-1){var bt=encodeURIComponent(gt);bt===gt&&(bt=escape(gt)),S=S.split(gt).join(bt)}}var Et=S.indexOf("#");Et!==-1&&(this.hash=S.substr(Et),S=S.slice(0,Et));var Ot=S.indexOf("?");if(Ot!==-1?(this.search=S.substr(Ot),this.query=S.substr(Ot+1),b&&(this.query=v.parse(this.query)),S=S.slice(0,Ot)):b&&(this.search="",this.query={}),S&&(this.pathname=S),g[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ft=this.pathname||"";var Ct=this.search||"";this.path=ft+Ct}return this.href=this.format(),this},s.prototype.format=function(){var x=this.auth||"";x&&(x=(x=encodeURIComponent(x)).replace(/%3A/i,":"),x+="@");var b=this.protocol||"",k=this.pathname||"",T=this.hash||"",P=!1,N="";this.host?P=x+this.host:this.hostname&&(P=x+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(P+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(N=v.stringify(this.query));var S=this.search||N&&"?"+N||"";return b&&b.substr(-1)!==":"&&(b+=":"),this.slashes||(!b||g[b])&&P!==!1?(P="//"+(P||""),k&&k.charAt(0)!=="/"&&(k="/"+k)):P||(P=""),T&&T.charAt(0)!=="#"&&(T="#"+T),S&&S.charAt(0)!=="?"&&(S="?"+S),b+P+(k=k.replace(/[?#]/g,function(R){return encodeURIComponent(R)}))+(S=S.replace("#","%23"))+T},s.prototype.resolve=function(x){return this.resolveObject(w(x,!1,!0)).format()},s.prototype.resolveObject=function(x){if(o.isString(x)){var b=new s;b.parse(x,!1,!0),x=b}for(var k=new s,T=Object.keys(this),P=0;P<T.length;P++){var N=T[P];k[N]=this[N]}if(k.hash=x.hash,x.href==="")return k.href=k.format(),k;if(x.slashes&&!x.protocol){for(var S=Object.keys(x),R=0;R<S.length;R++){var O=S[R];O!=="protocol"&&(k[O]=x[O])}return g[k.protocol]&&k.hostname&&!k.pathname&&(k.path=k.pathname="/"),k.href=k.format(),k}if(x.protocol&&x.protocol!==k.protocol){if(!g[x.protocol]){for(var C=Object.keys(x),q=0;q<C.length;q++){var M=C[q];k[M]=x[M]}return k.href=k.format(),k}if(k.protocol=x.protocol,x.host||_[x.protocol])k.pathname=x.pathname;else{for(var V=(x.pathname||"").split("/");V.length&&!(x.host=V.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),V[0]!==""&&V.unshift(""),V.length<2&&V.unshift(""),k.pathname=V.join("/")}if(k.search=x.search,k.query=x.query,k.host=x.host||"",k.auth=x.auth,k.hostname=x.hostname||x.host,k.port=x.port,k.pathname||k.search){var W=k.pathname||"",rt=k.search||"";k.path=W+rt}return k.slashes=k.slashes||x.slashes,k.href=k.format(),k}var tt=k.pathname&&k.pathname.charAt(0)==="/",Q=x.host||x.pathname&&x.pathname.charAt(0)==="/",I=Q||tt||k.host&&x.pathname,H=I,B=k.pathname&&k.pathname.split("/")||[],K=(V=x.pathname&&x.pathname.split("/")||[],k.protocol&&!g[k.protocol]);if(K&&(k.hostname="",k.port=null,k.host&&(B[0]===""?B[0]=k.host:B.unshift(k.host)),k.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&(V[0]===""?V[0]=x.host:V.unshift(x.host)),x.host=null),I=I&&(V[0]===""||B[0]==="")),Q)k.host=x.host||x.host===""?x.host:k.host,k.hostname=x.hostname||x.hostname===""?x.hostname:k.hostname,k.search=x.search,k.query=x.query,B=V;else if(V.length)B||(B=[]),B.pop(),B=B.concat(V),k.search=x.search,k.query=x.query;else if(!o.isNullOrUndefined(x.search))return K&&(k.hostname=k.host=B.shift(),(nt=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=nt.shift(),k.host=k.hostname=nt.shift())),k.search=x.search,k.query=x.query,o.isNull(k.pathname)&&o.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.href=k.format(),k;if(!B.length)return k.pathname=null,k.search?k.path="/"+k.search:k.path=null,k.href=k.format(),k;for(var X=B.slice(-1)[0],J=(k.host||x.host||B.length>1)&&(X==="."||X==="..")||X==="",U=0,G=B.length;G>=0;G--)(X=B[G])==="."?B.splice(G,1):X===".."?(B.splice(G,1),U++):U&&(B.splice(G,1),U--);if(!I&&!H)for(;U--;U)B.unshift("..");!I||B[0]===""||B[0]&&B[0].charAt(0)==="/"||B.unshift(""),J&&B.join("/").substr(-1)!=="/"&&B.push("");var nt,ft=B[0]===""||B[0]&&B[0].charAt(0)==="/";return K&&(k.hostname=k.host=ft?"":B.length?B.shift():"",(nt=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=nt.shift(),k.host=k.hostname=nt.shift())),(I=I||k.host&&B.length)&&!ft&&B.unshift(""),B.length?k.pathname=B.join("/"):(k.pathname=null,k.path=null),o.isNull(k.pathname)&&o.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.auth=x.auth||k.auth,k.slashes=k.slashes||x.slashes,k.href=k.format(),k},s.prototype.parseHost=function(){var x=this.host,b=l.exec(x);b&&((b=b[0])!==":"&&(this.port=b.substr(1)),x=x.substr(0,x.length-b.length)),x&&(this.hostname=x)}},function(r,t,e){(function(i,n){var o;function s(a){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}(function(a){var l=s(t)=="object"&&t&&!t.nodeType&&t,f=s(i)=="object"&&i&&!i.nodeType&&i,p=(n===void 0?"undefined":s(n))=="object"&&n;p.global!==p&&p.window!==p&&p.self!==p||(a=p);var y,h,d=2147483647,u=/^xn--/,c=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,v=String.fromCharCode;function w(O){throw new RangeError(_[O])}function x(O,C){for(var q=O.length,M=[];q--;)M[q]=C(O[q]);return M}function b(O,C){var q=O.split("@"),M="";return q.length>1&&(M=q[0]+"@",O=q[1]),M+x((O=O.replace(m,".")).split("."),C).join(".")}function k(O){for(var C,q,M=[],V=0,W=O.length;V<W;)(C=O.charCodeAt(V++))>=55296&&C<=56319&&V<W?(64512&(q=O.charCodeAt(V++)))==56320?M.push(((1023&C)<<10)+(1023&q)+65536):(M.push(C),V--):M.push(C);return M}function T(O){return x(O,function(C){var q="";return C>65535&&(q+=v((C-=65536)>>>10&1023|55296),C=56320|1023&C),q+=v(C)}).join("")}function P(O,C){return O+22+75*(O<26)-((C!=0)<<5)}function N(O,C,q){var M=0;for(O=q?g(O/700):O>>1,O+=g(O/C);O>455;M+=36)O=g(O/35);return g(M+36*O/(O+38))}function S(O){var C,q,M,V,W,rt,tt,Q,I,H,B,K=[],X=O.length,J=0,U=128,G=72;for((q=O.lastIndexOf("-"))<0&&(q=0),M=0;M<q;++M)O.charCodeAt(M)>=128&&w("not-basic"),K.push(O.charCodeAt(M));for(V=q>0?q+1:0;V<X;){for(W=J,rt=1,tt=36;V>=X&&w("invalid-input"),((Q=(B=O.charCodeAt(V++))-48<10?B-22:B-65<26?B-65:B-97<26?B-97:36)>=36||Q>g((d-J)/rt))&&w("overflow"),J+=Q*rt,!(Q<(I=tt<=G?1:tt>=G+26?26:tt-G));tt+=36)rt>g(d/(H=36-I))&&w("overflow"),rt*=H;G=N(J-W,C=K.length+1,W==0),g(J/C)>d-U&&w("overflow"),U+=g(J/C),J%=C,K.splice(J++,0,U)}return T(K)}function R(O){var C,q,M,V,W,rt,tt,Q,I,H,B,K,X,J,U,G=[];for(K=(O=k(O)).length,C=128,q=0,W=72,rt=0;rt<K;++rt)(B=O[rt])<128&&G.push(v(B));for(M=V=G.length,V&&G.push("-");M<K;){for(tt=d,rt=0;rt<K;++rt)(B=O[rt])>=C&&B<tt&&(tt=B);for(tt-C>g((d-q)/(X=M+1))&&w("overflow"),q+=(tt-C)*X,C=tt,rt=0;rt<K;++rt)if((B=O[rt])<C&&++q>d&&w("overflow"),B==C){for(Q=q,I=36;!(Q<(H=I<=W?1:I>=W+26?26:I-W));I+=36)U=Q-H,J=36-H,G.push(v(P(H+U%J,0))),Q=g(U/J);G.push(v(P(Q,0))),W=N(q,X,M==V),q=0,++M}++q,++C}return G.join("")}if(y={version:"1.4.1",ucs2:{decode:k,encode:T},decode:S,encode:R,toASCII:function(O){return b(O,function(C){return c.test(C)?"xn--"+R(C):C})},toUnicode:function(O){return b(O,function(C){return u.test(C)?S(C.slice(4).toLowerCase()):C})}},s(e(13))=="object"&&e(13))(o=function(){return y}.call(t,e,t,i))===void 0||(i.exports=o);else if(l&&f)if(i.exports==l)f.exports=y;else for(h in y)y.hasOwnProperty(h)&&(l[h]=y[h]);else a.punycode=y})(this)}).call(this,e(33)(r),e(7))},function(r,t){r.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(r,t,e){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}r.exports={isString:function(n){return typeof n=="string"},isObject:function(n){return i(n)==="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}}},function(r,t,e){"use strict";t.decode=t.parse=e(36),t.encode=t.stringify=e(37)},function(r,t,e){"use strict";function i(o,s){return Object.prototype.hasOwnProperty.call(o,s)}r.exports=function(o,s,a,l){s=s||"&",a=a||"=";var f={};if(typeof o!="string"||o.length===0)return f;var p=/\+/g;o=o.split(s);var y=1e3;l&&typeof l.maxKeys=="number"&&(y=l.maxKeys);var h=o.length;y>0&&h>y&&(h=y);for(var d=0;d<h;++d){var u,c,m,_,g=o[d].replace(p,"%20"),v=g.indexOf(a);v>=0?(u=g.substr(0,v),c=g.substr(v+1)):(u=g,c=""),m=decodeURIComponent(u),_=decodeURIComponent(c),i(f,m)?n(f[m])?f[m].push(_):f[m]=[f[m],_]:f[m]=_}return f};var n=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"}},function(r,t,e){"use strict";function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(l)}var n=function(l){switch(i(l)){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};r.exports=function(l,f,p,y){return f=f||"&",p=p||"=",l===null&&(l=void 0),i(l)==="object"?s(a(l),function(h){var d=encodeURIComponent(n(h))+p;return o(l[h])?s(l[h],function(u){return d+encodeURIComponent(n(u))}).join(f):d+encodeURIComponent(n(l[h]))}).join(f):y?encodeURIComponent(n(y))+p+encodeURIComponent(n(l)):""};var o=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function s(l,f){if(l.map)return l.map(f);for(var p=[],y=0;y<l.length;y++)p.push(f(l[y],y));return p}var a=Object.keys||function(l){var f=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&f.push(p);return f}}])})});var Te=wt(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});function sS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var aS=function r(t,e){sS(this,r),this.data=t,this.text=e.text||t,this.options=e};hu.default=aS});var Um=wt(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.CODE39=void 0;var lS=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),uS=Te(),cS=fS(uS);function fS(r){return r&&r.__esModule?r:{default:r}}function hS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function dS(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function pS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var mS=function(r){pS(t,r);function t(e,i){return hS(this,t),e=e.toUpperCase(),i.mod43&&(e+=yS(vS(e))),dS(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return lS(t,[{key:"encode",value:function(){for(var i=du("*"),n=0;n<this.data.length;n++)i+=du(this.data[n])+"0";return i+=du("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),t}(cS.default),Bm=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],gS=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function du(r){return _S(Fm(r))}function _S(r){return gS[r].toString(2)}function yS(r){return Bm[r]}function Fm(r){return Bm.indexOf(r)}function vS(r){for(var t=0,e=0;e<r.length;e++)t+=Fm(r[e]);return t=t%43,t}Ws.CODE39=mS});var Gi=wt(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});var oo;function pu(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var Hm=Zt.SET_A=0,zm=Zt.SET_B=1,Vm=Zt.SET_C=2,R9=Zt.SHIFT=98,bS=Zt.START_A=103,wS=Zt.START_B=104,xS=Zt.START_C=105,I9=Zt.MODULO=103,q9=Zt.STOP=106,D9=Zt.FNC1=207,M9=Zt.SET_BY_CODE=(oo={},pu(oo,bS,Hm),pu(oo,wS,zm),pu(oo,xS,Vm),oo),$9=Zt.SWAP={101:Hm,100:zm,99:Vm},B9=Zt.A_START_CHAR=String.fromCharCode(208),F9=Zt.B_START_CHAR=String.fromCharCode(209),U9=Zt.C_START_CHAR=String.fromCharCode(210),H9=Zt.A_CHARS="[\0-_\xC8-\xCF]",z9=Zt.B_CHARS="[ -\x7F\xC8-\xCF]",V9=Zt.C_CHARS="(\xCF*[0-9]{2}\xCF*)",G9=Zt.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]});var so=wt(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var kS=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),ES=Te(),OS=AS(ES),Ce=Gi();function AS(r){return r&&r.__esModule?r:{default:r}}function SS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function TS(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function CS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var NS=function(r){CS(t,r);function t(e,i){SS(this,t);var n=TS(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),i));return n.bytes=e.split("").map(function(o){return o.charCodeAt(0)}),n}return kS(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,n=i.shift()-105,o=Ce.SET_BY_CODE[n];if(o===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(Ce.FNC1);var s=t.next(i,1,o);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(n)+s.result+t.getBar((s.checksum+n)%Ce.MODULO)+t.getBar(Ce.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return Ce.BARS[i]?Ce.BARS[i].toString():""}},{key:"correctIndex",value:function(i,n){if(n===Ce.SET_A){var o=i.shift();return o<32?o+64:o-32}else return n===Ce.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,n,o){if(!i.length)return{result:"",checksum:0};var s=void 0,a=void 0;if(i[0]>=200){a=i.shift()-105;var l=Ce.SWAP[a];l!==void 0?s=t.next(i,n+1,l):((o===Ce.SET_A||o===Ce.SET_B)&&a===Ce.SHIFT&&(i[0]=o===Ce.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),s=t.next(i,n+1,o))}else a=t.correctIndex(i,o),s=t.next(i,n+1,o);var f=t.getBar(a),p=a*n;return{result:f+s.result,checksum:p+s.checksum}}}]),t}(OS.default);mu.default=NS});var Jm=wt(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var qr=Gi(),Gm=function(t){return t.match(new RegExp("^"+qr.A_CHARS+"*"))[0].length},Km=function(t){return t.match(new RegExp("^"+qr.B_CHARS+"*"))[0].length},Wm=function(t){return t.match(new RegExp("^"+qr.C_CHARS+"*"))[0]};function gu(r,t){var e=t?qr.A_CHARS:qr.B_CHARS,i=r.match(new RegExp("^("+e+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+String.fromCharCode(204)+Ym(r.substring(i[1].length));var n=r.match(new RegExp("^"+e+"+"))[0];return n.length===r.length?r:n+String.fromCharCode(t?205:206)+gu(r.substring(n.length),!t)}function Ym(r){var t=Wm(r),e=t.length;if(e===r.length)return r;r=r.substring(e);var i=Gm(r)>=Km(r);return t+String.fromCharCode(i?206:205)+gu(r,i)}_u.default=function(r){var t=void 0,e=Wm(r).length;if(e>=2)t=qr.C_START_CHAR+Ym(r);else{var i=Gm(r)>Km(r);t=(i?qr.A_START_CHAR:qr.B_START_CHAR)+gu(r,i)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(n,o){return String.fromCharCode(203)+o})}});var Xm=wt(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var LS=so(),PS=Zm(LS),jS=Jm(),RS=Zm(jS);function Zm(r){return r&&r.__esModule?r:{default:r}}function IS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function yu(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function qS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var DS=function(r){qS(t,r);function t(e,i){if(IS(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var n=yu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,RS.default)(e),i));else var n=yu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return yu(n)}return t}(PS.default);vu.default=DS});var tg=wt(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var MS=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),$S=so(),BS=FS($S),Qm=Gi();function FS(r){return r&&r.__esModule?r:{default:r}}function US(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function HS(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function zS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var VS=function(r){zS(t,r);function t(e,i){return US(this,t),HS(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qm.A_START_CHAR+e,i))}return MS(t,[{key:"valid",value:function(){return new RegExp("^"+Qm.A_CHARS+"+$").test(this.data)}}]),t}(BS.default);bu.default=VS});var rg=wt(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var GS=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),KS=so(),WS=YS(KS),eg=Gi();function YS(r){return r&&r.__esModule?r:{default:r}}function JS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ZS(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function XS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var QS=function(r){XS(t,r);function t(e,i){return JS(this,t),ZS(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,eg.B_START_CHAR+e,i))}return GS(t,[{key:"valid",value:function(){return new RegExp("^"+eg.B_CHARS+"+$").test(this.data)}}]),t}(WS.default);wu.default=QS});var ng=wt(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var t2=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),e2=so(),r2=i2(e2),ig=Gi();function i2(r){return r&&r.__esModule?r:{default:r}}function n2(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function o2(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a2=function(r){s2(t,r);function t(e,i){return n2(this,t),o2(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ig.C_START_CHAR+e,i))}return t2(t,[{key:"valid",value:function(){return new RegExp("^"+ig.C_CHARS+"+$").test(this.data)}}]),t}(r2.default);xu.default=a2});var og=wt(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.CODE128C=Ye.CODE128B=Ye.CODE128A=Ye.CODE128=void 0;var l2=Xm(),u2=Ys(l2),c2=tg(),f2=Ys(c2),h2=rg(),d2=Ys(h2),p2=ng(),m2=Ys(p2);function Ys(r){return r&&r.__esModule?r:{default:r}}Ye.CODE128=u2.default;Ye.CODE128A=f2.default;Ye.CODE128B=d2.default;Ye.CODE128C=m2.default});var Ki=wt(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});var eB=Dr.SIDE_BIN="101",rB=Dr.MIDDLE_BIN="01010",iB=Dr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},nB=Dr.EAN2_STRUCTURE=["LL","LG","GL","GG"],oB=Dr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],sB=Dr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]});var Wi=wt(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var g2=Ki(),_2=function(t,e,i){var n=t.split("").map(function(s,a){return g2.BINARIES[e[a]]}).map(function(s,a){return s?s[t[a]]:""});if(i){var o=t.length-1;n=n.map(function(s,a){return a<o?s+i:s})}return n.join("")};ku.default=_2});var Ou=wt(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var y2=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),Yi=Ki(),v2=Wi(),sg=ag(v2),b2=Te(),w2=ag(b2);function ag(r){return r&&r.__esModule?r:{default:r}}function x2(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function k2(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function E2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var O2=function(r){E2(t,r);function t(e,i){x2(this,t);var n=k2(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return y2(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,n){return this.text.substr(i,n)}},{key:"leftEncode",value:function(i,n){return(0,sg.default)(i,n)}},{key:"rightText",value:function(i,n){return this.text.substr(i,n)}},{key:"rightEncode",value:function(i,n){return(0,sg.default)(i,n)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},n={height:this.guardHeight};return[{data:Yi.SIDE_BIN,options:n},{data:this.leftEncode(),text:this.leftText(),options:i},{data:Yi.MIDDLE_BIN,options:n},{data:this.rightEncode(),text:this.rightText(),options:i},{data:Yi.SIDE_BIN,options:n}]}},{key:"encodeFlat",value:function(){var i=[Yi.SIDE_BIN,this.leftEncode(),Yi.MIDDLE_BIN,this.rightEncode(),Yi.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),t}(w2.default);Eu.default=O2});var ug=wt(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var A2=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),ao=function r(t,e,i){t===null&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:r(o,e,i)}else{if("value"in n)return n.value;var s=n.get;return s===void 0?void 0:s.call(i)}},S2=Ki(),T2=Ou(),C2=N2(T2);function N2(r){return r&&r.__esModule?r:{default:r}}function L2(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function P2(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function j2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var lg=function(t){var e=t.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,n,o){return o%2?i+n*3:i+n},0);return(10-e%10)%10},R2=function(r){j2(t,r);function t(e,i){L2(this,t),e.search(/^[0-9]{12}$/)!==-1&&(e+=lg(e));var n=P2(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.lastChar=i.lastChar,n}return A2(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===lg(this.data)}},{key:"leftText",value:function(){return ao(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),n=S2.EAN13_STRUCTURE[this.data[0]];return ao(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,i,n)}},{key:"rightText",value:function(){return ao(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return ao(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=ao(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),t}(C2.default);Au.default=R2});var fg=wt(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var I2=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),Js=function r(t,e,i){t===null&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:r(o,e,i)}else{if("value"in n)return n.value;var s=n.get;return s===void 0?void 0:s.call(i)}},q2=Ou(),D2=M2(q2);function M2(r){return r&&r.__esModule?r:{default:r}}function $2(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function B2(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function F2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var cg=function(t){var e=t.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,n,o){return o%2?i+n:i+n*3},0);return(10-e%10)%10},U2=function(r){F2(t,r);function t(e,i){return $2(this,t),e.search(/^[0-9]{7}$/)!==-1&&(e+=cg(e)),B2(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return I2(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===cg(this.data)}},{key:"leftText",value:function(){return Js(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return Js(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return Js(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return Js(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),t}(D2.default);Su.default=U2});var dg=wt(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var H2=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),z2=Ki(),V2=Wi(),G2=hg(V2),K2=Te(),W2=hg(K2);function hg(r){return r&&r.__esModule?r:{default:r}}function Y2(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function J2(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function Z2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var X2=function(t){var e=t.split("").map(function(i){return+i}).reduce(function(i,n,o){return o%2?i+n*9:i+n*3},0);return e%10},Q2=function(r){Z2(t,r);function t(e,i){return Y2(this,t),J2(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return H2(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=z2.EAN5_STRUCTURE[X2(this.data)];return{data:"1011"+(0,G2.default)(this.data,i,"01"),text:this.text}}}]),t}(W2.default);Tu.default=Q2});var mg=wt(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var tT=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),eT=Ki(),rT=Wi(),iT=pg(rT),nT=Te(),oT=pg(nT);function pg(r){return r&&r.__esModule?r:{default:r}}function sT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function aT(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function lT(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var uT=function(r){lT(t,r);function t(e,i){return sT(this,t),aT(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return tT(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=eT.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,iT.default)(this.data,i,"01"),text:this.text}}}]),t}(oT.default);Cu.default=uT});var Lu=wt(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var cT=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();Zs.checksum=Nu;var fT=Wi(),Ji=gg(fT),hT=Te(),dT=gg(hT);function gg(r){return r&&r.__esModule?r:{default:r}}function pT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function mT(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function gT(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var _T=function(r){gT(t,r);function t(e,i){pT(this,t),e.search(/^[0-9]{11}$/)!==-1&&(e+=Nu(e));var n=mT(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.displayValue=i.displayValue,i.fontSize>i.width*10?n.fontSize=i.width*10:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return cT(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Nu(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,Ji.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,Ji.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,Ji.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,Ji.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,Ji.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,Ji.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),t}(dT.default);function Nu(r){var t=0,e;for(e=1;e<11;e+=2)t+=parseInt(r[e]);for(e=0;e<11;e+=2)t+=parseInt(r[e])*3;return(10-t%10)%10}Zs.default=_T});var vg=wt(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var yT=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),vT=Wi(),bT=yg(vT),wT=Te(),xT=yg(wT),kT=Lu();function yg(r){return r&&r.__esModule?r:{default:r}}function ET(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Pu(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function OT(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var AT=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],ST=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],TT=function(r){OT(t,r);function t(e,i){ET(this,t);var n=Pu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));if(n.isValid=!1,e.search(/^[0-9]{6}$/)!==-1)n.middleDigits=e,n.upcA=_g(e,"0"),n.text=i.text||""+n.upcA[0]+e+n.upcA[n.upcA.length-1],n.isValid=!0;else if(e.search(/^[01][0-9]{7}$/)!==-1)if(n.middleDigits=e.substring(1,e.length-1),n.upcA=_g(n.middleDigits,e[0]),n.upcA[n.upcA.length-1]===e[e.length-1])n.isValid=!0;else return Pu(n);else return Pu(n);return n.displayValue=i.displayValue,i.fontSize>i.width*10?n.fontSize=i.width*10:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return yT(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],n=this.upcA[this.upcA.length-1],o=ST[parseInt(n)][parseInt(i)];return(0,bT.default)(this.middleDigits,o)}}]),t}(xT.default);function _g(r,t){for(var e=parseInt(r[r.length-1]),i=AT[e],n="",o=0,s=0;s<i.length;s++){var a=i[s];a==="X"?n+=r[o++]:n+=a}return n=""+t+n,""+n+(0,kT.checksum)(n)}ju.default=TT});var bg=wt(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.UPCE=xe.UPC=xe.EAN2=xe.EAN5=xe.EAN8=xe.EAN13=void 0;var CT=ug(),NT=Zi(CT),LT=fg(),PT=Zi(LT),jT=dg(),RT=Zi(jT),IT=mg(),qT=Zi(IT),DT=Lu(),MT=Zi(DT),$T=vg(),BT=Zi($T);function Zi(r){return r&&r.__esModule?r:{default:r}}xe.EAN13=NT.default;xe.EAN8=PT.default;xe.EAN5=RT.default;xe.EAN2=qT.default;xe.UPC=MT.default;xe.UPCE=BT.default});var wg=wt(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var _B=lo.START_BIN="1010",yB=lo.END_BIN="11101",vB=lo.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]});var Iu=wt(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var FT=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),Xs=wg(),UT=Te(),HT=zT(UT);function zT(r){return r&&r.__esModule?r:{default:r}}function VT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function GT(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function KT(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var WT=function(r){KT(t,r);function t(){return VT(this,t),GT(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return FT(t,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,n=this.data.match(/.{2}/g).map(function(o){return i.encodePair(o)}).join("");return{data:Xs.START_BIN+n+Xs.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var n=Xs.BINARIES[i[1]];return Xs.BINARIES[i[0]].split("").map(function(o,s){return(o==="1"?"111":"1")+(n[s]==="1"?"000":"0")}).join("")}}]),t}(HT.default);Ru.default=WT});var kg=wt(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var YT=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),JT=Iu(),ZT=XT(JT);function XT(r){return r&&r.__esModule?r:{default:r}}function QT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function tC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function eC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var xg=function(t){var e=t.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,n,o){return i+n*(3-o%2*2)},0);return Math.ceil(e/10)*10-e},rC=function(r){eC(t,r);function t(e,i){return QT(this,t),e.search(/^[0-9]{13}$/)!==-1&&(e+=xg(e)),tC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return YT(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===xg(this.data)}}]),t}(ZT.default);qu.default=rC});var Og=wt(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ITF14=Xi.ITF=void 0;var iC=Iu(),nC=Eg(iC),oC=kg(),sC=Eg(oC);function Eg(r){return r&&r.__esModule?r:{default:r}}Xi.ITF=nC.default;Xi.ITF14=sC.default});var Qi=wt(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var aC=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),lC=Te(),uC=cC(lC);function cC(r){return r&&r.__esModule?r:{default:r}}function fC(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function hC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function dC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var pC=function(r){dC(t,r);function t(e,i){return fC(this,t),hC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return aC(t,[{key:"encode",value:function(){for(var i="110",n=0;n<this.data.length;n++){var o=parseInt(this.data[n]),s=o.toString(2);s=mC(s,4-s.length);for(var a=0;a<s.length;a++)i+=s[a]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),t}(uC.default);function mC(r,t){for(var e=0;e<t;e++)r="0"+r;return r}Du.default=pC});var uo=wt(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.mod10=gC;Qs.mod11=_C;function gC(r){for(var t=0,e=0;e<r.length;e++){var i=parseInt(r[e]);(e+r.length)%2===0?t+=i:t+=i*2%10+Math.floor(i*2/10)}return(10-t%10)%10}function _C(r){for(var t=0,e=[2,3,4,5,6,7],i=0;i<r.length;i++){var n=parseInt(r[r.length-1-i]);t+=e[i%e.length]*n}return(11-t%11)%11}});var Ag=wt(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var yC=Qi(),vC=wC(yC),bC=uo();function wC(r){return r&&r.__esModule?r:{default:r}}function xC(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function kC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function EC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var OC=function(r){EC(t,r);function t(e,i){return xC(this,t),kC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,bC.mod10)(e),i))}return t}(vC.default);Mu.default=OC});var Sg=wt($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});var AC=Qi(),SC=CC(AC),TC=uo();function CC(r){return r&&r.__esModule?r:{default:r}}function NC(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function LC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function PC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var jC=function(r){PC(t,r);function t(e,i){return NC(this,t),LC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,TC.mod11)(e),i))}return t}(SC.default);$u.default=jC});var Cg=wt(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});var RC=Qi(),IC=qC(RC),Tg=uo();function qC(r){return r&&r.__esModule?r:{default:r}}function DC(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function MC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function $C(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var BC=function(r){$C(t,r);function t(e,i){return DC(this,t),e+=(0,Tg.mod10)(e),e+=(0,Tg.mod10)(e),MC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return t}(IC.default);Bu.default=BC});var Lg=wt(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var FC=Qi(),UC=HC(FC),Ng=uo();function HC(r){return r&&r.__esModule?r:{default:r}}function zC(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function GC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var KC=function(r){GC(t,r);function t(e,i){return zC(this,t),e+=(0,Ng.mod11)(e),e+=(0,Ng.mod10)(e),VC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return t}(UC.default);Fu.default=KC});var Pg=wt(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.MSI1110=De.MSI1010=De.MSI11=De.MSI10=De.MSI=void 0;var WC=Qi(),YC=co(WC),JC=Ag(),ZC=co(JC),XC=Sg(),QC=co(XC),tN=Cg(),eN=co(tN),rN=Lg(),iN=co(rN);function co(r){return r&&r.__esModule?r:{default:r}}De.MSI=YC.default;De.MSI10=ZC.default;De.MSI11=QC.default;De.MSI1010=eN.default;De.MSI1110=iN.default});var jg=wt(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.pharmacode=void 0;var nN=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),oN=Te(),sN=aN(oN);function aN(r){return r&&r.__esModule?r:{default:r}}function lN(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function uN(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function cN(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var fN=function(r){cN(t,r);function t(e,i){lN(this,t);var n=uN(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.number=parseInt(e,10),n}return nN(t,[{key:"encode",value:function(){for(var i=this.number,n="";!isNaN(i)&&i!=0;)i%2===0?(n="11100"+n,i=(i-2)/2):(n="100"+n,i=(i-1)/2);return n=n.slice(0,-2),{data:n,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(sN.default);ta.pharmacode=fN});var Rg=wt(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.codabar=void 0;var hN=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),dN=Te(),pN=mN(dN);function mN(r){return r&&r.__esModule?r:{default:r}}function gN(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function _N(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function yN(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var vN=function(r){yN(t,r);function t(e,i){gN(this,t),e.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(e="A"+e+"A");var n=_N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),i));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return hN(t,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],n=this.getEncodings(),o=0;o<this.data.length;o++)i.push(n[this.data.charAt(o)]),o!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(pN.default);ea.codabar=vN});var Ig=wt(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.GenericBarcode=void 0;var bN=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),wN=Te(),xN=kN(wN);function kN(r){return r&&r.__esModule?r:{default:r}}function EN(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ON(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function AN(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var SN=function(r){AN(t,r);function t(e,i){return EN(this,t),ON(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return bN(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(xN.default);ra.GenericBarcode=SN});var Dg=wt(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});var TN=Um(),ia=og(),tn=bg(),qg=Og(),fo=Pg(),CN=jg(),NN=Rg(),LN=Ig();Uu.default={CODE39:TN.CODE39,CODE128:ia.CODE128,CODE128A:ia.CODE128A,CODE128B:ia.CODE128B,CODE128C:ia.CODE128C,EAN13:tn.EAN13,EAN8:tn.EAN8,EAN5:tn.EAN5,EAN2:tn.EAN2,UPC:tn.UPC,UPCE:tn.UPCE,ITF14:qg.ITF14,ITF:qg.ITF,MSI:fo.MSI,MSI10:fo.MSI10,MSI11:fo.MSI11,MSI1010:fo.MSI1010,MSI1110:fo.MSI1110,pharmacode:CN.pharmacode,codabar:NN.codabar,GenericBarcode:LN.GenericBarcode}});var ho=wt(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var PN=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r};Hu.default=function(r,t){return PN({},r,t)}});var Mg=wt(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.default=jN;function jN(r){var t=[];function e(i){if(Array.isArray(i))for(var n=0;n<i.length;n++)e(i[n]);else i.text=i.text||"",i.data=i.data||"",t.push(i)}return e(r),t}});var $g=wt(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.default=RN;function RN(r){return r.marginTop=r.marginTop||r.margin,r.marginBottom=r.marginBottom||r.margin,r.marginRight=r.marginRight||r.margin,r.marginLeft=r.marginLeft||r.margin,r}});var Ku=wt(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.default=IN;function IN(r){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var e in t)t.hasOwnProperty(e)&&(e=t[e],typeof r[e]=="string"&&(r[e]=parseInt(r[e],10)));return typeof r.displayValue=="string"&&(r.displayValue=r.displayValue!="false"),r}});var Yu=wt(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var qN={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Wu.default=qN});var Ug=wt(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var DN=Ku(),MN=Fg(DN),$N=Yu(),Bg=Fg($N);function Fg(r){return r&&r.__esModule?r:{default:r}}function BN(r){var t={};for(var e in Bg.default)Bg.default.hasOwnProperty(e)&&(r.hasAttribute("jsbarcode-"+e.toLowerCase())&&(t[e]=r.getAttribute("jsbarcode-"+e.toLowerCase())),r.hasAttribute("data-"+e.toLowerCase())&&(t[e]=r.getAttribute("data-"+e.toLowerCase())));return t.value=r.getAttribute("jsbarcode-value")||r.getAttribute("data-value"),t=(0,MN.default)(t),t}Ju.default=BN});var Zu=wt(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.getTotalWidthOfEncodings=Me.calculateEncodingAttributes=Me.getBarcodePadding=Me.getEncodingHeight=Me.getMaximumHeightOfEncodings=void 0;var FN=ho(),UN=HN(FN);function HN(r){return r&&r.__esModule?r:{default:r}}function Hg(r,t){return t.height+(t.displayValue&&r.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function zg(r,t,e){if(e.displayValue&&t<r){if(e.textAlign=="center")return Math.floor((r-t)/2);if(e.textAlign=="left")return 0;if(e.textAlign=="right")return Math.floor(r-t)}return 0}function zN(r,t,e){for(var i=0;i<r.length;i++){var n=r[i],o=(0,UN.default)(t,n.options),s;o.displayValue?s=KN(n.text,o,e):s=0;var a=n.data.length*o.width;n.width=Math.ceil(Math.max(s,a)),n.height=Hg(n,o),n.barcodePadding=zg(s,a,o)}}function VN(r){for(var t=0,e=0;e<r.length;e++)t+=r[e].width;return t}function GN(r){for(var t=0,e=0;e<r.length;e++)r[e].height>t&&(t=r[e].height);return t}function KN(r,t,e){var i;if(e)i=e;else if(typeof document!="undefined")i=document.createElement("canvas").getContext("2d");else return 0;i.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var n=i.measureText(r);if(!n)return 0;var o=n.width;return o}Me.getMaximumHeightOfEncodings=GN;Me.getEncodingHeight=Hg;Me.getBarcodePadding=zg;Me.calculateEncodingAttributes=zN;Me.getTotalWidthOfEncodings=VN});var Vg=wt(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var WN=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),YN=ho(),JN=ZN(YN),Xu=Zu();function ZN(r){return r&&r.__esModule?r:{default:r}}function XN(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var QN=function(){function r(t,e,i){XN(this,r),this.canvas=t,this.encodings=e,this.options=i}return WN(r,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var i=(0,JN.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(i,this.encodings[e]),this.drawCanvasText(i,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,Xu.calculateEncodingAttributes)(this.encodings,this.options,e);var i=(0,Xu.getTotalWidthOfEncodings)(this.encodings),n=(0,Xu.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,i){var n=this.canvas.getContext("2d"),o=i.data,s;e.textPosition=="top"?s=e.marginTop+e.fontSize+e.textMargin:s=e.marginTop,n.fillStyle=e.lineColor;for(var a=0;a<o.length;a++){var l=a*e.width+i.barcodePadding;o[a]==="1"?n.fillRect(l,s,e.width,e.height):o[a]&&n.fillRect(l,s,e.width,e.height*o[a])}}},{key:"drawCanvasText",value:function(e,i){var n=this.canvas.getContext("2d"),o=e.fontOptions+" "+e.fontSize+"px "+e.font;if(e.displayValue){var s,a;e.textPosition=="top"?a=e.marginTop+e.fontSize-e.textMargin:a=e.height+e.textMargin+e.marginTop+e.fontSize,n.font=o,e.textAlign=="left"||i.barcodePadding>0?(s=0,n.textAlign="left"):e.textAlign=="right"?(s=i.width-1,n.textAlign="right"):(s=i.width/2,n.textAlign="center"),n.fillText(i.text,s,a)}}},{key:"moveCanvasDrawing",value:function(e){var i=this.canvas.getContext("2d");i.translate(e.width,0)}},{key:"restoreCanvas",value:function(){var e=this.canvas.getContext("2d");e.restore()}}]),r}();Qu.default=QN});var Gg=wt(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var t5=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),e5=ho(),r5=i5(e5),tc=Zu();function i5(r){return r&&r.__esModule?r:{default:r}}function n5(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var na="http://www.w3.org/2000/svg",o5=function(){function r(t,e,i){n5(this,r),this.svg=t,this.encodings=e,this.options=i,this.document=i.xmlDocument||document}return t5(r,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var n=this.encodings[i],o=(0,r5.default)(this.options,n.options),s=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(s,o),this.drawSvgBarcode(s,o,n),this.drawSVGText(s,o,n),e+=n.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,tc.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,tc.getTotalWidthOfEncodings)(this.encodings),i=(0,tc.getMaximumHeightOfEncodings)(this.encodings),n=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,i),this.options.background&&this.drawRect(0,0,n,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,i,n){var o=n.data,s;i.textPosition=="top"?s=i.fontSize+i.textMargin:s=0;for(var a=0,l=0,f=0;f<o.length;f++)l=f*i.width+n.barcodePadding,o[f]==="1"?a++:a>0&&(this.drawRect(l-i.width*a,s,i.width*a,i.height,e),a=0);a>0&&this.drawRect(l-i.width*(a-1),s,i.width*a,i.height,e)}},{key:"drawSVGText",value:function(e,i,n){var o=this.document.createElementNS(na,"text");if(i.displayValue){var s,a;o.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?a=i.fontSize-i.textMargin:a=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||n.barcodePadding>0?(s=0,o.setAttribute("text-anchor","start")):i.textAlign=="right"?(s=n.width-1,o.setAttribute("text-anchor","end")):(s=n.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",s),o.setAttribute("y",a),o.appendChild(this.document.createTextNode(n.text)),e.appendChild(o)}}},{key:"setSvgAttributes",value:function(e,i){var n=this.svg;n.setAttribute("width",e+"px"),n.setAttribute("height",i+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+e+" "+i),n.setAttribute("xmlns",na),n.setAttribute("version","1.1"),n.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,i,n){var o=this.document.createElementNS(na,"g");return o.setAttribute("transform","translate("+e+", "+i+")"),n.appendChild(o),o}},{key:"setGroupOptions",value:function(e,i){e.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(e,i,n,o,s){var a=this.document.createElementNS(na,"rect");return a.setAttribute("x",e),a.setAttribute("y",i),a.setAttribute("width",n),a.setAttribute("height",o),s.appendChild(a),a}}]),r}();ec.default=o5});var Kg=wt(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var s5=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function a5(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var l5=function(){function r(t,e,i){a5(this,r),this.object=t,this.encodings=e,this.options=i}return s5(r,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),r}();rc.default=l5});var Wg=wt(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var u5=Vg(),c5=ic(u5),f5=Gg(),h5=ic(f5),d5=Kg(),p5=ic(d5);function ic(r){return r&&r.__esModule?r:{default:r}}nc.default={CanvasRenderer:c5.default,SVGRenderer:h5.default,ObjectRenderer:p5.default}});var lc=wt(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});function oc(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function sc(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function ac(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var m5=function(r){ac(t,r);function t(e,i){oc(this,t);var n=sc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name="InvalidInputException",n.symbology=e,n.input=i,n.message='"'+n.input+'" is not a valid input for '+n.symbology,n}return t}(Error),g5=function(r){ac(t,r);function t(){oc(this,t);var e=sc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="InvalidElementException",e.message="Not supported type to render on",e}return t}(Error),_5=function(r){ac(t,r);function t(){oc(this,t);var e=sc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="NoElementException",e.message="No element to render on.",e}return t}(Error);po.InvalidInputException=m5;po.InvalidElementException=g5;po.NoElementException=_5});var Jg=wt(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var y5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},v5=Ug(),uc=Yg(v5),b5=Wg(),mo=Yg(b5),w5=lc();function Yg(r){return r&&r.__esModule?r:{default:r}}function cc(r){if(typeof r=="string")return x5(r);if(Array.isArray(r)){for(var t=[],e=0;e<r.length;e++)t.push(cc(r[e]));return t}else{if(typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLImageElement)return k5(r);if(r&&r.nodeName&&r.nodeName.toLowerCase()==="svg"||typeof SVGElement!="undefined"&&r instanceof SVGElement)return{element:r,options:(0,uc.default)(r),renderer:mo.default.SVGRenderer};if(typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLCanvasElement)return{element:r,options:(0,uc.default)(r),renderer:mo.default.CanvasRenderer};if(r&&r.getContext)return{element:r,renderer:mo.default.CanvasRenderer};if(r&&(typeof r=="undefined"?"undefined":y5(r))==="object"&&!r.nodeName)return{element:r,renderer:mo.default.ObjectRenderer};throw new w5.InvalidElementException}}function x5(r){var t=document.querySelectorAll(r);if(t.length!==0){for(var e=[],i=0;i<t.length;i++)e.push(cc(t[i]));return e}}function k5(r){var t=document.createElement("canvas");return{element:t,options:(0,uc.default)(r),renderer:mo.default.CanvasRenderer,afterRender:function(){r.setAttribute("src",t.toDataURL())}}}fc.default=cc});var Zg=wt(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var E5=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function O5(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var A5=function(){function r(t){O5(this,r),this.api=t}return E5(r,[{key:"handleCatch",value:function(e){if(e.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw e.message;else throw e;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var i=e.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(n){return this.handleCatch(n),this.api}}}]),r}();hc.default=A5});var o_=wt((YB,n_)=>{"use strict";var S5=Dg(),ni=Mr(S5),T5=ho(),go=Mr(T5),C5=Mg(),Qg=Mr(C5),N5=$g(),Xg=Mr(N5),L5=Jg(),P5=Mr(L5),j5=Ku(),R5=Mr(j5),I5=Zg(),q5=Mr(I5),t_=lc(),D5=Yu(),e_=Mr(D5);function Mr(r){return r&&r.__esModule?r:{default:r}}var cr=function(){},oa=function(t,e,i){var n=new cr;if(typeof t=="undefined")throw Error("No element to render on was provided.");return n._renderProperties=(0,P5.default)(t),n._encodings=[],n._options=e_.default,n._errorHandler=new q5.default(n),typeof e!="undefined"&&(i=i||{},i.format||(i.format=i_()),n.options(i)[i.format](e,i).render()),n};oa.getModule=function(r){return ni.default[r]};for(dc in ni.default)ni.default.hasOwnProperty(dc)&&M5(ni.default,dc);var dc;function M5(r,t){cr.prototype[t]=cr.prototype[t.toUpperCase()]=cr.prototype[t.toLowerCase()]=function(e,i){var n=this;return n._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text=="undefined"?void 0:""+i.text;var o=(0,go.default)(n._options,i);o=(0,R5.default)(o);var s=r[t],a=r_(e,s,o);return n._encodings.push(a),n})}}function r_(r,t,e){r=""+r;var i=new t(r,e);if(!i.valid())throw new t_.InvalidInputException(i.constructor.name,r);var n=i.encode();n=(0,Qg.default)(n);for(var o=0;o<n.length;o++)n[o].options=(0,go.default)(e,n[o].options);return n}function i_(){return ni.default.CODE128?"CODE128":Object.keys(ni.default)[0]}cr.prototype.options=function(r){return this._options=(0,go.default)(this._options,r),this};cr.prototype.blank=function(r){var t=new Array(r+1).join("0");return this._encodings.push({data:t}),this};cr.prototype.init=function(){if(!!this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var r;for(var t in this._renderProperties){r=this._renderProperties[t];var e=(0,go.default)(this._options,r.options);e.format=="auto"&&(e.format=i_()),this._errorHandler.wrapBarcodeCall(function(){var i=e.value,n=ni.default[e.format.toUpperCase()],o=r_(i,n,e);pc(r,o,e)})}}};cr.prototype.render=function(){if(!this._renderProperties)throw new t_.NoElementException;if(Array.isArray(this._renderProperties))for(var r=0;r<this._renderProperties.length;r++)pc(this._renderProperties[r],this._encodings,this._options);else pc(this._renderProperties,this._encodings,this._options);return this};cr.prototype._defaults=e_.default;function pc(r,t,e){t=(0,Qg.default)(t);for(var i=0;i<t.length;i++)t[i].options=(0,go.default)(e,t[i].options),(0,Xg.default)(t[i].options);(0,Xg.default)(e);var n=r.renderer,o=new n(r.element,t,e);o.render(),r.afterRender&&r.afterRender()}typeof window!="undefined"&&(window.JsBarcode=oa);typeof jQuery!="undefined"&&(jQuery.fn.JsBarcode=function(r,t){var e=[];return jQuery(this).each(function(){e.push(this)}),oa(e,r,t)});n_.exports=oa});var u_=wt((l_,wc)=>{(function(r){if(typeof l_=="object"&&typeof wc!="undefined")wc.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=r()}})(function(){var r,t,e;return function i(n,o,s){function a(p,y){if(!o[p]){if(!n[p]){var h=typeof sn=="function"&&sn;if(!y&&h)return h(p,!0);if(l)return l(p,!0);var d=new Error("Cannot find module '"+p+"'");throw d.code="MODULE_NOT_FOUND",d}var u=o[p]={exports:{}};n[p][0].call(u.exports,function(c){var m=n[p][1][c];return a(m||c)},u,u.exports,i,n,o,s)}return o[p].exports}for(var l=typeof sn=="function"&&sn,f=0;f<s.length;f++)a(s[f]);return a}({1:[function(i,n,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,l;if(a){var f=0,p=new a(c),y=s.document.createTextNode("");p.observe(y,{characterData:!0}),l=function(){y.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var h=new s.MessageChannel;h.port1.onmessage=c,l=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?l=function(){var _=s.document.createElement("script");_.onreadystatechange=function(){c(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:l=function(){setTimeout(c,0)};var d,u=[];function c(){d=!0;for(var _,g,v=u.length;v;){for(g=u,u=[],_=-1;++_<v;)g[_]();v=u.length}d=!1}n.exports=m;function m(_){u.push(_)===1&&!d&&l()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(i,n,o){"use strict";var s=i(1);function a(){}var l={},f=["REJECTED"],p=["FULFILLED"],y=["PENDING"];n.exports=h;function h(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,b!==a&&m(this,b)}h.prototype.catch=function(b){return this.then(null,b)},h.prototype.then=function(b,k){if(typeof b!="function"&&this.state===p||typeof k!="function"&&this.state===f)return this;var T=new this.constructor(a);if(this.state!==y){var P=this.state===p?b:k;u(T,P,this.outcome)}else this.queue.push(new d(T,b,k));return T};function d(b,k,T){this.promise=b,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},d.prototype.otherCallFulfilled=function(b){u(this.promise,this.onFulfilled,b)},d.prototype.callRejected=function(b){l.reject(this.promise,b)},d.prototype.otherCallRejected=function(b){u(this.promise,this.onRejected,b)};function u(b,k,T){s(function(){var P;try{P=k(T)}catch(N){return l.reject(b,N)}P===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,P)})}l.resolve=function(b,k){var T=_(c,k);if(T.status==="error")return l.reject(b,T.value);var P=T.value;if(P)m(b,P);else{b.state=p,b.outcome=k;for(var N=-1,S=b.queue.length;++N<S;)b.queue[N].callFulfilled(k)}return b},l.reject=function(b,k){b.state=f,b.outcome=k;for(var T=-1,P=b.queue.length;++T<P;)b.queue[T].callRejected(k);return b};function c(b){var k=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof k=="function")return function(){k.apply(b,arguments)}}function m(b,k){var T=!1;function P(O){T||(T=!0,l.reject(b,O))}function N(O){T||(T=!0,l.resolve(b,O))}function S(){k(N,P)}var R=_(S);R.status==="error"&&P(R.value)}function _(b,k){var T={};try{T.value=b(k),T.status="success"}catch(P){T.status="error",T.value=P}return T}h.resolve=g;function g(b){return b instanceof this?b:l.resolve(new this(a),b)}h.reject=v;function v(b){var k=new this(a);return l.reject(k,b)}h.all=w;function w(b){var k=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,P=!1;if(!T)return this.resolve([]);for(var N=new Array(T),S=0,R=-1,O=new this(a);++R<T;)C(b[R],R);return O;function C(q,M){k.resolve(q).then(V,function(W){P||(P=!0,l.reject(O,W))});function V(W){N[M]=W,++S===T&&!P&&(P=!0,l.resolve(O,N))}}}h.race=x;function x(b){var k=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,P=!1;if(!T)return this.resolve([]);for(var N=-1,S=new this(a);++N<T;)R(b[N]);return S;function R(O){k.resolve(O).then(function(C){P||(P=!0,l.resolve(S,C))},function(C){P||(P=!0,l.reject(S,C))})}}},{1:1}],3:[function(i,n,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=i(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(i,n,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};function a(D,Z){if(!(D instanceof Z))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(D){return}}var f=l();function p(){try{if(!f||!f.open)return!1;var D=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Z=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!D||Z)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(F){return!1}}function y(D,Z){D=D||[],Z=Z||{};try{return new Blob(D,Z)}catch(et){if(et.name!=="TypeError")throw et;for(var F=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,it=new F,ot=0;ot<D.length;ot+=1)it.append(D[ot]);return it.getBlob(Z.type)}}typeof Promise=="undefined"&&i(3);var h=Promise;function d(D,Z){Z&&D.then(function(F){Z(null,F)},function(F){Z(F)})}function u(D,Z,F){typeof Z=="function"&&D.then(Z),typeof F=="function"&&D.catch(F)}function c(D){return typeof D!="string"&&(console.warn(D+" used as a key, but it is not a string."),D=String(D)),D}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",g=void 0,v={},w=Object.prototype.toString,x="readonly",b="readwrite";function k(D){for(var Z=D.length,F=new ArrayBuffer(Z),it=new Uint8Array(F),ot=0;ot<Z;ot++)it[ot]=D.charCodeAt(ot);return F}function T(D){return new h(function(Z){var F=D.transaction(_,b),it=y([""]);F.objectStore(_).put(it,"key"),F.onabort=function(ot){ot.preventDefault(),ot.stopPropagation(),Z(!1)},F.oncomplete=function(){var ot=navigator.userAgent.match(/Chrome\/(\d+)/),et=navigator.userAgent.match(/Edge\//);Z(et||!ot||parseInt(ot[1],10)>=43)}}).catch(function(){return!1})}function P(D){return typeof g=="boolean"?h.resolve(g):T(D).then(function(Z){return g=Z,g})}function N(D){var Z=v[D.name],F={};F.promise=new h(function(it,ot){F.resolve=it,F.reject=ot}),Z.deferredOperations.push(F),Z.dbReady?Z.dbReady=Z.dbReady.then(function(){return F.promise}):Z.dbReady=F.promise}function S(D){var Z=v[D.name],F=Z.deferredOperations.pop();if(F)return F.resolve(),F.promise}function R(D,Z){var F=v[D.name],it=F.deferredOperations.pop();if(it)return it.reject(Z),it.promise}function O(D,Z){return new h(function(F,it){if(v[D.name]=v[D.name]||H(),D.db)if(Z)N(D),D.db.close();else return F(D.db);var ot=[D.name];Z&&ot.push(D.version);var et=f.open.apply(f,ot);Z&&(et.onupgradeneeded=function(ut){var ht=et.result;try{ht.createObjectStore(D.storeName),ut.oldVersion<=1&&ht.createObjectStore(_)}catch(dt){if(dt.name==="ConstraintError")console.warn('The database "'+D.name+'" has been upgraded from version '+ut.oldVersion+" to version "+ut.newVersion+', but the storage "'+D.storeName+'" already exists.');else throw dt}}),et.onerror=function(ut){ut.preventDefault(),it(et.error)},et.onsuccess=function(){var ut=et.result;ut.onversionchange=function(ht){ht.target.close()},F(ut),S(D)}})}function C(D){return O(D,!1)}function q(D){return O(D,!0)}function M(D,Z){if(!D.db)return!0;var F=!D.db.objectStoreNames.contains(D.storeName),it=D.version<D.db.version,ot=D.version>D.db.version;if(it&&(D.version!==Z&&console.warn('The database "'+D.name+`" can't be downgraded from version `+D.db.version+" to version "+D.version+"."),D.version=D.db.version),ot||F){if(F){var et=D.db.version+1;et>D.version&&(D.version=et)}return!0}return!1}function V(D){return new h(function(Z,F){var it=new FileReader;it.onerror=F,it.onloadend=function(ot){var et=btoa(ot.target.result||"");Z({__local_forage_encoded_blob:!0,data:et,type:D.type})},it.readAsBinaryString(D)})}function W(D){var Z=k(atob(D.data));return y([Z],{type:D.type})}function rt(D){return D&&D.__local_forage_encoded_blob}function tt(D){var Z=this,F=Z._initReady().then(function(){var it=v[Z._dbInfo.name];if(it&&it.dbReady)return it.dbReady});return u(F,D,D),F}function Q(D){N(D);for(var Z=v[D.name],F=Z.forages,it=0;it<F.length;it++){var ot=F[it];ot._dbInfo.db&&(ot._dbInfo.db.close(),ot._dbInfo.db=null)}return D.db=null,C(D).then(function(et){return D.db=et,M(D)?q(D):et}).then(function(et){D.db=Z.db=et;for(var ut=0;ut<F.length;ut++)F[ut]._dbInfo.db=et}).catch(function(et){throw R(D,et),et})}function I(D,Z,F,it){it===void 0&&(it=1);try{var ot=D.db.transaction(D.storeName,Z);F(null,ot)}catch(et){if(it>0&&(!D.db||et.name==="InvalidStateError"||et.name==="NotFoundError"))return h.resolve().then(function(){if(!D.db||et.name==="NotFoundError"&&!D.db.objectStoreNames.contains(D.storeName)&&D.version<=D.db.version)return D.db&&(D.version=D.db.version+1),q(D)}).then(function(){return Q(D).then(function(){I(D,Z,F,it-1)})}).catch(F);F(et)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(D){var Z=this,F={db:null};if(D)for(var it in D)F[it]=D[it];var ot=v[F.name];ot||(ot=H(),v[F.name]=ot),ot.forages.push(Z),Z._initReady||(Z._initReady=Z.ready,Z.ready=tt);var et=[];function ut(){return h.resolve()}for(var ht=0;ht<ot.forages.length;ht++){var dt=ot.forages[ht];dt!==Z&&et.push(dt._initReady().catch(ut))}var pt=ot.forages.slice(0);return h.all(et).then(function(){return F.db=ot.db,C(F)}).then(function(mt){return F.db=mt,M(F,Z._defaultConfig.version)?q(F):mt}).then(function(mt){F.db=ot.db=mt,Z._dbInfo=F;for(var kt=0;kt<pt.length;kt++){var Nt=pt[kt];Nt!==Z&&(Nt._dbInfo.db=F.db,Nt._dbInfo.version=F.version)}})}function K(D,Z){var F=this;D=c(D);var it=new h(function(ot,et){F.ready().then(function(){I(F._dbInfo,x,function(ut,ht){if(ut)return et(ut);try{var dt=ht.objectStore(F._dbInfo.storeName),pt=dt.get(D);pt.onsuccess=function(){var mt=pt.result;mt===void 0&&(mt=null),rt(mt)&&(mt=W(mt)),ot(mt)},pt.onerror=function(){et(pt.error)}}catch(mt){et(mt)}})}).catch(et)});return d(it,Z),it}function X(D,Z){var F=this,it=new h(function(ot,et){F.ready().then(function(){I(F._dbInfo,x,function(ut,ht){if(ut)return et(ut);try{var dt=ht.objectStore(F._dbInfo.storeName),pt=dt.openCursor(),mt=1;pt.onsuccess=function(){var kt=pt.result;if(kt){var Nt=kt.value;rt(Nt)&&(Nt=W(Nt));var jt=D(Nt,kt.key,mt++);jt!==void 0?ot(jt):kt.continue()}else ot()},pt.onerror=function(){et(pt.error)}}catch(kt){et(kt)}})}).catch(et)});return d(it,Z),it}function J(D,Z,F){var it=this;D=c(D);var ot=new h(function(et,ut){var ht;it.ready().then(function(){return ht=it._dbInfo,w.call(Z)==="[object Blob]"?P(ht.db).then(function(dt){return dt?Z:V(Z)}):Z}).then(function(dt){I(it._dbInfo,b,function(pt,mt){if(pt)return ut(pt);try{var kt=mt.objectStore(it._dbInfo.storeName);dt===null&&(dt=void 0);var Nt=kt.put(dt,D);mt.oncomplete=function(){dt===void 0&&(dt=null),et(dt)},mt.onabort=mt.onerror=function(){var jt=Nt.error?Nt.error:Nt.transaction.error;ut(jt)}}catch(jt){ut(jt)}})}).catch(ut)});return d(ot,F),ot}function U(D,Z){var F=this;D=c(D);var it=new h(function(ot,et){F.ready().then(function(){I(F._dbInfo,b,function(ut,ht){if(ut)return et(ut);try{var dt=ht.objectStore(F._dbInfo.storeName),pt=dt.delete(D);ht.oncomplete=function(){ot()},ht.onerror=function(){et(pt.error)},ht.onabort=function(){var mt=pt.error?pt.error:pt.transaction.error;et(mt)}}catch(mt){et(mt)}})}).catch(et)});return d(it,Z),it}function G(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){I(Z._dbInfo,b,function(et,ut){if(et)return ot(et);try{var ht=ut.objectStore(Z._dbInfo.storeName),dt=ht.clear();ut.oncomplete=function(){it()},ut.onabort=ut.onerror=function(){var pt=dt.error?dt.error:dt.transaction.error;ot(pt)}}catch(pt){ot(pt)}})}).catch(ot)});return d(F,D),F}function nt(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){I(Z._dbInfo,x,function(et,ut){if(et)return ot(et);try{var ht=ut.objectStore(Z._dbInfo.storeName),dt=ht.count();dt.onsuccess=function(){it(dt.result)},dt.onerror=function(){ot(dt.error)}}catch(pt){ot(pt)}})}).catch(ot)});return d(F,D),F}function ft(D,Z){var F=this,it=new h(function(ot,et){if(D<0){ot(null);return}F.ready().then(function(){I(F._dbInfo,x,function(ut,ht){if(ut)return et(ut);try{var dt=ht.objectStore(F._dbInfo.storeName),pt=!1,mt=dt.openKeyCursor();mt.onsuccess=function(){var kt=mt.result;if(!kt){ot(null);return}D===0||pt?ot(kt.key):(pt=!0,kt.advance(D))},mt.onerror=function(){et(mt.error)}}catch(kt){et(kt)}})}).catch(et)});return d(it,Z),it}function ct(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){I(Z._dbInfo,x,function(et,ut){if(et)return ot(et);try{var ht=ut.objectStore(Z._dbInfo.storeName),dt=ht.openKeyCursor(),pt=[];dt.onsuccess=function(){var mt=dt.result;if(!mt){it(pt);return}pt.push(mt.key),mt.continue()},dt.onerror=function(){ot(dt.error)}}catch(mt){ot(mt)}})}).catch(ot)});return d(F,D),F}function gt(D,Z){Z=m.apply(this,arguments);var F=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||F.name,D.storeName=D.storeName||F.storeName);var it=this,ot;if(!D.name)ot=h.reject("Invalid arguments");else{var et=D.name===F.name&&it._dbInfo.db,ut=et?h.resolve(it._dbInfo.db):C(D).then(function(ht){var dt=v[D.name],pt=dt.forages;dt.db=ht;for(var mt=0;mt<pt.length;mt++)pt[mt]._dbInfo.db=ht;return ht});D.storeName?ot=ut.then(function(ht){if(!!ht.objectStoreNames.contains(D.storeName)){var dt=ht.version+1;N(D);var pt=v[D.name],mt=pt.forages;ht.close();for(var kt=0;kt<mt.length;kt++){var Nt=mt[kt];Nt._dbInfo.db=null,Nt._dbInfo.version=dt}var jt=new h(function(Rt,Xt){var Wt=f.open(D.name,dt);Wt.onerror=function(Ne){var on=Wt.result;on.close(),Xt(Ne)},Wt.onupgradeneeded=function(){var Ne=Wt.result;Ne.deleteObjectStore(D.storeName)},Wt.onsuccess=function(){var Ne=Wt.result;Ne.close(),Rt(Ne)}});return jt.then(function(Rt){pt.db=Rt;for(var Xt=0;Xt<mt.length;Xt++){var Wt=mt[Xt];Wt._dbInfo.db=Rt,S(Wt._dbInfo)}}).catch(function(Rt){throw(R(D,Rt)||h.resolve()).catch(function(){}),Rt})}}):ot=ut.then(function(ht){N(D);var dt=v[D.name],pt=dt.forages;ht.close();for(var mt=0;mt<pt.length;mt++){var kt=pt[mt];kt._dbInfo.db=null}var Nt=new h(function(jt,Rt){var Xt=f.deleteDatabase(D.name);Xt.onerror=function(){var Wt=Xt.result;Wt&&Wt.close(),Rt(Xt.error)},Xt.onblocked=function(){console.warn('dropInstance blocked for database "'+D.name+'" until all open connections are closed')},Xt.onsuccess=function(){var Wt=Xt.result;Wt&&Wt.close(),jt(Wt)}});return Nt.then(function(jt){dt.db=jt;for(var Rt=0;Rt<pt.length;Rt++){var Xt=pt[Rt];S(Xt._dbInfo)}}).catch(function(jt){throw(R(D,jt)||h.resolve()).catch(function(){}),jt})})}return d(ot,Z),ot}var bt={_driver:"asyncStorage",_initStorage:B,_support:p(),iterate:X,getItem:K,setItem:J,removeItem:U,clear:G,length:nt,key:ft,keys:ct,dropInstance:gt};function Et(){return typeof openDatabase=="function"}var Ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ct="~~local_forage_type~",Ut=/^~~local_forage_type~([^~]+)~/,qt="__lfsc__:",E=qt.length,A="arbf",j="blob",z="si08",Y="ui08",st="uic8",_t="si16",xt="si32",Lt="ur16",At="ui32",St="fl32",Ft="fl64",$r=E+A.length,en=Object.prototype.toString;function rn(D){var Z=D.length*.75,F=D.length,it,ot=0,et,ut,ht,dt;D[D.length-1]==="="&&(Z--,D[D.length-2]==="="&&Z--);var pt=new ArrayBuffer(Z),mt=new Uint8Array(pt);for(it=0;it<F;it+=4)et=Ot.indexOf(D[it]),ut=Ot.indexOf(D[it+1]),ht=Ot.indexOf(D[it+2]),dt=Ot.indexOf(D[it+3]),mt[ot++]=et<<2|ut>>4,mt[ot++]=(ut&15)<<4|ht>>2,mt[ot++]=(ht&3)<<6|dt&63;return pt}function sa(D){var Z=new Uint8Array(D),F="",it;for(it=0;it<Z.length;it+=3)F+=Ot[Z[it]>>2],F+=Ot[(Z[it]&3)<<4|Z[it+1]>>4],F+=Ot[(Z[it+1]&15)<<2|Z[it+2]>>6],F+=Ot[Z[it+2]&63];return Z.length%3===2?F=F.substring(0,F.length-1)+"=":Z.length%3===1&&(F=F.substring(0,F.length-2)+"=="),F}function f_(D,Z){var F="";if(D&&(F=en.call(D)),D&&(F==="[object ArrayBuffer]"||D.buffer&&en.call(D.buffer)==="[object ArrayBuffer]")){var it,ot=qt;D instanceof ArrayBuffer?(it=D,ot+=A):(it=D.buffer,F==="[object Int8Array]"?ot+=z:F==="[object Uint8Array]"?ot+=Y:F==="[object Uint8ClampedArray]"?ot+=st:F==="[object Int16Array]"?ot+=_t:F==="[object Uint16Array]"?ot+=Lt:F==="[object Int32Array]"?ot+=xt:F==="[object Uint32Array]"?ot+=At:F==="[object Float32Array]"?ot+=St:F==="[object Float64Array]"?ot+=Ft:Z(new Error("Failed to get type for BinaryArray"))),Z(ot+sa(it))}else if(F==="[object Blob]"){var et=new FileReader;et.onload=function(){var ut=Ct+D.type+"~"+sa(this.result);Z(qt+j+ut)},et.readAsArrayBuffer(D)}else try{Z(JSON.stringify(D))}catch(ut){console.error("Couldn't convert value into a JSON string: ",D),Z(null,ut)}}function h_(D){if(D.substring(0,E)!==qt)return JSON.parse(D);var Z=D.substring($r),F=D.substring(E,$r),it;if(F===j&&Ut.test(Z)){var ot=Z.match(Ut);it=ot[1],Z=Z.substring(ot[0].length)}var et=rn(Z);switch(F){case A:return et;case j:return y([et],{type:it});case z:return new Int8Array(et);case Y:return new Uint8Array(et);case st:return new Uint8ClampedArray(et);case _t:return new Int16Array(et);case Lt:return new Uint16Array(et);case xt:return new Int32Array(et);case At:return new Uint32Array(et);case St:return new Float32Array(et);case Ft:return new Float64Array(et);default:throw new Error("Unkown type: "+F)}}var aa={serialize:f_,deserialize:h_,stringToBuffer:rn,bufferToString:sa};function Ec(D,Z,F,it){D.executeSql("CREATE TABLE IF NOT EXISTS "+Z.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],F,it)}function d_(D){var Z=this,F={db:null};if(D)for(var it in D)F[it]=typeof D[it]!="string"?D[it].toString():D[it];var ot=new h(function(et,ut){try{F.db=openDatabase(F.name,String(F.version),F.description,F.size)}catch(ht){return ut(ht)}F.db.transaction(function(ht){Ec(ht,F,function(){Z._dbInfo=F,et()},function(dt,pt){ut(pt)})},ut)});return F.serializer=aa,ot}function fr(D,Z,F,it,ot,et){D.executeSql(F,it,ot,function(ut,ht){ht.code===ht.SYNTAX_ERR?ut.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Z.storeName],function(dt,pt){pt.rows.length?et(dt,ht):Ec(dt,Z,function(){dt.executeSql(F,it,ot,et)},et)},et):et(ut,ht)},et)}function p_(D,Z){var F=this;D=c(D);var it=new h(function(ot,et){F.ready().then(function(){var ut=F._dbInfo;ut.db.transaction(function(ht){fr(ht,ut,"SELECT * FROM "+ut.storeName+" WHERE key = ? LIMIT 1",[D],function(dt,pt){var mt=pt.rows.length?pt.rows.item(0).value:null;mt&&(mt=ut.serializer.deserialize(mt)),ot(mt)},function(dt,pt){et(pt)})})}).catch(et)});return d(it,Z),it}function m_(D,Z){var F=this,it=new h(function(ot,et){F.ready().then(function(){var ut=F._dbInfo;ut.db.transaction(function(ht){fr(ht,ut,"SELECT * FROM "+ut.storeName,[],function(dt,pt){for(var mt=pt.rows,kt=mt.length,Nt=0;Nt<kt;Nt++){var jt=mt.item(Nt),Rt=jt.value;if(Rt&&(Rt=ut.serializer.deserialize(Rt)),Rt=D(Rt,jt.key,Nt+1),Rt!==void 0){ot(Rt);return}}ot()},function(dt,pt){et(pt)})})}).catch(et)});return d(it,Z),it}function Oc(D,Z,F,it){var ot=this;D=c(D);var et=new h(function(ut,ht){ot.ready().then(function(){Z===void 0&&(Z=null);var dt=Z,pt=ot._dbInfo;pt.serializer.serialize(Z,function(mt,kt){kt?ht(kt):pt.db.transaction(function(Nt){fr(Nt,pt,"INSERT OR REPLACE INTO "+pt.storeName+" (key, value) VALUES (?, ?)",[D,mt],function(){ut(dt)},function(jt,Rt){ht(Rt)})},function(Nt){if(Nt.code===Nt.QUOTA_ERR){if(it>0){ut(Oc.apply(ot,[D,dt,F,it-1]));return}ht(Nt)}})})}).catch(ht)});return d(et,F),et}function g_(D,Z,F){return Oc.apply(this,[D,Z,F,1])}function y_(D,Z){var F=this;D=c(D);var it=new h(function(ot,et){F.ready().then(function(){var ut=F._dbInfo;ut.db.transaction(function(ht){fr(ht,ut,"DELETE FROM "+ut.storeName+" WHERE key = ?",[D],function(){ot()},function(dt,pt){et(pt)})})}).catch(et)});return d(it,Z),it}function v_(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){var et=Z._dbInfo;et.db.transaction(function(ut){fr(ut,et,"DELETE FROM "+et.storeName,[],function(){it()},function(ht,dt){ot(dt)})})}).catch(ot)});return d(F,D),F}function b_(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){var et=Z._dbInfo;et.db.transaction(function(ut){fr(ut,et,"SELECT COUNT(key) as c FROM "+et.storeName,[],function(ht,dt){var pt=dt.rows.item(0).c;it(pt)},function(ht,dt){ot(dt)})})}).catch(ot)});return d(F,D),F}function w_(D,Z){var F=this,it=new h(function(ot,et){F.ready().then(function(){var ut=F._dbInfo;ut.db.transaction(function(ht){fr(ht,ut,"SELECT key FROM "+ut.storeName+" WHERE id = ? LIMIT 1",[D+1],function(dt,pt){var mt=pt.rows.length?pt.rows.item(0).key:null;ot(mt)},function(dt,pt){et(pt)})})}).catch(et)});return d(it,Z),it}function x_(D){var Z=this,F=new h(function(it,ot){Z.ready().then(function(){var et=Z._dbInfo;et.db.transaction(function(ut){fr(ut,et,"SELECT key FROM "+et.storeName,[],function(ht,dt){for(var pt=[],mt=0;mt<dt.rows.length;mt++)pt.push(dt.rows.item(mt).key);it(pt)},function(ht,dt){ot(dt)})})}).catch(ot)});return d(F,D),F}function k_(D){return new h(function(Z,F){D.transaction(function(it){it.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ot,et){for(var ut=[],ht=0;ht<et.rows.length;ht++)ut.push(et.rows.item(ht).name);Z({db:D,storeNames:ut})},function(ot,et){F(et)})},function(it){F(it)})})}function E_(D,Z){Z=m.apply(this,arguments);var F=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||F.name,D.storeName=D.storeName||F.storeName);var it=this,ot;return D.name?ot=new h(function(et){var ut;D.name===F.name?ut=it._dbInfo.db:ut=openDatabase(D.name,"","",0),D.storeName?et({db:ut,storeNames:[D.storeName]}):et(k_(ut))}).then(function(et){return new h(function(ut,ht){et.db.transaction(function(dt){function pt(jt){return new h(function(Rt,Xt){dt.executeSql("DROP TABLE IF EXISTS "+jt,[],function(){Rt()},function(Wt,Ne){Xt(Ne)})})}for(var mt=[],kt=0,Nt=et.storeNames.length;kt<Nt;kt++)mt.push(pt(et.storeNames[kt]));h.all(mt).then(function(){ut()}).catch(function(jt){ht(jt)})},function(dt){ht(dt)})})}):ot=h.reject("Invalid arguments"),d(ot,Z),ot}var O_={_driver:"webSQLStorage",_initStorage:d_,_support:Et(),iterate:m_,getItem:p_,setItem:g_,removeItem:y_,clear:v_,length:b_,key:w_,keys:x_,dropInstance:E_};function A_(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(D){return!1}}function Ac(D,Z){var F=D.name+"/";return D.storeName!==Z.storeName&&(F+=D.storeName+"/"),F}function S_(){var D="_localforage_support_test";try{return localStorage.setItem(D,!0),localStorage.removeItem(D),!1}catch(Z){return!0}}function T_(){return!S_()||localStorage.length>0}function C_(D){var Z=this,F={};if(D)for(var it in D)F[it]=D[it];return F.keyPrefix=Ac(D,Z._defaultConfig),T_()?(Z._dbInfo=F,F.serializer=aa,h.resolve()):h.reject()}function N_(D){var Z=this,F=Z.ready().then(function(){for(var it=Z._dbInfo.keyPrefix,ot=localStorage.length-1;ot>=0;ot--){var et=localStorage.key(ot);et.indexOf(it)===0&&localStorage.removeItem(et)}});return d(F,D),F}function L_(D,Z){var F=this;D=c(D);var it=F.ready().then(function(){var ot=F._dbInfo,et=localStorage.getItem(ot.keyPrefix+D);return et&&(et=ot.serializer.deserialize(et)),et});return d(it,Z),it}function P_(D,Z){var F=this,it=F.ready().then(function(){for(var ot=F._dbInfo,et=ot.keyPrefix,ut=et.length,ht=localStorage.length,dt=1,pt=0;pt<ht;pt++){var mt=localStorage.key(pt);if(mt.indexOf(et)===0){var kt=localStorage.getItem(mt);if(kt&&(kt=ot.serializer.deserialize(kt)),kt=D(kt,mt.substring(ut),dt++),kt!==void 0)return kt}}});return d(it,Z),it}function j_(D,Z){var F=this,it=F.ready().then(function(){var ot=F._dbInfo,et;try{et=localStorage.key(D)}catch(ut){et=null}return et&&(et=et.substring(ot.keyPrefix.length)),et});return d(it,Z),it}function R_(D){var Z=this,F=Z.ready().then(function(){for(var it=Z._dbInfo,ot=localStorage.length,et=[],ut=0;ut<ot;ut++){var ht=localStorage.key(ut);ht.indexOf(it.keyPrefix)===0&&et.push(ht.substring(it.keyPrefix.length))}return et});return d(F,D),F}function I_(D){var Z=this,F=Z.keys().then(function(it){return it.length});return d(F,D),F}function q_(D,Z){var F=this;D=c(D);var it=F.ready().then(function(){var ot=F._dbInfo;localStorage.removeItem(ot.keyPrefix+D)});return d(it,Z),it}function D_(D,Z,F){var it=this;D=c(D);var ot=it.ready().then(function(){Z===void 0&&(Z=null);var et=Z;return new h(function(ut,ht){var dt=it._dbInfo;dt.serializer.serialize(Z,function(pt,mt){if(mt)ht(mt);else try{localStorage.setItem(dt.keyPrefix+D,pt),ut(et)}catch(kt){(kt.name==="QuotaExceededError"||kt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ht(kt),ht(kt)}})})});return d(ot,F),ot}function M_(D,Z){if(Z=m.apply(this,arguments),D=typeof D!="function"&&D||{},!D.name){var F=this.config();D.name=D.name||F.name,D.storeName=D.storeName||F.storeName}var it=this,ot;return D.name?ot=new h(function(et){D.storeName?et(Ac(D,it._defaultConfig)):et(D.name+"/")}).then(function(et){for(var ut=localStorage.length-1;ut>=0;ut--){var ht=localStorage.key(ut);ht.indexOf(et)===0&&localStorage.removeItem(ht)}}):ot=h.reject("Invalid arguments"),d(ot,Z),ot}var $_={_driver:"localStorageWrapper",_initStorage:C_,_support:A_(),iterate:P_,getItem:L_,setItem:D_,removeItem:q_,clear:N_,length:I_,key:j_,keys:R_,dropInstance:M_},B_=function(Z,F){return Z===F||typeof Z=="number"&&typeof F=="number"&&isNaN(Z)&&isNaN(F)},F_=function(Z,F){for(var it=Z.length,ot=0;ot<it;){if(B_(Z[ot],F))return!0;ot++}return!1},Sc=Array.isArray||function(D){return Object.prototype.toString.call(D)==="[object Array]"},nn={},Tc={},oi={INDEXEDDB:bt,WEBSQL:O_,LOCALSTORAGE:$_},U_=[oi.INDEXEDDB._driver,oi.WEBSQL._driver,oi.LOCALSTORAGE._driver],_o=["dropInstance"],la=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(_o),H_={description:"",driver:U_.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function z_(D,Z){D[Z]=function(){var F=arguments;return D.ready().then(function(){return D[Z].apply(D,F)})}}function ua(){for(var D=1;D<arguments.length;D++){var Z=arguments[D];if(Z)for(var F in Z)Z.hasOwnProperty(F)&&(Sc(Z[F])?arguments[0][F]=Z[F].slice():arguments[0][F]=Z[F])}return arguments[0]}var V_=function(){function D(Z){a(this,D);for(var F in oi)if(oi.hasOwnProperty(F)){var it=oi[F],ot=it._driver;this[F]=ot,nn[ot]||this.defineDriver(it)}this._defaultConfig=ua({},H_),this._config=ua({},this._defaultConfig,Z),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return D.prototype.config=function(F){if((typeof F=="undefined"?"undefined":s(F))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var it in F){if(it==="storeName"&&(F[it]=F[it].replace(/\W/g,"_")),it==="version"&&typeof F[it]!="number")return new Error("Database version must be a number.");this._config[it]=F[it]}return"driver"in F&&F.driver?this.setDriver(this._config.driver):!0}else return typeof F=="string"?this._config[F]:this._config},D.prototype.defineDriver=function(F,it,ot){var et=new h(function(ut,ht){try{var dt=F._driver,pt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!F._driver){ht(pt);return}for(var mt=la.concat("_initStorage"),kt=0,Nt=mt.length;kt<Nt;kt++){var jt=mt[kt],Rt=!F_(_o,jt);if((Rt||F[jt])&&typeof F[jt]!="function"){ht(pt);return}}var Xt=function(){for(var on=function(W_){return function(){var Y_=new Error("Method "+W_+" is not implemented by the current driver"),Cc=h.reject(Y_);return d(Cc,arguments[arguments.length-1]),Cc}},ca=0,K_=_o.length;ca<K_;ca++){var fa=_o[ca];F[fa]||(F[fa]=on(fa))}};Xt();var Wt=function(on){nn[dt]&&console.info("Redefining LocalForage driver: "+dt),nn[dt]=F,Tc[dt]=on,ut()};"_support"in F?F._support&&typeof F._support=="function"?F._support().then(Wt,ht):Wt(!!F._support):Wt(!0)}catch(Ne){ht(Ne)}});return u(et,it,ot),et},D.prototype.driver=function(){return this._driver||null},D.prototype.getDriver=function(F,it,ot){var et=nn[F]?h.resolve(nn[F]):h.reject(new Error("Driver not found."));return u(et,it,ot),et},D.prototype.getSerializer=function(F){var it=h.resolve(aa);return u(it,F),it},D.prototype.ready=function(F){var it=this,ot=it._driverSet.then(function(){return it._ready===null&&(it._ready=it._initDriver()),it._ready});return u(ot,F,F),ot},D.prototype.setDriver=function(F,it,ot){var et=this;Sc(F)||(F=[F]);var ut=this._getSupportedDrivers(F);function ht(){et._config.driver=et.driver()}function dt(kt){return et._extend(kt),ht(),et._ready=et._initStorage(et._config),et._ready}function pt(kt){return function(){var Nt=0;function jt(){for(;Nt<kt.length;){var Rt=kt[Nt];return Nt++,et._dbInfo=null,et._ready=null,et.getDriver(Rt).then(dt).catch(jt)}ht();var Xt=new Error("No available storage method found.");return et._driverSet=h.reject(Xt),et._driverSet}return jt()}}var mt=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=mt.then(function(){var kt=ut[0];return et._dbInfo=null,et._ready=null,et.getDriver(kt).then(function(Nt){et._driver=Nt._driver,ht(),et._wrapLibraryMethodsWithReady(),et._initDriver=pt(ut)})}).catch(function(){ht();var kt=new Error("No available storage method found.");return et._driverSet=h.reject(kt),et._driverSet}),u(this._driverSet,it,ot),this._driverSet},D.prototype.supports=function(F){return!!Tc[F]},D.prototype._extend=function(F){ua(this,F)},D.prototype._getSupportedDrivers=function(F){for(var it=[],ot=0,et=F.length;ot<et;ot++){var ut=F[ot];this.supports(ut)&&it.push(ut)}return it},D.prototype._wrapLibraryMethodsWithReady=function(){for(var F=0,it=la.length;F<it;F++)z_(this,la[F])},D.prototype.createInstance=function(F){return new D(F)},D}(),G_=new V_;n.exports=G_},{3:3}]},{},[4])(4)})});(function(r,t,e){(function(){var i,n,o,s="2.2.3",a="datepicker",l=".datepicker-here",f=!1,p='<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',y={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,minSeconds:0,maxSeconds:59,hoursStep:1,minutesStep:1,secondsStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},h={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},d=function(u,c){this.el=u,this.$el=t(u),this.opts=t.extend(!0,{},y,c,this.$el.data()),i==e&&(i=t("body")),this.opts.startDate||(this.opts.startDate=new Date),this.el.nodeName=="INPUT"&&(this.elIsInput=!0),this.opts.altField&&(this.$altField=typeof this.opts.altField=="string"?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()};o=d,o.prototype={VERSION:s,viewIndexes:["days","months","years"],init:function(){f||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(r).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(u){return this.opts.weekends.indexOf(u)!==-1},_defineLocale:function(u){typeof u=="string"?(this.loc=t.fn.datepicker.language[u],this.loc||(console.warn(`Can't find language "`+u+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[u])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,u),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),this.opts.firstDay!==""&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var c=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(c("aa"))||this.loc.timeFormat.match(c("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){f=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),n=t("#datepickers-container")},_buildBaseHtml:function(){var u,c=t('<div class="datepicker-inline">');u=this.el.nodeName=="INPUT"?this.opts.inline?c.insertAfter(this.$el):n:c.appendTo(this.$el),this.$datepicker=t(p).appendTo(u),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this._prevOnSelectValue===""?void 0:(this._prevOnSelectValue="",this.opts.onSelect("","",this));var u,c=this.selectedDates,m=o.getParsedDate(c[0]),_=this,g=new Date(m.year,m.month,m.date,m.hours,m.minutes,m.seconds);u=c.map(function(v){return _.formatDate(_.loc.dateFormat,v)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(g=c.map(function(v){var w=o.getParsedDate(v);return new Date(w.year,w.month,w.date,w.hours,w.minutes,w.seconds)})),this._prevOnSelectValue=u,this.opts.onSelect(u,g,this)},next:function(){var u=this.parsedDate,c=this.opts;switch(this.view){case"days":this.date=new Date(u.year,u.month+1,1),c.onChangeMonth&&c.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(u.year+1,u.month,1),c.onChangeYear&&c.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(u.year+10,0,1),c.onChangeDecade&&c.onChangeDecade(this.curDecade)}},prev:function(){var u=this.parsedDate,c=this.opts;switch(this.view){case"days":this.date=new Date(u.year,u.month-1,1),c.onChangeMonth&&c.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(u.year-1,u.month,1),c.onChangeYear&&c.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(u.year-10,0,1),c.onChangeDecade&&c.onChangeDecade(this.curDecade)}},formatDate:function(u,c){c=c||this.date;var m,_=u,g=this._getWordBoundaryRegExp,v=this.loc,w=o.getLeadingZeroNum,x=o.getDecade(c),b=o.getParsedDate(c),k=b.fullHours,T=b.hours,P=u.match(g("aa"))||u.match(g("AA")),N="am",S=this._replacer;switch(this.opts.timepicker&&this.timepicker&&P&&(m=this.timepicker._getValidHoursFromDate(c,P),k=w(m.hours),T=m.hours,N=m.dayPeriod),!0){case/@/.test(_):_=_.replace(/@/,c.getTime());case/aa/.test(_):_=S(_,g("aa"),N);case/AA/.test(_):_=S(_,g("AA"),N.toUpperCase());case/dd/.test(_):_=S(_,g("dd"),b.fullDate);case/d/.test(_):_=S(_,g("d"),b.date);case/DD/.test(_):_=S(_,g("DD"),v.days[b.day]);case/D/.test(_):_=S(_,g("D"),v.daysShort[b.day]);case/mm/.test(_):_=S(_,g("mm"),b.fullMonth);case/m/.test(_):_=S(_,g("m"),b.month+1);case/MM/.test(_):_=S(_,g("MM"),this.loc.months[b.month]);case/M/.test(_):_=S(_,g("M"),v.monthsShort[b.month]);case/ss/.test(_):_=S(_,g("ss"),b.fullSeconds);case/s/.test(_):_=S(_,g("s"),b.seconds);case/ii/.test(_):_=S(_,g("ii"),b.fullMinutes);case/i/.test(_):_=S(_,g("i"),b.minutes);case/hh/.test(_):_=S(_,g("hh"),k);case/h/.test(_):_=S(_,g("h"),T);case/yyyy/.test(_):_=S(_,g("yyyy"),b.year);case/yyyy1/.test(_):_=S(_,g("yyyy1"),x[0]);case/yyyy2/.test(_):_=S(_,g("yyyy2"),x[1]);case/yy/.test(_):_=S(_,g("yy"),b.year.toString().slice(-2))}return _},_replacer:function(u,c,m){return u.replace(c,function(_,g,v,w){return g+m+w})},_getWordBoundaryRegExp:function(u){var c="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+c+")("+u+")($|<|"+c+")","g")},selectDate:function(u){var c=this,m=c.opts,_=c.parsedDate,g=c.selectedDates,v=g.length,w="";if(Array.isArray(u))return void u.forEach(function(x){c.selectDate(x)});if(u instanceof Date){if(this.lastSelectedDate=u,this.timepicker&&this.timepicker._setTime(u),c._trigger("selectDate",u),this.timepicker&&(u.setHours(this.timepicker.hours),u.setMinutes(this.timepicker.minutes),u.setSeconds(this.timepicker.seconds)),c.view=="days"&&u.getMonth()!=_.month&&m.moveToOtherMonthsOnSelect&&(w=new Date(u.getFullYear(),u.getMonth(),1)),c.view=="years"&&u.getFullYear()!=_.year&&m.moveToOtherYearsOnSelect&&(w=new Date(u.getFullYear(),0,1)),w&&(c.silent=!0,c.date=w,c.silent=!1,c.nav._render()),m.multipleDates&&!m.range){if(v===m.multipleDates)return;c._isSelected(u)||c.selectedDates.push(u)}else m.range?v==2?(c.selectedDates=[u],c.minRange=u,c.maxRange=""):v==1?(c.selectedDates.push(u),c.maxRange?c.minRange=u:c.maxRange=u,o.bigger(c.maxRange,c.minRange)&&(c.maxRange=c.minRange,c.minRange=u),c.selectedDates=[c.minRange,c.maxRange]):(c.selectedDates=[u],c.minRange=u):c.selectedDates=[u];c._setInputValue(),m.onSelect&&c._triggerOnChange(),m.autoClose&&!this.timepickerIsActive&&(m.multipleDates||m.range?m.range&&c.selectedDates.length==2&&c.hide():c.hide()),c.views[this.currentView]._render()}},removeDate:function(u){var c=this.selectedDates,m=this;if(u instanceof Date)return c.some(function(_,g){if(o.isSame(_,u))return c.splice(g,1),m.selectedDates.length?m.lastSelectedDate=m.selectedDates[m.selectedDates.length-1]:(m.minRange="",m.maxRange="",m.lastSelectedDate=""),m.views[m.currentView]._render(),m._setInputValue(),m.opts.onSelect&&m._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(u,c){var m=arguments.length,_=this.lastSelectedDate;return m==2?this.opts[u]=c:m==1&&typeof u=="object"&&(this.opts=t.extend(!0,this.opts,u)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(_&&this.timepicker._handleDate(_),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),_&&(_.setHours(this.timepicker.hours),_.setMinutes(this.timepicker.minutes),_.setSeconds(this.timepicker.seconds))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var u=this.date.getTime();this.silent=!0,this.minTime>u&&(this.date=this.minDate),this.maxTime<u&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(u,c){var m=!1;return this.selectedDates.some(function(_){if(o.isSame(_,u,c))return m=_,!0}),m},_setInputValue:function(){var u,c=this,m=c.opts,_=c.loc.dateFormat,g=m.altFieldDateFormat,v=c.selectedDates.map(function(w){return c.formatDate(_,w)});m.altField&&c.$altField.length&&(u=this.selectedDates.map(function(w){return c.formatDate(g,w)}),u=u.join(this.opts.multipleDatesSeparator),this.$altField.val(u)),v=v.join(this.opts.multipleDatesSeparator),this.$el.val(v)},_isInRange:function(u,c){var m=u.getTime(),_=o.getParsedDate(u),g=o.getParsedDate(this.minDate),v=o.getParsedDate(this.maxDate),w=new Date(_.year,_.month,g.date).getTime(),x=new Date(_.year,_.month,v.date).getTime(),b={day:m>=this.minTime&&m<=this.maxTime,month:w>=this.minTime&&x<=this.maxTime,year:_.year>=g.year&&_.year<=v.year};return c?b[c]:b.day},_getDimensions:function(u){var c=u.offset();return{width:u.outerWidth(),height:u.outerHeight(),left:c.left,top:c.top}},_getDateFromCell:function(u){var c=this.parsedDate,m=u.data("year")||c.year,_=u.data("month")==e?c.month:u.data("month"),g=u.data("date")||1;return new Date(m,_,g)},_setPositionClasses:function(u){u=u.split(" ");var c=u[0],m=u[1],_="datepicker -"+c+"-"+m+"- -from-"+c+"-";this.visible&&(_+=" active"),this.$datepicker.removeAttr("class").addClass(_)},setPosition:function(u){u=u||this.opts.position;var c,m,_=this._getDimensions(this.$el),g=this._getDimensions(this.$datepicker),v=u.split(" "),w=this.opts.offset,x=v[0],b=v[1];switch(x){case"top":c=_.top-g.height-w;break;case"right":m=_.left+_.width+w;break;case"bottom":c=_.top+_.height+w;break;case"left":m=_.left-g.width-w}switch(b){case"top":c=_.top;break;case"right":m=_.left+_.width-g.width;break;case"bottom":c=_.top+_.height-g.height;break;case"left":m=_.left;break;case"center":/left|right/.test(x)?c=_.top+_.height/2-g.height/2:m=_.left+_.width/2-g.width/2}this.$datepicker.css({left:m,top:c})},show:function(){var u=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,u&&this._bindVisionEvents(u)},hide:function(){var u=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),u&&this._bindVisionEvents(u)},down:function(u){this._changeView(u,"down")},up:function(u){this._changeView(u,"up")},_bindVisionEvents:function(u){this.$datepicker.off("transitionend.dp"),u(this,!1),this.$datepicker.one("transitionend.dp",u.bind(this,this,!0))},_changeView:function(u,c){u=u||this.focused||this.date;var m=c=="up"?this.viewIndex+1:this.viewIndex-1;m>2&&(m=2),m<0&&(m=0),this.silent=!0,this.date=new Date(u.getFullYear(),u.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[m]},_handleHotKey:function(u){var c,m,_,g=o.getParsedDate(this._getFocusedDate()),v=this.opts,w=!1,x=!1,b=!1,k=g.year,T=g.month,P=g.date;switch(u){case"ctrlRight":case"ctrlUp":T+=1,w=!0;break;case"ctrlLeft":case"ctrlDown":T-=1,w=!0;break;case"shiftRight":case"shiftUp":x=!0,k+=1;break;case"shiftLeft":case"shiftDown":x=!0,k-=1;break;case"altRight":case"altUp":b=!0,k+=10;break;case"altLeft":case"altDown":b=!0,k-=10;break;case"ctrlShiftUp":this.up()}_=o.getDaysCount(new Date(k,T)),m=new Date(k,T,P),_<P&&(P=_),m.getTime()<this.minTime?m=this.minDate:m.getTime()>this.maxTime&&(m=this.maxDate),this.focused=m,c=o.getParsedDate(m),w&&v.onChangeMonth&&v.onChangeMonth(c.month,c.year),x&&v.onChangeYear&&v.onChangeYear(c.year),b&&v.onChangeDecade&&v.onChangeDecade(this.curDecade)},_registerKey:function(u){var c=this.keys.some(function(m){return m==u});c||this.keys.push(u)},_unRegisterKey:function(u){var c=this.keys.indexOf(u);this.keys.splice(c,1)},_isHotKeyPressed:function(){var u,c=!1,m=this,_=this.keys.sort();for(var g in h)u=h[g],_.length==u.length&&u.every(function(v,w){return v==_[w]})&&(m._trigger("hotKey",g),c=!0);return c},_trigger:function(u,c){this.$el.trigger(u,c)},_focusNextCell:function(u,c){c=c||this.cellType;var m=o.getParsedDate(this._getFocusedDate()),_=m.year,g=m.month,v=m.date;if(!this._isHotKeyPressed()){switch(u){case 37:c=="day"&&(v-=1),c=="month"&&(g-=1),c=="year"&&(_-=1);break;case 38:c=="day"&&(v-=7),c=="month"&&(g-=3),c=="year"&&(_-=4);break;case 39:c=="day"&&(v+=1),c=="month"&&(g+=1),c=="year"&&(_+=1);break;case 40:c=="day"&&(v+=7),c=="month"&&(g+=3),c=="year"&&(_+=4)}var w=new Date(_,g,v);w.getTime()<this.minTime?w=this.minDate:w.getTime()>this.maxTime&&(w=this.maxDate),this.focused=w}},_getFocusedDate:function(){var u=this.focused||this.selectedDates[this.selectedDates.length-1],c=this.parsedDate;if(!u)switch(this.view){case"days":u=new Date(c.year,c.month,new Date().getDate());break;case"months":u=new Date(c.year,c.month,1);break;case"years":u=new Date(c.year,0,1)}return u},_getCell:function(u,c){c=c||this.cellType;var m,_=o.getParsedDate(u),g='.datepicker--cell[data-year="'+_.year+'"]';switch(c){case"month":g='[data-month="'+_.month+'"]';break;case"day":g+='[data-month="'+_.month+'"][data-date="'+_.date+'"]'}return m=this.views[this.currentView].$el.find(g),m.length?m:t("")},destroy:function(){var u=this;u.$el.off(".adp").data("datepicker",""),u.selectedDates=[],u.focused="",u.views={},u.keys=[],u.minRange="",u.maxRange="",u.opts.inline||!u.elIsInput?u.$datepicker.closest(".datepicker-inline").remove():u.$datepicker.remove()},_handleAlreadySelectedDates:function(u,c){this.opts.range?this.opts.toggleSelected?this.removeDate(c):this.selectedDates.length!=2&&this._trigger("clickCell",c):this.opts.toggleSelected&&this.removeDate(c),this.opts.toggleSelected||(this.lastSelectedDate=u,this.opts.timepicker&&(this.timepicker._setTime(u),this.timepicker.update()))},_onShowEvent:function(u){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(u){this.inFocus=!0},_onMouseUpDatepicker:function(u){this.inFocus=!1,u.originalEvent.inFocus=!0,u.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(u){var c=this.$el.val();c||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(u){u.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(u){u.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(u){var c=u.which;if(this._registerKey(c),c>=37&&c<=40&&(u.preventDefault(),this._focusNextCell(c)),c==13&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var m=this._isSelected(this.focused,this.cellType);if(!m)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes),this.focused.setSeconds(this.timepicker.seconds)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(m,this.focused)}}c==27&&this.hide()},_onKeyUp:function(u){var c=u.which;this._unRegisterKey(c)},_onHotKey:function(u,c){this._handleHotKey(c)},_onMouseEnterCell:function(u){var c=t(u.target).closest(".datepicker--cell"),m=this._getDateFromCell(c);this.silent=!0,this.focused&&(this.focused=""),c.addClass("-focus-"),this.focused=m,this.silent=!1,this.opts.range&&this.selectedDates.length==1&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(u){var c=t(u.target).closest(".datepicker--cell");c.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(u,c,m,_){var g=new Date,v=this.selectedDates,w=!1;v.length&&(w=!0,g=this.lastSelectedDate),g.setHours(c),g.setMinutes(m),g.setSeconds(_),w||this._getCell(g).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(g)},_onClickCell:function(u,c){this.timepicker&&(c.setHours(this.timepicker.hours),c.setMinutes(this.timepicker.minutes),c.setSeconds(this.timepicker.seconds)),this.selectDate(c)},set focused(u){if(!u&&this.focused){var c=this._getCell(this.focused);c.length&&c.removeClass("-focus-")}this._focused=u,this.opts.range&&this.selectedDates.length==1&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=u)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(u){if(u instanceof Date)return this.currentDate=u,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),u},get date(){return this.currentDate},set view(u){if(this.viewIndex=this.viewIndexes.indexOf(u),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=u,this.inited&&(this.views[u]?this.views[u]._render():this.views[u]=new t.fn.datepicker.Body(this,u,this.opts),this.views[this.prevView].hide(),this.views[u].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(u),this.elIsInput&&this.visible&&this.setPosition()),u},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var u=o.getParsedDate(this.minDate);return new Date(u.year,u.month,u.date).getTime()},get maxTime(){var u=o.getParsedDate(this.maxDate);return new Date(u.year,u.month,u.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(u){return new Date(u.getFullYear(),u.getMonth()+1,0).getDate()},o.getParsedDate=function(u){return{year:u.getFullYear(),month:u.getMonth(),fullMonth:u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1,date:u.getDate(),fullDate:u.getDate()<10?"0"+u.getDate():u.getDate(),day:u.getDay(),hours:u.getHours(),fullHours:u.getHours()<10?"0"+u.getHours():u.getHours(),minutes:u.getMinutes(),fullMinutes:u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes(),seconds:u.getSeconds(),fullSeconds:u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds()}},o.getDecade=function(u){var c=10*Math.floor(u.getFullYear()/10);return[c,c+9]},o.template=function(u,c){return u.replace(/#\{([\w]+)\}/g,function(m,_){if(c[_]||c[_]===0)return c[_]})},o.isSame=function(u,c,m){if(!u||!c)return!1;var _=o.getParsedDate(u),g=o.getParsedDate(c),v=m||"day",w={day:_.date==g.date&&_.month==g.month&&_.year==g.year,month:_.month==g.month&&_.year==g.year,year:_.year==g.year};return w[v]},o.less=function(u,c,m){return!(!u||!c)&&c.getTime()<u.getTime()},o.bigger=function(u,c,m){return!(!u||!c)&&c.getTime()>u.getTime()},o.getLeadingZeroNum=function(u){return parseInt(u)<10?"0"+u:u},o.resetTime=function(u){if(typeof u=="object")return u=o.getParsedDate(u),new Date(u.year,u.month,u.date)},t.fn.datepicker=function(u){return this.each(function(){if(t.data(this,a)){var c=t.data(this,a);c.opts=t.extend(!0,c.opts,u),c.update()}else t.data(this,a,new d(this,u))})},t.fn.datepicker.Constructor=d,t.fn.datepicker.language={ru:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t(function(){t(l).datepicker()})})(),function(){var i={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},n=t.fn.datepicker,o=n.Constructor;n.Body=function(s,a,l){this.d=s,this.type=a,this.opts=l,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(i[this.type]).appendTo(this.d.$content),this.$names=t(".datepicker--days-names",this.$el),this.$cells=t(".datepicker--cells",this.$el)},_getDayNamesHtml:function(s,a,l,f){return a=a!=e?a:s,l=l||"",f=f!=e?f:0,f>7?l:a==7?this._getDayNamesHtml(s,0,l,++f):(l+='<div class="datepicker--day-name'+(this.d.isWeekend(a)?" -weekend-":"")+'">'+this.d.loc.daysMin[a]+"</div>",this._getDayNamesHtml(s,++a,l,++f))},_getCellContents:function(s,a){var l="datepicker--cell datepicker--cell-"+a,f=new Date,p=this.d,y=o.resetTime(p.minRange),h=o.resetTime(p.maxRange),d=p.opts,u=o.getParsedDate(s),c={},m=u.date;switch(a){case"day":p.isWeekend(u.day)&&(l+=" -weekend-"),u.month!=this.d.parsedDate.month&&(l+=" -other-month-",d.selectOtherMonths||(l+=" -disabled-"),d.showOtherMonths||(m=""));break;case"month":m=p.loc[p.opts.monthsField][u.month];break;case"year":var _=p.curDecade;m=u.year,(u.year<_[0]||u.year>_[1])&&(l+=" -other-decade-",d.selectOtherYears||(l+=" -disabled-"),d.showOtherYears||(m=""))}return d.onRenderCell&&(c=d.onRenderCell(s,a)||{},m=c.html?c.html:m,l+=c.classes?" "+c.classes:""),d.range&&(o.isSame(y,s,a)&&(l+=" -range-from-"),o.isSame(h,s,a)&&(l+=" -range-to-"),p.selectedDates.length==1&&p.focused?((o.bigger(y,s)&&o.less(p.focused,s)||o.less(h,s)&&o.bigger(p.focused,s))&&(l+=" -in-range-"),o.less(h,s)&&o.isSame(p.focused,s)&&(l+=" -range-from-"),o.bigger(y,s)&&o.isSame(p.focused,s)&&(l+=" -range-to-")):p.selectedDates.length==2&&o.bigger(y,s)&&o.less(h,s)&&(l+=" -in-range-")),o.isSame(f,s,a)&&(l+=" -current-"),p.focused&&o.isSame(s,p.focused,a)&&(l+=" -focus-"),p._isSelected(s,a)&&(l+=" -selected-"),p._isInRange(s,a)&&!c.disabled||(l+=" -disabled-"),{html:m,classes:l}},_getDaysHtml:function(s){var a=o.getDaysCount(s),l=new Date(s.getFullYear(),s.getMonth(),1).getDay(),f=new Date(s.getFullYear(),s.getMonth(),a).getDay(),p=l-this.d.loc.firstDay,y=6-f+this.d.loc.firstDay;p=p<0?p+7:p,y=y>6?y-7:y;for(var h,d,u=-p+1,c="",m=u,_=a+y;m<=_;m++)d=s.getFullYear(),h=s.getMonth(),c+=this._getDayHtml(new Date(d,h,m));return c},_getDayHtml:function(s){var a=this._getCellContents(s,"day");return'<div class="'+a.classes+'" data-date="'+s.getDate()+'" data-month="'+s.getMonth()+'" data-year="'+s.getFullYear()+'">'+a.html+"</div>"},_getMonthsHtml:function(s){for(var a="",l=o.getParsedDate(s),f=0;f<12;)a+=this._getMonthHtml(new Date(l.year,f)),f++;return a},_getMonthHtml:function(s){var a=this._getCellContents(s,"month");return'<div class="'+a.classes+'" data-month="'+s.getMonth()+'">'+a.html+"</div>"},_getYearsHtml:function(s){var a=(o.getParsedDate(s),o.getDecade(s)),l=a[0]-1,f="",p=l;for(p;p<=a[1]+1;p++)f+=this._getYearHtml(new Date(p,0));return f},_getYearHtml:function(s){var a=this._getCellContents(s,"year");return'<div class="'+a.classes+'" data-year="'+s.getFullYear()+'">'+a.html+"</div>"},_renderTypes:{days:function(){var s=this._getDayNamesHtml(this.d.loc.firstDay),a=this._getDaysHtml(this.d.currentDate);this.$cells.html(a),this.$names.html(s)},months:function(){var s=this._getMonthsHtml(this.d.currentDate);this.$cells.html(s)},years:function(){var s=this._getYearsHtml(this.d.currentDate);this.$cells.html(s)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var s,a,l,f=t(".datepicker--cell",this.$cells),p=this;f.each(function(y,h){a=t(this),l=p.d._getDateFromCell(t(this)),s=p._getCellContents(l,p.d.cellType),a.attr("class",s.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(s){var a=s.data("date")||1,l=s.data("month")||0,f=s.data("year")||this.d.parsedDate.year,p=this.d;if(p.view!=this.opts.minView)return void p.down(new Date(f,l,a));var y=new Date(f,l,a),h=this.d._isSelected(y,this.d.cellType);return h?void p._handleAlreadySelectedDates.bind(p,h,y)():void p._trigger("clickCell",y)},_onClickCell:function(s){var a=t(s.target).closest(".datepicker--cell");a.hasClass("-disabled-")||this._handleClick.bind(this)(a)}}}(),function(){var i='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',n='<div class="datepicker--buttons"></div>',o='<span class="datepicker--button" data-action="#{action}">#{label}</span>',s=t.fn.datepicker,a=s.Constructor;s.Navigation=function(l,f){this.d=l,this.opts=f,this.$buttonsContainer="",this.init()},s.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var l=this._getTitle(this.d.currentDate),f=a.template(i,t.extend({title:l},this.opts));this.d.$nav.html(f),this.d.view=="years"&&t(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(l){return this.d.formatDate(this.opts.navTitles[this.d.view],l)},_addButton:function(l){this.$buttonsContainer.length||this._addButtonsContainer();var f={action:l,label:this.d.loc[l]},p=a.template(o,f);t("[data-action="+l+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(p)},_addButtonsContainer:function(){this.d.$datepicker.append(n),this.$buttonsContainer=t(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var l=this.d.parsedDate,f=l.month,p=l.year,y=l.date;switch(this.d.view){case"days":this.d._isInRange(new Date(p,f-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(p,f+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(p-1,f,y),"year")||this._disableNav("prev"),this.d._isInRange(new Date(p+1,f,y),"year")||this._disableNav("next");break;case"years":var h=a.getDecade(this.d.date);this.d._isInRange(new Date(h[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(h[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(l){t('[data-action="'+l+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(l){t('[data-action="'+l+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(l){var f=t(l.target).closest("[data-action]"),p=f.data("action");this.d[p]()},_onClickNavTitle:function(l){if(!t(l.target).hasClass("-disabled-"))return this.d.view=="days"?this.d.view="months":void(this.d.view="years")}}}(),function(){var i='<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-seconds">#{secValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="seconds" value="#{secValue}" min="#{secMin}" max="#{secMax}" step="#{secStep}"/>   </div></div></div>',n=t.fn.datepicker,o=n.Constructor;n.Timepicker=function(s,a){this.d=s,this.opts=a,this.init()},n.Timepicker.prototype={init:function(){var s="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(s="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(s,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(s){var a=o.getParsedDate(s);this._handleDate(s),this.hours=a.hours<this.minHours?this.minHours:a.hours,this.minutes=a.minutes<this.minMinutes?this.minMinutes:a.minutes,this.seconds=a.seconds<this.minSeconds?this.minSeconds:a.seconds},_setMinTimeFromDate:function(s){this.minHours=s.getHours(),this.minMinutes=s.getMinutes(),this.minSeconds=s.getSeconds(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>s.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(s){this.maxHours=s.getHours(),this.maxMinutes=s.getMinutes(),this.maxSeconds=s.getSeconds(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<s.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var s=23,a=59,l=59,f=this.opts;this.minHours=f.minHours<0||f.minHours>s?0:f.minHours,this.minMinutes=f.minMinutes<0||f.minMinutes>a?0:f.minMinutes,this.maxHours=f.maxHours<0||f.maxHours>s?s:f.maxHours,this.maxMinutes=f.maxMinutes<0||f.maxMinutes>a?a:f.maxMinutes,this.minSeconds=f.minSeconds<0||f.minSeconds>l?0:f.minSeconds,this.maxSeconds=f.maxSeconds<0||f.maxSeconds>l?l:f.maxSeconds},_validateHoursMinutes:function(s){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes),this.seconds<this.minSeconds?this.seconds=this.minSeconds:this.seconds>this.maxSeconds&&(this.seconds=this.maxSeconds)},_buildHTML:function(){var s=o.getLeadingZeroNum,a={hourMin:this.minHours,hourMax:s(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:s(this.displayHours),minMin:this.minMinutes,minMax:s(this.maxMinutes),minStep:this.opts.minutesStep,minValue:s(this.minutes),secMin:this.minSeconds,secMax:s(this.maxSeconds),secStep:this.opts.secondsStep,secValue:s(this.seconds)},l=o.template(i,a);this.$timepicker=t(l).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$seconds=t('[name="seconds"]',this.$timepicker),this.$hoursText=t(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".datepicker--time-current-minutes",this.$timepicker),this.$secondsText=t(".datepicker--time-current-seconds",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="datepicker--time-current-ampm">').appendTo(t(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var s=o.getLeadingZeroNum(this.displayHours),a=o.getLeadingZeroNum(this.minutes),l=o.getLeadingZeroNum(this.seconds);this.$hoursText.html(s),this.$minutesText.html(a),this.$secondsText.html(l),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes),this.$seconds.attr({min:this.minSeconds,max:this.maxSeconds}).val(this.seconds)},_handleDate:function(s){this._setDefaultMinMaxTime(),s&&(o.isSame(s,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):o.isSame(s,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(s)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(s,a){var l=s,f=s;s instanceof Date&&(l=o.getParsedDate(s),f=l.hours);var p=a||this.d.ampm,y="am";if(p)switch(!0){case f==0:f=12;break;case f==12:y="pm";break;case f>11:f-=12,y="pm"}return{hours:f,dayPeriod:y}},set hours(s){this._hours=s;var a=this._getValidHoursFromDate(s);this.displayHours=a.hours,this.dayPeriod=a.dayPeriod},get hours(){return this._hours},_onChangeRange:function(s){var a=t(s.target),l=a.attr("name");this.d.timepickerIsActive=!0,this[l]=a.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes,this.seconds]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(s,a){this._handleDate(a),this.update()},_onMouseEnterRange:function(s){var a=t(s.target).attr("name");t(".datepicker--time-current-"+a,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(s){var a=t(s.target).attr("name");this.d.inFocus||t(".datepicker--time-current-"+a,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(s){this.d.timepickerIsActive=!1}}}()})(window,jQuery);(function(r){r.fn.datepicker.language.cs={days:["Ned\u011Ble","Pond\u011Bl\xED","\xDAter\xFD","St\u0159eda","\u010Ctvrtek","P\xE1tek","Sobota"],daysShort:["Ne","Po","\xDAt","St","\u010Ct","P\xE1","So"],daysMin:["Ne","Po","\xDAt","St","\u010Ct","P\xE1","So"],months:["Leden","\xDAnor","B\u0159ezen","Duben","Kv\u011Bten","\u010Cerven","\u010Cervenec","Srpen","Z\xE1\u0159\xED","\u0158\xEDjen","Listopad","Prosinec"],monthsShort:["Led","\xDAno","B\u0159e","Dub","Kv\u011B","\u010Cvn","\u010Cvc","Srp","Z\xE1\u0159","\u0158\xEDj","Lis","Pro"],today:"Dnes",clear:"Vymazat",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.da={days:["S\xF8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xF8rdag"],daysShort:["S\xF8n","Man","Tir","Ons","Tor","Fre","L\xF8r"],daysMin:["S\xF8","Ma","Ti","On","To","Fr","L\xF8"],months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I dag",clear:"Nulstil",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",clear:"Aufr\xE4umen",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"mm/dd/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.es={days:["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],daysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Augosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",clear:"Limpiar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.fi={days:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],daysShort:["Su","Ma","Ti","Ke","To","Pe","La"],daysMin:["Su","Ma","Ti","Ke","To","Pe","La"],months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes\xE4kuu","Hein\xE4kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthsShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xE4","Hein\xE4","Elo","Syys","Loka","Marras","Joulu"],today:"T\xE4n\xE4\xE4n",clear:"Tyhjenn\xE4",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.fr={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],daysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:["Janvier","F\xE9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xFBt","Septembre","Octobre","Novembre","Decembre"],monthsShort:["Jan","F\xE9v","Mars","Avr","Mai","Juin","Juil","Ao\xFBt","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Effacer",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){(function(t){t.fn.datepicker.language.hu={days:["Vas\xE1rnap","H\xE9tf\u0151","Kedd","Szerda","Cs\xFCt\xF6rt\xF6k","P\xE9ntek","Szombat"],daysShort:["Va","H\xE9","Ke","Sze","Cs","P\xE9","Szo"],daysMin:["V","H","K","Sz","Cs","P","Sz"],months:["Janu\xE1r","Febru\xE1r","M\xE1rcius","\xC1prilis","M\xE1jus","J\xFAnius","J\xFAlius","Augusztus","Szeptember","Okt\xF3ber","November","December"],monthsShort:["Jan","Feb","M\xE1r","\xC1pr","M\xE1j","J\xFAn","J\xFAl","Aug","Szep","Okt","Nov","Dec"],today:"Ma",clear:"T\xF6rl\xE9s",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii aa",firstDay:1}})(jQuery)})(jQuery);(function(r){r.fn.datepicker.language.nl={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag",clear:"Legen",dateFormat:"dd-MM-yy",timeFormat:"hh:ii",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.pl={days:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015Aroda","Czwartek","Pi\u0105tek","Sobota"],daysShort:["Nie","Pon","Wto","\u015Aro","Czw","Pi\u0105","Sob"],daysMin:["Nd","Pn","Wt","\u015Ar","Czw","Pt","So"],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],monthsShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017A","Lis","Gru"],today:"Dzisiaj",clear:"Wyczy\u015B\u0107",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii:aa",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language["pt-BR"]={days:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.pt={days:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],daysMin:["Do","Se","Te","Qa","Qi","Sx","Sa"],months:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.ro={days:["Duminic\u0103","Luni","Mar\u0163i","Miercuri","Joi","Vineri","S\xE2mb\u0103t\u0103"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","S\xE2m"],daysMin:["D","L","Ma","Mi","J","V","S"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sept","Oct","Nov","Dec"],today:"Azi",clear:"\u015Eterge",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.sk={days:["Nede\u013Ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],daysShort:["Ned","Pon","Uto","Str","\u0160tv","Pia","Sob"],daysMin:["Ne","Po","Ut","St","\u0160t","Pi","So"],months:["Janu\xE1r","Febru\xE1r","Marec","Apr\xEDl","M\xE1j","J\xFAn","J\xFAl","August","September","Okt\xF3ber","November","December"],monthsShort:["Jan","Feb","Mar","Apr","M\xE1j","J\xFAn","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Dnes",clear:"Vymaza\u0165",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.zh={days:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],daysShort:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],daysMin:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthsShort:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],today:"\u4ECA\u5929",clear:"\u6E05\u9664",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.ar={days:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],daysShort:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],daysMin:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],months:["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0627\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"],monthsShort:["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0627\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"],today:"\u0627\u0644\u064A\u0648\u0645",clear:"\u062D\u0630\u0641",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:6}})(jQuery);(function(r){r.fn.datepicker.language.gr={days:["\u039A\u03C5\u03C1\u03B9\u03B1\u03BA\u03AE","\u0394\u03B5\u03C5\u03C4\u03AD\u03C1\u03B1","\u03A4\u03C1\u03AF\u03C4\u03B7","\u03A4\u03B5\u03C4\u03AC\u03C1\u03C4\u03B7","\u03A0\u03AD\u03BC\u03C0\u03C4\u03B7","\u03A0\u03B1\u03C1\u03B1\u03C3\u03BA\u03B5\u03C5\u03AE","\u03A3\u03AC\u03B2\u03B2\u03B1\u03C4\u03BF"],daysShort:["\u039A\u03C5\u03C1","\u0394\u03B5\u03C5","\u03A4\u03C1\u03B9","\u03A4\u03B5\u03C4","\u03A0\u03B5\u03BC","\u03A0\u03B1\u03C1","\u03A3\u03B1\u03B2"],daysMin:["\u039A\u03C5","\u0394\u03B5","\u03A4\u03C1","\u03A4\u03B5","\u03A0\u03B5","\u03A0\u03B1","\u03A3\u03B1"],months:["\u0399\u03B1\u03BD\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2","\u03A6\u03B5\u03B2\u03C1\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2","\u039C\u03AC\u03C1\u03C4\u03B9\u03BF\u03C2","\u0391\u03C0\u03C1\u03AF\u03BB\u03B9\u03BF\u03C2","\u039C\u03AC\u03B9\u03BF\u03C2","\u0399\u03BF\u03CD\u03BD\u03B9\u03BF\u03C2","\u0399\u03BF\u03CD\u03BB\u03B9\u03BF\u03C2","\u0391\u03CD\u03B3\u03BF\u03C5\u03C3\u03C4\u03BF\u03C2","\u03A3\u03B5\u03C0\u03C4\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2","\u039F\u03BA\u03C4\u03CE\u03B2\u03C1\u03B9\u03BF\u03C2","\u039D\u03BF\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2","\u0394\u03B5\u03BA\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2"],monthsShort:["\u0399\u03B1\u03BD","\u03A6\u03B5\u03B2","\u039C\u03B1\u03C1","\u0391\u03C0\u03C1","\u039C\u03AC\u03B9","\u0399/\u03BD","\u0399/\u03BB","\u0391\u03C5\u03B3","\u03A3\u03B5\u03C0","\u039F\u03BA\u03C4","\u039D\u03BF\u03B5","\u0394\u03B5\u03BA"],today:"\u03A3\u03AE\u03BC\u03B5\u03C1\u03B1",clear:"\u039A\u03B1\u03B8\u03B1\u03C1\u03B9\u03C3\u03BC\u03CC\u03C2",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.it={days:["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",clear:"Reset",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.tr={days:["Pazar","Pazartesi","Sal\u0131","\xC7ar\u015Famba","Per\u015Fembe","Cuma","Cumartesi"],daysShort:["Paz","Pzt","Sal","\xC7ar","Per","Cum","Cmt"],daysMin:["Pz","Pt","Sa","\xC7a","Pe","Cu","Ct"],months:["Ocak","\u015Eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011Fustos","Eyl\xFCl","Ekim","Kas\u0131m","Aral\u0131k"],monthsShort:["Oca","\u015Eub","Mar","Nis","May","Haz","Tem","A\u011Fu","Eyl","Eki","Kas","Ara"],today:"Bug\xFCn",clear:"Temizle",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.sv={days:["S\xF6ndag","M\xE5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xF6rdag"],daysShort:["S\xF6n","M\xE5n","Tis","Ons","Tor","Fre","L\xF6r"],daysMin:["S\xF6","M\xE5","Ti","On","To","Fr","L\xF6"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Idag",clear:"\xC5terst\xE4ll",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.bs={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Danas",clear:"Resetiraj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.hr={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Sje\u010Danj","Velja\u010Da","O\u017Eujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthsShort:["Sje","Velj","O\u017Eu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],today:"Danas",clear:"Resetiraj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.th={days:["\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C","\u0E08\u0E31\u0E19\u0E17\u0E23\u0E4C","\u0E2D\u0E31\u0E07\u0E04\u0E32\u0E23","\u0E1E\u0E38\u0E18","\u0E1E\u0E24\u0E2B\u0E31\u0E2A\u0E1A\u0E14\u0E35","\u0E28\u0E38\u0E01\u0E23\u0E4C","\u0E40\u0E2A\u0E32\u0E23\u0E4C"],daysShort:["\u0E2D\u0E32.","\u0E08.","\u0E2D.","\u0E1E.","\u0E1E\u0E24.","\u0E28.","\u0E2A."],daysMin:["\u0E2D\u0E32.","\u0E08.","\u0E2D.","\u0E1E.","\u0E1E\u0E24.","\u0E28.","\u0E2A."],months:["\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21","\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C","\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21","\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19","\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21","\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19","\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21","\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21","\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19","\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21","\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19","\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21"],monthsShort:["\u0E21.\u0E04.","\u0E01.\u0E1E.","\u0E21\u0E35.\u0E04.","\u0E40\u0E21.\u0E22.","\u0E1E.\u0E04.","\u0E21\u0E34.\u0E22.","\u0E01.\u0E04.","\u0E2A.\u0E04.","\u0E01.\u0E22.","\u0E15.\u0E04.","\u0E1E.\u0E22.","\u0E18.\u0E04."],today:"\u0E43\u0E19\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49",clear:"\u0E40\u0E04\u0E25\u0E35\u0E22\u0E23\u0E4C",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.sr={days:["\u041D\u0435\u0434\u0435\u0459\u0430","\u041F\u043E\u043D\u0435\u0434\u0435\u0459\u0430\u043A","\u0423\u0442\u043E\u0440\u0430\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0440\u0442\u0430\u043A","\u041F\u0435\u0442\u0430\u043A","\u0421\u0443\u0431\u043E\u0442\u0430"],daysShort:["\u041D\u0435\u0434","\u041F\u043E\u043D","\u0423\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u0435\u0442","\u0421\u0443\u0431"],daysMin:["\u041D\u0435","\u041F\u043E","\u0423\u0442","\u0421\u0440","\u0427\u0435","\u041F\u0435","\u0421\u0443"],months:["\u0408\u0430\u043D\u0443\u0430\u0440","\u0424\u0435\u0431\u0440\u0443\u0430\u0440","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0438\u043B","\u041C\u0430\u0458","\u0408\u0443\u043D","\u0408\u0443\u043B","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043F\u0442\u0435\u043C\u0431\u0430\u0440","\u041E\u043A\u0442\u043E\u0431\u0430\u0440","\u041D\u043E\u0432\u0435\u043C\u0431\u0430\u0440","\u0414\u0435\u0446\u0435\u043C\u0431\u0430\u0440"],monthsShort:["\u0408\u0430\u043D","\u0424\u0435\u0431","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0458","\u0408\u0443\u043D","\u0408\u0443\u043B","\u0410\u0432\u0433","\u0421\u0435\u043F","\u041E\u043A\u0442","\u041D\u043E\u0432","\u0414\u0435\u0446"],today:"\u0414\u0430\u043D\u0430\u0441",clear:"\u0420\u0435\u0441\u0435\u0442\u0443\u0458",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language["sr-CS"]={days:["Nedelja","Ponedeljak","Utorak","Sreda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sre","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas",clear:"Resetuj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);frappe._.get_data_uri=r=>{let t=r.videoWidth,e=r.videoHeight,i=$("<canvas/>");return i[0].width=t,i[0].height=e,i[0].getContext("2d").drawImage(r,0,0,t,e),i[0].toDataURL("image/png")};function ny(){let r=document.createElement("input");return r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("multiple",""),r.classList.add("visually-hidden"),document.body.appendChild(r),r}function oy(r){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=e,i.readAsDataURL(r)})}frappe.ui.Capture=class{constructor(r={}){this.options=frappe.ui.Capture.OPTIONS,this.set_options(r),this.facing_mode="environment",this.images=[]}set_options(r){return this.options=Pt(Pt({},frappe.ui.Capture.OPTIONS),r),this}show(){this.build_dialog(),cint(frappe.boot.sysdefaults.force_web_capture_mode_for_uploads)?this.show_for_desktop():frappe.is_mobile()?this.show_for_mobile():this.show_for_desktop()}build_dialog(){let r=this;r.dialog=new frappe.ui.Dialog({title:this.options.title,animate:this.options.animate,fields:[{fieldtype:"HTML",fieldname:"capture"},{fieldtype:"HTML",fieldname:"total_count"}],on_hide:()=>{this.stop_media_stream()}}),r.$template=$(frappe.ui.Capture.TEMPLATE);let t=r.dialog.get_field("capture");$(t.wrapper).html(r.$template),r.update_count(),r.dialog.get_close_btn().on("click",()=>{r.hide()})}show_for_mobile(){let r=this;r.input||(r.input=ny()),r.input.onchange=async()=>{for(let t of r.input.files){let e=await oy(t);r.images.push(e)}r.input.remove(),r.input=null,r.render_preview(),r.dialog.show()},r.input.click()}show_for_desktop(){let r=this;this.render_stream().then(()=>{r.dialog.show()}).catch(t=>{throw r.options.error&&frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE,3),t})}render_stream(){let r=this,t={video:{facingMode:this.facing_mode}};return navigator.mediaDevices.getUserMedia(t).then(e=>{r.stream=e,r.dialog.custom_actions.empty(),r.dialog.get_primary_btn().off("click"),r.setup_take_photo_action(),r.setup_preview_action(),r.setup_toggle_camera(),r.$template.find(".fc-stream-container").show(),r.$template.find(".fc-preview-container").hide(),r.video=r.$template.find("video")[0],r.video.srcObject=r.stream,r.video.load(),r.video.play()})}render_preview(){this.stop_media_stream(),this.$template.find(".fc-stream-container").hide(),this.$template.find(".fc-preview-container").show(),this.dialog.get_primary_btn().off("click");let r="";this.images.forEach((t,e)=>{r+=`
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${e}">
					<span class="capture-remove-btn" data-idx="${e}">
						${frappe.utils.icon("close","lg")}
					</span>
					<img class="rounded" src="${t}" data-idx="${e}">
				</div>
			`}),this.$template.find(".fc-preview-container").empty(),$(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${r}
			</div>`),this.setup_capture_action(),this.setup_submit_action(),this.setup_remove_action(),this.update_count(),this.dialog.custom_actions.empty()}setup_take_photo_action(){let r=this;this.dialog.set_primary_action(__("Take Photo"),()=>{let t=frappe._.get_data_uri(r.video);r.images.push(t),r.setup_preview_action(),r.update_count()})}setup_preview_action(){let r=this;!this.images.length||(this.dialog.set_secondary_action_label(__("Preview")),this.dialog.set_secondary_action(()=>{r.dialog.get_primary_btn().off("click"),r.render_preview()}))}setup_remove_action(){let r=this;Array.from(this.$template[0].getElementsByClassName("capture-remove-btn")).forEach(e=>{e.onclick=()=>{let i=parseInt(e.getAttribute("data-idx"));r.images.splice(i,1),r.render_preview()}})}update_count(){let r=this.dialog.get_field("total_count"),t=`${__("Total Images")}: <b>${this.images.length}`;this.images.length===0&&(t=__("No Images")),$(r.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${t}</b></div>
			</div>
		`)}setup_toggle_camera(){let r=this;this.dialog.add_custom_action(__("Switch Camera"),()=>{r.facing_mode=r.facing_mode=="environment"?"user":"environment",frappe.show_alert({message:__("Switching Camera")}),r.stop_media_stream(),r.render_stream()},"btn-switch")}setup_capture_action(){let r=this;this.dialog.set_secondary_action_label(__("Capture")),this.dialog.set_secondary_action(()=>{frappe.is_mobile()?r.show_for_mobile():r.render_stream()})}setup_submit_action(){let r=this;this.dialog.set_primary_action(__("Submit"),()=>{r.hide(),r.callback&&r.callback(r.images)})}hide(){this.dialog&&this.dialog.hide(),this.stop_media_stream()}stop_media_stream(){this.stream&&this.stream.getTracks().forEach(r=>{r.stop()})}submit(r){this.callback=r}};frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1};frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera.");frappe.ui.Capture.TEMPLATE=`
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;frappe.ui.form.Control=class{constructor(t){$.extend(this,t),this.make(),this.render_input&&this.refresh()}make(){this.make_wrapper(),this.$wrapper.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname),this.wrapper=this.$wrapper.get(0),this.wrapper.fieldobj=this,this.tooltip=$(`<span class="tooltip-content">${__(this.df.fieldname)}</span>`),this.$wrapper.append(this.tooltip),this.tooltip.on("click",t=>{let e=$(t.target).text();frappe.utils.copy_to_clipboard(e)})}make_wrapper(){this.$wrapper=$("<div class='frappe-control'></div>").appendTo(this.parent),this.wrapper=this.$wrapper}toggle(t){this.df.hidden=t?0:1,this.refresh()}get perm(){var t;return(t=this.frm)==null?void 0:t.perm}set perm(t){console.error("Setting perm on controls isn't supported, update form's perm instead")}get_status(t){if(this.df.get_status)return this.df.get_status(this);if(!this.doctype&&!this.docname||this.df.parenttype==="Web Form"||this.df.is_web_form){let o="Write";if(cint(this.df.hidden))return t&&console.log("By Hidden: None"),"None";if(cint(this.df.hidden_due_to_dependency))return t&&console.log("By Hidden Dependency: None"),"None";cint(this.df.read_only||this.df.is_virtual||this.df.fieldtype==="Read Only")?(t&&console.log("By Read Only: Read"),o="Read"):(this.grid&&this.grid.display_status=="Read"||this.layout&&this.layout.grid&&this.layout.grid.display_status=="Read")&&(t&&console.log("By Parent Grid Read-only: Read"),o="Read");let s=this.value||this.get_model_value();return s=this.get_parsed_value(s),o==="Read"&&is_null(s)&&!["HTML","Image","Button"].includes(this.df.fieldtype)&&(o="Read"),o}var e=frappe.perm.get_field_display_status(this.df,frappe.model.get_doc(this.doctype,this.docname),this.perm||this.frm&&this.frm.perm,t);if(e==="Write"&&(this.grid||this.layout&&this.layout.grid&&!cint(this.df.allow_on_submit))){var i=this.grid||this.layout.grid;i.display_status=="Read"&&(e="Read",t&&console.log("By Parent Grid Read-only: Read"))}let n=frappe.model.get_value(this.doctype,this.docname,this.df.fieldname);return["Date","Datetime"].includes(this.df.fieldtype)&&n&&(n=frappe.datetime.str_to_user(n)),n=this.get_parsed_value(n),this.doctype&&e==="Read"&&!this.only_input&&is_null(n)&&cint(frappe.boot.sysdefaults.hide_empty_read_only_fields)&&!["HTML","Image","Button","Geolocation"].includes(this.df.fieldtype)&&(t&&console.log("By Hide Read-only, null fields: None"),e="None"),e}refresh(){this.disp_status=this.get_status(),this.$wrapper&&this.$wrapper.toggleClass("hide-control",this.disp_status=="None")&&this.refresh_input&&this.refresh_input();var t=this.get_value();this.show_translatable_button(t)}show_translatable_button(t){if(!frappe.model||!this.frm||!this.doc||!this.df.translatable||!frappe.model.can_write("Translation")||!t||!frappe.views||!frappe.views.TranslationManager||this.$wrapper.find(".clearfix .btn-translation").length)return;let e=`<a class="btn-translation no-decoration text-muted" title="${__("Open Translation")}">
				<i class="fa fa-globe"></i>
			</a>`;$(e).appendTo(this.$wrapper.find(".clearfix")).on("click",()=>{this.doc.__islocal||new frappe.views.TranslationManager({df:this.df,source_text:this.value,target_language:this.doc.language,doc:this.doc})})}get_doc(){return this.doctype&&this.docname&&locals[this.doctype]&&locals[this.doctype][this.docname]||{}}get_model_value(){if(this.doc)return this.doc[this.df.fieldname]}get_parsed_value(t){return this.parse&&(t=this.parse(t)),t}set_value(t,e=!1){return this.validate_and_set_in_model(t,null,e)}parse_validate_and_set_in_model(t,e){return t=this.get_parsed_value(t),this.validate_and_set_in_model(t,e)}validate_and_set_in_model(t,e,i=!1){var l,f,p;let n=this,o=this.get_model_value()===t;if(this.inside_change_event||o&&!i)return Promise.resolve();let s=this.get_model_value();(p=(l=this.frm)==null?void 0:l.undo_manager)==null||p.record_change({fieldname:n.df.fieldname,old_value:s,new_value:t,doctype:this.doctype,docname:this.docname,is_child:Boolean((f=this.doc)==null?void 0:f.parenttype)}),this.inside_change_event=!0;function a(y){return n.inside_change_event=!1,frappe.run_serially([()=>n._validated=!0,()=>n.set_model_value(y),()=>delete n._validated,()=>{if(n.set_mandatory&&n.set_mandatory(y),n.df.change||n.df.onchange){let h=(n.df.change||n.df.onchange).apply(n,[e]);return n.set_invalid&&n.set_invalid(),h}n.set_invalid&&n.set_invalid()}])}return t=this.validate(t),t&&t.then?t.then(y=>a(y)):a(t)}get_value(){return this.get_status()==="Write"?this.get_input_value?this.parse?this.parse(this.get_input_value()):this.get_input_value():void 0:this.value||void 0}set_model_value(t){return this.frm?(this.last_value=t,frappe.model.set_value(this.doctype,this.docname,this.df.fieldname,t,this.df.fieldtype)):(this.doc&&(this.doc[this.df.fieldname]=t),this.set_input(t),Promise.resolve())}set_focus(){if(this.$input)return this.$input.get(0).focus(),!0}};var ma;frappe.ui.form.ControlInput=(ma=class extends frappe.ui.form.Control{make(){super.make(),this.set_input_areas(),this.set_max_width(),this.df.initial_value&&this.set_value(this.df.initial_value)}make_wrapper(){this.only_input?this.$wrapper=$('<div class="form-group frappe-control">').appendTo(this.parent):(this.$wrapper=$(`<div class="frappe-control">
				<div class="form-group">
					<div class="clearfix">
						<label class="control-label" style="padding-right: 5px;"></label>
						<span class="help"></span>
					</div>
					<div class="control-input-wrapper">
						<div class="control-input"></div>
						<div class="control-value like-disabled-input" style="display: none;"></div>
						<div class="help-box small text-extra-muted hide"></div>
					</div>
				</div>
			</div>`).appendTo(this.parent),this.constructor.horizontal&&this.$wrapper.find(".form-group").addClass("horizontal"))}toggle_label(t){this.$wrapper.find(".control-label").parent().toggleClass("hide",!t)}toggle_description(t){this.$wrapper.find(".help-box").toggleClass("hide",!t)}set_input_areas(){this.only_input?this.input_area=this.wrapper:(this.label_area=this.label_span=this.$wrapper.find("label").get(0),this.input_area=this.$wrapper.find(".control-input").get(0),this.$input_wrapper=this.$wrapper.find(".control-input-wrapper"),this.disp_area=this.$wrapper.find(".control-value").get(0))}set_max_width(){this.constructor.horizontal&&this.$wrapper.addClass("input-max-width")}read_only_because_of_fetch_from(){var t,e;return this.df.fetch_from&&!this.df.fetch_if_empty&&((e=(t=this.frm)==null?void 0:t.doc)==null?void 0:e[this.df.fetch_from.split(".")[0]])}refresh_input(){var t=this,e=function(){t.has_input||(t.make_input(),t.df.on_make&&t.df.on_make(t))},i=function(){t.doctype&&t.docname?t.set_input(t.value):t.set_input(t.value||null)};if(t.disp_status!="None"){t.frm?t.value=frappe.model.get_value(t.doctype,t.docname,t.df.fieldname):t.doc&&(t.value=t.doc[t.df.fieldname]||"");let n=t.read_only_because_of_fetch_from();t.can_write()&&!n?(t.disp_area&&$(t.disp_area).toggle(!1),$(t.input_area).toggle(!0),t.$input&&t.$input.prop("disabled",!1),e(),i()):(t.only_input?(e(),i()):($(t.input_area).toggle(!1),t.disp_area&&(t.set_disp_area(t.value),$(t.disp_area).toggle(!0))),t.$input&&t.$input.prop("disabled",!0),n&&$(t.disp_area).attr("title",__("This value is fetched from {0}'s {1} field",t.df.fetch_from.split(".").map(o=>__(frappe.unscrub(o)))))),t.set_description(),t.set_label(),t.set_doc_url(),t.set_mandatory(t.value),t.set_bold(),t.set_required()}}can_write(){return this.disp_status=="Write"}set_disp_area(t){["Currency","Int","Float"].includes(this.df.fieldtype)&&(this.value===0||t===0)?t=0:t=this.value||t,["Data","Long Text","Small Text","Text","Password"].includes(this.df.fieldtype)&&(t=frappe.utils.escape_html(t));let e=this.doc||this.frm&&this.frm.doc,i=frappe.format(t,this.df,{no_icon:!0,inline:!0},e);this.disp_area&&$(this.disp_area).html(i)}set_label(t){if(t&&(this.df.label=t),!(this.only_input||this.df.label==this._label)){var e="";this.label_span.innerHTML=(e?'<i class="'+e+'"></i> ':"")+__(this.df.label,null,this.df.parent)||"&nbsp;",this._label=this.df.label}}set_doc_url(){var i;let t=frappe.model.no_value_type.filter(n=>frappe.model.table_fields.indexOf(n)===-1);if(!this.df.label||!((i=this.df)!=null&&i.documentation_url)||t.includes(this.df.fieldtype))return;let e=this.$wrapper.find("span.help");e.empty(),$(`<a
			href="${frappe.utils.escape_html(this.df.documentation_url)}"
			target="_blank"
			title="${frappe.utils.escape_html(__("Documentation"))}"
		>
			${frappe.utils.icon("help","sm")}
		</a>`).appendTo(e)}set_description(t){t!==void 0&&(this.df.description=t),!(this.only_input||this.df.description===this._description)&&(this.df.description?(this.$wrapper.find(".help-box").html(__(this.df.description,null,this.df.parent)),this.toggle_description(!0)):this.set_empty_description(),this._description=this.df.description)}set_new_description(t){this.$wrapper.find(".help-box").html(t),this.toggle_description(!0)}set_empty_description(){this.$wrapper.find(".help-box").html(""),this.toggle_description(!1)}set_mandatory(t){this.frm&&this.frm.cscript&&this.frm.cscript.is_onload||this.layout&&this.layout.is_dialog&&!this.layout.primary_action_fulfilled||this.$wrapper.toggleClass("has-error",Boolean(this.df.reqd&&is_null(t)))}set_invalid(){var e;let t=!!this.df.invalid;this.grid?(this.$wrapper.parents(".grid-static-col").toggleClass("invalid",t),(e=this.$input)==null||e.toggleClass("invalid",t),this.grid_row.columns[this.df.fieldname].is_invalid=t):this.$wrapper.toggleClass("has-error",t)}set_required(){this.label_area&&$(this.label_area).toggleClass("reqd",Boolean(this.df.reqd))}set_bold(){this.$input&&this.$input.toggleClass("bold",!!(this.df.bold||this.df.reqd)),this.disp_area&&$(this.disp_area).toggleClass("bold",!!(this.df.bold||this.df.reqd))}},at(ma,"horizontal",!0),ma);frappe.provide("frappe.phone_call");var an;frappe.ui.form.ControlData=(an=class extends frappe.ui.form.ControlInput{make_input(){if(this.$input)return;let{html_element:t,input_type:e,input_mode:i}=this.constructor;this.$input=$("<"+t+">").attr("type",e).attr("inputmode",i).attr("autocomplete","off").addClass("input-with-feedback form-control").prependTo(this.input_area),this.$input.on("paste",n=>{let o=frappe.utils.get_clipboard_data(n),s=this.$input.attr("maxlength");if(s&&o.length>s){let a=__("The value you pasted was {0} characters long. Max allowed characters is {1}.",[cstr(o.length).bold(),cstr(s).bold()]);if(this.frm&&frappe.model.can_write(this.frm.doctype)){let l=null;this.frm.meta.custom?l=frappe.utils.get_form_link("DocType",this.frm.doctype,!0,__("this form")):l=frappe.utils.get_form_link("Customize Form","Customize Form",!0,null,{doc_type:this.frm.doctype}),a+=`<br><br><span class="text-muted text-small">${__("{0}: You can increase the limit for the field if required via {1}",[__("Note").bold(),l])}</span>`}frappe.msgprint({message:a,indicator:"orange",title:__("Data Clipped")})}}),this.set_input_attributes(),this.input=this.$input.get(0),this.has_input=!0,this.bind_change_event(),this.setup_autoname_check(),this.setup_copy_button(),this.df.options=="URL"&&this.setup_url_field(),this.df.options=="Barcode"&&this.setup_barcode_field()}setup_url_field(){this.$wrapper.find(".control-input").append(`<span class="link-btn">
				<a class="btn-open no-decoration" title="${__("Open Link")}" target="_blank">
					${frappe.utils.icon("link-url","sm")}
				</a>
			</span>`),this.$link=this.$wrapper.find(".link-btn"),this.$link_open=this.$link.find(".btn-open"),this.$input.on("focus",()=>{setTimeout(()=>{let t=this.get_input_value();t&&validate_url(t)&&(this.$link.toggle(!0),this.$link_open.attr("href",this.get_input_value()))},500)}),this.$input.bind("input",()=>{let t=this.get_input_value();t&&validate_url(t)?(this.$link.toggle(!0),this.$link_open.attr("href",this.get_input_value())):this.$link.toggle(!1)}),this.$input.on("blur",()=>{setTimeout(()=>{this.$link.toggle(!1)},500)})}setup_copy_button(){this.df.with_copy_button&&this.$wrapper.find(".control-input").append(`<button class="btn action-btn">
					${frappe.utils.icon("clipboard","sm")}
				</button>`).find(".action-btn").click(()=>{frappe.utils.copy_to_clipboard(this.value)})}setup_barcode_field(){this.$wrapper.find(".control-input").append(`<span class="link-btn">
				<a class="btn-open no-decoration" title="${__("Scan")}">
					${frappe.utils.icon("scan","sm")}
				</a>
			</span>`),this.$scan_btn=this.$wrapper.find(".link-btn"),this.$scan_btn.toggle(!0);let t=this;$(document).on("frappe.ui.Dialog:shown",function(){t.$scan_btn.toggle(!0)}),this.$scan_btn.on("click","a",()=>{new frappe.ui.Scanner({dialog:!0,multiple:!1,on_scan(e){e&&e.result&&e.result.text&&t.set_value(e.result.text)}})})}bind_change_event(){let t=e=>{if(this.change)this.change(e);else{let i=this.get_input_value();this.parse_validate_and_set_in_model(i,e)}};this.$input.on("change",t),this.constructor.trigger_change_on_input_event&&!this.in_grid()&&this.$input.on("input",frappe.utils.debounce(t,500))}setup_autoname_check(){!this.df.parent||(this.meta=frappe.get_meta(this.df.parent),this.meta&&(this.meta.autoname&&this.meta.autoname.substr(0,6)==="field:"&&this.meta.autoname.substr(6)===this.df.fieldname||this.df.fieldname==="__newname")&&this.$input.on("keyup",()=>{if(this.set_description(""),this.doc&&this.doc.__islocal){let t=setTimeout(()=>{this.last_check&&clearTimeout(this.last_check),frappe.db.get_value(this.doctype,this.$input.val(),"name",e=>{e&&e.name&&this.set_description(__("{0} already exists. Select another name",[e.name]))},this.doc.parenttype),this.last_check=null},1e3);this.last_check=t}}))}set_input_attributes(){var t,e;if(["Data","Link","Dynamic Link","Password","Select","Read Only"].includes(this.df.fieldtype)){if((e=(t=this.frm)==null?void 0:t.meta)!=null&&e.issingle)return;this.$input.attr("maxlength",this.df.length||140)}this.$input.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname).attr("placeholder",this.df.placeholder||""),this.doctype&&this.$input.attr("data-doctype",this.doctype),this.df.input_css&&this.$input.css(this.df.input_css),this.df.input_class&&this.$input.addClass(this.df.input_class)}set_input(t){this.last_value=this.value,this.value=t,this.set_formatted_input(t),this.set_disp_area(t),this.set_mandatory&&this.set_mandatory(t)}set_formatted_input(t){this.$input&&this.$input.val(this.format_for_input(t))}get_input_value(){return this.$input?this.$input.val():void 0}format_for_input(t){return t==null?"":t}validate(t){if(!t)return"";if(this.df.is_filter)return t;if(this.df.options=="Phone")return this.df.invalid=!validate_phone(t),t;if(this.df.options=="Name")return this.df.invalid=!validate_name(t),t;if(this.df.options=="Email"){var e=frappe.utils.split_emails(t);if(e){let i=!1;return e.forEach(function(n){validate_email(n)||(i=!0)}),this.df.invalid=i,t}else return""}else return this.df.options=="URL"&&(this.df.invalid=!validate_url(t)),t}toggle_container_scroll(t,e,i=!1){let n=this.$input.parents(t)[0];n&&$(n).toggleClass(e,i)}in_grid(){return this.grid||this.layout&&this.layout.grid}},at(an,"html_element","input"),at(an,"input_type","text"),at(an,"trigger_change_on_input_event",!0),an);frappe.ui.form.ControlReadOnly=frappe.ui.form.ControlData;var m7=Gt(Lc());frappe.ui.form.ControlFloat=class extends frappe.ui.form.ControlInt{parse(t){return t=this.eval_expression(t),isNaN(parseFloat(t))?null:flt(t,this.get_precision())}format_for_input(t){return t==null||isNaN(Number(t))?"":format_number(t,this.get_number_format(),this.get_precision())}get_number_format(){var e;if(this.df.fieldtype==="Float"&&!((e=this.df.options)!=null&&e.trim()))return;let t=frappe.meta.get_field_currency(this.df,this.get_doc());return get_number_format(t)}get_precision(){return this.df.precision||cint(frappe.boot.sysdefaults.float_precision,null)}};frappe.ui.form.ControlPercent=frappe.ui.form.ControlFloat;frappe.ui.form.ControlCurrency=class extends frappe.ui.form.ControlFloat{get_precision(){return typeof this.df.precision!="number"&&!this.df.precision&&(frappe.boot.sysdefaults.currency_precision?this.df.precision=frappe.boot.sysdefaults.currency_precision:this.df.precision=get_number_format_info(this.get_number_format()).precision),this.df.precision}};var ga;frappe.ui.form.ControlDate=(ga=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.make_picker()}make_picker(){this.set_date_options(),this.set_datepicker(),this.set_t_for_today()}set_formatted_input(t){if(t==="Today"&&(t=this.get_now_date()),super.set_formatted_input(t),this.timepicker_only||!this.datepicker)return;if(!t){this.datepicker.clear();return}let e=this.last_value&&this.last_value!==t;e||(this.datepicker.selectedDates.length>0?e=moment(this.datepicker.selectedDates[0]).format(this.date_format)!==t:e=!0),e&&this.datepicker.selectDate(frappe.datetime.str_to_obj(t))}set_date_options(){let t=frappe.boot.sysdefaults,e="en";frappe.boot.user&&(e=frappe.boot.user.language),$.fn.datepicker.language[e]||(e="en");let i=t&&t.date_format?t.date_format:"yyyy-mm-dd";this.today_text=__("Today"),this.date_format=frappe.defaultDateFormat,this.datepicker_options=Pt({language:e,autoClose:!0,todayButton:!0,dateFormat:i,startDate:this.get_start_date(),keyboardNav:!1,minDate:this.df.min_date,maxDate:this.df.max_date,firstDay:frappe.datetime.get_first_day_of_the_week_index(),onSelect:()=>{this.$input.trigger("change")},onShow:()=>{this.datepicker.$datepicker.find(".datepicker--button:visible").text(this.today_text),this.update_datepicker_position()},onRenderCell:(n,o)=>{if(o==="day"&&this.df.disabled_dates){let s=moment(n).format("YYYY-MM-DD");if(this.df.disabled_dates.includes(s))return{disabled:!0,classes:"disabled"}}}},this.get_df_options())}get_start_date(){return this.get_now_date()}set_datepicker(){this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker"),this.datepicker.$datepicker.find('[data-action="today"]').click(()=>{this.datepicker.selectDate(this.get_now_date()),this.datepicker.hide()})}update_datepicker_position(){if(!this.frm)return;let t=$(".page-head"),e=t.position().top+t.outerHeight(),i=this.datepicker.$datepicker.outerHeight()+12,n=this.$input.offset().top-$(window).scrollTop()-i;var o="top left";n<=e?(o="bottom left",this.timepicker_only&&(this.datepicker.opts.offset=12)):this.timepicker_only&&(this.datepicker.opts.offset=-30),this.datepicker.update("position",o)}get_now_date(){return frappe.datetime.convert_to_system_tz(frappe.datetime.now_date(!0),!1).toDate()}set_t_for_today(){var t=this;this.$input.on("keydown",function(e){if(e.which===84)return t.df.fieldtype=="Date"&&t.set_value(frappe.datetime.nowdate()),t.df.fieldtype=="Datetime"&&t.set_value(frappe.datetime.now_datetime()),t.df.fieldtype=="Time"&&t.set_value(frappe.datetime.now_time()),!1})}eval_expression(t,e){if(!t||!e)return t;let i=t.match(/[\+\-]\s*\d*\.?\d+\s*[a-zA-Z]/g),n;switch(e){case"date":n="YYYY-MM-DD",t=frappe.datetime.user_to_str(t,!1);break;case"time":n="HH:mm:ss",t=frappe.datetime.user_to_str(t,!0);break;case"datetime":n="YYYY-MM-DD HH:mm:ss",t=frappe.datetime.user_to_str(t,!1);break}if(!i)return t;let o={};return i.forEach(s=>{let a=s.match(/[\+\-]/)[0],l=flt(s.match(/\d*\.?\d+/)[0]),f=s.match(/[a-zA-Z]+/)[0],p;a==="-"&&(l=-l),["datetime","date"].includes(e)&&(f.toLowerCase()==="d"?p="days":f==="M"?p="months":f.toLowerCase()==="y"&&(p="years")),["datetime","time"].includes(e)&&(f.toLowerCase()==="h"?p="hours":f==="m"?p="minutes":f.toLowerCase()==="s"&&(p="seconds")),p&&(o[p]=(o[p]||0)+l)}),Object.keys(o).length&&(t=moment(t,n).add(o).format(n)),t}parse(t){if(t)return t=="Invalid date"?"":this.eval_expression(t,"date")}format_for_input(t){return t?frappe.datetime.str_to_user(t,!1,!0):""}validate(t){if(t&&!frappe.datetime.validate(t)){let e=frappe.sys_defaults,i=e&&e.date_format?e.date_format:"yyyy-mm-dd";return frappe.msgprint(__("Date {0} must be in format: {1}",[t,i])),""}return t}get_df_options(){let t=this.df.options;if(!t)return{};let e={};if(typeof t=="string")try{e=JSON.parse(t)}catch(i){console.warn(`Invalid JSON in options of "${this.df.fieldname}"`)}else typeof t=="object"&&(e=t);return e}},at(ga,"trigger_change_on_input_event",!1),ga);frappe.ui.form.ControlTime=class extends frappe.ui.form.ControlDate{set_formatted_input(t){super.set_formatted_input(t)}make_input(){this.timepicker_only=!0,super.make_input()}make_picker(){this.set_time_options(),this.set_datepicker(),this.refresh()}set_time_options(){let t=frappe.boot.sysdefaults,e=t&&t.time_format?t.time_format:"HH:mm:ss";this.time_format=frappe.defaultTimeFormat,this.datepicker_options={language:"en",timepicker:!0,onlyTimepicker:!0,timeFormat:e.toLowerCase().replace("mm","ii"),startDate:frappe.datetime.now_time(!0),onSelect:()=>{moment(this.get_value(),e).format("HH:mm:ss")!=moment(this.value,e).format("HH:mm:ss")&&this.$input.trigger("change")},onShow:()=>{$(".datepicker--button:visible").text(__("Now")),this.update_datepicker_position()},keyboardNav:!1,todayButton:!0}}set_input(t){if(super.set_input(t),!this.datepicker)return;if(!t){this.datepicker.clear();return}let e=this.last_value&&this.last_value!==t,i=frappe.sys_defaults.time_format||"HH:mm:ss";e||(this.datepicker.selectedDates.length>0?e=moment(this.datepicker.selectedDates[0]).format(this.time_format)!==t:e=!0),e&&this.datepicker.selectDate(frappe.datetime.moment_to_date_obj(moment(t,i)))}set_datepicker(){if(this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker"),this.datepicker.$datepicker.find('[data-action="today"]').click(()=>{this.datepicker.selectDate(frappe.datetime.now_time(!0)),this.datepicker.hide()}),this.datepicker.opts.timeFormat.indexOf("s")==-1){let t=this.datepicker.timepicker;t.$seconds.parent().css("display","none"),t.$secondsText.css("display","none"),t.$secondsText.prev().css("display","none")}}set_description(){let{description:t}=this.df,{time_zone:e}=frappe.sys_defaults;frappe.datetime.is_system_time_zone()||(t?t.includes(e)||(this.df.description+="<br>"+e):this.df.description=e),super.set_description()}parse(t){if(t)return t=="Invalid date"&&(t=""),this.eval_expression(t,"time")}format_for_input(t){return t?frappe.datetime.str_to_user(t,!0):""}validate(t){if(t&&!frappe.datetime.validate(t)){let e=frappe.sys_defaults,i=e&&e.time_format?e.time_format:"HH:mm:ss";return frappe.msgprint(__("Time {0} must be in format: {1}",[t,i])),""}return t}};frappe.ui.form.ControlDatetime=class extends frappe.ui.form.ControlDate{set_formatted_input(t){if(this.datetime_format="DD-MM-YYYY HH:mm:ss",this.timepicker_only||!this.datepicker)return;if(t)t.toLowerCase()==="today"?t=this.get_now_date():t.toLowerCase()==="now"&&(t=frappe.datetime.now_datetime());else{this.datepicker.clear();return}let e=this.last_value&&this.last_value!==t;t=this.format_for_input(t),this.$input&&this.$input.val(t),e||(this.datepicker.selectedDates.length>0?e=moment(this.datepicker.selectedDates[0]).format(this.datetime_format)!==t:e=!0),e&&this.datepicker.selectDate(frappe.datetime.user_to_obj(t))}get_start_date(){this.value=this.value==null||this.value==""?void 0:this.value;let t=frappe.datetime.convert_to_user_tz(this.value);return frappe.datetime.str_to_obj(t)}set_date_options(){super.set_date_options(),this.today_text=__("Now");let t=frappe.boot.sysdefaults;this.date_format=frappe.defaultDatetimeFormat;let e=t&&t.time_format?t.time_format:"HH:mm:ss";$.extend(this.datepicker_options,{timepicker:!0,timeFormat:e.toLowerCase().replace("mm","ii")})}get_now_date(){return frappe.datetime.now_datetime(!0)}parse(t){return t&&(t=this.eval_expression(t,"datetime"),frappe.datetime.is_system_time_zone()||(t=frappe.datetime.convert_to_system_tz(t,!0)),t=="Invalid date"&&(t="")),t}format_for_input(t){return t?frappe.datetime.str_to_user(t,!1):""}set_description(){let t=this.df.description,e=this.get_user_time_zone();this.df.hide_timezone||(t?t.includes(e)||(this.df.description+="<br>"+e):this.df.description=e),super.set_description()}get_user_time_zone(){return frappe.boot.time_zone?frappe.boot.time_zone.user:frappe.sys_defaults.time_zone}set_datepicker(){if(super.set_datepicker(),this.datepicker.opts.timeFormat.indexOf("s")==-1){let t=this.datepicker.timepicker;t.$seconds.parent().css("display","none"),t.$secondsText.css("display","none"),t.$secondsText.prev().css("display","none")}}get_model_value(){let t=super.get_model_value();return!t&&!this.doc&&(t=this.last_value),t?frappe.datetime.get_datetime_as_string(t):""}};frappe.ui.form.ControlDateRange=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.set_date_options(),this.set_datepicker(),this.refresh()}set_date_options(){var i,n;var t=this;let e=(n=(i=frappe.boot)==null?void 0:i.user)==null?void 0:n.language;this.datepicker_options={language:$.fn.datepicker.language[e]?e:"en",range:!0,autoClose:!0,toggleSelected:!1,firstDay:frappe.datetime.get_first_day_of_the_week_index()},this.datepicker_options.dateFormat=frappe.boot.sysdefaults.date_format||"yyyy-mm-dd",this.datepicker_options.onSelect=function(){t.$input.trigger("change")}}set_datepicker(){this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker")}set_input(t,e){if(this.last_value=this.value,t&&e?this.value=[t,e]:this.value=t,this.value){let i=this.format_for_input(this.value[0],this.value[1]);this.$input&&this.$input.val(i)}else this.$input&&this.$input.val("");this.set_disp_area(t||""),this.set_mandatory&&this.set_mandatory(t)}parse(t){if(t==null||typeof t=="object")return t;let e=__("{0} to {1}").replace("{0}","").replace("{1}","");if(t=t&&t.replace(e,","),t&&t.includes(",")){var i=t.split(","),n=moment(frappe.datetime.user_to_obj(i[0])).format("YYYY-MM-DD"),o=moment(frappe.datetime.user_to_obj(i[i.length-1])).format("YYYY-MM-DD");return[n,o]}}format_for_input(t,e){return t&&e?(t=frappe.datetime.str_to_user(t,!1,!0),e=frappe.datetime.str_to_user(e,!1,!0),__("{0} to {1}",[t,e])):""}};var wo;frappe.ui.form.ControlSelect=(wo=class extends frappe.ui.form.ControlData{make_input(){super.make_input();let t=this.df.input_class&&this.df.input_class.includes("input-xs");this.set_icon(t),this.df.placeholder&&this.set_placeholder(t),this.$input.addClass("ellipsis"),this.set_options()}set_icon(t){let e=`<div class="select-icon ${t?"xs":""}">
				${frappe.utils.icon("select",t?"xs":"sm")}
			</div>`;this.only_input?this.$wrapper.append(e):this.$wrapper.find(".control-input").addClass("flex align-center").append(e)}set_placeholder(t){let e=`<div class="placeholder ellipsis text-extra-muted ${t?"xs":""}">
				<span>${this.df.placeholder}</span>
			</div>`;this.only_input?this.$wrapper.append(e):this.$wrapper.find(".control-input").append(e),this.toggle_placeholder(),this.$input&&this.$input.on("select-change",()=>this.toggle_placeholder())}set_formatted_input(t){t==null&&(t=""),this.set_options(t),super.set_formatted_input(t);var e="";this.$input&&(e=this.$input.val()),t&&e&&t!==e&&this.set_model_value(e)}set_options(t){var e=this.df.options||[];if(typeof this.df.options=="string"&&(e=this.df.options.split(`
`)),JSON.stringify(e)!==this.last_options&&(this.last_options=JSON.stringify(e),this.$input)){var i=this.$input.find(":selected").val();this.$input.empty(),frappe.ui.form.add_options(this.$input,e||[],this.df.sort_options,this.df.context||this.df.parent||this.doctype),t===void 0&&i&&this.$input.val(i)}}get_file_attachment_list(){if(!!this.frm){var t=frappe.model.docinfo[this.frm.doctype][this.frm.docname];if(t&&t.attachments){this.set_description("");var e=[""];return $.each(t.attachments,function(i,n){e.push(n.file_url)}),e}else return this.set_description(__("Please attach a file first.")),[""]}}toggle_placeholder(){let t=Boolean(this.$input.find("option:selected").text());this.$wrapper.find(".placeholder").toggle(!t)}},at(wo,"html_element","select"),at(wo,"trigger_change_on_input_event",!1),wo);frappe.ui.form.add_options=function(r,t,e,i){let n=$(r);if(!Array.isArray(t))return n;let o=t.map(s=>sy(s,i));return e&&(o=o.sort((s,a)=>cstr(s.label).localeCompare(cstr(a.label)))),o.map(s=>$("<option>").html(cstr(s.label)).attr("value",s.value).prop("disabled",s.is_disabled).prop("selected",s.is_selected)).forEach(s=>s.appendTo(n.get(0))),n.get(0).selectedIndex=0,n.trigger("select-change"),n};(function(r){r.fn.add_options=function(e,i){return frappe.ui.form.add_options(this.get(0),e,i)},r.fn.set_working=function(){this.prop("disabled",!0)},r.fn.done_working=function(){this.prop("disabled",!1)};let t=r.fn.val;r.fn.val=function(){let e=t.apply(this,arguments);return arguments.length>0&&r(this).trigger("select-change"),e}})(jQuery);function sy(r,t){let e=null,i=null,n=!1,o=!1;if(!is_null(r)){let s=is_null(r.value),a=is_null(r.label);n=Boolean(r.disabled),o=Boolean(r.selected),s&&a&&typeof r!="object"?(e=r,i=__(r,null,t)):(e=s?"":r.value,i=a?__(e,null,t):__(r.label,null,t))}return{value:e,label:i,is_disabled:n,is_selected:o}}var ko=Gt(ln());frappe.ui.form.recent_link_validations={};var _a;frappe.ui.form.ControlLink=(_a=class extends frappe.ui.form.ControlData{make_input(){var t=this;$(`<div class="link-field ui-front" style="position: relative;">
			<input type="text" class="input-with-feedback form-control">
			<span class="link-btn">
				<a class="btn-open" tabIndex='-1' style="display: inline-block;" title="${__("Open Link")}">
					${frappe.utils.icon("arrow-right","xs")}
				</a>
			</span>
		</div>`).prependTo(this.input_area),this.$input_area=$(this.input_area),this.$input=this.$input_area.find("input"),this.$link=this.$input_area.find(".link-btn"),this.$link_open=this.$link.find(".btn-open"),this.set_input_attributes(),this.$input.on("focus",function(){t.$input.val()||t.$input.val("").trigger("input"),t.show_link_and_clear_buttons()}),this.$input.on("blur",function(){setTimeout(function(){t.$link.toggle(!1),t.hide_link_and_clear_buttons()},250)}),this.$input_area.on("mouseenter",()=>{this.show_link_and_clear_buttons()}),this.$input_area.on("mouseleave",()=>{this.$input.is(":focus")||this.hide_link_and_clear_buttons()}),this.$input.attr("data-target",this.df.options),this.input=this.$input.get(0),this.has_input=!0,this.translate_values=!0,this.setup_buttons(),this.setup_awesomeplete(),this.bind_change_event()}show_link_and_clear_buttons(){if(this.$input.val()&&this.get_options()){let t=this.get_options(),e=this.get_input_value();this.$link.toggle(!0),this.$link_open.attr("href",frappe.utils.get_form_link(t,e))}}hide_link_and_clear_buttons(){this.$link.toggle(!1)}get_options(){return this.df.options}get_reference_doctype(){return this.doctype?this.doctype:frappe.get_route&&frappe.get_route()[0]==="List"?frappe.get_route()[1]:null}setup_buttons(){this.only_input&&!this.with_link_btn&&this.$input_area.find(".link-btn").remove()}set_formatted_input(t){super.set_formatted_input(),t&&(this.title_value_map||(this.title_value_map={}),this.set_link_title(t))}get_translated(t){return this.is_translatable()?__(t):t}is_translatable(){var t;return(((t=frappe.boot)==null?void 0:t.translated_doctypes)||[]).includes(this.get_options())}is_title_link(){var t;return(((t=frappe.boot)==null?void 0:t.link_title_doctypes)||[]).includes(this.get_options())}async set_link_title(t){let e=this.get_options();if(!e||!this.is_title_link()){this.translate_and_set_input_value(t,t);return}let i=frappe.utils.get_link_title(e,t)||await frappe.utils.fetch_link_title(e,t);this.translate_and_set_input_value(i,t)}translate_and_set_input_value(t,e){let i=this.get_translated(t);this.title_value_map[i]=e,this.set_input_value(i)}parse_validate_and_set_in_model(t,e,i){return this.parse&&(t=this.parse(t,i)),i&&(this.label=this.get_translated(i),frappe.utils.add_link_title(this.df.options,t,i)),this.validate_and_set_in_model(t,e)}parse(t){return strip_html(t)}get_input_value(){var t;if(this.$input){let e=this.$input.val();return((t=this.title_value_map)==null?void 0:t[e])||e}return null}get_label_value(){return this.$input?this.$input.val():""}set_input_value(t){this.$input&&this.$input.val(t)}open_advanced_search(){var t=this.get_options();if(!!t)return new frappe.ui.form.LinkSelector({doctype:t,target:this,txt:this.get_input_value()}),!1}new_doc(){var t=this.get_options(),e=this;if(!t)return;let i=this.df;return this.frm&&this.frm.doctype!==this.df.parent&&(i=this.frm.get_docfield(this.doc.parentfield,this.df.fieldname)),i&&i.get_route_options_for_new_doc?frappe.route_options=i.get_route_options_for_new_doc(this):frappe.route_options={},frappe.route_options.name_field=this.get_label_value(),frappe._from_link=frappe.utils.deep_clone(this),frappe._from_link_scrollY=$(document).scrollTop(),frappe.ui.form.make_quick_entry(t,n=>e.set_value(n.name)),!1}setup_awesomeplete(){let t=this;this.$input.cache={},this.awesomplete=new ko.default(t.input,{tabSelect:!0,minChars:0,maxItems:99,autoFirst:!0,list:[],replace:function(e){this.input.value=t.get_translated(e.label||e.value)},data:function(e){return{label:t.get_translated(e.label||e.value),value:e.value}},filter:function(){return!0},item:function(e){let i=this.get_item(e.value);i.label||(i.label=i.value);let n=frappe.utils.escape_html(t.get_translated(i.label)),o=i.html||"<strong>"+n+"</strong>";return i.description&&(t.is_title_link()||i.value!==i.description)&&(o+='<br><span class="small">'+__(frappe.utils.escape_html(i.description))+"</span>"),$('<div role="option">').on("click",s=>{t.awesomplete.select(s.currentTarget,s.currentTarget),t.show_link_and_clear_buttons()}).data("item.autocomplete",i).prop("aria-selected","false").html(`<p title="${frappe.utils.escape_html(n)}">${o}</p>`).get(0)},sort:function(){return 0}}),this.custom_awesomplete_filter&&this.custom_awesomplete_filter(this.awesomplete),this.$input.on("input",frappe.utils.debounce(function(e){var s;var i=t.get_options();if(!!i){t.$input.cache[i]||(t.$input.cache[i]={});var n=e.target.value;t.$input.cache[i][n]!=null&&(t.awesomplete.list=t.$input.cache[i][n]);var o={txt:n,doctype:i,ignore_user_permissions:t.df.ignore_user_permissions,reference_doctype:t.get_reference_doctype()||"",page_length:cint((s=frappe.boot.sysdefaults)==null?void 0:s.link_field_results_limit)||10};t.set_custom_query(o),frappe.call({type:"POST",method:"frappe.desk.search.search_link",no_spinner:!0,args:o,callback:function(a){if(!window.Cypress&&!t.$input.is(":focus"))return;a.message=t.merge_duplicates(a.message);let l=t.df.filter_description?t.df.filter_description:o.filters?t.get_filter_description(o.filters):null;if(l&&a.message.push({html:`<span class="text-muted" style="line-height: 1.5">${l}</span>`,value:"",action:()=>{}}),!t.df.only_select){frappe.model.can_create(i)&&a.message.push({html:"<span class='link-option'><i class='fa fa-plus' style='margin-right: 5px;'></i> "+__("Create a new {0}",[__(t.get_options())])+"</span>",label:__("Create a new {0}",[__(t.get_options())]),value:"create_new__link_option",action:t.new_doc});let f=frappe.ui.form.ControlLink.link_options&&frappe.ui.form.ControlLink.link_options(t);f&&(a.message=a.message.concat(f)),locals&&locals.DocType&&a.message.push({html:"<span class='link-option'><i class='fa fa-search' style='margin-right: 5px;'></i> "+__("Advanced Search")+"</span>",label:__("Advanced Search"),value:"advanced_search__link_option",action:t.open_advanced_search})}t.$input.cache[i][n]=a.message,t.awesomplete.list=t.$input.cache[i][n],t.toggle_href(i),a.message.forEach(f=>{frappe.utils.add_link_title(i,f.value,f.label)})}})}},500)),this.$input.on("blur",function(){if(t.selected){t.selected=!1;return}let e=t.get_input_value(),i=t.get_label_value(),n=t.last_value||"",o=t.label||"";e!==n&&t.parse_validate_and_set_in_model(e,null,i)}),this.$input.on("awesomplete-open",()=>{this.autocomplete_open=!0,t.get_label_value()||t.$link.toggle(!1)}),this.$input.on("awesomplete-close",e=>{this.autocomplete_open=!1,t.get_label_value()||t.$link.toggle(!1)}),this.$input.on("awesomplete-select",function(e){var i=e.originalEvent,n=t.awesomplete.get_item(i.text.value);t.autocomplete_open=!1;let o=9;if(e.keyCode===o)return e.preventDefault(),t.awesomplete.close(),!1;n.action&&(n.value="",n.label="",n.action.apply(t)),t.df.remember_last_selected_value&&(frappe.boot.user.last_selected_values[t.df.options]=n.value),t.parse_validate_and_set_in_model(n.value,null,n.label)}),this.$input.on("awesomplete-selectcomplete",function(e){e.originalEvent.text.value.indexOf("__link_option")!==-1&&t.$input.val("")})}show_untranslated(){let t=this.get_input_value();this.is_translatable()&&this.set_input_value(t)}merge_duplicates(t){return t.reduce((e,i)=>{if(e.length===0)return[i];let n=e.find(o=>o.value===i.value);return n?(n.description+=`, ${i.description}`,[...e]):[...e,i]},[])}toggle_href(t){frappe.model.can_select(t)&&!frappe.model.can_read(t)?this.$input_area.find(".link-btn").addClass("hide"):this.$input_area.find(".link-btn").removeClass("hide")}get_filter_description(t){let e=this.get_options(),i=[],n=null;if(frappe.model.with_doctype(e,()=>{n=frappe.get_meta(e)}),Array.isArray(t))i=t;else for(let a in t){let l=t[a];Array.isArray(l)||(l=["=",l]),i.push([a,...l])}i=i.map(a=>a.length===3?[e,...a]:a);function o(a){let l=a[0],f=a[1],p=frappe.meta.get_docfield(l,f),y=p?p.label:frappe.model.unscrub(f);p&&p.fieldtype==="Check"&&(a[3]=a[3]?__("Yes"):__("No")),a[3]&&Array.isArray(a[3])&&a[3].length>5&&(a[3]=a[3].slice(0,5),a[3].push("..."));let h=a[3]==null||a[3]===""?__("empty"):String(__(a[3]));return[__(y).bold(),__(a[2]),h.bold()].join(" ")}let s=i.map(o).join(", ");return __("Filters applied for {0}",[s])}set_custom_query(t){let e=(a,l)=>{if(a)return!0;if(this.frm){let f=frappe.meta.get_docfield(this.frm.doctype,l);return!f||!["Link","Dynamic Link"].includes(f.fieldtype)}else return a!==void 0},i=a=>($.each(a,(l,f)=>{e(f,l)||delete a[l]}),a);if(this.df.link_filters&&!!this.df.link_filters.length&&this.apply_link_field_filters(),this.get_query||this.df.get_query){var n=this.get_query||this.df.get_query;if($.isPlainObject(n)){var o=null;n.filters?o=n.filters:n.query?t.query=n:o=n,o&&(o=i(o),$.extend(t,o),t.filters=o)}else if(typeof n=="string")t.query=n;else{var s=n(this.frm&&this.frm.doc||this.doc,this.doctype,this.docname);typeof s=="string"?t.query=s:$.isPlainObject(s)&&(s.filters&&i(s.filters),s.translate_values!==void 0&&(this.translate_values=s.translate_values),$.extend(t,s),t.filters=s.filters)}}this.df.filters&&(i(this.df.filters),t.filters||(t.filters={}),$.extend(t.filters,this.df.filters))}apply_link_field_filters(){let t=JSON.parse(this.df.link_filters),e=this.parse_filters(t);this.get_query=function(){return{filters:e}}}parse_filters(t){let e={};return t.forEach(i=>{var l;let[n,o,s,a]=i;if((l=a==null?void 0:a.startsWith)!=null&&l.call(a,"eval:")){a=a.split("eval:")[1];let f={doc:this.doc,parent:this.doc.parenttype?this.frm.doc:null,frappe};a=frappe.utils.eval(a,f)}e[o]=[s,a]}),e}validate(t){return this._validated||this.df.options=="[Select]"||this.df.ignore_link_validation?t:this.validate_link_and_fetch(t)}validate_link_and_fetch(t){let e=this.get_options();if(!e)return;let i=Object.values(this.fetch_map);if(!i.length&&this.df.__default_value===t)return t;let n=o=>{var a;let s="";for(let[l,f]of Object.entries(this.fetch_map))t&&(s=o[f]),(a=this.layout)!=null&&a.set_value?this.layout.set_value(l,s):this.frm&&frappe.model.set_value(this.df.parent,this.docname,l,s,this.df.fieldtype)};return t?frappe.xcall("frappe.client.validate_link",{doctype:e,docname:t,fields:i},"GET",{cache:!i.length}).then(o=>(this.frm&&!this.docname||!i.length||n(o),o.name)):(n({}),t)}fetch_map_for_quick_entry(){let t=this,e={};function i(o,s,a,l){l||(l="*"),t.layout.fetch_dict||(t.layout.fetch_dict={}),t.layout.fetch_dict.setDefault(l,{}).setDefault(o,{})[a]=s}function n(o){if((["Data","Read Only","Text","Small Text","Currency","Check","Text Editor","Attach Image","Code","Link","Float","Int","Date","Select","Duration","Time"].includes(o.fieldtype)||o.read_only==1||o.is_virtual==1)&&o.fetch_from&&o.fetch_from.indexOf(".")!=-1){var a=o.fetch_from.split(".");i(a[0],a[1],o.fieldname,o.parent)}}$.each(this.layout.fields,(o,s)=>n(s));for(let o of["*",this.df.parent])this.layout.fetch_dict||(this.layout.fetch_dict={}),this.layout.fetch_dict[o]&&this.layout.fetch_dict[o][this.df.fieldname]&&Object.assign(e,this.layout.fetch_dict[o][this.df.fieldname]);return e}get fetch_map(){let t={};if(!this.frm&&this.layout&&this.layout.fields)return this.fetch_map_for_quick_entry();if(!this.frm)return t;for(let e of["*",this.df.parent])this.frm.fetch_dict[e]&&this.frm.fetch_dict[e][this.df.fieldname]&&Object.assign(t,this.frm.fetch_dict[e][this.df.fieldname]);return t}},at(_a,"trigger_change_on_input_event",!1),_a);ko.default&&(ko.default.prototype.get_item=function(r){return this._list.find(function(t){return t.value===r})});frappe.ui.form.ControlDynamicLink=class extends frappe.ui.form.ControlLink{get_options(){let t="";if(this.df.get_options)t=this.df.get_options(this);else if(this.docname==null&&cur_dialog)t=cur_dialog.get_value(this.df.options);else if(cur_frm)t=frappe.model.get_value(this.df.parent,this.docname,this.df.options);else{let e=`input[data-fieldname="${this.df.options}"]`,i=null;cur_list&&(i=cur_list.filter_area.standard_filters_wrapper.find(e)),cur_page&&(i=$(cur_page.page).find(e)),i&&(t=i.val())}return frappe.model.is_single(t)&&frappe.throw(__("{0} is not a valid DocType for Dynamic Link",[t.bold()])),t}};var Eo;frappe.ui.form.ControlText=(Eo=class extends frappe.ui.form.ControlData{make_wrapper(){super.make_wrapper();let t=this.$wrapper.find(".like-disabled-input");t.addClass("for-description"),t.css("white-space-collapse","preserve"),this.df.max_height&&t.css({"max-height":this.df.max_height,overflow:"auto"})}make_input(){super.make_input(),this.$input.css({height:"300px"}),this.df.max_height&&this.$input.css({"max-height":this.df.max_height})}},at(Eo,"html_element","textarea"),at(Eo,"horizontal",!1),Eo);frappe.ui.form.ControlLongText=frappe.ui.form.ControlText;frappe.ui.form.ControlSmallText=class extends frappe.ui.form.ControlText{make_input(){super.make_input(),this.$input.css({height:"150px"})}};frappe.ui.form.ControlCode=class extends frappe.ui.form.ControlText{make_input(){this.editor||this.load_lib().then(()=>this.make_ace_editor())}refresh(){super.refresh(),this.df.fieldtype==="Code"&&this.setup_copy_button()}setup_copy_button(){var t;if(this.get_status()==="Write"){(t=this.copy_button)==null||t.remove(),this.copy_button=null;return}this.copy_button||(this.copy_button=$(`<button
				class="btn icon-btn"
				style="position: absolute; top: 32px; right: 5px;"
				onmouseover="this.classList.add('btn-default')"
				onmouseout="this.classList.remove('btn-default')"
				title="${__("Copy to Clipboard")}"
			>
				<svg class="es-icon es-line  icon-sm" style="" aria-hidden="true">
					<use class="" href="#es-line-copy-light"></use>
				</svg>
			</button>`),this.copy_button.on("click",()=>{frappe.utils.copy_to_clipboard(this.get_model_value()||this.get_value())}),this.copy_button.appendTo(this.$wrapper))}make_ace_editor(){if(this.editor)return;this.ace_editor_target=$('<div class="ace-editor-target"></div>').appendTo(this.input_area),this.ace_editor_target.addClass("border rounded"),this.ace_editor_target.css("height",300),this.df.max_height&&this.ace_editor_target.css("max-height",this.df.max_height);let t=window.ace;this.editor=t.edit(this.ace_editor_target.get(0)),this.df.max_lines||this.df.min_lines||this.df.max_height?(this.df.max_lines&&this.editor.setOption("maxLines",this.df.max_lines),this.df.min_lines&&this.editor.setOption("minLines",this.df.min_lines)):(this.expanded=!1,this.$expand_button=$(`<button class="btn btn-xs btn-default mt-2">${this.get_button_label()}</button>`).click(()=>{this.expanded=!this.expanded,this.refresh_height(),this.toggle_label()}).appendTo(this.$input_wrapper)),this.disabled&&(this.editor.setReadOnly(!0),$(this.ace_editor_target).css("pointer-events","none")),this.editor.setTheme("ace/theme/tomorrow"),this.editor.setOption("showPrintMargin",!1),this.editor.setOption("wrap",this.df.wrap),this.set_language(),this.is_setting_content=!1,this.editor.session.on("change",()=>{this.is_setting_content||e()});let e=frappe.utils.debounce(()=>{let i=this.get_input_value();this.parse_validate_and_set_in_model(i)},300);Object.defineProperty(this.df,"autocompletions",{configurable:!0,get(){return this._autocompletions||[]},set:i=>{let n=i;typeof n!="function"&&(n=()=>i),this._autocompletions||(this._autocompletions=[]),this._autocompletions.push(n),this.setup_autocompletion()}})}setup_autocompletion(t){if(this._autocompletion_setup)return;let e=window.ace,i=(n,o,s,a,l)=>{if(a.length===0){l(null,[]);return}let p=(()=>{let y=this._autocompletions||[],h=[];for(let d of y){let u=d({editor:n,session:o,pos:s,prefix:a});h.push(...u)}return h})();p.length&&l(null,p.map(y=>(typeof y=="string"&&(y={value:y}),{name:"frappe",value:y.value,score:y.score,meta:y.meta,caption:y.caption})))};e.config.loadModule("ace/ext/language_tools",n=>{this.editor.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),n.addCompleter({getCompletions:t||i})}),this._autocompletion_setup=!0}refresh_height(){this.ace_editor_target.css("height",this.expanded?600:300),this.editor.resize()}toggle_label(){this.$expand_button&&this.$expand_button.text(this.get_button_label())}get_button_label(){return this.expanded?__("Collapse",null,"Shrink code field."):__("Expand",null,"Enlarge code field.")}set_language(){let t={Javascript:"ace/mode/javascript",JS:"ace/mode/javascript",Python:"ace/mode/python",Py:"ace/mode/python",PythonExpression:"ace/mode/python",HTML:"ace/mode/html",CSS:"ace/mode/css",Markdown:"ace/mode/markdown",SCSS:"ace/mode/scss",JSON:"ace/mode/json",Golang:"ace/mode/golang",Go:"ace/mode/golang",Jinja:"ace/mode/django",SQL:"ace/mode/sql"},e=this.df.options,i=Object.keys(t);e&&!i.includes(e)&&console.warn(`Invalid language option provided for field "${this.df.label}". Valid options are ${i.join(", ")}.`);let n=t[e]||"";this.editor.session.setMode(n),this.editor.setKeyboardHandler(`ace/keyboard/${frappe.boot.user.code_editor_type||"vscode"}`)}parse(t){return t==null&&(t=""),t}set_formatted_input(t){return this.load_lib().then(()=>{!this.editor||(t||(t=""),t!==this.get_input_value()&&(this.is_setting_content=!0,this.editor.session.setValue(t),this.is_setting_content=!1))})}get_input_value(){return this.editor?this.editor.session.getValue():""}set_focus(){var t;(t=this.editor)==null||t.focus()}load_lib(){return this.library_loaded?this.library_loaded:(frappe.boot.developer_mode?this.root_lib_path="/assets/frappe/node_modules/ace-builds/src-noconflict/":this.root_lib_path="/assets/frappe/node_modules/ace-builds/src-min-noconflict/",this.library_loaded=new Promise(t=>{frappe.require(this.root_lib_path+"ace.js",()=>{window.ace.config.set("basePath",this.root_lib_path),t()})}),this.library_loaded)}};var ay=typeof global=="object"&&global&&global.Object===Object&&global,Oo=ay;var ly=typeof self=="object"&&self&&self.Object===Object&&self,uy=Oo||ly||Function("return this")(),Qt=uy;var cy=Qt.Symbol,Le=cy;var Pc=Object.prototype,fy=Pc.hasOwnProperty,hy=Pc.toString,un=Le?Le.toStringTag:void 0;function dy(r){var t=fy.call(r,un),e=r[un];try{r[un]=void 0;var i=!0}catch(o){}var n=hy.call(r);return i&&(t?r[un]=e:delete r[un]),n}var jc=dy;var py=Object.prototype,my=py.toString;function gy(r){return my.call(r)}var Rc=gy;var _y="[object Null]",yy="[object Undefined]",Ic=Le?Le.toStringTag:void 0;function vy(r){return r==null?r===void 0?yy:_y:Ic&&Ic in Object(r)?jc(r):Rc(r)}var $e=vy;function by(r){return r!=null&&typeof r=="object"}var ne=by;var wy=Array.isArray,Pe=wy;function xy(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var oe=xy;function ky(r){return r}var Ao=ky;var Ey="[object AsyncFunction]",Oy="[object Function]",Ay="[object GeneratorFunction]",Sy="[object Proxy]";function Ty(r){if(!oe(r))return!1;var t=$e(r);return t==Oy||t==Ay||t==Ey||t==Sy}var si=Ty;var Cy=Qt["__core-js_shared__"],So=Cy;var qc=function(){var r=/[^.]+$/.exec(So&&So.keys&&So.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Ny(r){return!!qc&&qc in r}var Dc=Ny;var Ly=Function.prototype,Py=Ly.toString;function jy(r){if(r!=null){try{return Py.call(r)}catch(t){}try{return r+""}catch(t){}}return""}var Je=jy;var Ry=/[\\^$.*+?()[\]{}|]/g,Iy=/^\[object .+?Constructor\]$/,qy=Function.prototype,Dy=Object.prototype,My=qy.toString,$y=Dy.hasOwnProperty,By=RegExp("^"+My.call($y).replace(Ry,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fy(r){if(!oe(r)||Dc(r))return!1;var t=si(r)?By:Iy;return t.test(Je(r))}var Mc=Fy;function Uy(r,t){return r==null?void 0:r[t]}var $c=Uy;function Hy(r,t){var e=$c(r,t);return Mc(e)?e:void 0}var pe=Hy;var zy=pe(Qt,"WeakMap"),To=zy;var Bc=Object.create,Vy=function(){function r(){}return function(t){if(!oe(t))return{};if(Bc)return Bc(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Fc=Vy;function Gy(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var Uc=Gy;function Ky(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}var Co=Ky;var Wy=800,Yy=16,Jy=Date.now;function Zy(r){var t=0,e=0;return function(){var i=Jy(),n=Yy-(i-e);if(e=i,n>0){if(++t>=Wy)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var Hc=Zy;function Xy(r){return function(){return r}}var zc=Xy;var Qy=function(){try{var r=pe(Object,"defineProperty");return r({},"",{}),r}catch(t){}}(),ai=Qy;var tv=ai?function(r,t){return ai(r,"toString",{configurable:!0,enumerable:!1,value:zc(t),writable:!0})}:Ao,Vc=tv;var ev=Hc(Vc),Gc=ev;function rv(r,t){for(var e=-1,i=r==null?0:r.length;++e<i&&t(r[e],e,r)!==!1;);return r}var Kc=rv;var iv=9007199254740991,nv=/^(?:0|[1-9]\d*)$/;function ov(r,t){var e=typeof r;return t=t==null?iv:t,!!t&&(e=="number"||e!="symbol"&&nv.test(r))&&r>-1&&r%1==0&&r<t}var No=ov;function sv(r,t,e){t=="__proto__"&&ai?ai(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var li=sv;function av(r,t){return r===t||r!==r&&t!==t}var Ue=av;var lv=Object.prototype,uv=lv.hasOwnProperty;function cv(r,t,e){var i=r[t];(!(uv.call(r,t)&&Ue(i,e))||e===void 0&&!(t in r))&&li(r,t,e)}var Lo=cv;function fv(r,t,e,i){var n=!e;e||(e={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=i?i(e[a],r[a],a,e,r):void 0;l===void 0&&(l=r[a]),n?li(e,a,l):Lo(e,a,l)}return e}var He=fv;var Wc=Math.max;function hv(r,t,e){return t=Wc(t===void 0?r.length-1:t,0),function(){for(var i=arguments,n=-1,o=Wc(i.length-t,0),s=Array(o);++n<o;)s[n]=i[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=i[n];return a[t]=e(s),Uc(r,this,a)}}var Yc=hv;function dv(r,t){return Gc(Yc(r,t,Ao),r+"")}var Jc=dv;var pv=9007199254740991;function mv(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=pv}var Po=mv;function gv(r){return r!=null&&Po(r.length)&&!si(r)}var dr=gv;function _v(r,t,e){if(!oe(e))return!1;var i=typeof t;return(i=="number"?dr(e)&&No(t,e.length):i=="string"&&t in e)?Ue(e[t],r):!1}var Zc=_v;function yv(r){return Jc(function(t,e){var i=-1,n=e.length,o=n>1?e[n-1]:void 0,s=n>2?e[2]:void 0;for(o=r.length>3&&typeof o=="function"?(n--,o):void 0,s&&Zc(e[0],e[1],s)&&(o=n<3?void 0:o,n=1),t=Object(t);++i<n;){var a=e[i];a&&r(t,a,i,o)}return t})}var Xc=yv;var vv=Object.prototype;function bv(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||vv;return r===e}var ui=bv;function wv(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}var Qc=wv;var xv="[object Arguments]";function kv(r){return ne(r)&&$e(r)==xv}var ya=kv;var tf=Object.prototype,Ev=tf.hasOwnProperty,Ov=tf.propertyIsEnumerable,Av=ya(function(){return arguments}())?ya:function(r){return ne(r)&&Ev.call(r,"callee")&&!Ov.call(r,"callee")},cn=Av;function Sv(){return!1}var ef=Sv;var of=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rf=of&&typeof module=="object"&&module&&!module.nodeType&&module,Tv=rf&&rf.exports===of,nf=Tv?Qt.Buffer:void 0,Cv=nf?nf.isBuffer:void 0,Nv=Cv||ef,Ze=Nv;var Lv="[object Arguments]",Pv="[object Array]",jv="[object Boolean]",Rv="[object Date]",Iv="[object Error]",qv="[object Function]",Dv="[object Map]",Mv="[object Number]",$v="[object Object]",Bv="[object RegExp]",Fv="[object Set]",Uv="[object String]",Hv="[object WeakMap]",zv="[object ArrayBuffer]",Vv="[object DataView]",Gv="[object Float32Array]",Kv="[object Float64Array]",Wv="[object Int8Array]",Yv="[object Int16Array]",Jv="[object Int32Array]",Zv="[object Uint8Array]",Xv="[object Uint8ClampedArray]",Qv="[object Uint16Array]",t0="[object Uint32Array]",$t={};$t[Gv]=$t[Kv]=$t[Wv]=$t[Yv]=$t[Jv]=$t[Zv]=$t[Xv]=$t[Qv]=$t[t0]=!0;$t[Lv]=$t[Pv]=$t[zv]=$t[jv]=$t[Vv]=$t[Rv]=$t[Iv]=$t[qv]=$t[Dv]=$t[Mv]=$t[$v]=$t[Bv]=$t[Fv]=$t[Uv]=$t[Hv]=!1;function e0(r){return ne(r)&&Po(r.length)&&!!$t[$e(r)]}var sf=e0;function r0(r){return function(t){return r(t)}}var ci=r0;var af=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fn=af&&typeof module=="object"&&module&&!module.nodeType&&module,i0=fn&&fn.exports===af,va=i0&&Oo.process,n0=function(){try{var r=fn&&fn.require&&fn.require("util").types;return r||va&&va.binding&&va.binding("util")}catch(t){}}(),Xe=n0;var lf=Xe&&Xe.isTypedArray,o0=lf?ci(lf):sf,fi=o0;var s0=Object.prototype,a0=s0.hasOwnProperty;function l0(r,t){var e=Pe(r),i=!e&&cn(r),n=!e&&!i&&Ze(r),o=!e&&!i&&!n&&fi(r),s=e||i||n||o,a=s?Qc(r.length,String):[],l=a.length;for(var f in r)(t||a0.call(r,f))&&!(s&&(f=="length"||n&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||No(f,l)))&&a.push(f);return a}var jo=l0;function u0(r,t){return function(e){return r(t(e))}}var Ro=u0;var c0=Ro(Object.keys,Object),uf=c0;var f0=Object.prototype,h0=f0.hasOwnProperty;function d0(r){if(!ui(r))return uf(r);var t=[];for(var e in Object(r))h0.call(r,e)&&e!="constructor"&&t.push(e);return t}var cf=d0;function p0(r){return dr(r)?jo(r):cf(r)}var hi=p0;function m0(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var ff=m0;var g0=Object.prototype,_0=g0.hasOwnProperty;function y0(r){if(!oe(r))return ff(r);var t=ui(r),e=[];for(var i in r)i=="constructor"&&(t||!_0.call(r,i))||e.push(i);return e}var hf=y0;function v0(r){return dr(r)?jo(r,!0):hf(r)}var ze=v0;var b0=pe(Object,"create"),Qe=b0;function w0(){this.__data__=Qe?Qe(null):{},this.size=0}var df=w0;function x0(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var pf=x0;var k0="__lodash_hash_undefined__",E0=Object.prototype,O0=E0.hasOwnProperty;function A0(r){var t=this.__data__;if(Qe){var e=t[r];return e===k0?void 0:e}return O0.call(t,r)?t[r]:void 0}var mf=A0;var S0=Object.prototype,T0=S0.hasOwnProperty;function C0(r){var t=this.__data__;return Qe?t[r]!==void 0:T0.call(t,r)}var gf=C0;var N0="__lodash_hash_undefined__";function L0(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Qe&&t===void 0?N0:t,this}var _f=L0;function di(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}di.prototype.clear=df;di.prototype.delete=pf;di.prototype.get=mf;di.prototype.has=gf;di.prototype.set=_f;var ba=di;function P0(){this.__data__=[],this.size=0}var yf=P0;function j0(r,t){for(var e=r.length;e--;)if(Ue(r[e][0],t))return e;return-1}var pr=j0;var R0=Array.prototype,I0=R0.splice;function q0(r){var t=this.__data__,e=pr(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():I0.call(t,e,1),--this.size,!0}var vf=q0;function D0(r){var t=this.__data__,e=pr(t,r);return e<0?void 0:t[e][1]}var bf=D0;function M0(r){return pr(this.__data__,r)>-1}var wf=M0;function $0(r,t){var e=this.__data__,i=pr(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}var xf=$0;function pi(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}pi.prototype.clear=yf;pi.prototype.delete=vf;pi.prototype.get=bf;pi.prototype.has=wf;pi.prototype.set=xf;var mr=pi;var B0=pe(Qt,"Map"),gr=B0;function F0(){this.size=0,this.__data__={hash:new ba,map:new(gr||mr),string:new ba}}var kf=F0;function U0(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var Ef=U0;function H0(r,t){var e=r.__data__;return Ef(t)?e[typeof t=="string"?"string":"hash"]:e.map}var _r=H0;function z0(r){var t=_r(this,r).delete(r);return this.size-=t?1:0,t}var Of=z0;function V0(r){return _r(this,r).get(r)}var Af=V0;function G0(r){return _r(this,r).has(r)}var Sf=G0;function K0(r,t){var e=_r(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}var Tf=K0;function mi(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}mi.prototype.clear=kf;mi.prototype.delete=Of;mi.prototype.get=Af;mi.prototype.has=Sf;mi.prototype.set=Tf;var Io=mi;function W0(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}var qo=W0;var Y0=Ro(Object.getPrototypeOf,Object),gi=Y0;var J0="[object Object]",Z0=Function.prototype,X0=Object.prototype,Cf=Z0.toString,Q0=X0.hasOwnProperty,t1=Cf.call(Object);function e1(r){if(!ne(r)||$e(r)!=J0)return!1;var t=gi(r);if(t===null)return!0;var e=Q0.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Cf.call(e)==t1}var Nf=e1;function r1(){this.__data__=new mr,this.size=0}var Lf=r1;function i1(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var Pf=i1;function n1(r){return this.__data__.get(r)}var jf=n1;function o1(r){return this.__data__.has(r)}var Rf=o1;var s1=200;function a1(r,t){var e=this.__data__;if(e instanceof mr){var i=e.__data__;if(!gr||i.length<s1-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new Io(i)}return e.set(r,t),this.size=e.size,this}var If=a1;function _i(r){var t=this.__data__=new mr(r);this.size=t.size}_i.prototype.clear=Lf;_i.prototype.delete=Pf;_i.prototype.get=jf;_i.prototype.has=Rf;_i.prototype.set=If;var yr=_i;function l1(r,t){return r&&He(t,hi(t),r)}var qf=l1;function u1(r,t){return r&&He(t,ze(t),r)}var Df=u1;var Ff=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mf=Ff&&typeof module=="object"&&module&&!module.nodeType&&module,c1=Mf&&Mf.exports===Ff,$f=c1?Qt.Buffer:void 0,Bf=$f?$f.allocUnsafe:void 0;function f1(r,t){if(t)return r.slice();var e=r.length,i=Bf?Bf(e):new r.constructor(e);return r.copy(i),i}var Do=f1;function h1(r,t){for(var e=-1,i=r==null?0:r.length,n=0,o=[];++e<i;){var s=r[e];t(s,e,r)&&(o[n++]=s)}return o}var Uf=h1;function d1(){return[]}var Mo=d1;var p1=Object.prototype,m1=p1.propertyIsEnumerable,Hf=Object.getOwnPropertySymbols,g1=Hf?function(r){return r==null?[]:(r=Object(r),Uf(Hf(r),function(t){return m1.call(r,t)}))}:Mo,yi=g1;function _1(r,t){return He(r,yi(r),t)}var zf=_1;var y1=Object.getOwnPropertySymbols,v1=y1?function(r){for(var t=[];r;)qo(t,yi(r)),r=gi(r);return t}:Mo,$o=v1;function b1(r,t){return He(r,$o(r),t)}var Vf=b1;function w1(r,t,e){var i=t(r);return Pe(r)?i:qo(i,e(r))}var Bo=w1;function x1(r){return Bo(r,hi,yi)}var hn=x1;function k1(r){return Bo(r,ze,$o)}var Gf=k1;var E1=pe(Qt,"DataView"),Fo=E1;var O1=pe(Qt,"Promise"),Uo=O1;var A1=pe(Qt,"Set"),Ho=A1;var Kf="[object Map]",S1="[object Object]",Wf="[object Promise]",Yf="[object Set]",Jf="[object WeakMap]",Zf="[object DataView]",T1=Je(Fo),C1=Je(gr),N1=Je(Uo),L1=Je(Ho),P1=Je(To),Br=$e;(Fo&&Br(new Fo(new ArrayBuffer(1)))!=Zf||gr&&Br(new gr)!=Kf||Uo&&Br(Uo.resolve())!=Wf||Ho&&Br(new Ho)!=Yf||To&&Br(new To)!=Jf)&&(Br=function(r){var t=$e(r),e=t==S1?r.constructor:void 0,i=e?Je(e):"";if(i)switch(i){case T1:return Zf;case C1:return Kf;case N1:return Wf;case L1:return Yf;case P1:return Jf}return t});var tr=Br;var j1=Object.prototype,R1=j1.hasOwnProperty;function I1(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&R1.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Xf=I1;var q1=Qt.Uint8Array,vi=q1;function D1(r){var t=new r.constructor(r.byteLength);return new vi(t).set(new vi(r)),t}var bi=D1;function M1(r,t){var e=t?bi(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var Qf=M1;var $1=/\w*$/;function B1(r){var t=new r.constructor(r.source,$1.exec(r));return t.lastIndex=r.lastIndex,t}var th=B1;var eh=Le?Le.prototype:void 0,rh=eh?eh.valueOf:void 0;function F1(r){return rh?Object(rh.call(r)):{}}var ih=F1;function U1(r,t){var e=t?bi(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var zo=U1;var H1="[object Boolean]",z1="[object Date]",V1="[object Map]",G1="[object Number]",K1="[object RegExp]",W1="[object Set]",Y1="[object String]",J1="[object Symbol]",Z1="[object ArrayBuffer]",X1="[object DataView]",Q1="[object Float32Array]",tb="[object Float64Array]",eb="[object Int8Array]",rb="[object Int16Array]",ib="[object Int32Array]",nb="[object Uint8Array]",ob="[object Uint8ClampedArray]",sb="[object Uint16Array]",ab="[object Uint32Array]";function lb(r,t,e){var i=r.constructor;switch(t){case Z1:return bi(r);case H1:case z1:return new i(+r);case X1:return Qf(r,e);case Q1:case tb:case eb:case rb:case ib:case nb:case ob:case sb:case ab:return zo(r,e);case V1:return new i;case G1:case Y1:return new i(r);case K1:return th(r);case W1:return new i;case J1:return ih(r)}}var nh=lb;function ub(r){return typeof r.constructor=="function"&&!ui(r)?Fc(gi(r)):{}}var Vo=ub;var cb="[object Map]";function fb(r){return ne(r)&&tr(r)==cb}var oh=fb;var sh=Xe&&Xe.isMap,hb=sh?ci(sh):oh,ah=hb;var db="[object Set]";function pb(r){return ne(r)&&tr(r)==db}var lh=pb;var uh=Xe&&Xe.isSet,mb=uh?ci(uh):lh,ch=mb;var gb=1,_b=2,yb=4,fh="[object Arguments]",vb="[object Array]",bb="[object Boolean]",wb="[object Date]",xb="[object Error]",hh="[object Function]",kb="[object GeneratorFunction]",Eb="[object Map]",Ob="[object Number]",dh="[object Object]",Ab="[object RegExp]",Sb="[object Set]",Tb="[object String]",Cb="[object Symbol]",Nb="[object WeakMap]",Lb="[object ArrayBuffer]",Pb="[object DataView]",jb="[object Float32Array]",Rb="[object Float64Array]",Ib="[object Int8Array]",qb="[object Int16Array]",Db="[object Int32Array]",Mb="[object Uint8Array]",$b="[object Uint8ClampedArray]",Bb="[object Uint16Array]",Fb="[object Uint32Array]",Dt={};Dt[fh]=Dt[vb]=Dt[Lb]=Dt[Pb]=Dt[bb]=Dt[wb]=Dt[jb]=Dt[Rb]=Dt[Ib]=Dt[qb]=Dt[Db]=Dt[Eb]=Dt[Ob]=Dt[dh]=Dt[Ab]=Dt[Sb]=Dt[Tb]=Dt[Cb]=Dt[Mb]=Dt[$b]=Dt[Bb]=Dt[Fb]=!0;Dt[xb]=Dt[hh]=Dt[Nb]=!1;function Go(r,t,e,i,n,o){var s,a=t&gb,l=t&_b,f=t&yb;if(e&&(s=n?e(r,i,n,o):e(r)),s!==void 0)return s;if(!oe(r))return r;var p=Pe(r);if(p){if(s=Xf(r),!a)return Co(r,s)}else{var y=tr(r),h=y==hh||y==kb;if(Ze(r))return Do(r,a);if(y==dh||y==fh||h&&!n){if(s=l||h?{}:Vo(r),!a)return l?Vf(r,Df(s,r)):zf(r,qf(s,r))}else{if(!Dt[y])return n?r:{};s=nh(r,y,a)}}o||(o=new yr);var d=o.get(r);if(d)return d;o.set(r,s),ch(r)?r.forEach(function(m){s.add(Go(m,t,e,m,r,o))}):ah(r)&&r.forEach(function(m,_){s.set(_,Go(m,t,e,_,r,o))});var u=f?l?Gf:hn:l?ze:hi,c=p?void 0:u(r);return Kc(c||r,function(m,_){c&&(_=m,m=r[_]),Lo(s,_,Go(m,t,e,_,r,o))}),s}var ph=Go;var Ub=1,Hb=4;function zb(r){return ph(r,Ub|Hb)}var Ve=zb;var Vb="__lodash_hash_undefined__";function Gb(r){return this.__data__.set(r,Vb),this}var mh=Gb;function Kb(r){return this.__data__.has(r)}var gh=Kb;function Ko(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Io;++t<e;)this.add(r[t])}Ko.prototype.add=Ko.prototype.push=mh;Ko.prototype.has=gh;var _h=Ko;function Wb(r,t){for(var e=-1,i=r==null?0:r.length;++e<i;)if(t(r[e],e,r))return!0;return!1}var yh=Wb;function Yb(r,t){return r.has(t)}var vh=Yb;var Jb=1,Zb=2;function Xb(r,t,e,i,n,o){var s=e&Jb,a=r.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var f=o.get(r),p=o.get(t);if(f&&p)return f==t&&p==r;var y=-1,h=!0,d=e&Zb?new _h:void 0;for(o.set(r,t),o.set(t,r);++y<a;){var u=r[y],c=t[y];if(i)var m=s?i(c,u,y,t,r,o):i(u,c,y,r,t,o);if(m!==void 0){if(m)continue;h=!1;break}if(d){if(!yh(t,function(_,g){if(!vh(d,g)&&(u===_||n(u,_,e,i,o)))return d.push(g)})){h=!1;break}}else if(!(u===c||n(u,c,e,i,o))){h=!1;break}}return o.delete(r),o.delete(t),h}var Wo=Xb;function Qb(r){var t=-1,e=Array(r.size);return r.forEach(function(i,n){e[++t]=[n,i]}),e}var bh=Qb;function tw(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var wh=tw;var ew=1,rw=2,iw="[object Boolean]",nw="[object Date]",ow="[object Error]",sw="[object Map]",aw="[object Number]",lw="[object RegExp]",uw="[object Set]",cw="[object String]",fw="[object Symbol]",hw="[object ArrayBuffer]",dw="[object DataView]",xh=Le?Le.prototype:void 0,wa=xh?xh.valueOf:void 0;function pw(r,t,e,i,n,o,s){switch(e){case dw:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case hw:return!(r.byteLength!=t.byteLength||!o(new vi(r),new vi(t)));case iw:case nw:case aw:return Ue(+r,+t);case ow:return r.name==t.name&&r.message==t.message;case lw:case cw:return r==t+"";case sw:var a=bh;case uw:var l=i&ew;if(a||(a=wh),r.size!=t.size&&!l)return!1;var f=s.get(r);if(f)return f==t;i|=rw,s.set(r,t);var p=Wo(a(r),a(t),i,n,o,s);return s.delete(r),p;case fw:if(wa)return wa.call(r)==wa.call(t)}return!1}var kh=pw;var mw=1,gw=Object.prototype,_w=gw.hasOwnProperty;function yw(r,t,e,i,n,o){var s=e&mw,a=hn(r),l=a.length,f=hn(t),p=f.length;if(l!=p&&!s)return!1;for(var y=l;y--;){var h=a[y];if(!(s?h in t:_w.call(t,h)))return!1}var d=o.get(r),u=o.get(t);if(d&&u)return d==t&&u==r;var c=!0;o.set(r,t),o.set(t,r);for(var m=s;++y<l;){h=a[y];var _=r[h],g=t[h];if(i)var v=s?i(g,_,h,t,r,o):i(_,g,h,r,t,o);if(!(v===void 0?_===g||n(_,g,e,i,o):v)){c=!1;break}m||(m=h=="constructor")}if(c&&!m){var w=r.constructor,x=t.constructor;w!=x&&"constructor"in r&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(c=!1)}return o.delete(r),o.delete(t),c}var Eh=yw;var vw=1,Oh="[object Arguments]",Ah="[object Array]",Yo="[object Object]",bw=Object.prototype,Sh=bw.hasOwnProperty;function ww(r,t,e,i,n,o){var s=Pe(r),a=Pe(t),l=s?Ah:tr(r),f=a?Ah:tr(t);l=l==Oh?Yo:l,f=f==Oh?Yo:f;var p=l==Yo,y=f==Yo,h=l==f;if(h&&Ze(r)){if(!Ze(t))return!1;s=!0,p=!1}if(h&&!p)return o||(o=new yr),s||fi(r)?Wo(r,t,e,i,n,o):kh(r,t,l,e,i,n,o);if(!(e&vw)){var d=p&&Sh.call(r,"__wrapped__"),u=y&&Sh.call(t,"__wrapped__");if(d||u){var c=d?r.value():r,m=u?t.value():t;return o||(o=new yr),n(c,m,e,i,o)}}return h?(o||(o=new yr),Eh(r,t,e,i,n,o)):!1}var Th=ww;function Ch(r,t,e,i,n){return r===t?!0:r==null||t==null||!ne(r)&&!ne(t)?r!==r&&t!==t:Th(r,t,e,i,Ch,n)}var Nh=Ch;function xw(r){return function(t,e,i){for(var n=-1,o=Object(t),s=i(t),a=s.length;a--;){var l=s[r?a:++n];if(e(o[l],l,o)===!1)break}return t}}var Lh=xw;var kw=Lh(),Ph=kw;function Ew(r,t,e){(e!==void 0&&!Ue(r[t],e)||e===void 0&&!(t in r))&&li(r,t,e)}var dn=Ew;function Ow(r){return ne(r)&&dr(r)}var jh=Ow;function Aw(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}var pn=Aw;function Sw(r){return He(r,ze(r))}var Rh=Sw;function Tw(r,t,e,i,n,o,s){var a=pn(r,e),l=pn(t,e),f=s.get(l);if(f){dn(r,e,f);return}var p=o?o(a,l,e+"",r,t,s):void 0,y=p===void 0;if(y){var h=Pe(l),d=!h&&Ze(l),u=!h&&!d&&fi(l);p=l,h||d||u?Pe(a)?p=a:jh(a)?p=Co(a):d?(y=!1,p=Do(l,!0)):u?(y=!1,p=zo(l,!0)):p=[]:Nf(l)||cn(l)?(p=a,cn(a)?p=Rh(a):(!oe(a)||si(a))&&(p=Vo(l))):y=!1}y&&(s.set(l,p),n(p,l,i,o,s),s.delete(l)),dn(r,e,p)}var Ih=Tw;function qh(r,t,e,i,n){r!==t&&Ph(t,function(o,s){if(n||(n=new yr),oe(o))Ih(r,t,s,e,qh,i,n);else{var a=i?i(pn(r,s),o,s+"",r,t,n):void 0;a===void 0&&(a=o),dn(r,s,a)}},ze)}var Dh=qh;function Cw(r,t){return Nh(r,t)}var Fr=Cw;var Nw=Xc(function(r,t,e){Dh(r,t,e)}),me=Nw;var _n={};ry(_n,{Attributor:()=>ce,AttributorStore:()=>mn,BlockBlot:()=>Ur,ClassAttributor:()=>te,ContainerBlot:()=>Oi,EmbedBlot:()=>Ht,InlineBlot:()=>Jo,LeafBlot:()=>ee,ParentBlot:()=>ge,Registry:()=>wr,Scope:()=>yt,ScrollBlot:()=>gn,StyleAttributor:()=>_e,TextBlot:()=>Ai});var yt=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(yt||{}),ce=class{constructor(t,e,i={}){this.attrName=t,this.keyName=e;let n=yt.TYPE&yt.ATTRIBUTE;this.scope=i.scope!=null?i.scope&yt.LEVEL|n:yt.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){let e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}},br=class extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}},Bh=class ka{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch(n){return null}return this.find(i,e)}return null}create(t,e,i){let n=this.query(e);if(n==null)throw new br(`Unable to create ${e} blot`);let o=n,s=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(i),a=new o(t,s,i);return ka.blots.set(a.domNode,a),a}find(t,e=!1){return ka.find(t,e)}query(t,e=yt.ANY){let i;return typeof t=="string"?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:typeof t=="number"?t&yt.LEVEL&yt.BLOCK?i=this.types.block:t&yt.LEVEL&yt.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(n=>(i=this.classes[n],!!i)),i=i||this.tags[t.tagName]),i==null?null:"scope"in i&&e&yt.LEVEL&i.scope&&e&yt.TYPE&i.scope?i:null}register(...t){return t.map(e=>{let i="blotName"in e,n="attrName"in e;if(!i&&!n)throw new br("Invalid definition");if(i&&e.blotName==="abstract")throw new br("Cannot register abstract class");let o=i?e.blotName:n?e.attrName:void 0;return this.types[o]=e,n?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):i&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(s=>s.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(s=>{(this.tags[s]==null||e.className==null)&&(this.tags[s]=e)}))),e})}};Bh.blots=new WeakMap;var wr=Bh;function Mh(r,t){return(r.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}var Ea=class extends ce{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Mh(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){let e=(Mh(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}},te=Ea;function xa(r){let t=r.split("-"),e=t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return t[0]+e}var Oa=class extends ce{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[xa(this.keyName)]=e,!0):!1}remove(t){t.style[xa(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){let e=t.style[xa(this.keyName)];return this.canAdd(t,e)?e:""}},_e=Oa,Aa=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};let t=wr.find(this.domNode);if(t==null)return;let e=ce.keys(this.domNode),i=te.keys(this.domNode),n=_e.keys(this.domNode);e.concat(i).concat(n).forEach(o=>{let s=t.scroll.query(o,yt.ATTRIBUTE);s instanceof ce&&(this.attributes[s.attrName]=s)})}copy(t){Object.keys(this.attributes).forEach(e=>{let i=this.attributes[e].value(this.domNode);t.format(e,i)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}},mn=Aa,Fh=class{constructor(t,e){this.scroll=t,this.domNode=e,wr.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new br("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?(typeof t=="string"?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof t=="number"&&(i=t),typeof i=="number"?e=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?e=document.createElement(i):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){let t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),wr.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,n){let o=this.isolate(t,e);if(this.scroll.query(i,yt.BLOT)!=null&&n)o.wrap(i,n);else if(this.scroll.query(i,yt.ATTRIBUTE)!=null){let s=this.scroll.create(this.statics.scope);o.wrap(s),s.format(i,n)}}insertAt(t,e,i){let n=i==null?this.scroll.create("text",e):this.scroll.create(e,i),o=this.split(t);this.parent.insertBefore(n,o||void 0)}isolate(t,e){let i=this.split(t);if(i==null)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new br(`Cannot wrap ${t}`);return i.appendChild(this),i}};Fh.blotName="abstract";var Uh=Fh,Hh=class extends Uh{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Hh.scope=yt.INLINE_BLOT;var Lw=Hh,ee=Lw,Sa=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){let e=t.slice(1);this.append(...e)}}at(t){let e=this.iterator(),i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){let e=this.iterator(),i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){let e=this.iterator(),i=e(),n=0;for(;i;){if(i===t)return n;n+=1,i=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;i!=null;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{let e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){let i=this.iterator(),n=i();for(;n;){let o=n.length();if(t<o||e&&t===o&&(n.next==null||n.next.length()!==0))return[n,t];t-=o,n=i()}return[null,0]}forEach(t){let e=this.iterator(),i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;let[n,o]=this.find(t),s=t-o,a=this.iterator(n),l=a();for(;l&&s<t+e;){let f=l.length();t>s?i(l,t-s,Math.min(e,s+f-t)):i(l,0,Math.min(f,t+e-s)),s+=f,l=a()}}map(t){return this.reduce((e,i)=>(e.push(t(i)),e),[])}reduce(t,e){let i=this.iterator(),n=i();for(;n;)e=t(e,n),n=i();return e}};function $h(r,t){let e=t.find(r);if(e)return e;try{return t.create(r)}catch(i){let n=t.create(yt.INLINE);return Array.from(r.childNodes).forEach(o=>{n.domNode.appendChild(o)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}var zh=class vr extends Uh{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,vr.uiClass&&this.uiNode.classList.add(vr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Sa,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{let e=$h(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof br)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(i,n,o)=>{i.deleteAt(n,o)})}descendant(t,e=0){let[i,n]=this.children.find(e);return t.blotName==null&&t(i)||t.blotName!=null&&i instanceof t?[i,n]:i instanceof vr?i.descendant(t,n):[null,-1]}descendants(t,e=0,i=Number.MAX_VALUE){let n=[],o=i;return this.children.forEachAt(e,i,(s,a,l)=>{(t.blotName==null&&t(s)||t.blotName!=null&&s instanceof t)&&n.push(s),s instanceof vr&&(n=n.concat(s.descendants(t,a,o))),o-=l}),n}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(i=>e instanceof i)||(e.statics.scope===yt.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof vr?e.unwrap():e.remove())})}formatAt(t,e,i,n){this.children.forEachAt(t,e,(o,s,a)=>{o.formatAt(s,a,i,n)})}insertAt(t,e,i){let[n,o]=this.children.find(t);if(n)n.insertAt(o,e,i);else{let s=i==null?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(s)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(i=>{t.insertBefore(i,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){let[i,n]=this.children.find(t,e),o=[[this,t]];return i instanceof vr?o.concat(i.path(n,e)):(i!=null&&o.push([i,n]),o)}removeChild(t){this.children.remove(t)}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return i instanceof vr&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(n,o,s)=>{let a=n.split(o,e);a!=null&&i.appendChild(a)}),i}splitAfter(t){let e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){let i=[],n=[];t.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(i.push(...o.addedNodes),n.push(...o.removedNodes))}),n.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let s=this.scroll.find(o);s!=null&&(s.domNode.parentNode==null||s.domNode.parentNode===this.domNode)&&s.detach()}),i.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,s)=>o===s?0:o.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let s=null;o.nextSibling!=null&&(s=this.scroll.find(o.nextSibling));let a=$h(o,this.scroll);(a.next!==s||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,s||void 0))}),this.enforceAllowedChildren()}};zh.uiClass="";var Pw=zh,ge=Pw;function jw(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(let e in r)if(r[e]!==t[e])return!1;return!0}var wi=class xi extends ge{static create(t){return super.create(t)}static formats(t,e){let i=e.query(xi.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new mn(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(i=>{i instanceof xi||(i=i.wrap(xi.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{let i=this.scroll.query(t,yt.INLINE);if(i==null)return;i instanceof ce?this.attributes.attribute(i,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){this.formats()[i]!=null||this.scroll.query(i,yt.ATTRIBUTE)?this.isolate(t,e).format(i,n):super.formatAt(t,e,i,n)}optimize(t){super.optimize(t);let e=this.formats();if(Object.keys(e).length===0)return this.unwrap();let i=this.next;i instanceof xi&&i.prev===this&&jw(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(t,e){let i=super.wrap(t,e);return i instanceof xi&&this.attributes.move(i),i}};wi.allowedChildren=[wi,ee],wi.blotName="inline",wi.scope=yt.INLINE_BLOT,wi.tagName="SPAN";var Rw=wi,Jo=Rw,ki=class Ta extends ge{static create(t){return super.create(t)}static formats(t,e){let i=e.query(Ta.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new mn(this.domNode)}format(t,e){let i=this.scroll.query(t,yt.BLOCK);i!=null&&(i instanceof ce?this.attributes.attribute(i,e):t===this.statics.blotName&&!e?this.replaceWith(Ta.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,n){this.scroll.query(i,yt.BLOCK)!=null?this.format(i,n):super.formatAt(t,e,i,n)}insertAt(t,e,i){if(i==null||this.scroll.query(e,yt.INLINE)!=null)super.insertAt(t,e,i);else{let n=this.split(t);if(n!=null){let o=this.scroll.create(e,i);n.parent.insertBefore(o,n)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};ki.blotName="block",ki.scope=yt.BLOCK_BLOT,ki.tagName="P",ki.allowedChildren=[Jo,ki,ee];var Iw=ki,Ur=Iw,Ca=class extends ge{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,n){super.formatAt(t,e,i,n),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ca.blotName="container",Ca.scope=yt.BLOCK_BLOT;var qw=Ca,Oi=qw,Na=class extends ee{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,n){t===0&&e===this.length()?this.format(i,n):super.formatAt(t,e,i,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Ht=Na,Dw={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Mw=100,Ei=class extends ge{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,Dw),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){let i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=yt.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(t,e)}formatAt(t,e,i,n){this.update(),super.formatAt(t,e,i,n)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);let i=e.mutationsMap||new WeakMap,n=Array.from(this.observer.takeRecords());for(;n.length>0;)t.push(n.pop());let o=(l,f=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(i.has(l.domNode)||i.set(l.domNode,[]),f&&o(l.parent))},s=l=>{i.has(l.domNode)&&(l instanceof ge&&l.children.forEach(s),i.delete(l.domNode),l.optimize(e))},a=t;for(let l=0;a.length>0;l+=1){if(l>=Mw)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(f=>{let p=this.find(f.target,!0);p!=null&&(p.domNode===f.target&&(f.type==="childList"?(o(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(y=>{let h=this.find(y,!1);o(h,!1),h instanceof ge&&h.children.forEach(d=>{o(d,!1)})})):f.type==="attributes"&&o(p.prev)),o(p))}),this.children.forEach(s),a=Array.from(this.observer.takeRecords()),n=a.slice();n.length>0;)t.push(n.pop())}}update(t,e={}){t=t||this.observer.takeRecords();let i=new WeakMap;t.map(n=>{let o=this.find(n.target,!0);return o==null?null:i.has(o.domNode)?(i.get(o.domNode).push(n),null):(i.set(o.domNode,[n]),o)}).forEach(n=>{n!=null&&n!==this&&i.has(n.domNode)&&n.update(i.get(n.domNode)||[],e)}),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};Ei.blotName="scroll",Ei.defaultChild=Ur,Ei.allowedChildren=[Ur,Oi],Ei.scope=yt.BLOCK_BLOT,Ei.tagName="DIV";var $w=Ei,gn=$w,La=class Vh extends ee{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){i==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Vh&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};La.blotName="text",La.scope=yt.INLINE_BLOT;var Bw=La,Ai=Bw;var Tr=Gt(Ee(),1);var Vt=Gt(Ee(),1);var gl=Gt(Ee(),1);var Sn=class extends Ht{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};Sn.blotName="break";Sn.tagName="BR";var se=Sn;var Yt=class extends Ai{},iO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zr(r){return r.replace(/[&<>"']/g,t=>iO[t])}var Or=class extends Jo{static compare(t,e){let i=Or.order.indexOf(t),n=Or.order.indexOf(e);return i>=0||n>=0?i-n:t===e?0:t<e?-1:1}formatAt(t,e,i,n){if(Or.compare(this.statics.blotName,i)<0&&this.scroll.query(i,yt.BLOT)){let o=this.isolate(t,e);n&&o.wrap(i,n)}else super.formatAt(t,e,i,n)}optimize(t){if(super.optimize(t),this.parent instanceof Or&&Or.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}},Tn=Or;at(Tn,"allowedChildren",[Or,se,Ht,Yt]),at(Tn,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);var ae=Tn;var Tp=1,It=class extends Ur{constructor(){super(...arguments);at(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=_l(this)),this.cache.delta}deleteAt(e,i){super.deleteAt(e,i),this.cache={}}formatAt(e,i,n,o){i<=0||(this.scroll.query(n,yt.BLOCK)?e+i===this.length()&&this.format(n,o):super.formatAt(e,Math.min(i,this.length()-e-1),n,o),this.cache={})}insertAt(e,i,n){if(n!=null){super.insertAt(e,i,n),this.cache={};return}if(i.length===0)return;let o=i.split(`
`),s=o.shift();s.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});let a=this;o.reduce((l,f)=>(a=a.split(l,!0),a.insertAt(0,f),f.length),e+s.length)}insertBefore(e,i){let{head:n}=this.children;super.insertBefore(e,i),n instanceof se&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Tp),this.cache.length}moveChildren(e,i){super.moveChildren(e,i),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i&&(e===0||e>=this.length()-Tp)){let o=this.clone();return e===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}let n=super.split(e,i);return this.cache={},n}};It.blotName="block";It.tagName="P";It.defaultChild=se;It.allowedChildren=[se,ae,Ht,Yt];var ie=class extends Ht{attach(){super.attach(),this.attributes=new mn(this.domNode)}delta(){return new gl.default().insert(this.value(),Pt(Pt({},this.formats()),this.attributes.values()))}format(t,e){let i=this.scroll.query(t,yt.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,e)}formatAt(t,e,i,n){this.format(i,n)}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);return}let n=e.split(`
`),o=n.pop(),s=n.map(l=>{let f=this.scroll.create(It.blotName);return f.insertAt(0,l),f}),a=this.split(t);s.forEach(l=>{this.parent.insertBefore(l,a)}),o&&this.parent.insertBefore(this.scroll.create("text",o),a)}};ie.scope=yt.BLOCK_BLOT;function _l(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(ee).reduce((e,i)=>i.length()===0?e:e.insert(i.value(),ye(i,{},t)),new gl.default).insert(`
`,ye(r))}function ye(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(t=Pt(Pt({},t),r.formats()),e&&delete t["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?t:ye(r.parent,t,e)}var Ar=class extends Ht{static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(Ar.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let i=this,n=0;for(;i!=null&&i.statics.scope!==yt.BLOCK_BLOT;)n+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=Ar.CONTENTS.length,i.optimize(),i.formatAt(n,Ar.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let e=this.prev instanceof Yt?this.prev:null,i=e?e.length():0,n=this.next instanceof Yt?this.next:null,o=n?n.text:"",{textNode:s}=this,a=s.data.split(Ar.CONTENTS).join("");s.data=Ar.CONTENTS;let l;if(e)l=e,(a||n)&&(e.insertAt(e.length(),a+o),n&&n.remove());else if(n)l=n,n.insertAt(0,a);else{let f=document.createTextNode(a);l=this.scroll.create(f),this.parent.insertBefore(l,this)}if(this.remove(),t){let f=(h,d)=>e&&h===e.domNode?d:h===s?i+d-1:n&&h===n.domNode?i+a.length+d:null,p=f(t.start.node,t.start.offset),y=f(t.end.node,t.end.offset);if(p!==null&&y!==null)return{startNode:l.domNode,startOffset:p,endNode:l.domNode,endOffset:y}}return null}update(t,e){if(t.some(i=>i.type==="characterData"&&i.target===this.textNode)){let i=this.restore();i&&(e.range=i)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Ar.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}},Xr=Ar;at(Xr,"blotName","cursor"),at(Xr,"className","ql-cursor"),at(Xr,"tagName","span"),at(Xr,"CONTENTS","\uFEFF");var Sr=Xr;var vl=Gt(Np(),1);var Nn=new WeakMap;var bl=["error","warn","log","info"],wl="warn";function Lp(r){if(wl&&bl.indexOf(r)<=bl.indexOf(wl)){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];console[r](...e)}}function xl(r){return bl.reduce((t,e)=>(t[e]=Lp.bind(console,e,r),t),{})}xl.level=r=>{wl=r};Lp.level=xl.level;var Oe=xl;var kl=Oe("quill:events"),sO=["selectionchange","mousedown","mouseup","click"];sO.forEach(r=>{document.addEventListener(r,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(n=>{let o=Nn.get(n);o&&o.emitter&&o.emitter.handleDOM(...e)})})});var Ln=class extends vl.default{constructor(){super(),this.domListeners={},this.on("error",kl.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return kl.log.call(kl,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.domListeners[t.type]||[]).forEach(o=>{let{node:s,handler:a}=o;(t.target===s||s.contains(t.target))&&a(t,...i)})}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}};at(Ln,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),at(Ln,"sources",{API:"api",SILENT:"silent",USER:"user"});var vt=Ln;var El=Oe("quill:selection"),de=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}},Al=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new de(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,vt.sources.USER),1)}),this.emitter.on(vt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(vt.events.SCROLL_UPDATE,(n,o)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);let s=o.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(s?vt.sources.SILENT:n)}catch(s){}})}),this.emitter.on(vt.events.SCROLL_OPTIMIZE,(i,n)=>{if(n.range){let{startNode:o,startOffset:s,endNode:a,endOffset:l}=n.range;this.setNativeRange(o,s,a,l),this.update(vt.sources.SILENT)}}),this.update(vt.sources.SILENT)}handleComposition(){this.emitter.on(vt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(vt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(vt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();let i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(t,yt.BLOCK))){if(i.start.node!==this.cursor.textNode){let n=this.scroll.find(i.start.node,!1);if(n==null)return;if(n instanceof ee){let o=n.split(i.start.offset);n.parent.insertBefore(this.cursor,o)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let n,[o,s]=this.scroll.leaf(t);if(o==null)return null;if(e>0&&s===o.length()){let[p]=this.scroll.leaf(t+1);if(p){let[y]=this.scroll.line(t),[h]=this.scroll.line(t+1);y===h&&(o=p,s=0)}}[n,s]=o.position(s,!0);let a=document.createRange();if(e>0)return a.setStart(n,s),[o,s]=this.scroll.leaf(t+e),o==null?null:([n,s]=o.position(s,!0),a.setEnd(n,s),a.getBoundingClientRect());let l="left",f;if(n instanceof Text){if(!n.data.length)return null;s<n.data.length?(a.setStart(n,s),a.setEnd(n,s+1)):(a.setStart(n,s-1),a.setEnd(n,s),l="right"),f=a.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;f=o.domNode.getBoundingClientRect(),s>0&&(l="right")}return{bottom:f.top+f.height,height:f.height,left:f[l],right:f[l],top:f.top,width:0}}getNativeRange(){let t=document.getSelection();if(t==null||t.rangeCount<=0)return null;let e=t.getRangeAt(0);if(e==null)return null;let i=this.normalizeNative(e);return El.info("getNativeRange",i),i}getRange(){let t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];let e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Ol(this.root,document.activeElement)}normalizedToRange(t){let e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);let i=e.map(s=>{let[a,l]=s,f=this.scroll.find(a,!0),p=f.offset(this.scroll);return l===0?p:f instanceof ee?p+f.index(a,l):p+f.length()}),n=Math.min(Math.max(...i),this.scroll.length()-1),o=Math.min(n,...i);return new de(o,n-o)}normalizeNative(t){if(!Ol(this.root,t.startContainer)||!t.collapsed&&!Ol(this.root,t.endContainer))return null;let e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(i=>{let{node:n,offset:o}=i;for(;!(n instanceof Text)&&n.childNodes.length>0;)if(n.childNodes.length>o)n=n.childNodes[o],o=0;else if(n.childNodes.length===o)n=n.lastChild,n instanceof Text?o=n.data.length:n.childNodes.length>0?o=n.childNodes.length:o=n.childNodes.length+1;else break;i.node=n,i.offset=o}),e}rangeToNative(t){let e=this.scroll.length(),i=(n,o)=>{n=Math.min(e-1,n);let[s,a]=this.scroll.leaf(n);return s?s.position(a,o):[null,-1]};return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(El.info("setNativeRange",t,e,i,n),t!=null&&(this.root.parentNode==null||t.parentNode==null||i.parentNode==null))return;let s=document.getSelection();if(s!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:a}=this.getNativeRange()||{};if(a==null||o||t!==a.startContainer||e!==a.startOffset||i!==a.endContainer||n!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&i.tagName==="BR"&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);let l=document.createRange();l.setStart(t,e),l.setEnd(i,n),s.removeAllRanges(),s.addRange(l)}}else s.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vt.sources.API;if(typeof e=="string"&&(i=e,e=!1),El.info("setRange",t),t!=null){let n=this.rangeToNative(t);this.setNativeRange(...n,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vt.sources.USER,e=this.lastRange,[i,n]=this.getRange();if(this.lastRange=i,this.lastNative=n,this.lastRange!=null&&(this.savedRange=this.lastRange),!Fr(e,this.lastRange)){if(!this.composing&&n!=null&&n.native.collapsed&&n.start.node!==this.cursor.textNode){let s=this.cursor.restore();s&&this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)}let o=[vt.events.SELECTION_CHANGE,Ve(this.lastRange),Ve(e),t];this.emitter.emit(vt.events.EDITOR_CHANGE,...o),t!==vt.sources.SILENT&&this.emitter.emit(...o)}}};function Ol(r,t){try{t.parentNode}catch(e){return!1}return r.contains(t)}var Pp=Al;var aO=/^[ -~]*$/,Tl=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();let i=jp(t),n=new Vt.default;return uO(i.ops.slice()).reduce((s,a)=>{let l=Vt.Op.length(a),f=a.attributes||{},p=!1,y=!1;if(a.insert!=null){if(n.retain(l),typeof a.insert=="string"){let u=a.insert;y=!u.endsWith(`
`)&&(e<=s||!!this.scroll.descendant(ie,s)[0]),this.scroll.insertAt(s,u);let[c,m]=this.scroll.line(s),_=me({},ye(c));if(c instanceof It){let[g]=c.descendant(ee,m);g&&(_=me(_,ye(g)))}f=Vt.AttributeMap.diff(_,f)||{}}else if(typeof a.insert=="object"){let u=Object.keys(a.insert)[0];if(u==null)return s;let c=this.scroll.query(u,yt.INLINE)!=null;if(c)(e<=s||!!this.scroll.descendant(ie,s)[0])&&(y=!0);else if(s>0){let[m,_]=this.scroll.descendant(ee,s-1);m instanceof Yt?m.value()[_]!==`
`&&(p=!0):m instanceof Ht&&m.statics.scope===yt.INLINE_BLOT&&(p=!0)}if(this.scroll.insertAt(s,u,a.insert[u]),c){let[m]=this.scroll.descendant(ee,s);if(m){let _=me({},ye(m));f=Vt.AttributeMap.diff(_,f)||{}}}}e+=l}else if(n.push(a),a.retain!==null&&typeof a.retain=="object"){let u=Object.keys(a.retain)[0];if(u==null)return s;this.scroll.updateEmbedAt(s,u,a.retain[u])}Object.keys(f).forEach(u=>{this.scroll.formatAt(s,l,u,f[u])});let h=p?1:0,d=y?1:0;return e+=h+d,n.retain(h),n.delete(d),s+l+h+d},0),n.reduce((s,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(s,a.delete),s):s+Vt.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new Vt.default().retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(o=>{this.scroll.lines(t,Math.max(e,1)).forEach(s=>{s.format(o,i[o])})}),this.scroll.optimize();let n=new Vt.default().retain(t).retain(e,Ve(i));return this.update(n)}formatText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(o=>{this.scroll.formatAt(t,e,o,i[o])});let n=new Vt.default().retain(t).retain(e,Ve(i));return this.update(n)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new Vt.default)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],n=[];e===0?this.scroll.path(t).forEach(a=>{let[l]=a;l instanceof It?i.push(l):l instanceof ee&&n.push(l)}):(i=this.scroll.lines(t,e),n=this.scroll.descendants(ee,t,e));let[o,s]=[i,n].map(a=>{let l=a.shift();if(l==null)return{};let f=ye(l);for(;Object.keys(f).length>0;){let p=a.shift();if(p==null)return f;f=lO(ye(p),f)}return f});return Pt(Pt({},o),s)}getHTML(t,e){let[i,n]=this.scroll.line(t);if(i){let o=i.length();return i.length()>=n+e&&!(n===0&&e===o)?Pn(i,n,e,!0):Pn(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(t,e){let i=jp(e),n=new Vt.default().retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(n)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update(new Vt.default().retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(i).forEach(n=>{this.scroll.formatAt(t,e.length,n,i[n])}),this.update(new Vt.default().retain(t).insert(e,Ve(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==It.blotName)return!1;let e=t;return e.children.length>1?!1:e.children.head instanceof se}removeFormat(t,e){let i=this.getText(t,e),[n,o]=this.scroll.line(t+e),s=0,a=new Vt.default;n!=null&&(s=n.length()-o,a=n.delta().slice(o,o+s-1).insert(`
`));let f=this.getContents(t,e+s).diff(new Vt.default().insert(i).concat(a)),p=new Vt.default().retain(t).concat(f);return this.applyDelta(p)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(aO)&&this.scroll.find(e[0].target)){let o=this.scroll.find(e[0].target),s=ye(o),a=o.offset(this.scroll),l=e[0].oldValue.replace(Sr.CONTENTS,""),f=new Vt.default().insert(l),p=new Vt.default().insert(o.value()),y=i&&{oldRange:Rp(i.oldRange,-a),newRange:Rp(i.newRange,-a)};t=new Vt.default().retain(a).concat(f.diff(p,y)).reduce((d,u)=>u.insert?d.insert(u.insert,s):d.push(u),new Vt.default),this.delta=n.compose(t)}else this.delta=this.getDelta(),(!t||!Fr(n.compose(t),this.delta))&&(t=n.diff(this.delta,i));return t}};function Ri(r,t,e){if(r.length===0){let[d]=Sl(e.pop());return t<=0?`</li></${d}>`:`</li></${d}>${Ri([],t-1,e)}`}let[{child:i,offset:n,length:o,indent:s,type:a},...l]=r,[f,p]=Sl(a);if(s>t)return e.push(a),s===t+1?`<${f}><li${p}>${Pn(i,n,o)}${Ri(l,s,e)}`:`<${f}><li>${Ri(r,t+1,e)}`;let y=e[e.length-1];if(s===t&&a===y)return`</li><li${p}>${Pn(i,n,o)}${Ri(l,s,e)}`;let[h]=Sl(e.pop());return`</li></${h}>${Ri(r,t-1,e)}`}function Pn(r,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(t,e);if(r instanceof Yt)return Zr(r.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(r instanceof ge){if(r.statics.blotName==="list-container"){let f=[];return r.children.forEachAt(t,e,(p,y,h)=>{let d="formats"in p&&typeof p.formats=="function"?p.formats():{};f.push({child:p,offset:y,length:h,indent:d.indent||0,type:d.list})}),Ri(f,-1,[])}let n=[];if(r.children.forEachAt(t,e,(f,p,y)=>{n.push(Pn(f,p,y))}),i||r.statics.blotName==="list")return n.join("");let{outerHTML:o,innerHTML:s}=r.domNode,[a,l]=o.split(`>${s}<`);return a==="<table"?`<table style="border: 1px solid #000;">${n.join("")}<${l}`:`${a}>${n.join("")}<${l}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function lO(r,t){return Object.keys(t).reduce((e,i)=>{if(r[i]==null)return e;let n=t[i];return n===r[i]?e[i]=n:Array.isArray(n)?n.indexOf(r[i])<0?e[i]=n.concat([r[i]]):e[i]=n:e[i]=[n,r[i]],e},{})}function Sl(r){let t=r==="ordered"?"ol":"ul";switch(r){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function jp(r){return r.reduce((t,e)=>{if(typeof e.insert=="string"){let i=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(i,e.attributes)}return t.push(e)},new Vt.default)}function Rp(r,t){let{index:e,length:i}=r;return new de(e+t,i)}function uO(r){let t=[];return r.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((n,o)=>{o&&t.push({insert:`
`,attributes:e.attributes}),n&&t.push({insert:n,attributes:e.attributes})}):t.push(e)}),t}var Ip=Tl;var ws=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}};at(ws,"DEFAULTS",{});var Kt=ws;var xs="\uFEFF",Cl=class extends Ht{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(xs),this.rightGuard=document.createTextNode(xs),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,i,n=t.data.split(xs).join("");if(t===this.leftGuard)if(this.prev instanceof Yt){let o=this.prev.length();this.prev.insertAt(o,n),e={startNode:this.prev.domNode,startOffset:o+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:n.length};else t===this.rightGuard&&(this.next instanceof Yt?(this.next.insertAt(0,n),e={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:n.length}));return t.data=xs,e}update(t,e){t.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){let n=this.restore(i.target);n&&(e.range=n)}})}},Ii=Cl;var Nl=class{constructor(t,e){at(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){let e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Ii)&&(this.emitter.emit(vt.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(vt.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(vt.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(vt.events.COMPOSITION_END,t),this.isComposing=!1}},qp=Nl;var Ll=class{constructor(t,e){at(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){let e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}},jn=Ll;at(jn,"DEFAULTS",{modules:{}}),at(jn,"themes",{default:Ll});var qi=jn;var cO=r=>r.parentElement||r.getRootNode().host||null,fO=r=>{let t=r.getBoundingClientRect(),e="offsetWidth"in r&&Math.abs(t.width)/r.offsetWidth||1,i="offsetHeight"in r&&Math.abs(t.height)/r.offsetHeight||1;return{top:t.top,right:t.left+r.clientWidth*e,bottom:t.top+r.clientHeight*i,left:t.left}},ks=r=>{let t=parseInt(r,10);return Number.isNaN(t)?0:t},Dp=(r,t,e,i,n,o)=>r<e&&t>i?0:r<e?-(e-r+n):t>i?t-r>i-e?r+n-e:t-i+o:0,hO=(r,t)=>{var o,s,a,l,f;let e=r.ownerDocument,i=t,n=r;for(;n;){let p=n===e.body,y=p?{top:0,right:(s=(o=window.visualViewport)==null?void 0:o.width)!=null?s:e.documentElement.clientWidth,bottom:(l=(a=window.visualViewport)==null?void 0:a.height)!=null?l:e.documentElement.clientHeight,left:0}:fO(n),h=getComputedStyle(n),d=Dp(i.left,i.right,y.left,y.right,ks(h.scrollPaddingLeft),ks(h.scrollPaddingRight)),u=Dp(i.top,i.bottom,y.top,y.bottom,ks(h.scrollPaddingTop),ks(h.scrollPaddingBottom));if(d||u)if(p)(f=e.defaultView)==null||f.scrollBy(d,u);else{let{scrollLeft:c,scrollTop:m}=n;u&&(n.scrollTop+=u),d&&(n.scrollLeft+=d);let _=n.scrollLeft-c,g=n.scrollTop-m;i={left:i.left-_,top:i.top-g,right:i.right-_,bottom:i.bottom-g}}n=p||h.position==="fixed"?null:cO(n)}},Mp=hO;var dO=100,pO=["block","break","cursor","inline","scroll","text"],mO=(r,t,e)=>{let i=new wr;return pO.forEach(n=>{let o=t.query(n);o&&i.register(o)}),r.forEach(n=>{var a;let o=t.query(n);o||e.error(`Cannot register "${n}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;o;)if(i.register(o),o="blotName"in o&&(a=o.requiredContainer)!=null?a:null,s+=1,s>dO){e.error(`Cycle detected in registering blot requiredContainer: "${n}"`);break}}),i},$p=mO;var Mi=Oe("quill"),Es=new wr;ge.uiClass="ql-ui";var Di=class{static debug(t){t===!0&&(t="log"),Oe.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Nn.get(t)||Es.find(t,e)}static import(t){return this.imports[t]==null&&Mi.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),i="attrName"in t?t.attrName:t.blotName;typeof i=="string"?this.register(`formats/${i}`,t,e):Object.keys(t).forEach(n=>{this.register(n,t[n],e)})}else{let t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!i&&Mi.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Es.register(e),typeof e.register=="function"&&e.register(Es)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=gO(t,e),this.container=this.options.container,this.container==null){Mi.error("Invalid Quill container",t);return}this.options.debug&&Di.debug(this.options.debug);let i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Nn.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new vt;let n=gn.blotName,o=this.options.registry.query(n);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ip(this.scroll),this.selection=new Pp(this.scroll,this.emitter),this.composition=new qp(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(vt.events.EDITOR_CHANGE,s=>{s===vt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(vt.events.SCROLL_UPDATE,(s,a)=>{let l=this.selection.lastRange,[f]=this.selection.getRange(),p=l&&f?{oldRange:l,newRange:f}:void 0;Be.call(this,()=>this.editor.update(null,a,p),s)}),this.emitter.on(vt.events.SCROLL_EMBED_UPDATE,(s,a)=>{let l=this.selection.lastRange,[f]=this.selection.getRange(),p=l&&f?{oldRange:l,newRange:f}:void 0;Be.call(this,()=>{let y=new Tr.default().retain(s.offset(this)).retain({[s.statics.blotName]:a});return this.editor.update(y,[],p)},Di.sources.USER)}),i){let s=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(s)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){let i=t;t=document.createElement("div"),t.classList.add(i)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=ar(t,e,i),Be.call(this,()=>this.editor.deleteText(t,e),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;let e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vt.sources.API;return Be.call(this,()=>{let n=this.getSelection(!0),o=new Tr.default;if(n==null)return o;if(this.scroll.query(t,yt.BLOCK))o=this.editor.formatLine(n.index,n.length,{[t]:e});else{if(n.length===0)return this.selection.format(t,e),o;o=this.editor.formatText(n.index,n.length,{[t]:e})}return this.setSelection(n,vt.sources.SILENT),o},i)}formatLine(t,e,i,n,o){let s;return[t,e,s,o]=ar(t,e,i,n,o),Be.call(this,()=>this.editor.formatLine(t,e,s),o,t,0)}formatText(t,e,i,n,o){let s;return[t,e,s,o]=ar(t,e,i,n,o),Be.call(this,()=>this.editor.formatText(t,e,s),o,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof t=="number"?i=this.selection.getBounds(t,e):i=this.selection.getBounds(t.index,t.length),!i)return null;let n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=ar(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e!=null?e:this.getLength()-t),[t,e]=ar(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e!=null?e:this.getLength()-t),[t,e]=ar(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Di.sources.API;return Be.call(this,()=>this.editor.insertEmbed(t,e,i),n,t)}insertText(t,e,i,n,o){let s;return[t,,s,o]=ar(t,0,i,n,o),Be.call(this,()=>this.editor.insertText(t,e,s),o,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=ar(t,e,i),Be.call(this,()=>this.editor.removeFormat(t,e),i,t)}scrollRectIntoView(t){Mp(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt.sources.API;return Be.call(this,()=>{t=new Tr.default(t);let i=this.getLength(),n=this.editor.deleteText(0,i),o=this.editor.insertContents(0,t),s=this.editor.deleteText(this.getLength()-1,1);return n.compose(o).compose(s)},e)}setSelection(t,e,i){t==null?this.selection.setRange(null,e||Di.sources.API):([t,e,,i]=ar(t,e,i),this.selection.setRange(new de(Math.max(0,t),e),i),i!==vt.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt.sources.API,i=new Tr.default().insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vt.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt.sources.API;return Be.call(this,()=>(t=new Tr.default(t),this.editor.applyDelta(t)),e,!0)}},lt=Di;at(lt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Es,theme:"default"}),at(lt,"events",vt.events),at(lt,"sources",vt.sources),at(lt,"version","2.0.3"),at(lt,"imports",{delta:Tr.default,parchment:_n,"core/module":Kt,"core/theme":qi});function Bp(r){return typeof r=="string"?document.querySelector(r):r}function Pl(r){return Object.entries(r!=null?r:{}).reduce((t,e)=>{let[i,n]=e;return hr(Pt({},t),{[i]:n===!0?{}:n})},{})}function Fp(r){return Object.fromEntries(Object.entries(r).filter(t=>t[1]!==void 0))}function gO(r,t){let e=Bp(r);if(!e)throw new Error("Invalid Quill container");let n=!t.theme||t.theme===lt.DEFAULTS.theme?qi:lt.import(`themes/${t.theme}`);if(!n)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);let d=lt.DEFAULTS,{modules:o}=d,s=pa(d,["modules"]),u=n.DEFAULTS,{modules:a}=u,l=pa(u,["modules"]),f=Pl(t.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f=hr(Pt({},f),{toolbar:{container:f.toolbar}}));let p=me({},Pl(o),Pl(a),f),y=Pt(Pt(Pt({},s),Fp(l)),Fp(t)),h=t.registry;return h?t.formats&&Mi.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?$p(t.formats,y.registry,Mi):y.registry,hr(Pt({},y),{registry:h,container:e,theme:n,modules:Object.entries(p).reduce((c,m)=>{let[_,g]=m;if(!g)return c;let v=lt.import(`modules/${_}`);return v==null?(Mi.error(`Cannot load ${_} module. Are you sure you registered it?`),c):hr(Pt({},c),{[_]:me({},v.DEFAULTS||{},g)})},{}),bounds:Bp(y.bounds)})}function Be(r,t,e,i){if(!this.isEnabled()&&t===vt.sources.USER&&!this.allowReadOnlyEdits)return new Tr.default;let n=e==null?null:this.getSelection(),o=this.editor.delta,s=r();if(n!=null&&(e===!0&&(e=n.index),i==null?n=Up(n,s,t):i!==0&&(n=Up(n,e,i,t)),this.setSelection(n,vt.sources.SILENT)),s.length()>0){let a=[vt.events.TEXT_CHANGE,s,o,t];this.emitter.emit(vt.events.EDITOR_CHANGE,...a),t!==vt.sources.SILENT&&this.emitter.emit(...a)}return s}function ar(r,t,e,i,n){let o={};return typeof r.index=="number"&&typeof r.length=="number"?typeof t!="number"?(n=i,i=e,e=t,t=r.length,r=r.index):(t=r.length,r=r.index):typeof t!="number"&&(n=i,i=e,e=t,t=0),typeof e=="object"?(o=e,n=i):typeof e=="string"&&(i!=null?o[e]=i:n=e),n=n||vt.sources.API,[r,t,o,n]}function Up(r,t,e,i){let n=typeof e=="number"?e:0;if(r==null)return null;let o,s;return t&&typeof t.transformPosition=="function"?[o,s]=[r.index,r.index+r.length].map(a=>t.transformPosition(a,i!==vt.sources.USER)):[o,s]=[r.index,r.index+r.length].map(a=>a<t||a===t&&i===vt.sources.USER?a:n>=0?a+n:Math.max(t,a+n)),new de(o,s-o)}var jl=class extends Oi{},Re=jl;var Ie=Gt(Ee(),1);function Hp(r){return r instanceof It||r instanceof ie}function zp(r){return typeof r.updateContent=="function"}var Cr=class extends gn{constructor(t,e,i){let{emitter:n}=i;super(t,e),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(vt.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(vt.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(vt.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){let[i,n]=this.line(t),[o]=this.line(t+e);if(super.deleteAt(t,e),o!=null&&i!==o&&n>0){if(i instanceof ie||o instanceof ie){this.optimize();return}let s=o.children.head instanceof se?null:o.children.head;i.moveChildren(o,s),i.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,n){super.formatAt(t,e,i,n),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(i==null||this.scroll.query(e,yt.BLOCK)==null){let n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n),i==null&&e.endsWith(`
`)?n.insertAt(0,e.slice(0,-1),i):n.insertAt(0,e,i)}else{let n=this.scroll.create(e,i);this.appendChild(n)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===yt.INLINE_BLOT){let i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){let i=this.deltaToRenderBlocks(e.concat(new Ie.default().insert(`
`))),n=i.pop();if(n==null)return;this.batchStart();let o=i.shift();if(o){let l=o.type==="block"&&(o.delta.length()===0||!this.descendant(ie,t)[0]&&t<this.length()),f=o.type==="block"?o.delta:new Ie.default().insert({[o.key]:o.value});Rl(this,t,f);let p=o.type==="block"?1:0,y=t+f.length()+p;l&&this.insertAt(y-1,`
`);let h=ye(this.line(t)[0]),d=Ie.AttributeMap.diff(h,o.attributes)||{};Object.keys(d).forEach(u=>{this.formatAt(y-1,1,u,d[u])}),t=y}let[s,a]=this.children.find(t);if(i.length&&(s&&(s=s.split(a),a=0),i.forEach(l=>{if(l.type==="block"){let f=this.createBlock(l.attributes,s||void 0);Rl(f,0,l.delta)}else{let f=this.create(l.key,l.value);this.insertBefore(f,s||void 0),Object.keys(l.attributes).forEach(p=>{f.format(p,l.attributes[p])})}})),n.type==="block"&&n.delta.length()){let l=s?s.offset(s.scroll)+a:this.length();Rl(this,l,n.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){let e=this.path(t).pop();if(!e)return[null,-1];let[i,n]=e;return i instanceof ee?[i,n]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Hp,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=(n,o,s)=>{let a=[],l=s;return n.children.forEachAt(o,s,(f,p,y)=>{Hp(f)?a.push(f):f instanceof Oi&&(a=a.concat(i(f,p,l))),l-=y}),a};return i(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(vt.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=vt.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(i=>{let{target:n}=i,o=this.find(n,!0);return o&&!zp(o)}),t.length>0&&this.emitter.emit(vt.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(vt.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){let[n]=this.descendant(o=>o instanceof ie,t);n&&n.statics.blotName===e&&zp(n)&&n.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){let e=[],i=new Ie.default;return t.forEach(n=>{var s;let o=n==null?void 0:n.insert;if(!!o)if(typeof o=="string"){let a=o.split(`
`);a.slice(0,-1).forEach(f=>{var p;i.insert(f,n.attributes),e.push({type:"block",delta:i,attributes:(p=n.attributes)!=null?p:{}}),i=new Ie.default});let l=a[a.length-1];l&&i.insert(l,n.attributes)}else{let a=Object.keys(o)[0];if(!a)return;this.query(a,yt.INLINE)?i.push(n):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new Ie.default,e.push({type:"blockEmbed",key:a,value:o[a],attributes:(s=n.attributes)!=null?s:{}}))}}),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i,n={};Object.entries(t).forEach(a=>{let[l,f]=a;this.query(l,yt.BLOCK&yt.BLOT)!=null?i=l:n[l]=f});let o=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(o,e||void 0);let s=o.length();return Object.entries(n).forEach(a=>{let[l,f]=a;o.formatAt(0,s,l,f)}),o}};at(Cr,"blotName","scroll"),at(Cr,"className","ql-editor"),at(Cr,"tagName","DIV"),at(Cr,"defaultChild",It),at(Cr,"allowedChildren",[It,ie,Re]);function Rl(r,t,e){e.reduce((i,n)=>{let o=Ie.Op.length(n),s=n.attributes||{};if(n.insert!=null){if(typeof n.insert=="string"){let a=n.insert;r.insertAt(i,a);let[l]=r.descendant(ee,i),f=ye(l);s=Ie.AttributeMap.diff(f,s)||{}}else if(typeof n.insert=="object"){let a=Object.keys(n.insert)[0];if(a==null)return i;if(r.insertAt(i,a,n.insert[a]),r.scroll.query(a,yt.INLINE)!=null){let[f]=r.descendant(ee,i),p=ye(f);s=Ie.AttributeMap.diff(p,s)||{}}}}return Object.keys(s).forEach(a=>{r.formatAt(i,o,a,s[a])}),i+o},t)}var Vp=Cr;var ve=Gt(Ee(),1);var Il={scope:yt.BLOCK,whitelist:["right","center","justify"]},Gp=new ce("align","align",Il),ql=new te("align","ql-align",Il),Os=new _e("align","text-align",Il);var Rn=class extends _e{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):e}},Kp=new te("color","ql-color",{scope:yt.INLINE}),In=new Rn("color","color",{scope:yt.INLINE});var Wp=new te("background","ql-bg",{scope:yt.INLINE}),qn=new Rn("background","background-color",{scope:yt.INLINE});var Ke=class extends Re{static create(t){let e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Zr(this.code(t,e))}
</pre>`}},Jt=class extends It{static register(){lt.register(Ke)}};at(Jt,"TAB","  ");var $i=class extends ae{};$i.blotName="code";$i.tagName="CODE";Jt.blotName="code-block";Jt.className="ql-code-block";Jt.tagName="DIV";Ke.blotName="code-block-container";Ke.className="ql-code-block-container";Ke.tagName="DIV";Ke.allowedChildren=[Jt];Jt.allowedChildren=[Yt,se,Sr];Jt.requiredContainer=Ke;var Dl={scope:yt.BLOCK,whitelist:["rtl"]},As=new ce("direction","dir",Dl),Ml=new te("direction","ql-direction",Dl),Ss=new _e("direction","direction",Dl);var Yp={scope:yt.INLINE,whitelist:["serif","monospace"]},Bl=new te("font","ql-font",Yp),$l=class extends _e{value(t){return super.value(t).replace(/["']/g,"")}},Ts=new $l("font","font-family",Yp);var Fl=new te("size","ql-size",{scope:yt.INLINE,whitelist:["small","large","huge"]}),Cs=new _e("size","font-size",{scope:yt.INLINE,whitelist:["10px","18px","32px"]});var ue=Gt(Ee(),1);var _O=Oe("quill:keyboard"),yO=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Qr=class extends Kt{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!e[i]!==t[i]&&e[i]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=bO(t);if(n==null){_O.warn("Attempted to add invalid keyboard binding",n);return}typeof e=="function"&&(e={handler:e}),typeof i=="function"&&(i={handler:i}),(Array.isArray(n.key)?n.key:[n.key]).forEach(s=>{let a=Pt(Pt(hr(Pt({},n),{key:s}),e),i);this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;let n=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(_=>Qr.match(t,_));if(n.length===0)return;let o=lt.find(t.target,!0);if(o&&o.scroll!==this.quill.scroll)return;let s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;let[a,l]=this.quill.getLine(s.index),[f,p]=this.quill.getLeaf(s.index),[y,h]=s.length===0?[f,p]:this.quill.getLeaf(s.index+s.length),d=f instanceof Ai?f.value().slice(0,p):"",u=y instanceof Ai?y.value().slice(h):"",c={collapsed:s.length===0,empty:s.length===0&&a.length()<=1,format:this.quill.getFormat(s),line:a,offset:l,prefix:d,suffix:u,event:t};n.some(_=>{if(_.collapsed!=null&&_.collapsed!==c.collapsed||_.empty!=null&&_.empty!==c.empty||_.offset!=null&&_.offset!==c.offset)return!1;if(Array.isArray(_.format)){if(_.format.every(g=>c.format[g]==null))return!1}else if(typeof _.format=="object"&&!Object.keys(_.format).every(g=>_.format[g]===!0?c.format[g]!=null:_.format[g]===!1?c.format[g]==null:Fr(_.format[g],c.format[g])))return!1;return _.prefix!=null&&!_.prefix.test(c.prefix)||_.suffix!=null&&!_.suffix.test(c.suffix)?!1:_.handler.call(this,s,c,_)!==!0})&&t.preventDefault()})}handleBackspace(t,e){let i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let n={},[o]=this.quill.getLine(t.index),s=new ue.default().retain(t.index-i).delete(i);if(e.offset===0){let[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){let f=o.formats(),p=this.quill.getFormat(t.index-1,1);if(n=ue.AttributeMap.diff(f,p)||{},Object.keys(n).length>0){let y=new ue.default().retain(t.index+o.length()-2).retain(1,n);s=s.compose(y)}}}this.quill.updateContents(s,lt.sources.USER),this.quill.focus()}handleDelete(t,e){let i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let n={},[o]=this.quill.getLine(t.index),s=new ue.default().retain(t.index).delete(i);if(e.offset>=o.length()-1){let[a]=this.quill.getLine(t.index+1);if(a){let l=o.formats(),f=this.quill.getFormat(t.index,1);n=ue.AttributeMap.diff(l,f)||{},Object.keys(n).length>0&&(s=s.retain(a.length()-1).retain(1,n))}}this.quill.updateContents(s,lt.sources.USER),this.quill.focus()}handleDeleteRange(t){Dn({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){let i=Object.keys(e.format).reduce((o,s)=>(this.quill.scroll.query(s,yt.BLOCK)&&!Array.isArray(e.format[s])&&(o[s]=e.format[s]),o),{}),n=new ue.default().retain(t.index).delete(t.length).insert(`
`,i);this.quill.updateContents(n,lt.sources.USER),this.quill.setSelection(t.index+1,lt.sources.SILENT),this.quill.focus()}},vO={bindings:{bold:Ul("bold"),italic:Ul("italic"),underline:Ul("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",lt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",lt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,t){t.format.indent!=null?this.quill.format("indent","-1",lt.sources.USER):t.format.list!=null&&this.quill.format("list",!1,lt.sources.USER)}},"indent code-block":Jp(!0),"outdent code-block":Jp(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,lt.sources.USER)}},tab:{key:"Tab",handler(r,t){if(t.format.table)return!0;this.quill.history.cutoff();let e=new ue.default().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(e,lt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,lt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,lt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,t){let e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(r.index,r.length,e,lt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){let[t,e]=this.quill.getLine(r.index),i=hr(Pt({},t.formats()),{list:"checked"}),n=new ue.default().retain(r.index).insert(`
`,i).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,lt.sources.USER),this.quill.setSelection(r.index+1,lt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,t){let[e,i]=this.quill.getLine(r.index),n=new ue.default().retain(r.index).insert(`
`,t.format).retain(e.length()-i-1).retain(1,{header:null});this.quill.updateContents(n,lt.sources.USER),this.quill.setSelection(r.index+1,lt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){let t=this.quill.getModule("table");if(t){let[e,i,n,o]=t.getTable(r),s=wO(e,i,n,o);if(s==null)return;let a=e.offset();if(s<0){let l=new ue.default().retain(a).insert(`
`);this.quill.updateContents(l,lt.sources.USER),this.quill.setSelection(r.index+1,r.length,lt.sources.SILENT)}else if(s>0){a+=e.length();let l=new ue.default().retain(a).insert(`
`);this.quill.updateContents(l,lt.sources.USER),this.quill.setSelection(a,lt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,t){let{event:e,line:i}=t,n=i.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(n-1,lt.sources.USER):this.quill.setSelection(n+i.length(),lt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,t){if(this.quill.scroll.query("list")==null)return!0;let{length:e}=t.prefix,[i,n]=this.quill.getLine(r.index);if(n>e)return!0;let o;switch(t.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(r.index," ",lt.sources.USER),this.quill.history.cutoff();let s=new ue.default().retain(r.index-n).delete(e+1).retain(i.length()-2-n).retain(1,{list:o});return this.quill.updateContents(s,lt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-e,lt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){let[t,e]=this.quill.getLine(r.index),i=2,n=t;for(;n!=null&&n.length()<=1&&n.formats()["code-block"];)if(n=n.prev,i-=1,i<=0){let o=new ue.default().retain(r.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,lt.sources.USER),this.quill.setSelection(r.index-1,lt.sources.SILENT),!1}return!0}},"embed left":Ns("ArrowLeft",!1),"embed left shift":Ns("ArrowLeft",!0),"embed right":Ns("ArrowRight",!1),"embed right shift":Ns("ArrowRight",!0),"table down":Zp(!1),"table up":Zp(!0)}};Qr.DEFAULTS=vO;function Jp(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(t,e){let{event:i}=e,n=this.quill.scroll.query("code-block"),{TAB:o}=n;if(t.length===0&&!i.shiftKey){this.quill.insertText(t.index,o,lt.sources.USER),this.quill.setSelection(t.index+o.length,lt.sources.SILENT);return}let s=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t),{index:a,length:l}=t;s.forEach((f,p)=>{r?(f.insertAt(0,o),p===0?a+=o.length:l+=o.length):f.domNode.textContent.startsWith(o)&&(f.deleteAt(0,o.length),p===0?a-=o.length:l-=o.length)}),this.quill.update(lt.sources.USER),this.quill.setSelection(a,l,lt.sources.SILENT)}}}function Ns(r,t){return{key:r,shiftKey:t,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:n}=i;r==="ArrowRight"&&(n+=i.length+1);let[o]=this.quill.getLeaf(n);return o instanceof Ht?(r==="ArrowLeft"?t?this.quill.setSelection(i.index-1,i.length+1,lt.sources.USER):this.quill.setSelection(i.index-1,lt.sources.USER):t?this.quill.setSelection(i.index,i.length+1,lt.sources.USER):this.quill.setSelection(i.index+i.length+1,lt.sources.USER),!1):!0}}}function Ul(r){return{key:r[0],shortKey:!0,handler(t,e){this.quill.format(r,!e.format[r],lt.sources.USER)}}}function Zp(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){let i=r?"prev":"next",n=e.line,o=n.parent[i];if(o!=null){if(o.statics.blotName==="table-row"){let s=o.children.head,a=n;for(;a.prev!=null;)a=a.prev,s=s.next;let l=s.offset(this.quill.scroll)+Math.min(e.offset,s.length()-1);this.quill.setSelection(l,0,lt.sources.USER)}}else{let s=n.table()[i];s!=null&&(r?this.quill.setSelection(s.offset(this.quill.scroll)+s.length()-1,0,lt.sources.USER):this.quill.setSelection(s.offset(this.quill.scroll),0,lt.sources.USER))}return!1}}}function bO(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=Ve(r);else return null;return r.shortKey&&(r[yO]=r.shortKey,delete r.shortKey),r}function Dn(r){let{quill:t,range:e}=r,i=t.getLines(e),n={};if(i.length>1){let o=i[0].formats(),s=i[i.length-1].formats();n=ue.AttributeMap.diff(s,o)||{}}t.deleteText(e,lt.sources.USER),Object.keys(n).length>0&&t.formatLine(e.index,1,n,lt.sources.USER),t.setSelection(e.index,lt.sources.SILENT)}function wO(r,t,e,i){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?i===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}var xO=/font-weight:\s*normal/,kO=["P","OL","UL"],Xp=r=>r&&kO.includes(r.tagName),EO=r=>{Array.from(r.querySelectorAll("br")).filter(t=>Xp(t.previousElementSibling)&&Xp(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},OO=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(xO)}).forEach(t=>{var i;let e=r.createDocumentFragment();e.append(...t.childNodes),(i=t.parentNode)==null||i.replaceChild(e,t)})};function Hl(r){r.querySelector('[id^="docs-internal-guid-"]')&&(OO(r),EO(r))}var AO=/\bmso-list:[^;]*ignore/i,SO=/\bmso-list:[^;]*\bl(\d+)/i,TO=/\bmso-list:[^;]*\blevel(\d+)/i,CO=(r,t)=>{let e=r.getAttribute("style"),i=e==null?void 0:e.match(SO);if(!i)return null;let n=Number(i[1]),o=e==null?void 0:e.match(TO),s=o?Number(o[1]):1,a=new RegExp(`@list l${n}:level${s}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),f=l&&l[1]==="bullet"?"bullet":"ordered";return{id:n,indent:s,type:f,element:r}},NO=r=>{var s,a;let t=Array.from(r.querySelectorAll("[style*=mso-list]")),e=[],i=[];t.forEach(l=>{(l.getAttribute("style")||"").match(AO)?e.push(l):i.push(l)}),e.forEach(l=>{var f;return(f=l.parentNode)==null?void 0:f.removeChild(l)});let n=r.documentElement.innerHTML,o=i.map(l=>CO(l,n)).filter(l=>l);for(;o.length;){let l=[],f=o.shift();for(;f;)l.push(f),f=o.length&&((s=o[0])==null?void 0:s.element)===f.element.nextElementSibling&&o[0].id===f.id?o.shift():null;let p=document.createElement("ul");l.forEach(d=>{let u=document.createElement("li");u.setAttribute("data-list",d.type),d.indent>1&&u.setAttribute("class",`ql-indent-${d.indent-1}`),u.innerHTML=d.element.innerHTML,p.appendChild(u)});let y=(a=l[0])==null?void 0:a.element,{parentNode:h}=y!=null?y:{};y&&(h==null||h.replaceChild(p,y)),l.slice(1).forEach(d=>{let{element:u}=d;h==null||h.removeChild(u)})}};function zl(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&NO(r)}var LO=[zl,Hl],PO=r=>{r.documentElement&&LO.forEach(t=>{t(r)})},Qp=PO;var jO=Oe("quill:clipboard"),RO=[[Node.TEXT_NODE,GO],[Node.TEXT_NODE,em],["br",$O],[Node.ELEMENT_NODE,em],[Node.ELEMENT_NODE,MO],[Node.ELEMENT_NODE,DO],[Node.ELEMENT_NODE,zO],["li",UO],["ol, ul",HO],["pre",BO],["tr",VO],["b",Vl("bold")],["i",Vl("italic")],["strike",Vl("strike")],["style",FO]],IO=[Gp,As].reduce((r,t)=>(r[t.keyName]=t,r),{}),tm=[Os,qn,In,Ss,Ts,Cs].reduce((r,t)=>(r[t.keyName]=t,r),{}),Mn=class extends Kt{constructor(t,e){var i;super(t,e),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],RO.concat((i=this.options.matchers)!=null?i:[]).forEach(n=>{let[o,s]=n;this.addMatcher(o,s)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n[Jt.blotName])return new ve.default().insert(i||"",{[Jt.blotName]:n[Jt.blotName]});if(!e)return new ve.default().insert(i||"",n);let o=this.convertHTML(e);return $n(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||n.table)?o.compose(new ve.default().retain(o.length()-1).delete(1)):o}normalizeHTML(t){Qp(t)}convertHTML(t){let e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);let i=e.body,n=new WeakMap,[o,s]=this.prepareMatching(i,n);return Ps(this.quill.scroll,i,o,s,n)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lt.sources.API;if(typeof t=="string"){let n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,lt.sources.SILENT)}else{let n=this.convert({html:e,text:""});this.quill.updateContents(new ve.default().retain(t).concat(n),i),this.quill.setSelection(t+n.length(),lt.sources.SILENT)}}onCaptureCopy(t){var s,a;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();let[i]=this.quill.selection.getRange();if(i==null)return;let{html:n,text:o}=this.onCopy(i,e);(s=t.clipboardData)==null||s.setData("text/plain",o),(a=t.clipboardData)==null||a.setData("text/html",n),e&&Dn({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var s,a,l,f,p;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();let e=this.quill.getSelection(!0);if(e==null)return;let i=(s=t.clipboardData)==null?void 0:s.getData("text/html"),n=(a=t.clipboardData)==null?void 0:a.getData("text/plain");if(!i&&!n){let y=(l=t.clipboardData)==null?void 0:l.getData("text/uri-list");y&&(n=this.normalizeURIList(y))}let o=Array.from(((f=t.clipboardData)==null?void 0:f.files)||[]);if(!i&&o.length>0){this.quill.uploader.upload(e,o);return}if(i&&o.length>0){let y=new DOMParser().parseFromString(i,"text/html");if(y.body.childElementCount===1&&((p=y.body.firstElementChild)==null?void 0:p.tagName)==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:i,text:n})}onCopy(t){let e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:n}=e,o=this.quill.getFormat(t.index),s=this.convert({text:i,html:n},o);jO.log("onPaste",s,{text:i,html:n});let a=new ve.default().retain(t.index).delete(t.length).concat(s);this.quill.updateContents(a,lt.sources.USER),this.quill.setSelection(a.length()-t.length,lt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){let i=[],n=[];return this.matchers.forEach(o=>{let[s,a]=o;switch(s){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:i.push(a);break;default:Array.from(t.querySelectorAll(s)).forEach(l=>{if(e.has(l)){let f=e.get(l);f==null||f.push(a)}else e.set(l,[a])});break}}),[i,n]}};at(Mn,"DEFAULTS",{matchers:[]});function ti(r,t,e,i){return i.query(t)?r.reduce((n,o)=>{if(!o.insert)return n;if(o.attributes&&o.attributes[t])return n.push(o);let s=e?{[t]:e}:{};return n.insert(o.insert,Pt(Pt({},s),o.attributes))},new ve.default):r}function $n(r,t){let e="";for(let i=r.ops.length-1;i>=0&&e.length<t.length;--i){let n=r.ops[i];if(typeof n.insert!="string")break;e=n.insert+e}return e.slice(-1*t.length)===t}function Nr(r,t){if(!(r instanceof Element))return!1;let e=t.query(r);return e&&e.prototype instanceof Ht?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function qO(r,t){return r.previousElementSibling&&r.nextElementSibling&&!Nr(r.previousElementSibling,t)&&!Nr(r.nextElementSibling,t)}var Ls=new WeakMap;function rm(r){return r==null?!1:(Ls.has(r)||(r.tagName==="PRE"?Ls.set(r,!0):Ls.set(r,rm(r.parentNode))),Ls.get(r))}function Ps(r,t,e,i,n){return t.nodeType===t.TEXT_NODE?i.reduce((o,s)=>s(t,o,r),new ve.default):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((o,s)=>{let a=Ps(r,s,e,i,n);return s.nodeType===t.ELEMENT_NODE&&(a=e.reduce((l,f)=>f(s,l,r),a),a=(n.get(s)||[]).reduce((l,f)=>f(s,l,r),a)),o.concat(a)},new ve.default):new ve.default}function Vl(r){return(t,e,i)=>ti(e,r,!0,i)}function DO(r,t,e){let i=ce.keys(r),n=te.keys(r),o=_e.keys(r),s={};return i.concat(n).concat(o).forEach(a=>{let l=e.query(a,yt.ATTRIBUTE);l!=null&&(s[l.attrName]=l.value(r),s[l.attrName])||(l=IO[a],l!=null&&(l.attrName===a||l.keyName===a)&&(s[l.attrName]=l.value(r)||void 0),l=tm[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=tm[a],s[l.attrName]=l.value(r)||void 0))}),Object.entries(s).reduce((a,l)=>{let[f,p]=l;return ti(a,f,p,e)},t)}function MO(r,t,e){let i=e.query(r);if(i==null)return t;if(i.prototype instanceof Ht){let n={},o=i.value(r);if(o!=null)return n[i.blotName]=o,new ve.default().insert(n,i.formats(r,e))}else if(i.prototype instanceof Ur&&!$n(t,`
`)&&t.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return ti(t,i.blotName,i.formats(r,e),e);return t}function $O(r,t){return $n(t,`
`)||t.insert(`
`),t}function BO(r,t,e){let i=e.query("code-block"),n=i&&"formats"in i&&typeof i.formats=="function"?i.formats(r,e):!0;return ti(t,"code-block",n,e)}function FO(){return new ve.default}function UO(r,t,e){let i=e.query(r);if(i==null||i.blotName!=="list"||!$n(t,`
`))return t;let n=-1,o=r.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(n+=1),o=o.parentNode;return n<=0?t:t.reduce((s,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?s.push(a):s.insert(a.insert,Pt({indent:n},a.attributes||{})):s,new ve.default)}function HO(r,t,e){let i=r,n=i.tagName==="OL"?"ordered":"bullet",o=i.getAttribute("data-checked");return o&&(n=o==="true"?"checked":"unchecked"),ti(t,"list",n,e)}function em(r,t,e){if(!$n(t,`
`)){if(Nr(r,e)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&r.nextSibling){let i=r.nextSibling;for(;i!=null;){if(Nr(i,e))return t.insert(`
`);let n=e.query(i);if(n&&n.prototype instanceof ie)return t.insert(`
`);i=i.firstChild}}}return t}function zO(r,t,e){var o;let i={},n=r.style||{};return n.fontStyle==="italic"&&(i.italic=!0),n.textDecoration==="underline"&&(i.underline=!0),n.textDecoration==="line-through"&&(i.strike=!0),(((o=n.fontWeight)==null?void 0:o.startsWith("bold"))||parseInt(n.fontWeight,10)>=700)&&(i.bold=!0),t=Object.entries(i).reduce((s,a)=>{let[l,f]=a;return ti(s,l,f,e)},t),parseFloat(n.textIndent||0)>0?new ve.default().insert("	").concat(t):t}function VO(r,t,e){var n,o;let i=((n=r.parentElement)==null?void 0:n.tagName)==="TABLE"?r.parentElement:(o=r.parentElement)==null?void 0:o.parentElement;if(i!=null){let a=Array.from(i.querySelectorAll("tr")).indexOf(r)+1;return ti(t,"table",a,e)}return t}function GO(r,t,e){var n;let i=r.data;if(((n=r.parentElement)==null?void 0:n.tagName)==="O:P")return t.insert(i.trim());if(!rm(r)){if(i.trim().length===0&&i.includes(`
`)&&!qO(r,e))return t;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&Nr(r.parentElement,e)||r.previousSibling instanceof Element&&Nr(r.previousSibling,e))&&(i=i.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&Nr(r.parentElement,e)||r.nextSibling instanceof Element&&Nr(r.nextSibling,e))&&(i=i.replace(/ $/,"")),i=i.replaceAll("\xA0"," ")}return t.insert(i)}var Bn=class extends Kt{constructor(e,i){super(e,i);at(this,"lastRecorded",0);at(this,"ignoreChange",!1);at(this,"stack",{undo:[],redo:[]});at(this,"currentRange",null);this.quill.on(lt.events.EDITOR_CHANGE,(n,o,s,a)=>{n===lt.events.SELECTION_CHANGE?o&&a!==lt.sources.SILENT&&(this.currentRange=o):n===lt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||a===lt.sources.USER?this.record(o,s):this.transform(o)),this.currentRange=Gl(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(e,i){if(this.stack[e].length===0)return;let n=this.stack[e].pop();if(!n)return;let o=this.quill.getContents(),s=n.delta.invert(o);this.stack[i].push({delta:s,range:Gl(n.range,s)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,lt.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,i){if(e.ops.length===0)return;this.stack.redo=[];let n=e.invert(i),o=this.currentRange,s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){let a=this.stack.undo.pop();a&&(n=n.compose(a.delta),o=a.range)}else this.lastRecorded=s;n.length()!==0&&(this.stack.undo.push({delta:n,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){im(this.stack.undo,e),im(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,lt.sources.USER);else{let i=WO(this.quill.scroll,e.delta);this.quill.setSelection(i,lt.sources.USER)}}};at(Bn,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function im(r,t){let e=t;for(let i=r.length-1;i>=0;i-=1){let n=r[i];r[i]={delta:e.transform(n.delta,!0),range:n.range&&Gl(n.range,e)},e=n.delta.transform(e),r[i].delta.length()===0&&r.splice(i,1)}}function KO(r,t){let e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(i=>r.query(i,yt.BLOCK)!=null):!1}function WO(r,t){let e=t.reduce((n,o)=>n+(o.delete||0),0),i=t.length()-e;return KO(r,t)&&(i-=1),i}function Gl(r,t){if(!r)return r;let e=t.transformPosition(r.index),i=t.transformPosition(r.index+r.length);return{index:e,length:i-e}}var nm=Gt(Ee(),1);var js=class extends Kt{constructor(t,e){super(t,e),t.root.addEventListener("drop",i=>{var s;i.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){let a=document.caretPositionFromPoint(i.clientX,i.clientY);n=document.createRange(),n.setStart(a.offsetNode,a.offset),n.setEnd(a.offsetNode,a.offset)}let o=n&&t.selection.normalizeNative(n);if(o){let a=t.selection.normalizedToRange(o);(s=i.dataTransfer)!=null&&s.files&&this.upload(a,i.dataTransfer.files)}})}upload(t,e){let i=[];Array.from(e).forEach(n=>{var o;n&&((o=this.options.mimetypes)==null?void 0:o.includes(n.type))&&i.push(n)}),i.length>0&&this.options.handler.call(this,t,i)}};js.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,t){if(!this.quill.scroll.query("image"))return;let e=t.map(i=>new Promise(n=>{let o=new FileReader;o.onload=()=>{n(o.result)},o.readAsDataURL(i)}));Promise.all(e).then(i=>{let n=i.reduce((o,s)=>o.insert({image:s}),new nm.default().retain(r.index).delete(r.length));this.quill.updateContents(n,vt.sources.USER),this.quill.setSelection(r.index+i.length,vt.sources.SILENT)})}};var om=js;var Lr=Gt(Ee(),1);var sm=Gt(Ee(),1);var YO=["insertText","insertReplacementText"],Kl=class extends Kt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||t.on(lt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Dn({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){let i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new sm.default().retain(t.index).insert(e,i),lt.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,lt.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!YO.includes(t.inputType))return;let e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;let i=JO(t);if(i==null)return;let n=this.quill.selection.normalizeNative(e),o=n?this.quill.selection.normalizedToRange(n):null;o&&this.replaceText(o,i)&&t.preventDefault()}handleCompositionStart(){let t=this.quill.getSelection();t&&this.replaceText(t)}};function JO(r){var t;return typeof r.data=="string"?r.data:(t=r.dataTransfer)!=null&&t.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}var am=Kl;var ZO=/Mac/i.test(navigator.platform),XO=100,QO=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||ZO&&r.key==="a"&&r.ctrlKey===!0),Wl=class extends Kt{constructor(e,i){super(e,i);at(this,"isListening",!1);at(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,i){let{line:n,event:o}=i;if(!(n instanceof ge)||!n.uiNode)return!0;let s=getComputedStyle(n.domNode).direction==="rtl";return s&&o.key!=="ArrowRight"||!s&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(o.shiftKey?1:0),lt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&QO(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+XO,this.isListening)return;this.isListening=!0;let e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){let e=document.getSelection();if(!e)return;let i=e.getRangeAt(0);if(i.collapsed!==!0||i.startOffset!==0)return;let n=this.quill.scroll.find(i.startContainer);if(!(n instanceof ge)||!n.uiNode)return;let o=document.createRange();o.setStartAfter(n.uiNode),o.setEndAfter(n.uiNode),e.removeAllRanges(),e.addRange(o)}},lm=Wl;lt.register({"blots/block":It,"blots/block/embed":ie,"blots/break":se,"blots/container":Re,"blots/cursor":Sr,"blots/embed":Ii,"blots/inline":ae,"blots/scroll":Vp,"blots/text":Yt,"modules/clipboard":Mn,"modules/history":Bn,"modules/keyboard":Qr,"modules/uploader":om,"modules/input":am,"modules/uiNode":lm});var Rs=lt;var Yl=class extends te{add(t,e){let i=0;if(e==="+1"||e==="-1"){let n=this.value(t)||0;i=e==="+1"?n+1:n-1}else typeof e=="number"&&(i=e);return i===0?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}},tA=new Yl("indent","ql-indent",{scope:yt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),um=tA;var Fn=class extends It{};at(Fn,"blotName","blockquote"),at(Fn,"tagName","blockquote");var cm=Fn;var Un=class extends It{static formats(t){return this.tagName.indexOf(t.tagName)+1}};at(Un,"blotName","header"),at(Un,"tagName",["H1","H2","H3","H4","H5","H6"]);var fm=Un;var ei=class extends Re{};ei.blotName="list-container";ei.tagName="OL";var Pr=class extends It{static create(t){let e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){lt.register(ei)}constructor(t,e){super(t,e);let i=e.ownerDocument.createElement("span"),n=o=>{if(!t.isEnabled())return;let s=this.statics.formats(e,t);s==="checked"?(this.format("list","unchecked"),o.preventDefault()):s==="unchecked"&&(this.format("list","checked"),o.preventDefault())};i.addEventListener("mousedown",n),i.addEventListener("touchstart",n),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}};Pr.blotName="list";Pr.tagName="LI";ei.allowedChildren=[Pr];Pr.requiredContainer=ei;var Hn=class extends ae{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};at(Hn,"blotName","bold"),at(Hn,"tagName",["STRONG","B"]);var Bi=Hn;var zn=class extends Bi{};at(zn,"blotName","italic"),at(zn,"tagName",["EM","I"]);var hm=zn;var Ae=class extends ae{static create(t){let e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Jl(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}};at(Ae,"blotName","link"),at(Ae,"tagName","A"),at(Ae,"SANITIZED_URL","about:blank"),at(Ae,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Jl(r,t){let e=document.createElement("a");e.href=r;let i=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(i)>-1}var Vn=class extends ae{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}};at(Vn,"blotName","script"),at(Vn,"tagName",["SUB","SUP"]);var dm=Vn;var Gn=class extends Bi{};at(Gn,"blotName","strike"),at(Gn,"tagName",["S","STRIKE"]);var pm=Gn;var Kn=class extends ae{};at(Kn,"blotName","underline"),at(Kn,"tagName","U");var mm=Kn;var Fi=class extends Ii{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){let{formula:t}=this.value();return`<span>${t}</span>`}};at(Fi,"blotName","formula"),at(Fi,"className","ql-formula"),at(Fi,"tagName","SPAN");var gm=Fi;var _m=["alt","height","width"],Wn=class extends Ht{static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return _m.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Jl(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){_m.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}};at(Wn,"blotName","image"),at(Wn,"tagName","IMG");var ym=Wn;var vm=["height","width"],Ui=class extends ie{static create(t){let e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return vm.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static sanitize(t){return Ae.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){vm.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){let{video:t}=this.value();return`<a href="${t}">${t}</a>`}};at(Ui,"blotName","video"),at(Ui,"className","ql-video"),at(Ui,"tagName","IFRAME");var bm=Ui;var Is=Gt(Ee(),1);var Yn=new te("code-token","hljs",{scope:yt.INLINE}),Fe=class extends ae{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(Jt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),Yn.add(this.domNode,i)}format(t,e){t!==Fe.blotName?super.format(t,e):e?Yn.add(this.domNode,e):(Yn.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Yn.value(this.domNode)||this.unwrap()}};Fe.blotName="code-token";Fe.className="ql-token";var be=class extends Jt{static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Fe.blotName,!1),super.replaceWith(t,e)}},ri=class extends Ke{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===be.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(t,e)}))}formatAt(t,e,i,n){i===be.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,n)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let n=`${Array.from(this.domNode.childNodes).filter(s=>s!==this.uiNode).map(s=>s.textContent).join(`
`)}
`,o=be.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){let s=this.children.reduce((l,f)=>l.concat(_l(f,!1)),new Is.default),a=t(n,o);s.diff(a).reduce((l,f)=>{let{retain:p,attributes:y}=f;return p?(y&&Object.keys(y).forEach(h=>{[be.blotName,Fe.blotName].includes(h)&&this.formatAt(l,p,h,y[h])}),l+p):l},0)}this.cachedText=n,this.forceNext=!1}}html(t,e){let[i]=this.children.find(t);return`<pre data-language="${i?be.formats(i.domNode):"plain"}">
${Zr(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let e=be.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}};ri.allowedChildren=[be];be.requiredContainer=ri;be.allowedChildren=[Fe,Sr,Yt,se];var eA=(r,t,e)=>{if(typeof r.versionString=="string"){let i=r.versionString.split(".")[0];if(parseInt(i,10)>=11)return r.highlight(e,{language:t}).value}return r.highlight(t,e).value},Jn=class extends Kt{static register(){lt.register(Fe,!0),lt.register(be,!0),lt.register(ri,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,n)=>{let{key:o}=n;return i[o]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(lt.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof ri))return;let e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:n,label:o}=i,s=e.ownerDocument.createElement("option");s.textContent=o,s.setAttribute("value",n),e.appendChild(s)}),e.addEventListener("change",()=>{t.format(be.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=be.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(lt.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(lt.sources.USER);let i=this.quill.getSelection();(t==null?this.quill.scroll.descendants(ri):[t]).forEach(o=>{o.highlight(this.highlightBlot,e)}),this.quill.update(lt.sources.SILENT),i!=null&&this.quill.setSelection(i,lt.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Zr(t).split(`
`).reduce((n,o,s)=>(s!==0&&n.insert(`
`,{[Jt.blotName]:e}),n.insert(o)),new Is.default);let i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(Jt.className),i.innerHTML=eA(this.options.hljs,e,t),Ps(this.quill.scroll,i,[(n,o)=>{let s=Yn.value(n);return s?o.compose(new Is.default().retain(o.length(),{[Fe.blotName]:s})):o}],[(n,o)=>n.data.split(`
`).reduce((s,a,l)=>(l!==0&&s.insert(`
`,{[Jt.blotName]:e}),s.insert(a)),o)],new WeakMap)}};Jn.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var wm=Gt(Ee(),1);var Zl=class extends It{static create(t){let e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",qs()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Zl.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},we=Zl;at(we,"blotName","table"),at(we,"tagName","TD");var qe=class extends Re{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),n=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===n.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;let i=e.formats(),n=e.next.formats();if(i.table!==n.table){let o=this.splitAfter(e);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}};at(qe,"blotName","table-row"),at(qe,"tagName","TR");var Se=class extends Re{};at(Se,"blotName","table-body"),at(Se,"tagName","TBODY");var lr=class extends Re{balanceCells(){let t=this.descendants(qe),e=t.reduce((i,n)=>Math.max(n.children.length,i),0);t.forEach(i=>{new Array(e-i.children.length).fill(0).forEach(()=>{let n;i.children.head!=null&&(n=we.formats(i.children.head.domNode));let o=this.scroll.create(we.blotName,n);i.appendChild(o),o.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){let[e]=this.descendant(Se);e==null||e.children.head==null||e.children.forEach(i=>{let n=i.children.at(t);n!=null&&n.remove()})}insertColumn(t){let[e]=this.descendant(Se);e==null||e.children.head==null||e.children.forEach(i=>{let n=i.children.at(t),o=we.formats(i.children.head.domNode),s=this.scroll.create(we.blotName,o);i.insertBefore(s,n)})}insertRow(t){let[e]=this.descendant(Se);if(e==null||e.children.head==null)return;let i=qs(),n=this.scroll.create(qe.blotName);e.children.head.children.forEach(()=>{let s=this.scroll.create(we.blotName,i);n.appendChild(s)});let o=e.children.at(t);e.insertBefore(n,o)}rows(){let t=this.children.head;return t==null?[]:t.children.map(e=>e)}};at(lr,"blotName","table-container"),at(lr,"tagName","TABLE");lr.allowedChildren=[Se];Se.requiredContainer=lr;Se.allowedChildren=[qe];qe.requiredContainer=Se;qe.allowedChildren=[we];we.requiredContainer=qe;function qs(){return`row-${Math.random().toString(36).slice(2,6)}`}var Xl=class extends Kt{static register(){lt.register(we),lt.register(qe),lt.register(Se),lt.register(lr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(lr).forEach(t=>{t.balanceCells()})}deleteColumn(){let[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(lt.sources.USER))}deleteRow(){let[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(lt.sources.USER))}deleteTable(){let[t]=this.getTable();if(t==null)return;let e=t.offset();t.remove(),this.quill.update(lt.sources.USER),this.quill.setSelection(e,lt.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];let[e,i]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==we.blotName)return[null,null,null,-1];let n=e.parent;return[n.parent.parent,n,e,i]}insertColumn(t){let e=this.quill.getSelection();if(!e)return;let[i,n,o]=this.getTable(e);if(o==null)return;let s=o.cellOffset();i.insertColumn(s+t),this.quill.update(lt.sources.USER);let a=n.rowOffset();t===0&&(a+=1),this.quill.setSelection(e.index+a,e.length,lt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){let e=this.quill.getSelection();if(!e)return;let[i,n,o]=this.getTable(e);if(o==null)return;let s=n.rowOffset();i.insertRow(s+t),this.quill.update(lt.sources.USER),t>0?this.quill.setSelection(e,lt.sources.SILENT):this.quill.setSelection(e.index+n.children.length,e.length,lt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){let i=this.quill.getSelection();if(i==null)return;let n=new Array(t).fill(0).reduce(o=>{let s=new Array(e).fill(`
`).join("");return o.insert(s,{table:qs()})},new wm.default().retain(i.index));this.quill.updateContents(n,lt.sources.USER),this.quill.setSelection(i.index,lt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(lt.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(lt.events.TEXT_CHANGE,(i,n,o)=>{o===lt.sources.USER&&this.balanceTables()}),!0):!1)})}},xm=Xl;var Om=Gt(Ee(),1);var km=Oe("quill:toolbar"),Hi=class extends Kt{constructor(t,e){var i,n;if(super(t,e),Array.isArray(this.options.container)){let o=document.createElement("div");o.setAttribute("role","toolbar"),rA(o,this.options.container),(n=(i=t.container)==null?void 0:i.parentNode)==null||n.insertBefore(o,t.container),this.container=o}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){km.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(o=>{var a;let s=(a=this.options.handlers)==null?void 0:a[o];s&&this.addHandler(o,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(o=>{this.attach(o)}),this.quill.on(lt.events.EDITOR_CHANGE,()=>{let[o]=this.quill.selection.getRange();this.update(o)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(n=>n.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){km.warn("ignoring attaching to nonexistent format",e,t);return}let i=t.tagName==="SELECT"?"change":"click";t.addEventListener(i,n=>{let o;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;let a=t.options[t.selectedIndex];a.hasAttribute("selected")?o=!1:o=a.value||!1}else t.classList.contains("ql-active")?o=!1:o=t.value||!t.hasAttribute("value"),n.preventDefault();this.quill.focus();let[s]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof Ht){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new Om.default().retain(s.index).delete(s.length).insert({[e]:o}),lt.sources.USER)}else this.quill.format(e,o,lt.sources.USER);this.update(s)}),this.controls.push([e,t])}update(t){let e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(i=>{let[n,o]=i;if(o.tagName==="SELECT"){let s=null;if(t==null)s=null;else if(e[n]==null)s=o.querySelector("option[selected]");else if(!Array.isArray(e[n])){let a=e[n];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),s=o.querySelector(`option[value="${a}"]`)}s==null?(o.value="",o.selectedIndex=-1):s.selected=!0}else if(t==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){let s=e[n],a=s===o.getAttribute("value")||s!=null&&s.toString()===o.getAttribute("value")||s==null&&!o.getAttribute("value");o.classList.toggle("ql-active",a),o.setAttribute("aria-pressed",a.toString())}else{let s=e[n]!=null;o.classList.toggle("ql-active",s),o.setAttribute("aria-pressed",s.toString())}})}};Hi.DEFAULTS={};function Em(r,t,e){let i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${t}`),i.setAttribute("aria-pressed","false"),e!=null?(i.value=e,i.setAttribute("aria-label",`${t}: ${e}`)):i.setAttribute("aria-label",t),r.appendChild(i)}function rA(r,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{let i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(n=>{if(typeof n=="string")Em(i,n);else{let o=Object.keys(n)[0],s=n[o];Array.isArray(s)?iA(i,o,s):Em(i,o,s)}}),r.appendChild(i)})}function iA(r,t,e){let i=document.createElement("select");i.classList.add(`ql-${t}`),e.forEach(n=>{let o=document.createElement("option");n!==!1?o.setAttribute("value",String(n)):o.setAttribute("selected","selected"),i.appendChild(o)}),r.appendChild(i)}Hi.DEFAULTS={container:null,handlers:{clean(){let r=this.quill.getSelection();if(r!=null)if(r.length===0){let t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,yt.INLINE)!=null&&this.quill.format(e,!1,lt.sources.USER)})}else this.quill.removeFormat(r.index,r.length,lt.sources.USER)},direction(r){let{align:t}=this.quill.getFormat();r==="rtl"&&t==null?this.quill.format("align","right",lt.sources.USER):!r&&t==="right"&&this.quill.format("align",!1,lt.sources.USER),this.quill.format("direction",r,lt.sources.USER)},indent(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t),i=parseInt(e.indent||0,10);if(r==="+1"||r==="-1"){let n=r==="+1"?1:-1;e.direction==="rtl"&&(n*=-1),this.quill.format("indent",i+n,lt.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,lt.sources.USER)},list(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t);r==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,lt.sources.USER):this.quill.format("list","unchecked",lt.sources.USER):this.quill.format("list",r,lt.sources.USER)}}};var nA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',oA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',sA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',aA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',lA='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',uA='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',cA='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',fA='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Am='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',hA='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',dA='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',pA='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',mA='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',gA='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',_A='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',yA='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vA='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',bA='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',wA='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',xA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',kA='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',EA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',OA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',AA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',SA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',TA='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',CA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',NA='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',LA='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',PA='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',jA='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',RA='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',IA='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',jr={align:{"":nA,center:oA,right:sA,justify:aA},background:lA,blockquote:uA,bold:cA,clean:fA,code:Am,"code-block":Am,color:hA,direction:{"":dA,rtl:pA},formula:mA,header:{1:gA,2:_A,3:yA,4:vA,5:bA,6:wA},italic:xA,image:kA,indent:{"+1":EA,"-1":OA},link:AA,list:{bullet:SA,check:TA,ordered:CA},script:{sub:NA,super:LA},strike:PA,table:jA,underline:RA,video:IA};var qA='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',Sm=0;function Tm(r,t){r.setAttribute(t,`${r.getAttribute(t)!=="true"}`)}var Ql=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Tm(this.label,"aria-expanded"),Tm(this.options,"aria-hidden")}buildItem(t){let e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");let i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.selectItem(e,!0),n.preventDefault();break;case"Escape":this.escape(),n.preventDefault();break;default:}}),e}buildLabel(){let t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=qA,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){let t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Sm}`,Sm+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{let i=this.buildItem(e);t.appendChild(i),e.selected===!0&&this.selectItem(i)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.container.querySelector(".ql-selected");t!==i&&(i!=null&&i.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){let i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);let e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},Rr=Ql;var tu=class extends Rr{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(t){let e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);let i=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=n:i.style.fill=n)}},Ds=tu;var eu=class extends Rr{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=e[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);let i=t||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},Ms=eu;var DA=r=>{let{overflowY:t}=getComputedStyle(r,null);return t!=="visible"&&t!=="clip"},ru=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,DA(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){let e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");let n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),s=0;if(o.right>n.right&&(s=n.right-o.right,this.root.style.left=`${e+s}px`),o.left<n.left&&(s=n.left-o.left,this.root.style.left=`${e+s}px`),o.bottom>n.bottom){let a=o.bottom-o.top,l=t.bottom-t.top+a;this.root.style.top=`${i-l}px`,this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},$s=ru;var MA=[!1,"center","right","justify"],$A=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],BA=[!1,"serif","monospace"],FA=["1","2","3",!1],UA=["small",!1,"large","huge"],ur=class extends qi{constructor(t,e){super(t,e);let i=n=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(n.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(n.target)||o.close()})};t.emitter.listenDOM("click",document.body,i)}addModule(t){let e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(!!o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")i.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")i.innerHTML=e[o];else{let s=i.value||"";s!=null&&e[o][s]&&(i.innerHTML=e[o][s])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(n=>{if(n.classList.contains("ql-align")&&(n.querySelector("option")==null&&Zn(n,MA),typeof e.align=="object"))return new Ms(n,e.align);if(n.classList.contains("ql-background")||n.classList.contains("ql-color")){let o=n.classList.contains("ql-background")?"background":"color";return n.querySelector("option")==null&&Zn(n,$A,o==="background"?"#ffffff":"#000000"),new Ds(n,e[o])}return n.querySelector("option")==null&&(n.classList.contains("ql-font")?Zn(n,BA):n.classList.contains("ql-header")?Zn(n,FA):n.classList.contains("ql-size")&&Zn(n,UA)),new Rr(n)});let i=()=>{this.pickers.forEach(n=>{n.update()})};this.quill.on(vt.events.EDITOR_CHANGE,i)}};ur.DEFAULTS=me({},qi.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{let t=this.quill.getSelection(!0);this.quill.uploader.upload(t,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var zi=class extends $s{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,vt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,vt.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=HA(t);case"formula":{if(!t)break;let e=this.quill.getSelection(!0);if(e!=null){let i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,vt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",vt.sources.USER),this.quill.setSelection(i+2,vt.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function HA(r){let t=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:r}function Zn(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(i=>{let n=document.createElement("option");i===e?n.setAttribute("selected","selected"):n.setAttribute("value",String(i)),r.appendChild(n)})}var zA=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Bs=class extends zi{constructor(t,e){super(t,e),this.quill.on(vt.events.EDITOR_CHANGE,(i,n,o,s)=>{if(i===vt.events.SELECTION_CHANGE)if(n!=null&&n.length>0&&s===vt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let a=this.quill.getLines(n.index,n.length);if(a.length===1){let l=this.quill.getBounds(n);l!=null&&this.position(l)}else{let l=a[a.length-1],f=this.quill.getIndex(l),p=Math.min(l.length()-1,n.index+n.length-f),y=this.quill.getBounds(new de(f,p));y!=null&&this.position(y)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(vt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let t=this.quill.getSelection();if(t!=null){let e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){let e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",e!==0&&(i.style.marginLeft=`${-1*e-i.offsetWidth/2}px`),e}};at(Bs,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));var Xn=class extends ur{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=zA),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Bs(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),jr),this.buildPickers(t.container.querySelectorAll("select"),jr))}};Xn.DEFAULTS=me({},ur.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,lt.sources.USER)}}}}});var VA=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Fs=class extends zi{constructor(){super(...arguments);at(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){let i=this.linkRange;this.restoreFocus(),this.quill.formatText(i,"link",!1,vt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(vt.events.SELECTION_CHANGE,(e,i,n)=>{if(e!=null){if(e.length===0&&n===vt.sources.USER){let[o,s]=this.quill.scroll.descendant(Ae,e.index);if(o!=null){this.linkRange=new de(e.index-s,o.length());let a=Ae.formats(o.domNode);this.preview.textContent=a,this.preview.setAttribute("href",a),this.show();let l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}};at(Fs,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));var Us=class extends ur{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=VA),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),jr),this.buildPickers(t.container.querySelectorAll("select"),jr),this.tooltip=new Fs(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,i)=>{t.handlers.link.call(t,!i.format.link)}))}};Us.DEFAULTS=me({},ur.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){let t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);let{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,lt.sources.USER)}}}}});var Cm=Us;Rs.register({"attributors/attribute/direction":As,"attributors/class/align":ql,"attributors/class/background":Wp,"attributors/class/color":Kp,"attributors/class/direction":Ml,"attributors/class/font":Bl,"attributors/class/size":Fl,"attributors/style/align":Os,"attributors/style/background":qn,"attributors/style/color":In,"attributors/style/direction":Ss,"attributors/style/font":Ts,"attributors/style/size":Cs},!0);Rs.register({"formats/align":ql,"formats/direction":Ml,"formats/indent":um,"formats/background":qn,"formats/color":In,"formats/font":Bl,"formats/size":Fl,"formats/blockquote":cm,"formats/code-block":Jt,"formats/header":fm,"formats/list":Pr,"formats/bold":Bi,"formats/code":$i,"formats/italic":hm,"formats/link":Ae,"formats/script":dm,"formats/strike":pm,"formats/underline":mm,"formats/formula":gm,"formats/image":ym,"formats/video":bm,"modules/syntax":Jn,"modules/table":xm,"modules/toolbar":Hi,"themes/bubble":Xn,"themes/snow":Cm,"ui/icons":jr,"ui/picker":Rr,"ui/icon-picker":Ms,"ui/color-picker":Ds,"ui/tooltip":$s},!0);var Tt=Rs;var jm=Gt(Nm()),Rm=Gt(Lm());Tt.register("modules/imageResize",jm.default);Tt.register("modules/magicUrl",Rm.default);var Im=Tt.import("formats/code-block-container");Im.tagName="PRE";Tt.register(Im,!0);var GA=Tt.import("blots/embed"),Pm=Tt.import("delta"),to=class extends GA{};to.blotName="Break";to.tagName="br";Tt.register(to);var qm=[!1,"8px","9px","10px","11px","12px","13px","14px","15px","16px","18px","20px","22px","24px","32px","36px","40px","48px","54px","64px","96px","128px"],Dm=Tt.import("attributors/style/size");Dm.whitelist=qm;Tt.register(Dm,!0);var zs=Tt.import("formats/table-container"),KA=zs.create.bind(zs);zs.create=r=>{let t=KA(r);return t.classList.add("table"),t.classList.add("table-bordered"),t};Tt.register(zs,!0);var WA=Tt.import("formats/link"),YA=Tt.import("formats/image"),Vs=class extends YA{static create(t){let e=super.create(t);return["style","align","src"].forEach(n=>{t[n]&&e.setAttribute(n,t[n])}),e}static value(t){return{align:t.align,style:t.style.cssText,src:t.src}}};Tt.register(Vs,!0);var ou=class extends WA{static create(t){let e=super.create(t);return t=this.sanitize(t),e.setAttribute("href",t),(t.startsWith("/")||t.indexOf(window.location.host))&&e.removeAttribute("target"),e}};Tt.register(ou,!0);var JA=Tt.import("modules/uploader");JA.DEFAULTS.mimetypes.push("image/gif","image/webp");var ZA=Tt.import("attributors/style/background"),XA=Tt.import("attributors/style/color"),QA=Tt.import("attributors/style/font"),tS=Tt.import("attributors/style/align"),eS=Tt.import("attributors/style/direction");Tt.register(ZA,!0);Tt.register(XA,!0);Tt.register(QA,!0);Tt.register(tS,!0);Tt.register(eS,!0);var rS=Tt.import("attributors/class/direction");Tt.register(rS,!0);var iS=Tt.import("blots/inline"),eo=class extends iS{constructor(t,e){super(t,e),this.domNode.style.color=this.domNode.color,t.outerHTML=this.domNode.outerHTML.replace(/<font/g,"<span").replace(/<\/font>/g,"</span>")}};eo.blotName="customColor";eo.tagName="font";Tt.register(eo,!0);frappe.ui.form.ControlTextEditor=class extends frappe.ui.form.ControlCode{make_wrapper(){super.make_wrapper()}make_input(){this.has_input=!0,this.make_quill_editor()}make_quill_editor(){if(this.quill)return;this.quill_container=$("<div>").appendTo(this.input_area),this.df.max_height&&$(this.quill_container).css({"max-height":this.df.max_height,overflow:"auto"}),this.quill=new Tt(this.quill_container[0],this.get_quill_options()),this.bind_events(),this.quill.getModule("toolbar").addHandler("table",this.handle_table_actions)}handle_table_actions(t){let e=this.quill.getModule("table");t==="insert-table"?e.insertTable(2,2):t==="insert-row-above"?e.insertRowAbove():t==="insert-row-below"?e.insertRowBelow():t==="insert-column-left"?e.insertColumnLeft():t==="insert-column-right"?e.insertColumnRight():t==="delete-row"?e.deleteRow():t==="delete-column"?e.deleteColumn():t==="delete-table"&&e.deleteTable(),t!=="delete-row"&&e.balanceTables()}bind_events(){this.quill.on("text-change",frappe.utils.debounce((i,n,o)=>{if(!this.is_quill_dirty(o))return;let s=this.get_input_value();this.parse_validate_and_set_in_model(s)},300)),$(this.quill.root).on("keydown",i=>{let n=frappe.ui.keys&&frappe.ui.keys.get_key(i);["ctrl+b","meta+b"].includes(n)&&i.stopPropagation()}),$(this.quill.root).on("drop",i=>{i.stopPropagation()});let t=this.$wrapper.find(".ql-size .ql-picker-label:first"),e=this.$wrapper.find(".ql-size .ql-picker-item:first");t.length&&(t.attr("data-value","---"),e.attr("data-value","---"))}is_quill_dirty(t){if(t==="api")return!1;let e=this.get_input_value();return this.value!==e}get_quill_options(){let t={modules:{toolbar:Object.keys(this.df).includes("get_toolbar_options")?this.df.get_toolbar_options():this.get_toolbar_options(),table:!0,imageResize:{},magicUrl:!0,mention:this.get_mention_options(),keyboard:{bindings:this.get_keyboard_bindings()}},theme:this.df.theme||"snow",readOnly:this.disabled||this.df.read_only,bounds:this.quill_container[0],placeholder:this.df.placeholder||""};return this.grid_row&&(t.theme=null,t.modules.toolbar=[]),t}get_mention_options(){if(!this.enable_mentions&&!this.df.enable_mentions)return null;let t=this;return{allowedChars:/^[A-Za-z0-9_]*$/,mentionDenotationChars:["@"],isolateCharacter:!0,source:frappe.utils.debounce(async function(e,i){let n=t.mention_search_method||"frappe.desk.search.get_names_for_mentions",o=await frappe.xcall(n,{search_term:e}),s=t.prioritize_involved_users_in_mention(o);i(s,e)},300),renderItem(e){return`${e.value} ${e.is_group?frappe.utils.icon("users"):""}`}}}prioritize_involved_users_in_mention(t){var i;let e=((i=this.frm)==null?void 0:i.get_involved_users())||(cur_frm==null?void 0:cur_frm.get_involved_users())||[];return t.filter(n=>e.includes(n.id)).concat(t.filter(n=>!e.includes(n.id)))}get_toolbar_options(){return[[{header:[1,2,3,4,5,6,!1]}],[{size:qm}],["bold","italic","underline","strike","clean"],[{color:[]},{background:[]}],["blockquote","code-block"],[{direction:"rtl"}],["link","image"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}],[{table:["insert-table","insert-row-above","insert-row-below","insert-column-right","insert-column-left","delete-row","delete-column","delete-table"]}]]}parse(t){return t==null&&(t=""),frappe.dom.remove_script_and_style(t)}set_formatted_input(t){if(!this.quill||t===this.get_input_value())return;if(!t){this.quill.setText("");return}let e=this.quill.clipboard.convert({html:t,text:""},{image:Vs});this.quill.setContents(e)}get_input_value(){let t=this.quill?this.quill.root.innerHTML:"";t=t.replace(/(\s)(\s)/g," &nbsp;"),t=this.patch_unordered_list(t);try{$(t).find(".ql-editor").length||(t=`<div class="ql-editor read-mode">${t}</div>`)}catch(e){t=`<div class="ql-editor read-mode">${t}</div>`}return t}patch_unordered_list(t){let e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("ol li[data-list=bullet]:first-child").forEach(n=>{let o=n.parentNode,s=Array.from(o.children),a=document.createElement("ul");s.forEach(l=>{a.appendChild(l)}),o.parentNode.replaceChild(a,o)}),e.innerHTML}set_focus(){this.quill.focus()}get_keyboard_bindings(){return{"table enter":{key:"Enter",formats:["table"],handler:function(e){return this.quill.updateContents(new Pm().retain(e.index).delete(e.length).insert({Break:!0})),this.quill.getLeaf(e.index+1)[0].next||this.quill.updateContents(new Pm().retain(e.index+1).delete(0).insert({Break:!0}),"user"),this.quill.setSelection(e.index+1,Tt.sources.SILENT),!1}}}}};var nS={TAB:"Tab",ENTER:"Enter",ESCAPE:27,UP:"ArrowUp",DOWN:"ArrowDown"},We=nS;var oS=Tt.import("blots/embed"),Vi=class extends oS{static create(t){let e=super.create(),i=document.createElement("span");return i.className="ql-mention-denotation-char",i.innerHTML=t.denotationChar,e.appendChild(i),e.innerHTML+=t.value,e.innerHTML+=`${t.isGroup==="true"?frappe.utils.icon("users"):""}`,e.dataset.id=t.id,e.dataset.value=t.value,e.dataset.denotationChar=t.denotationChar,e.dataset.isGroup=t.isGroup,t.link&&(e.dataset.link=t.link),e}static value(t){return{id:t.dataset.id,value:t.dataset.value,link:t.dataset.link||null,denotationChar:t.dataset.denotationChar,isGroup:t.dataset.isGroup}}};Vi.blotName="mention";Vi.tagName="span";Vi.className="mention";Tt.register(Vi,!0);var Gs=class{constructor(t,e){this.isOpen=!1,this.itemIndex=0,this.mentionCharPos=null,this.cursorPos=null,this.values=[],this.suspendMouseEnter=!1,this.quill=t,this.options={source:null,renderItem(i,n){return`${i.value}`},mentionDenotationChars:["@"],allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,fixMentionsToQuill:!1,defaultMenuOrientation:"bottom"},Object.assign(this.options,e),this.mentionContainer=document.createElement("div"),this.mentionContainer.className="ql-mention-list-container",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.className="ql-mention-list",this.mentionContainer.appendChild(this.mentionList),this.quill.container.appendChild(this.mentionContainer),t.on("text-change",this.onTextChange.bind(this)),t.on("selection-change",this.onSelectionChange.bind(this)),t.keyboard.addBinding({key:We.TAB},this.selectHandler.bind(this)),t.keyboard.bindings[We.TAB].unshift(t.keyboard.bindings[We.TAB].pop()),t.keyboard.addBinding({key:We.ENTER},this.selectHandler.bind(this)),t.keyboard.bindings[We.ENTER].unshift(t.keyboard.bindings[We.ENTER].pop()),t.keyboard.addBinding({key:We.ESCAPE},this.escapeHandler.bind(this)),t.keyboard.addBinding({key:We.UP},this.upHandler.bind(this)),t.keyboard.addBinding({key:We.DOWN},this.downHandler.bind(this))}selectHandler(){return this.isOpen?(this.selectItem(),!1):!0}escapeHandler(){return this.isOpen?(this.hideMentionList(),!1):!0}upHandler(){return this.isOpen?(this.prevItem(),!1):!0}downHandler(){return this.isOpen?(this.nextItem(),!1):!0}showMentionList(){this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.setMentionContainerPosition(),this.isOpen=!0}hideMentionList(){this.mentionContainer.style.display="none",this.isOpen=!1}highlightItem(t=!0){for(let e=0;e<this.mentionList.childNodes.length;e+=1)this.mentionList.childNodes[e].classList.remove("selected");if(this.mentionList.childNodes[this.itemIndex].classList.add("selected"),t){let e=this.mentionList.childNodes[this.itemIndex].offsetHeight,i=this.itemIndex*e,n=this.mentionContainer.scrollTop,o=n+this.mentionContainer.offsetHeight;i<n?this.mentionContainer.scrollTop=i:i>o-e&&(this.mentionContainer.scrollTop+=i-o+e)}}getItemData(){let t=this.mentionList.childNodes[this.itemIndex].dataset.link;return{id:this.mentionList.childNodes[this.itemIndex].dataset.id,value:t?`<a href="${t}" target="_blank">${this.mentionList.childNodes[this.itemIndex].dataset.value}`:this.mentionList.childNodes[this.itemIndex].dataset.value,link:t||null,denotationChar:this.mentionList.childNodes[this.itemIndex].dataset.denotationChar,isGroup:this.mentionList.childNodes[this.itemIndex].dataset.isGroup}}onContainerMouseMove(){this.suspendMouseEnter=!1}selectItem(){let t=this.getItemData();this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,Tt.sources.API),this.quill.insertEmbed(this.mentionCharPos,"mention",t,Tt.sources.API),this.quill.insertText(this.mentionCharPos+1," ",Tt.sources.API),this.quill.setSelection(this.mentionCharPos+2,Tt.sources.API),this.hideMentionList()}onItemMouseEnter(t){if(this.suspendMouseEnter)return;let e=Number(t.target.dataset.index);!Number.isNaN(e)&&e!==this.itemIndex&&(this.itemIndex=e,this.highlightItem(!1))}onItemClick(t){t.stopImmediatePropagation(),t.preventDefault(),this.itemIndex=t.currentTarget.dataset.index,this.highlightItem(),this.selectItem()}renderList(t,e,i){if(e&&e.length>0){this.values=e,this.mentionList.innerHTML="";for(let n=0;n<e.length;n+=1){let o=document.createElement("li");o.className="ql-mention-list-item",o.dataset.index=n,o.dataset.id=e[n].id,o.dataset.value=e[n].value,o.dataset.isGroup=Boolean(e[n].is_group),o.dataset.denotationChar=t,e[n].link&&(o.dataset.link=e[n].link),o.innerHTML=this.options.renderItem(e[n],i),o.onmouseenter=this.onItemMouseEnter.bind(this),o.onclick=this.onItemClick.bind(this),this.mentionList.appendChild(o)}this.itemIndex=0,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}nextItem(){this.itemIndex=(this.itemIndex+1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}prevItem(){this.itemIndex=(this.itemIndex+this.values.length-1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}hasValidChars(t){return this.options.allowedChars.test(t)}containerBottomIsNotVisible(t,e){return t+this.mentionContainer.offsetHeight+e.top>window.pageYOffset+window.innerHeight}containerRightIsNotVisible(t,e){if(this.options.fixMentionsToQuill)return!1;let i=t+this.mentionContainer.offsetWidth+e.left,n=window.pageXOffset+document.documentElement.clientWidth;return i>n}setMentionContainerPosition(){let t=this.quill.container.getBoundingClientRect(),e=this.quill.getBounds(this.mentionCharPos),i=this.mentionContainer.offsetHeight,n=this.options.offsetTop,o=this.options.offsetLeft;if(this.options.fixMentionsToQuill?this.mentionContainer.style.right=`${0}px`:o+=e.left,this.containerRightIsNotVisible(o,t)){let s=this.mentionContainer.offsetWidth+this.options.offsetLeft;o=t.width-s}if(this.options.defaultMenuOrientation==="top"){if(this.options.fixMentionsToQuill?n=-1*(i+this.options.offsetTop):n=e.top-(i+this.options.offsetTop),n+t.top<=0){let s=this.options.offsetTop;this.options.fixMentionsToQuill?s+=t.height:s+=e.bottom,n=s}}else if(this.options.fixMentionsToQuill?n+=t.height:n+=e.bottom,this.containerBottomIsNotVisible(n,t)){let s=this.options.offsetTop*-1;this.options.fixMentionsToQuill||(s+=e.top),n=s-i}this.mentionContainer.style.top=`${n}px`,this.mentionContainer.style.left=`${o}px`,this.mentionContainer.style.visibility="visible"}onSomethingChange(){let t=this.quill.getSelection();if(t==null)return;this.cursorPos=t.index;let e=Math.max(0,this.cursorPos-this.options.maxChars),i=this.quill.getText(e,this.cursorPos-e),n=this.options.mentionDenotationChars.reduce((o,s)=>{let a=o,l=i.lastIndexOf(s);return l>a?l:a},-1);if(n>-1){if(this.options.isolateCharacter&&!(n==0||!!i[n-1].match(/\s/g))){this.hideMentionList();return}let o=this.cursorPos-(i.length-n);this.mentionCharPos=o;let s=i.substring(n+1);if(s.length>=this.options.minChars&&this.hasValidChars(s)){let a=i[n];this.options.source(s,this.renderList.bind(this,a),a)}else this.hideMentionList()}else this.hideMentionList()}onTextChange(t,e,i){i==="user"&&this.onSomethingChange()}onSelectionChange(t){t&&t.length===0?this.onSomethingChange():this.hideMentionList()}};Tt.register("modules/mention",Gs,!0);var Mm=Gs;Tt.register("modules/mention",Mm,!0);frappe.ui.form.ControlComment=class extends frappe.ui.form.ControlTextEditor{make_wrapper(){this.comment_wrapper=this.no_wrapper?$('<div class="frappe-control"></div>'):$(`
			<div class="comment-input-wrapper">
				<div class="comment-input-header">
					<div>
						<span class="comment-title">${__("Comments")}</span>
						<span class="comment-count"></span>
					</div>

					<div class="form-stats-likes">
						<span class="liked-by like-action d-flex align-items-center">
							<svg class="icon icon-sm like-icon">
								<use href="#icon-heart"></use>
							</svg>
							<span class="like-count ml-2"></span>
						</span>
					</div>
				</div>
				<div class="comment-input-container">
				${frappe.avatar(frappe.session.user,"avatar-medium")}
					<div class="frappe-control col"></div>
				</div>
				<button class="btn hidden btn-comment btn-xs" style="margin-left:48px;">
					${__("Comment")}
				</button>
			</div>
		`),this.comment_wrapper.appendTo(this.parent),this.$wrapper=this.no_wrapper?this.comment_wrapper:this.comment_wrapper.find(".frappe-control"),this.wrapper=this.$wrapper,this.button=this.comment_wrapper.find(".btn-comment")}bind_events(){super.bind_events(),this.button.click(()=>{this.submit()}),this.$wrapper.on("keydown",t=>{frappe.ui.keys.get_key(t)==="ctrl+enter"&&(t.preventDefault(),this.submit())}),this.quill.on("text-change",frappe.utils.debounce(()=>{this.update_state()},300))}submit(){this.on_submit&&this.on_submit(this.get_value())}update_state(){let t=this.get_value();strip_html(t).trim()!=""||t.includes("img")?this.button.removeClass("hidden").addClass("btn-primary"):this.button.addClass("hidden").removeClass("btn-primary")}get_quill_options(){let t=super.get_quill_options();return Object.assign(t,{theme:"bubble",bounds:this.quill_container[0],placeholder:__("Type a reply / comment")})}get_toolbar_options(){return[["bold","italic","underline","strike"],["blockquote","code-block"],[{direction:"rtl"}],["link","image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]]}clear(){this.quill.setText("")}disable(){this.quill.disable(),this.button.prop("disabled",!0)}enable(){this.quill.enable(),this.button.prop("disabled",!1)}};var Ks;frappe.ui.form.ControlCheck=(Ks=class extends frappe.ui.form.ControlData{make_wrapper(){this.$wrapper=$(`<div class="form-group frappe-control">
			<div class="checkbox">
				<label>
					<span class="input-area"></span>
					<span class="disp-area"></span>
					<span class="label-area"></span>
					<span class="ml-1 help"></span>
				</label>
				<p class="help-box small text-extra-muted"></p>
			</div>
		</div>`).appendTo(this.parent)}set_input_areas(){this.input_area=this.$wrapper.find(".input-area").get(0),!this.only_input&&(this.label_area=this.label_span=this.$wrapper.find(".label-area").get(0),this.disp_area=this.$wrapper.find(".disp-area").get(0))}make_input(){super.make_input(),this.$input.removeClass("form-control")}get_input_value(){return this.input&&this.input.checked?1:0}validate(t){return cint(t)}set_input(t){this.last_value=this.value,t=cint(t),this.value=t,this.input&&(this.input.checked=t?1:0),this.set_mandatory(t),this.set_disp_area(t)}},at(Ks,"html_element","input"),at(Ks,"input_type","checkbox"),Ks);frappe.ui.form.ControlImage=class extends frappe.ui.form.Control{make(){super.make(),this.$wrapper.css({margin:"0px"}),this.$body=$("<div></div>").appendTo(this.$wrapper).css({"margin-bottom":"10px"}),$('<div class="clearfix"></div>').appendTo(this.$wrapper)}refresh_input(){this.$body.empty();var t=this.get_doc();return t&&this.df.options&&t[this.df.options]?this.$img=$("<img src='"+t[this.df.options]+"' class='img-responsive'>").appendTo(this.$body):this.$buffer=$(`<div class='missing-image'>${frappe.utils.icon("restriction","md")}</div>`).appendTo(this.$body),!1}};frappe.ui.form.ControlAttach=class extends frappe.ui.form.ControlData{make_input(){let t=this;this.$input=$('<button class="btn btn-default btn-sm btn-attach">').html(__("Attach")).prependTo(t.input_area).on({click:function(){t.on_attach_click()},attach_doc_image:function(){t.on_attach_doc_image()}}),this.$value=$(`<div class="attached-file flex justify-between align-center">
				<div class="ellipsis">
				${frappe.utils.icon("es-line-link","sm")}
					<a class="attached-file-link" target="_blank"></a>
				</div>
				<div class="flex" style="align-items: center">
					<a class="btn btn-xs btn-default" data-action="reload_attachment">${__("Reload File")}</a>
					<a class="btn btn-xs btn-default" data-action="clear_attachment">${__("Clear")}</a>
				</div>
			</div>`).prependTo(t.input_area).toggle(!1),this.input=this.$input.get(0),this.set_input_attributes(),this.has_input=!0,frappe.utils.bind_actions_with_object(this.$value,this),this.toggle_reload_button()}clear_attachment(){let t=this;frappe.confirm(__("Are you sure you want to delete the attachment?"),function(){t.frm?(t.parse_validate_and_set_in_model(null),t.refresh(),t.frm.attachments.remove_attachment_by_filename(t.value,async()=>{await t.parse_validate_and_set_in_model(null),t.refresh(),t.frm.doc.docstatus==1?t.frm.save("Update"):t.frm.save()})):(t.dataurl=null,t.fileobj=null,t.set_input(null),t.parse_validate_and_set_in_model(null),t.refresh())})}reload_attachment(){this.file_uploader&&this.file_uploader.uploader.upload_files()}on_attach_click(){this.set_upload_options(),this.file_uploader=new frappe.ui.FileUploader(this.upload_options)}on_attach_doc_image(){this.set_upload_options(),this.upload_options.restrictions.allowed_file_types=["image/*"],this.file_uploader=new frappe.ui.FileUploader(this.upload_options)}set_upload_options(){let t={allow_multiple:!1,on_success:e=>{this.on_upload_complete(e),this.toggle_reload_button()},restrictions:{}};this.frm&&(t.doctype=this.frm.doctype,t.docname=this.frm.docname,t.fieldname=this.df.fieldname,t.make_attachments_public=this.df.make_attachment_public?1:this.frm.meta.make_attachments_public),this.df.options&&Object.assign(t,this.df.options),this.upload_options=t}set_input(t,e){if(this.last_value=this.value,this.value=t,this.value){let i=this.value.match(/^([^:]+),(.+):(.+)$/),n;i&&(n=i[1],e=i[2]+":"+i[3]),this.$input&&this.$value?(this.$input.toggle(!1),this.$value.toggle(!0).find(".attached-file-link").text(n||this.value).attr("href",e||this.value)):(this.$wrapper.html(`
					<div class="attached-file flex justify-between align-center">
						<div class="ellipsis">
							<a target="_blank"></a>
						</div>
					</div>
				`),this.$wrapper.find("a").text(n||this.value).attr("href",e||this.value))}else this.$input.toggle(!0),this.$value.toggle(!1)}get_value(){return this.value||null}async on_upload_complete(t){this.frm&&(await this.parse_validate_and_set_in_model(t.file_url),this.frm.attachments.update_attachment(t),this.frm.doc.docstatus==1?this.frm.save("Update"):this.frm.save()),this.set_value(t.file_url)}toggle_reload_button(){this.$value.find('[data-action="reload_attachment"]').toggle(this.file_uploader&&this.file_uploader.uploader.files.length>0)}};frappe.ui.form.ControlAttachImage=class extends frappe.ui.form.ControlAttach{make_input(){super.make_input(),this.$value.find(".attached-file-link").popover({trigger:"hover",placement:"top",content:()=>`<div>
					<img src="${this.get_value()}"
						width="150px"
						style="object-fit: contain;"
					/>
				</div>`,html:!0})}set_upload_options(){super.set_upload_options(),this.upload_options.restrictions.allowed_file_types=["image/*"]}};var ro=class{constructor(t){$.extend(this,t),this.wrapper=$('<div class="form-in-grid"></div>').appendTo(this.row.wrapper)}render(){var t=this;this.make_form(),this.form_area.empty(),frappe.utils.scroll_to(0,!1,0,this.wrapper.find(".grid-form-body")),this.layout=new frappe.ui.form.Layout({fields:this.row.docfields,body:this.form_area,no_submit_on_enter:!0,frm:this.row.frm,grid:this.row.grid,grid_row:this.row,grid_row_form:this}),this.layout.make(),this.fields=this.layout.fields,this.fields_dict=this.layout.fields_dict,this.layout.refresh(this.row.doc);for(var e in this.row.grid.fieldinfo||{}){var i=this.row.grid.fieldinfo[e];$.extend(t.fields_dict[e],i)}this.toggle_add_delete_button_display(this.wrapper),this.row.grid.open_grid_row=this,this.set_focus()}make_form(){if(!this.form_area){let t=`<div class="grid-form-heading">
				<div class="toolbar grid-header-toolbar">
					<span class="panel-title">
						${__("Editing Row")} #<span class="grid-form-row-index"></span></span>
					<span class="row-actions">
						<button class="btn btn-secondary btn-sm pull-right grid-collapse-row">
							${frappe.utils.icon("down")}
						</button>
						<button class="btn btn-secondary btn-sm pull-right grid-move-row hidden-xs">
							${__("Move")}</button>
						<button class="btn btn-secondary btn-sm pull-right grid-duplicate-row hidden-xs">
							${frappe.utils.icon("duplicate")}
							${__("Duplicate")}
						</button>
						<button class="btn btn-secondary btn-sm pull-right grid-insert-row hidden-xs">
							${__("Insert Above")}</button>
						<button class="btn btn-secondary btn-sm pull-right grid-insert-row-below hidden-xs">
							${__("Insert Below")}</button>
						<button class="btn btn-danger btn-sm pull-right grid-delete-row">
							${frappe.utils.icon("delete")}
						</button>
					</span>
				</div>
			</div>
			<div class="grid-form-body">
				<div class="form-area"></div>
				<div class="grid-footer-toolbar hidden-xs flex justify-between">
					<div class="grid-shortcuts">
						<span> ${frappe.utils.icon("keyboard","md")} </span>
						<span class="text-medium"> ${__("Shortcuts")}: </span>
						<kbd>${__("Ctrl + Up")}</kbd> . <kbd>${__("Ctrl + Down")}</kbd> . <kbd>${__("ESC")}</kbd>
					</div>
					<span class="row-actions">
						<button class="btn btn-secondary btn-sm pull-right grid-append-row">
							${__("Insert Below")}
						</button>
					</span>
				</div>
			</div>`;$(t).appendTo(this.wrapper),this.form_area=this.wrapper.find(".form-area"),this.row.set_row_index(),this.set_form_events()}}set_form_events(){var t=this;this.wrapper.find(".grid-delete-row").on("click",function(){return t.row.remove(),!1}),this.wrapper.find(".grid-insert-row").on("click",function(){return t.row.insert(!0),!1}),this.wrapper.find(".grid-insert-row-below").on("click",function(){return t.row.insert(!0,!0),!1}),this.wrapper.find(".grid-duplicate-row").on("click",function(){return t.row.insert(!0,!0,!0),!1}),this.wrapper.find(".grid-move-row").on("click",function(){return t.row.move(),!1}),this.wrapper.find(".grid-append-row").on("click",function(){return t.row.toggle_view(!1),t.row.grid.add_new_row(t.row.doc.idx+1,null,!0),!1}),this.wrapper.find(".grid-form-heading, .grid-footer-toolbar").on("click",function(){return t.row.toggle_view(),!1})}toggle_add_delete_button_display(t){t.find(".row-actions, .grid-append-row").toggle(this.row.grid.is_editable())}refresh_field(t){let e=this.fields_dict[t];!e||(e.docname=this.row.doc.name,e.refresh(),this.layout&&this.layout.refresh_dependency())}set_focus(){var t=this;setTimeout(function(){if(t.row.frm&&t.row.frm.doc.docstatus===0||!t.row.frm){var e=t.form_area.find("input:first");if(e.length&&!["Date","Datetime","Time"].includes(e.attr("data-fieldtype")))try{e.get(0).focus()}catch(i){}}},500)}};var ii=class{constructor(t){this.on_grid_fields_dict={},this.on_grid_fields=[],$.extend(this,t),this.set_docfields(),this.columns={},this.columns_list=[],this.depandant_fields={mandatory:[],read_only:[]},this.row_check_html='<input type="checkbox" class="grid-row-check">',this.make()}make(){let t=this,e=!0;this.wrapper=$('<div class="grid-row"></div>'),this.row=$('<div class="data-row row m-0"></div>').appendTo(this.wrapper).on("click",function(i){if(!($(i.target).hasClass("grid-row-check")||$(i.target).hasClass("row-index")||$(i.target).parent().hasClass("row-index"))&&!(t.grid.allow_on_grid_editing()&&t.grid.is_editable()))return t.toggle_view(),!1}),this.grid.template&&!this.grid.meta.editable_grid?this.render_template():e=this.render_row(),e&&(this.set_data(),this.wrapper.appendTo(this.parent))}set_docfields(t=!1){if(this.doc&&this.parent_df.options){frappe.meta.make_docfield_copy_for(this.parent_df.options,this.doc.name,this.docfields);let e=frappe.meta.get_docfields(this.parent_df.options,this.doc.name);t?this.docfields.forEach(i=>{Object.assign(i,e.find(n=>n.fieldname===i.fieldname))}):this.docfields=e}}set_data(){this.wrapper.data({grid_row:this,doc:this.doc||""})}set_row_index(){this.doc&&this.wrapper.attr("data-name",this.doc.name).attr("data-idx",this.doc.idx).find(".row-index span, .grid-form-row-index").html(this.doc.idx)}select(t){this.doc.__checked=t?1:0}refresh_check(){this.wrapper.find(".grid-row-check").prop("checked",this.doc?!!this.doc.__checked:!1),this.grid.debounced_refresh_remove_rows_button()}remove(){var t=this;if(this.grid.is_editable())if(this.get_open_form()&&this.hide_form(),this.frm)frappe.run_serially([()=>this.frm.script_manager.trigger("before_"+this.grid.df.fieldname+"_remove",this.doc.doctype,this.doc.name),()=>{frappe.model.clear_doc(this.doc.doctype,this.doc.name),this.frm.script_manager.trigger(this.grid.df.fieldname+"_remove",this.doc.doctype,this.doc.name),this.frm.dirty(),this.grid.refresh()}]).catch(e=>{console.trace(e)});else{let e=null;this.grid.df.get_data?e=this.grid.df.get_data():e=this.grid.df.data;let i=e.findIndex(n=>n.name===t.doc.name);i>-1&&e.splice(i,1),e.forEach(function(n,o){n.idx=o+1}),this.grid.refresh()}}insert(t,e,i){var n=this.doc.idx,o=i?this.doc:null;e&&n++,this.toggle_view(!1),this.grid.add_new_row(n,null,t,o)}move(){var t=this;frappe.prompt({fieldname:"move_to",label:__("Move to Row Number"),fieldtype:"Int",reqd:1,default:this.doc.idx},function(e){if(t.doc._sortable===!1){frappe.msgprint(__("Cannot move row"));return}let i=t.grid.get_data();i.move(t.doc.idx-1,e.move_to-1),t.frm.dirty();for(let n=0;n<i.length;n++)i[n].idx=n+1;t.toggle_view(!1),t.grid.refresh(),$(t.frm.wrapper).trigger("grid-move-row",[t.frm,t])},__("Move To"),"Update")}refresh(){this.frm&&this.doc&&this.doc.__islocal&&this.set_docfields(!0),this.frm&&this.doc&&(this.doc=locals[this.doc.doctype][this.doc.name]),this.grid.template&&!this.grid.meta.editable_grid?this.render_template():this.render_row(!0),this.grid_form&&this.grid_form.layout&&this.grid_form.layout.refresh(this.doc)}render_template(){this.set_row_index(),this.row_display&&this.row_display.remove(),this.row_index||(this.row_index=$(`<div class="template-row-index">${this.row_check_html}<span></span></div>`).appendTo(this.row)),this.doc&&this.row_index.find("span").html(this.doc.idx),this.row_display=$('<div class="row-data sortable-handle template-row"></div>').appendTo(this.row).html(frappe.render(this.grid.template,{doc:this.doc?frappe.get_format_helper(this.doc):null,frm:this.frm,row:this}))}render_row(t){if(this.show_search&&!this.show_search_row())return;let e=this;if(this.set_row_index(),!this.row_index&&!this.show_search){let i=this.doc?this.doc.idx:__("No.",null,"Title of the 'row number' column");this.header_row&&(this.row_check_html=$(this.row_check_html).attr("tabindex",-1).get(0).outerHTML),this.row_check=$(`<div class="row-check sortable-handle col">
					${this.row_check_html}
				</div>`).appendTo(this.row),this.row_index=$(`<div class="row-index sortable-handle grid-static-col col">
					<span>${i}</span>
				</div>`).appendTo(this.row).on("click",function(n){$(n.target).hasClass("grid-row-check")||e.toggle_view()})}else this.show_search&&(this.row_check=$(`
				<div class="row-check col search">
					<input type="text" class="form-control input-xs text-center invisible">
				</div>`).appendTo(this.row),this.row_index=$(`<div class="row-index col search">
					<input type="text" class="form-control input-xs text-center" >
					<span style="width: 33px;" class="d-block"></span>
				</div>`).appendTo(this.row),this.row_index.find("input").on("keyup",frappe.utils.debounce(i=>{let n={fieldtype:"Sr No"};this.grid.filter["row-index"]={df:n,value:i.target.value},i.target.value==""&&delete this.grid.filter["row-index"],this.grid.grid_sortable.option("disabled",Object.keys(this.grid.filter).length!==0),this.grid.prevent_build=!0,e.grid.refresh(),this.grid.prevent_build=!1},500)),frappe.utils.only_allow_num_decimal(this.row_index.find("input")));return this.setup_columns(),this.add_open_form_button(),this.add_column_configure_button(),this.refresh_check(),this.frm&&this.doc&&$(this.frm.wrapper).trigger("grid-row-render",[this]),!0}make_editable(){this.row.toggleClass("editable-row",this.grid.is_editable())}is_too_small(){return this.row.width()?this.row.width()<300:!1}add_open_form_button(){var t=this;if(this.doc&&!this.grid.df.in_place_edit&&!this.open_form_button){if(this.open_form_button=$('<button class="col"></button>').appendTo(this.row),!this.configure_columns){let e=__("Edit","","Edit grid row");this.open_form_button=$(`
						<div class="btn-open-row" data-toggle="tooltip" data-placement="right" title="${e}">
							<a>${frappe.utils.icon("edit","xs")}</a>
						</div>
					`).appendTo(this.open_form_button).on("click",function(){return t.toggle_view(),!1}),$(this.open_form_button).parent().on("keydown",function(i){if(i.key=="Enter")return t.toggle_view(),!1}),this.open_form_button.tooltip({delay:{show:600,hide:100}})}this.is_too_small()&&this.open_form_button.css({"margin-right":"-2px"}),$(document).on("escape",function(){t.open_form_button.parent().focus()})}}add_column_configure_button(){this.grid.df.in_place_edit&&!this.frm||(this.configure_columns&&this.frm?this.configure_columns_button=$(`
				<div class="col grid-static-col pointer">
					<a>${frappe.utils.icon("setting-gear","sm","","filter: opacity(0.5)")}</a>
				</div>
			`).appendTo(this.row).on("click",()=>{this.configure_dialog_for_columns_selector()}):this.configure_columns&&!this.frm&&(this.configure_columns_button=$(`
				<div class="col grid-static-col"></div>
			`).appendTo(this.row)))}configure_dialog_for_columns_selector(){this.grid_settings_dialog=new frappe.ui.Dialog({title:__("Configure Columns"),fields:[{fieldtype:"HTML",fieldname:"fields_html"}]}),this.grid.setup_visible_columns(),this.setup_columns_for_dialog(),this.prepare_wrapper_for_columns(),this.render_selected_columns(),this.grid_settings_dialog.show(),$(this.fields_html_wrapper).find(".add-new-fields").click(()=>{this.column_selector_for_dialog()}),this.grid_settings_dialog.set_primary_action(__("Update"),()=>{this.columns={},this.update_user_settings_for_grid(),this.grid_settings_dialog.hide()}),this.grid_settings_dialog.set_secondary_action_label(__("Reset to default")),this.grid_settings_dialog.set_secondary_action(()=>{this.reset_user_settings_for_grid(),this.grid_settings_dialog.hide()})}setup_columns_for_dialog(){this.selected_columns_for_grid=[],this.grid.visible_columns.forEach(t=>{this.selected_columns_for_grid.push({fieldname:t[0].fieldname,columns:t[0].columns||t[0].colsize,sticky:t[0].sticky})})}prepare_wrapper_for_columns(){this.fields_html_wrapper=this.grid_settings_dialog.get_field("fields_html").$wrapper[0],$(`
			<div class='form-group'>
				<div class='row' style='margin-bottom:10px;'>
					<div class='col-1'></div>
					<div class='col-5' style='padding-left:20px;'>
						${__("Fieldname").bold()}
					</div>
					<div class='col-3'>
						${__("Column Width").bold()}
					</div>
					<div class='col-2'>
						${__("Sticky").bold()}
					</div>
					<div class='col-1'></div>
				</div>
				<div class='control-input-wrapper selected-fields'>
				</div>
				<p class='help-box small text-muted'>
					<a class='add-new-fields text-muted'>
						+ ${__("Add / Remove Columns")}
					</a>
				</p>
			</div>
		`).appendTo(this.fields_html_wrapper)}column_selector_for_dialog(){let t=this.prepare_columns_for_dialog(this.selected_columns_for_grid.map(i=>i.fieldname)),e=new frappe.ui.Dialog({title:__("{0} Fields",[__(this.grid.doctype)]),fields:[{label:__("Select Fields"),fieldtype:"MultiCheck",fieldname:"fields",options:t,columns:2,sort_options:!1}],secondary_action_label:__("Select All"),secondary_action:()=>this.select_all_columns(t)});e.set_primary_action(__("Add"),()=>{let i=e.get_values().fields;this.selected_columns_for_grid=[],i&&(i.forEach(n=>{let o=frappe.meta.get_docfield(this.grid.doctype,n);this.grid.update_default_colsize(o),this.selected_columns_for_grid.push({fieldname:n,columns:o.columns||o.colsize})}),this.render_selected_columns(),e.hide())}),e.show()}select_all_columns(t){t.forEach(e=>{e.checked||$(`.checkbox.unit-checkbox input[type="checkbox"][data-unit="${e.value}"]`).prop("checked",!0).trigger("change")})}prepare_columns_for_dialog(t){let e=[],i=frappe.model.no_value_type,n=["Button"],o=s=>n.includes(s)||!i.includes(s);return t.forEach(s=>{let a=this.docfields.find(l=>l.fieldname===s);a&&!a.hidden&&o(a.fieldtype)&&e.push({label:__(a.label,null,this.grid.doctype),value:a.fieldname,checked:!0})}),this.docfields.forEach(s=>{!t.includes(s.fieldname)&&!s.hidden&&o(s.fieldtype)&&e.push({label:__(s.label,null,this.grid.doctype),value:s.fieldname,checked:!1})}),e}render_selected_columns(){let t="";this.selected_columns_for_grid&&this.selected_columns_for_grid.forEach(e=>{let i=frappe.meta.get_docfield(this.grid.doctype,e.fieldname);t+=`
					<div class='control-input flex align-center form-control fields_order sortable-handle sortable'
						style='display: block; margin-bottom: 5px; padding: 0 8px; cursor: pointer; height: 32px;' data-fieldname='${i.fieldname}'
						data-label='${i.label}' data-type='${i.fieldtype}'>

						<div class='row'>
							<div class='col-1' style='padding-top: 4px;'>
								<a style='cursor: grabbing;'>${frappe.utils.icon("drag","xs")}</a>
							</div>
							<div class='col-5' style='padding-top: 5px;'>
								${__(i.label,null,i.parent)}
							</div>
							<div class='col-3' style='padding-top: 2px; margin-top:-2px;' title='${__("Columns")}'>
								<input class='form-control column-width my-1 input-xs text-right'
								style='height: 24px; max-width: 80px; background: var(--bg-color);'
									value='${i.columns||cint(e.columns)}'
									data-fieldname='${i.fieldname}' style='background-color: var(--modal-bg); display: inline'>
							</div>
							<div class='col-2' title='${__("Sticky")}'>
								<input type='checkbox' class='form-control sticky-column'
									style='margin-top: 8px'
									${i.sticky?"checked":""}
									data-fieldname='${i.fieldname}' style='background-color: var(--modal-bg); display: inline'>
							</div>
							<div class='col-1' style='padding-top: 3px;'>
								<a class='text-muted remove-field' data-fieldname='${i.fieldname}'>
									<i class='fa fa-trash-o' aria-hidden='true'></i>
								</a>
							</div>
						</div>
					</div>`}),$(this.fields_html_wrapper).find(".selected-fields").html(t),this.prepare_handler_for_sort(),this.select_on_focus(),this.update_column_width(),this.update_sticky_column(),this.remove_selected_column()}prepare_handler_for_sort(){new Sortable($(this.fields_html_wrapper).find(".selected-fields")[0],{handle:".sortable-handle",draggable:".sortable",onUpdate:()=>{this.sort_columns()}})}sort_columns(){this.selected_columns_for_grid=[];let t=$(this.fields_html_wrapper).find(".fields_order")||[];t.each(e=>{this.selected_columns_for_grid.push({fieldname:$(t[e]).attr("data-fieldname"),columns:cint($(t[e]).find(".column-width").attr("value"))})})}select_on_focus(){$(this.fields_html_wrapper).find(".column-width").click(t=>{$(t.target).select()})}update_column_width(){$(this.fields_html_wrapper).find(".column-width").change(t=>{cint(t.target.value)===0&&(t.target.value=cint(t.target.defaultValue),frappe.throw(__("Column width cannot be zero."))),this.selected_columns_for_grid.forEach(e=>{e.fieldname===t.target.dataset.fieldname&&(e.columns=cint(t.target.value),t.target.defaultValue=cint(t.target.value))})})}update_sticky_column(){$(this.fields_html_wrapper).find(".sticky-column").change(t=>{this.selected_columns_for_grid.forEach(e=>{e.fieldname===t.target.dataset.fieldname&&(e.sticky=cint(t.target.checked),t.target.defaultValue=cint(t.target.checked))})})}remove_selected_column(){$(this.fields_html_wrapper).find(".remove-field").click(t=>{let e=t.currentTarget.dataset.fieldname,i=this.selected_columns_for_grid.filter(n=>n.fieldname!==e);i&&i.length===0&&frappe.throw(__("At least one column is required to show in the grid.")),this.selected_columns_for_grid=i,$(this.fields_html_wrapper).find(`[data-fieldname="${e}"]`).remove()})}update_user_settings_for_grid(){if(!this.selected_columns_for_grid||!this.frm)return;let t={};t[this.grid.doctype]=this.selected_columns_for_grid,frappe.model.user_settings.save(this.frm.doctype,"GridView",t).then(e=>{frappe.model.user_settings[this.frm.doctype]=e.message||e,this.grid.reset_grid()})}reset_user_settings_for_grid(){frappe.model.user_settings.save(this.frm.doctype,"GridView",null).then(t=>{frappe.model.user_settings[this.frm.doctype]=t.message||t,this.grid.reset_grid()})}setup_columns(){this.focus_set=!1,this.search_columns={},this.grid.setup_visible_columns();let t=this.grid.user_defined_columns&&this.grid.user_defined_columns.length>0?this.grid.user_defined_columns:this.docfields,e=0;this.grid.visible_columns.forEach((n,o)=>{let s=t.find(p=>(p==null?void 0:p.fieldname)===n[0].fieldname);this.set_dependant_property(s);let a=n[1];e+=a;let l=this.doc?frappe.format(this.doc[s.fieldname],s,null,this.doc):__(s.label,null,s.parent);this.doc&&s.fieldtype==="Select"&&(l=__(l));let f;!this.columns[s.fieldname]&&!this.show_search?f=this.make_column(s,a,l,o):!this.columns[s.fieldname]&&this.show_search?f=this.make_search_column(s,a):(f=this.columns[s.fieldname],this.refresh_field(s.fieldname,l)),this.doc&&(s.reqd&&!l&&f.addClass("error"),f.is_invalid?f.addClass("invalid"):(s.reqd||s.bold)&&f.addClass("bold"))});let i=$(`div[data-fieldname="${this.grid.df.fieldname}"] .form-grid-container`);e>10?i.addClass("column-limit-reached"):i.hasClass("column-limit-reached")&&(Number($(i).children(".form-grid").css("left"))!=0&&($(i).children(".form-grid").css("left",0),$(i).children().find(".grid-scroll-bar").css({width:"auto","margin-left":"0px"}),$(i).children().find(".grid-scroll-bar-rows").css("width","auto")),i.removeClass("column-limit-reached")),this.show_search&&$('<div class="col grid-static-col search"></div>').appendTo(this.row)}set_dependant_property(t){!t.reqd&&t.mandatory_depends_on&&this.evaluate_depends_on_value(t.mandatory_depends_on)&&(t.reqd=1,this.depandant_fields.mandatory.push(t)),!t.read_only&&t.read_only_depends_on&&this.evaluate_depends_on_value(t.read_only_depends_on)&&(t.read_only=1,this.depandant_fields.read_only.push(t))}refresh_depedency(){this.depandant_fields.read_only.forEach(t=>{t.read_only=0,this.set_dependant_property(t)}),this.depandant_fields.mandatory.forEach(t=>{t.reqd=0,this.set_dependant_property(t)}),this.refresh()}evaluate_depends_on_value(t){let e=null,i=this.doc;if(!i)return;let n=this.frm?this.frm.doc:this.doc||null;if(typeof t=="boolean")e=t;else if(typeof t=="function")e=t(i);else if(t.substr(0,5)=="eval:")try{e=frappe.utils.eval(t.substr(5),{doc:i,parent:n}),n&&n.istable&&t.includes("is_submittable")&&(e=!0)}catch(s){frappe.throw(__('Invalid "depends_on" expression'))}else if(t.substr(0,3)=="fn:"&&this.frm)e=this.frm.script_manager.trigger(t.substr(3),this.doctype,this.docname);else{var o=i[t];$.isArray(o)?e=!!o.length:e=!!o}return e}show_search_row(){var e,i,n,o;let t=((i=(e=this.grid)==null?void 0:e.meta)==null?void 0:i.rows_threshold_for_grid_search)>0?this.grid.meta.rows_threshold_for_grid_search:20;return this.show_search=this.show_search&&(((o=(n=this.grid)==null?void 0:n.data)==null?void 0:o.length)>=t||this.grid.filter_applied),!this.show_search&&this.wrapper.remove(),this.show_search}make_search_column(t,e){let i="",n="",o="";["Text","Small Text"].includes(t.fieldtype)?n="grid-overflow-no-ellipsis":["Int","Currency","Float","Percent"].includes(t.fieldtype)?n="text-right":t.fieldtype==="Check"?(i=__("1 = True & 0 = False"),n="text-center"):t.fieldtype==="Password"&&(o="disabled",i=__("Password cannot be filtered"));let s=$('<div class="col grid-static-col col-xs-'+e+' search"></div>').appendTo(this.row),a=$(`
			<input
				type="text"
				class="form-control input-xs ${n}"
				title="${i}"
				data-fieldtype="${t.fieldtype}"
				${o}
			>
		`).appendTo(s);return this.search_columns[t.fieldname]=s,a.on("keyup",frappe.utils.debounce(l=>{this.grid.filter[t.fieldname]={df:t,value:l.target.value},l.target.value==""&&delete this.grid.filter[t.fieldname],this.grid.grid_sortable&&this.grid.grid_sortable.option("disabled",Object.keys(this.grid.filter).length!==0),this.grid.prevent_build=!0,this.grid.grid_pagination.go_to_page(1),this.grid.refresh(),this.grid.prevent_build=!1},500)),["Currency","Float","Int","Percent","Rating"].includes(t.fieldtype)&&frappe.utils.only_allow_num_decimal(a),s}make_column(t,e,i,n){let o={1:60,2:100,3:140,4:200,5:250,6:300,7:350,8:400,9:450,10:500,11:550,12:600},s=this;var a=["Text","Small Text"].indexOf(t.fieldtype)!==-1?" grid-overflow-no-ellipsis":"";a+=["Int","Currency","Float","Percent"].indexOf(t.fieldtype)!==-1?" text-right":"",a+=["Check"].indexOf(t.fieldtype)!==-1?" text-center":"";let l="";t.sticky&&(a+=" sticky-grid-col",t.fieldname in this.grid.sticky_rows||(this.grid.sticky_rows[t.fieldname]=this.grid.sticky_row_sum,this.grid.sticky_row_sum=Object.keys(this.grid.sticky_rows).length?this.grid.sticky_row_sum+o[e]:this.grid.sticky_row_sum),l+=`left: ${this.grid.sticky_rows[t.fieldname]||71}px;`);let f,p,y=!1;function h(m){y=!0;let _=p.getBoundingClientRect().width,g=p.getBoundingClientRect().left,v=parseFloat(f.style.left),w=m.offset().left,x=m.data("fieldtype"),b=_-(w+m.width()),k=0,T=w-g,P=_-(w-g);["Date","Time","Datetime"].includes(x)&&(k=P-220),["Link","Dynamic Link"].includes(x)&&(k=P-250),T<0?f.style.left=`${v-T}px`:k<0?f.style.left=`${v+k}px`:b<0&&(f.style.left=`${v+b}px`)}function d(){let m=document.querySelectorAll(".datepicker.active")[0];m.classList.remove("active"),m.style.width="220px",setTimeout(()=>{m.classList.add("active")},600)}function u(m,_){["Date","Datetime"].includes(_.fieldtype)&&(_==null?void 0:_.read_only)||m.trigger("focus")}var c=$(`<div class="col grid-static-col col-xs-${e} ${a}" style="${l}"></div>`).attr("data-fieldname",t.fieldname).attr("data-fieldtype",t.fieldtype).data("df",t).appendTo(this.row).on("click",function(m){if((t.fieldtype==="Link"||t.fieldtype==="Dynamic Link")&&frappe.utils.sleep(500).then(()=>{let x=m.target.getBoundingClientRect();$(this).find(".awesomplete > ul:first-of-type").css("top",`${x.bottom?x.bottom:m.clientY+20}px`)}),frappe.ui.form.editable_row!==s)var _=s.toggle_editable_row();var g=this;let v=$(g).find('input[type="Text"]:first'),w=!1;return $(g).find("input[type='text']").each(function(){$(this).is(":focus")&&(w=!0)}),!w&&u(v,$(g).data("df")),m.pointerType=="touch"&&(v.length&&h(v),v.one("blur",()=>w=!1),v.data("fieldtype")=="Date"&&d()),_});return c.field_area=$('<div class="field-area"></div>').appendTo(c).toggle(!1),c.static_area=$('<div class="static-area ellipsis"></div>').appendTo(c).html(i),this.doc||c.attr("title",i),t.fieldname&&c.static_area.toggleClass("reqd",Boolean(t.reqd)),c.df=t,c.column_index=n,this.columns[t.fieldname]=c,this.columns_list.push(c),c}activate(){return this.toggle_editable_row(!0),this}toggle_editable_row(t){var e=this;if(this.grid.allow_on_grid_editing()&&this.grid.is_editable()&&this.doc&&t!==!1)return frappe.ui.form.editable_row&&frappe.ui.form.editable_row!==this&&frappe.ui.form.editable_row.toggle_editable_row(!1),this.row.toggleClass("editable-row",!0),this.columns_list.forEach(function(i){e.make_control(i),i.static_area.toggle(!1),i.field_area.toggle(!0)}),frappe.ui.form.editable_row=this,!1;this.row.toggleClass("editable-row",!1),this.columns_list.forEach((i,n)=>{if(!this.frm){let o=this.grid.visible_columns[n][0],s=this.doc?frappe.format(this.doc[o.fieldname],o,null,this.doc):__(o.label,null,o.parent);this.refresh_field(o.fieldname,s)}i.df.hidden||i.static_area.toggle(!0),i.field_area&&i.field_area.toggle(!1)}),frappe.ui.form.editable_row=null}make_control(t){if(t.field)return;var e=this,i=t.field_area,n=t.df,o=frappe.ui.form.make_control({df:n,parent:i,only_input:!0,with_link_btn:!0,doc:this.doc,doctype:this.doc.doctype,docname:this.doc.name,frm:this.grid.frm,grid:this.grid,grid_row:this,value:this.doc[n.fieldname]});o.get_query=this.grid.get_field(n.fieldname).get_query;let s=n.onchange;o.df.change=a=>{this.refresh_depedency(),s&&s.apply(o,[a]),e.refresh_field(o.df.fieldname)},o.refresh(),o.$input&&(o.$input.addClass("input-sm").attr("data-col-idx",t.column_index).attr("placeholder",__(n.placeholder||n.label)),this.columns_list&&this.columns_list.slice(-1)[0]===t&&o.$input.attr("data-last-input",1)),this.set_arrow_keys(o),t.field=o,this.on_grid_fields_dict[n.fieldname]=o,this.on_grid_fields.push(o)}set_arrow_keys(t){var e=this;let i=["Text","Small Text","Code","Text Editor","HTML Editor"];t.$input&&t.$input.on("keydown",function(n){var{ESCAPE:o,TAB:s,UP:a,DOWN:l}=frappe.ui.keyCode;if(![s,a,l,o].includes(n.which))return;var f=e.grid.get_data(),p=$(this).attr("data-fieldname"),y=$(this).attr("data-fieldtype");let h=n.metaKey||n.ctrlKey;if(!i.includes(y)&&h&&n.which!==s){e.add_new_row_using_keys(n);return}if(n.shiftKey&&n.altKey&&l===n.which){e.duplicate_row_using_keys();return}var d=function(m){if(i.includes(y)&&!n.altKey||t.autocomplete_open)return!1;m.toggle_editable_row();var _=m.columns[p].field.$input;return _&&_.focus(),!0};if(n.which===o&&!n.shiftKey)return e.doc.__unedited&&e.grid.grid_rows[e.doc.idx-1].remove(),!1;if(n.which===a){if(e.doc.idx>1){var u=e.grid.grid_rows[e.doc.idx-2];if(d(u))return!1}}else if(n.which===l&&e.doc.idx<f.length){var c=e.grid.grid_rows[e.doc.idx];if(d(c))return!1}})}duplicate_row_using_keys(){setTimeout(()=>{this.insert(!1,!0,!0),this.grid.grid_rows[this.doc.idx].toggle_editable_row(),this.grid.set_focus_on_row(this.doc.idx)},100)}add_new_row_using_keys(t){let e="",i=t.metaKey||t.ctrlKey,n=t.which===40;i&&t.shiftKey?(e=n?null:1,this.grid.add_new_row(e,null,n,!1,n,!n),e=n?cint(this.grid.grid_rows.length)-1:0):i&&(e=n?this.doc.idx:this.doc.idx-1,this.insert(!1,n)),e!==""&&setTimeout(()=>{this.grid.grid_rows[e].toggle_editable_row(),this.grid.set_focus_on_row(e)},100)}get_open_form(){return frappe.ui.form.get_open_grid_form()}toggle_view(t,e){if(!this.doc)return this;this.frm&&(this.doc=locals[this.doc.doctype][this.doc.name]);var i=this.get_open_form();if(t===void 0&&(t=!i),document.activeElement&&document.activeElement.blur(),t&&i)if(i==this){e&&e();return}else i.toggle_view(!1);return t?this.show_form():this.hide_form(),e&&e(),this}show_form(){frappe.utils.is_xs()&&($(this.grid.form_grid).css("min-width","0"),$(this.grid.form_grid).css("position","unset")),this.grid_form||(this.grid_form=new ro({row:this})),this.grid_form.wrapper.css("display","block"),this.grid_form.render(),this.row.toggle(!1);let t=this.grid.cannot_add_rows||this.grid.df&&this.grid.df.cannot_add_rows;this.wrapper.find(".grid-insert-row-below, .grid-insert-row, .grid-duplicate-row, .grid-append-row").toggle(!t),this.wrapper.find(".grid-delete-row").toggle(!(this.grid.df&&this.grid.df.cannot_delete_rows)),frappe.dom.freeze("","dark grid-form"),cur_frm&&(cur_frm.cur_grid=this),this.wrapper.addClass("grid-row-open"),!frappe.dom.is_element_in_viewport(this.wrapper)&&!frappe.dom.is_element_in_modal(this.wrapper)&&frappe.utils.scroll_to(this.wrapper,!0,-15),this.frm&&(this.frm.script_manager.trigger(this.doc.parentfield+"_on_form_rendered"),this.frm.script_manager.trigger("form_render",this.doc.doctype,this.doc.name))}hide_form(){frappe.utils.is_xs()&&($(this.grid.form_grid).css("min-width","738px"),$(this.grid.form_grid).css("position","relative")),frappe.dom.unfreeze(),this.row.toggle(!0),frappe.dom.is_element_in_modal(this.row)||frappe.utils.scroll_to(this.row,!0,15),this.refresh(),cur_frm&&(cur_frm.cur_grid=null),this.grid_form&&this.grid_form.wrapper.css("display","none"),this.wrapper.removeClass("grid-row-open"),this.open_form_button.parent().focus()}has_prev(){return this.doc.idx>1}open_prev(){!this.doc||this.open_row_at_index(this.doc.idx-2)}has_next(){return this.doc.idx<this.grid.data.length}open_next(){!this.doc||this.open_row_at_index(this.doc.idx)}open_row_at_index(t){if(!!this.grid.data[t])return this.change_page_if_reqd(t),this.grid.grid_rows[t].toggle_view(!0),!0}change_page_if_reqd(t){let{page_index:e,page_length:i}=this.grid.grid_pagination;t++;let n;t<=(e-1)*i?n=e-1:t>e*i&&(n=e+1),n&&this.grid.grid_pagination.go_to_page(n)}refresh_field(t,e){let n=(this.grid.user_defined_columns&&this.grid.user_defined_columns.length>0?this.grid.user_defined_columns:this.docfields).find(a=>(a==null?void 0:a.fieldname)===t);n&&this.doc&&(e=frappe.format(this.doc[t],n,null,this.doc)),!e&&this.frm&&(e=frappe.format(this.doc[t],n,null,this.frm.doc));let o=this.columns[t];o&&(o.static_area.html(e||""),n&&n.reqd&&o.toggleClass("error",e===null||e===""));let s=this.on_grid_fields_dict[t];s&&(this.doc&&(s.docname=this.doc.name),s.refresh()),this.grid_form&&this.grid_form.refresh_field(t)}get_field(t){let e=this.on_grid_fields_dict[t];if(e)return e;if(this.grid_form)return this.grid_form.fields_dict[t];throw`fieldname ${t} not found`}get_visible_columns(t=[]){var e=this,i=$.map(this.docfields,function(n){var o=!n.hidden&&n.in_list_view&&e.grid.frm.get_perm(n.permlevel,"read")&&!frappe.model.layout_fields.includes(n.fieldtype)&&!t.includes(n.fieldname);return o?n:null});return i}set_field_property(t,e,i){var n=this,o=function(s){!s||(s.df[e]=i,s.refresh())};this.grid_form&&(o(this.grid_form.fields_dict[t]),this.grid_form.layout&&this.grid_form.layout.refresh_sections()),o(this.on_grid_fields_dict[t])}toggle_reqd(t,e){this.set_field_property(t,"reqd",e?1:0)}toggle_display(t,e){this.set_field_property(t,"hidden",e?0:1)}toggle_editable(t,e){this.set_field_property(t,"read_only",e?0:1)}};var io=class{constructor(t){$.extend(this,t),this.setup_pagination()}setup_pagination(){var t;this.page_length=((t=this.grid.meta)==null?void 0:t.grid_page_length)||50,this.page_index=1,this.total_pages=Math.ceil(this.grid.data.length/this.page_length),this.render_pagination()}render_pagination(){if(this.grid.data.length<=this.page_length)this.wrapper.find(".grid-pagination").html("");else{let t=this.get_pagination_html();this.wrapper.find(".grid-pagination").html(t),this.prev_page_button=this.wrapper.find(".prev-page"),this.next_page_button=this.wrapper.find(".next-page"),this.$page_number=this.wrapper.find(".current-page-number"),this.$total_pages=this.wrapper.find(".total-page-number"),this.first_page_button=this.wrapper.find(".first-page"),this.last_page_button=this.wrapper.find(".last-page"),this.bind_pagination_events()}}bind_pagination_events(){this.prev_page_button.on("click",()=>{this.render_prev_page()}),this.next_page_button.on("click",()=>{this.render_next_page()}),this.first_page_button.on("click",()=>{this.go_to_page(1)}),this.last_page_button.on("click",()=>{this.go_to_page(this.total_pages)}),this.$page_number.on("keyup",t=>{t.currentTarget.style.width=(t.currentTarget.value.length+1)*8+"px"}),this.$page_number.on("keydown",t=>{t=t||window.event;var e=t.which?t.which:t.keyCode;let i={up:38,down:40};switch(e){case i.up:this.inc_dec_number(!0);break;case i.down:this.inc_dec_number(!1);break}return!(e>31&&(e<48||e>57)&&![37,38,39,40].includes(e))}),this.$page_number.on("focusout",t=>{this.page_index!=t.currentTarget.value&&(this.page_index=t.currentTarget.value,this.page_index<1?this.page_index=1:this.page_index>this.total_pages&&(this.page_index=this.total_pages),this.go_to_page())})}inc_dec_number(t){let e=parseInt(this.$page_number.val());t?e++:e--,!(e<1||e>this.total_pages)&&this.$page_number.val(e)}update_page_numbers(){let t=Math.ceil(this.grid.data.length/this.page_length);this.total_pages!==t&&(this.total_pages=t,this.render_pagination())}check_page_number(){this.page_index>this.total_pages&&this.page_index>1&&this.go_to_page(this.page_index-1)}get_pagination_html(){let t=`<div class="page-text">
				<input class="current-page-number page-number" type="text" value="${__(this.page_index)}"/>
				<span>${__("of")}</span>
				<span class="total-page-number page-number"> ${__(this.total_pages)} </span>
			</div>`;return $(`<button class="btn btn-secondary btn-xs first-page"">
				<span>${__("First")}</span>
			</button>
			<button class="btn btn-secondary btn-xs prev-page">${frappe.utils.icon("left","xs")}</button>
			${t}
			<button class="btn btn-secondary btn-xs next-page">${frappe.utils.icon("right","xs")}</button>
			<button class="btn btn-secondary btn-xs last-page">
				<span>${__("Last")}</span>
			</button>`)}render_next_page(){this.page_index*this.page_length<this.grid.data.length&&(this.page_index++,this.go_to_page())}render_prev_page(){this.page_index>1&&(this.page_index--,this.go_to_page())}go_to_page(t,e){t?this.page_index=t:t=this.page_index;let i=$(this.grid.parent).find(".rows").empty();this.grid.render_result_rows(i,!0),this.$page_number&&(this.$page_number.val(t),this.$page_number.css("width",(t.toString().length+1)*8+"px")),this.update_page_numbers(),e||this.grid.scroll_to_top()}go_to_last_page_to_add_row(){let t=this.total_pages,e=this.page_length;if(this.grid.data.length==e*t)this.go_to_page(t+1),frappe.utils.scroll_to(this.wrapper);else{if(this.page_index==this.total_pages)return;this.go_to_page(t)}}get_result_length(){return this.grid.data.length<this.page_index*this.page_length?this.grid.data.length:this.page_index*this.page_length}};frappe.ui.form.get_open_grid_form=function(){return $(".grid-row-open").data("grid_row")};frappe.ui.form.close_grid_form=function(){var r=frappe.ui.form.get_open_grid_form();r&&r.hide_form(),frappe.ui.form.editable_row&&frappe.ui.form.editable_row.toggle_editable_row(!1)};var no=class{constructor(t){at(this,"debounced_refresh_remove_rows_button",frappe.utils.debounce(this.refresh_remove_rows_button,100));$.extend(this,t),this.fieldinfo={},this.doctype=this.df.options,this.sticky_row_sum=71,this.sticky_rows=[],this.doctype&&(this.meta=frappe.get_meta(this.doctype)),this.fields_map={},this.template=null,this.multiple_set=!1,this.frm&&this.frm.meta.__form_grid_templates&&this.frm.meta.__form_grid_templates[this.df.fieldname]&&(this.template=this.frm.meta.__form_grid_templates[this.df.fieldname]),this.filter={},this.is_grid=!0,this.debounced_refresh=this.refresh.bind(this),this.debounced_refresh=frappe.utils.debounce(this.debounced_refresh,100)}get perm(){var t,e;return((t=this.control)==null?void 0:t.perm)||((e=this.frm)==null?void 0:e.perm)||this.df.perm}set perm(t){console.error("Setting perm on grid isn't supported, update form's perm instead")}allow_on_grid_editing(){return!!(this.meta&&this.meta.editable_grid||!this.meta)}make(){let t=`
			<div class="grid-field">
				<label class="control-label">${__(this.df.label||"",null,this.df.parent)}</label>
				<span class="help"></span>
				<p class="text-muted small grid-description"></p>
				<div class="grid-custom-buttons"></div>
				<div class="form-grid-container">
					<div class="form-grid">
						<div class="grid-heading-row"></div>
						<div class="grid-body">
							<div class="rows"></div>
							<div class="grid-empty text-center text-extra-muted">
								${__("No rows")}
							</div>
						</div>
					</div>
				</div>
				<div class="small form-clickable-section grid-footer">
					<div class="flex justify-between">
						<div class="grid-buttons">
							<button type="button" class="btn btn-xs btn-danger grid-remove-rows hidden"
								data-action="delete_rows">
								${__("Delete")}
							</button>
							<button type="button" class="btn btn-xs btn-secondary grid-remove-rows hidden"
								data-action="duplicate_rows">
								${__("Duplicate Row")}
							</button>
							<button type="button" class="btn btn-xs btn-danger grid-remove-all-rows hidden"
								data-action="delete_all_rows">
								${__("Delete All")}
							</button>
							<!-- hack to allow firefox include this in tabs -->
							<button type="button" class="btn btn-xs btn-secondary grid-add-row">
								${__("Add Row")}
							</button>
							<button type="button" class="grid-add-multiple-rows btn btn-xs btn-secondary hidden">
								${__("Add Multiple")}</a>
							</button>
						</div>
						<div class="grid-pagination">
						</div>
						<div class="grid-bulk-actions text-right">
							<button type="button" class="grid-download btn btn-xs btn-secondary hidden">
								${__("Download")}
							</button>
							<button type="button" class="grid-upload btn btn-xs btn-secondary hidden">
								${__("Upload")}
							</button>
						</div>
					</div>
				</div>
			</div>
		`;this.wrapper=$(t).appendTo(this.parent),$(this.parent).addClass("form-group"),this.set_grid_description(),this.set_doc_url(),frappe.utils.bind_actions_with_object(this.wrapper,this),this.form_grid=this.wrapper.find(".form-grid"),this.setup_add_row(),this.setup_grid_pagination(),this.update_idx_and_name(),this.custom_buttons={},this.grid_buttons=this.wrapper.find(".grid-buttons"),this.grid_custom_buttons=this.wrapper.find(".grid-custom-buttons"),this.remove_rows_button=this.grid_buttons.find(".grid-remove-rows"),this.remove_all_rows_button=this.grid_buttons.find(".grid-remove-all-rows"),this.setup_allow_bulk_edit(),this.setup_check(),this.df.on_setup&&this.df.on_setup(this)}set_grid_description(){let t=$(this.parent).find(".grid-description");this.df.description?t.html(__(this.df.description)):t.hide()}update_idx_and_name(){this.data.forEach((t,e)=>{t.idx===void 0&&(t.idx=e+1),t.name===void 0&&(t.name=this.get_random_name())})}get_random_name(){return Math.random().toString(36).slice(2,10)}set_doc_url(){var i;let t=frappe.model.no_value_type.filter(n=>frappe.model.table_fields.indexOf(n)===-1);if(!this.df.label||!((i=this.df)!=null&&i.documentation_url)||t.includes(this.df.fieldtype))return;let e=$(this.parent).find("span.help");e.empty(),$(`<a href="${this.df.documentation_url}" target="_blank">
			${frappe.utils.icon("help","sm")}
		</a>`).appendTo(e)}setup_grid_pagination(){this.grid_pagination=new io({grid:this,wrapper:this.wrapper})}setup_check(){this.wrapper.on("click",".grid-row-check",t=>{var s;let e=$(t.currentTarget),i=e.prop("checked"),n=e.parents(".grid-heading-row:first").length!==0,o=(s=e.parents(".grid-row:first"))==null?void 0:s.attr("data-name");if(n){this.form_grid.find(".grid-row-check").prop("checked",i);let a=this.grid_pagination.get_result_length(),l=this.grid_pagination.page_index,f=this.grid_pagination.page_length;for(let p=(l-1)*f;p<a;p++)this.grid_rows[p].select(i)}else o&&(t.shiftKey&&this.last_checked_docname&&this.check_range(o,this.last_checked_docname,i),this.grid_rows_by_docname[o].select(i),this.last_checked_docname=o);this.refresh_remove_rows_button()})}check_range(t,e,i=!0){var y;let n=this.grid_rows_by_docname[t],o=this.grid_rows_by_docname[e],s=this.grid_rows.indexOf(n),a=this.grid_rows.indexOf(o);if(s===-1||a===-1)return;let[l,f]=[s,a].sort((h,d)=>h-d),p=this.grid_rows.slice(l,f+1);for(let h of p)h.select(i),(y=h.row_check)==null||y.find(".grid-row-check").prop("checked",i)}duplicate_rows(){this.get_selected_children().forEach(e=>{this.add_new_row(null,null,!1,e,!1),this.check_range(e.name,e.name,!1)})}delete_rows(){var t=!1;let e=[],i=this.get_selected_children();i.forEach(n=>{e.push(()=>{var o;this.frm||(this.df.data=this.get_data(),this.df.data=this.df.data.filter(s=>s.idx!=n.idx)),(o=this.grid_rows_by_docname[n.name])==null||o.remove(),t=!0}),e.push(()=>frappe.timeout(.1))}),this.frm||e.push(()=>{this.df.data.forEach((n,o)=>n.idx=o+1)}),e.push(()=>{t&&(this.refresh(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_delete",this.doctype))}),frappe.run_serially(e),this.wrapper.find(".grid-heading-row .grid-row-check:checked:first").prop("checked",0),i.length==this.grid_pagination.page_length&&this.scroll_to_top()}delete_all_rows(){frappe.confirm(__("Are you sure you want to delete all rows?"),()=>{this.frm.doc[this.df.fieldname]=[],$(this.parent).find(".rows").empty(),this.grid_rows=[],this.refresh(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_delete",this.doctype),this.frm&&this.frm.dirty(),this.scroll_to_top()})}scroll_to_top(){frappe.utils.scroll_to(this.wrapper)}select_row(t){this.grid_rows_by_docname[t].select()}remove_all(){this.grid_rows.forEach(t=>{t.remove()})}refresh_remove_rows_button(){if(this.df.cannot_delete_rows)return;this.remove_rows_button.toggleClass("hidden",!this.wrapper.find(".grid-body .grid-row-check:checked:first").length);let e=this.wrapper.find(".grid-heading-row .grid-row-check:checked:first").length&&this.data.length>this.get_selected_children().length;this.remove_all_rows_button.toggleClass("hidden",!e)}get_selected(){return(this.grid_rows||[]).map(t=>t.doc.__checked?t.doc.name:null).filter(t=>t)}get_selected_children(){return(this.data||[]).map(t=>t.__checked?t:0).filter(t=>t)}reset_grid(){this.visible_columns=[],this.grid_rows=[],$(this.parent).find(".grid-body .grid-row").remove(),this.refresh()}make_head(){this.prevent_build||(this.header_row&&$(this.parent).find(".grid-heading-row .grid-row").remove(),this.header_row=new ii({parent:$(this.parent).find(".grid-heading-row"),parent_df:this.df,docfields:this.docfields,frm:this.frm,grid:this,configure_columns:!0,header_row:!0}),this.header_search=new ii({parent:$(this.parent).find(".grid-heading-row"),parent_df:this.df,docfields:this.docfields,frm:this.frm,grid:this,show_search:!0}),this.header_search.row.addClass("filter-row"),this.header_search.show_search||this.header_search.show_search_row()?$(this.parent).find(".grid-heading-row").addClass("with-filter"):$(this.parent).find(".grid-heading-row").removeClass("with-filter"),this.filter_applied&&this.update_search_columns())}update_search_columns(){for(let t in this.filter){if(this.filter[t]&&!this.header_search.search_columns[t]){delete this.filter[t],this.data=this.get_data(this.filter_applied);break}if(this.filter[t]&&this.filter[t].value){let e=this.header_search.row_index.find("input");t&&t!=="row-index"&&(e=this.header_search.search_columns[t].find("input")),e.val(this.filter[t].value)}}}refresh(){if(this.frm&&this.frm.setting_dependency)return;this.filter_applied=Object.keys(this.filter).length!==0,this.data=this.get_data(this.filter_applied),!this.wrapper&&this.make();let t=$(this.parent).find(".rows");this.setup_fields(),this.frm?this.display_status=frappe.perm.get_field_display_status(this.df,this.frm.doc,this.perm):this.df.is_web_form&&this.control?this.display_status=this.control.get_status():this.display_status="Write",this.display_status!=="None"&&(this.make_head(),this.grid_rows||(this.grid_rows=[]),this.truncate_rows(),this.grid_rows_by_docname={},this.grid_pagination.update_page_numbers(),this.render_result_rows(t,!1),this.grid_pagination.check_page_number(),this.wrapper.find(".grid-empty").toggleClass("hidden",Boolean(this.data.length)),this.setup_toolbar(),this.toggle_checkboxes(this.display_status!=="Read"),this.is_sortable()&&!this.sortable_setup_done&&(this.make_sortable(t),this.sortable_setup_done=!0),this.last_display_status=this.display_status,this.last_docname=this.frm&&this.frm.docname,this.form_grid.toggleClass("error",!!(this.df.reqd&&!(this.data&&this.data.length))),this.refresh_remove_rows_button(),this.wrapper.trigger("change"))}render_result_rows(t,e){let i=this.grid_pagination.get_result_length(),n=this.grid_pagination.page_index,o=this.grid_pagination.page_length;if(!!this.grid_rows)for(var s=(n-1)*o;s<i;s++){var a=this.data[s];if(!a)return;a.idx===void 0&&(a.idx=s+1),a.name===void 0&&(a.name=this.get_random_name());let l;this.grid_rows[s]&&!e?(l=this.grid_rows[s],l.doc=a,l.refresh()):(l=new ii({parent:t,parent_df:this.df,docfields:this.docfields,doc:a,frm:this.frm,grid:this}),this.grid_rows[s]=l),this.grid_rows_by_docname[a.name]=l}}setup_toolbar(){this.is_editable()?(this.wrapper.find(".grid-footer").toggle(!0),this.cannot_add_rows||this.df&&this.df.cannot_add_rows?this.wrapper.find(".grid-add-row, .grid-add-multiple-rows").addClass("hidden"):(this.wrapper.find(".grid-add-row").removeClass("hidden"),this.multiple_set&&this.wrapper.find(".grid-add-multiple-rows").removeClass("hidden"))):this.grid_rows.length<this.grid_pagination.page_length&&!this.df.allow_bulk_edit&&this.wrapper.find(".grid-footer").toggle(!1),this.wrapper.find(".grid-add-row, .grid-add-multiple-rows, .grid-upload").toggle(this.is_editable())}truncate_rows(){if(this.grid_rows.length>this.data.length){for(var t=this.data.length;t<this.grid_rows.length;t++){var e=this.grid_rows[t];e&&e.wrapper.remove()}this.grid_rows.splice(this.data.length)}}setup_fields(){this.frm&&this.frm.docname?this.df=frappe.meta.get_docfield(this.frm.doctype,this.df.fieldname,this.frm.docname):this.df.options&&(this.df=frappe.meta.get_docfield(this.df.options,this.df.fieldname)||this.df||null),this.doctype&&this.frm?this.docfields=frappe.meta.get_docfields(this.doctype,this.frm.docname):this.docfields=this.df.fields,this.docfields.forEach(t=>{this.fields_map[t.fieldname]=t})}refresh_row(t){this.grid_rows_by_docname[t]&&this.grid_rows_by_docname[t].refresh()}make_sortable(t){this.grid_sortable=new Sortable(t.get(0),{group:{name:this.df.fieldname},handle:".sortable-handle",draggable:".grid-row",animation:100,filter:"li, a",onMove:e=>{if(!this.is_editable())return!1;let i=$(e.dragged).closest(".grid-row").attr("data-idx"),n=this.data[i%this.grid_pagination.page_length];if(n&&n._sortable===!1)return!1},onUpdate:e=>{let i=$(e.item).closest(".grid-row").attr("data-idx")-1,n=this.data[i%this.grid_pagination.page_length];this.renumber_based_on_dom(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_move",this.df.options,n.name),this.refresh(),this.frm&&this.frm.dirty()}}),this.frm&&$(this.frm.wrapper).trigger("grid-make-sortable",[this.frm])}get_data(t){let e=[];return t?e=this.get_filtered_data():e=this.frm?this.frm.doc[this.df.fieldname]||[]:this.df.data||this.get_modal_data(),e}get_filtered_data(){let t=this.frm?this.frm.doc[this.df.fieldname]:this.df.data;if(!!t){for(let e in this.filter)t=t.filter(i=>{let{df:n,value:o}=this.filter[e];return this.get_data_based_on_fieldtype(n,i,o.toLowerCase())});return t}}get_data_based_on_fieldtype(t,e,i){let n=t.fieldname,o=t.fieldtype,s=e[n];if(o==="Check")return i=frappe.utils.string_to_boolean(i),Boolean(s)===i&&e;if(o==="Sr No"&&e.idx.toString().includes(i))return e;if(o==="Duration"&&s){if(frappe.utils.get_formatted_duration(s).includes(i))return e}else if(o==="Barcode"&&s){if((s.startsWith("<svg")?$(s).attr("data-barcode-value"):s).toLowerCase().includes(i))return e}else if(["Datetime","Date"].includes(o)&&s){if(frappe.datetime.str_to_user(s).includes(i))return e}else if(["Currency","Float","Int","Percent","Rating"].includes(o)){let a=s||0;if(o==="Rating"){let l=parseInt(t.options)||5;a=a*l}if(a.toString().indexOf(i)>-1)return e}else if(s&&s.toLowerCase().includes(i))return e}get_modal_data(){return this.df.get_data?this.df.get_data().filter(t=>{if(!this.deleted_docs||!this.deleted_docs.includes(t.name))return t}):[]}set_column_disp(t,e){if(Array.isArray(t))for(let i of t)this.update_docfield_property(i,"hidden",e?0:1),this.set_editable_grid_column_disp(i,e);else this.get_docfield(t).hidden=e?0:1,this.set_editable_grid_column_disp(t,e);this.debounced_refresh()}set_editable_grid_column_disp(t,e){this.meta.editable_grid&&this.grid_rows&&this.grid_rows.forEach(i=>{i.columns_list.forEach(n=>{n.df.fieldname==t&&(e?(n.df.hidden=!1,i!=frappe.ui.form.editable_row?(n.static_area.show(),n.field_area&&n.field_area.toggle(!1)):(n.static_area.hide(),n.field_area&&n.field_area.toggle(!0),n.field&&(n.field.refresh(),n.field.$input&&n.field.$input.toggleClass("input-sm",!0)))):(n.df.hidden=!0,n.static_area.hide()))})}),this.refresh()}toggle_reqd(t,e){this.update_docfield_property(t,"reqd",e),this.debounced_refresh()}toggle_enable(t,e){this.update_docfield_property(t,"read_only",e?0:1),this.debounced_refresh()}toggle_display(t,e){this.update_docfield_property(t,"hidden",e?0:1),this.debounced_refresh()}toggle_checkboxes(t){this.wrapper.find(".grid-row-check").prop("disabled",!t)}get_docfield(t){return frappe.meta.get_docfield(this.doctype,t,this.frm?this.frm.docname:null)}get_row(t){return typeof t=="number"?t<0?this.grid_rows[this.grid_rows.length+t]:this.grid_rows[t]:this.grid_rows_by_docname[t]}get_grid_row(t){return this.get_row(t)}get_field(t){return this.fieldinfo[t]||(this.fieldinfo[t]={}),this.fieldinfo[t]}set_value(t,e,i){var n;this.display_status!=="None"&&(i==null?void 0:i.name)&&((n=this.grid_rows_by_docname)==null?void 0:n[i.name])&&this.grid_rows_by_docname[i.name].refresh_field(t,e)}setup_add_row(){this.wrapper.find(".grid-add-row").click(()=>(this.add_new_row(null,null,!0,null,!0),this.set_focus_on_row(),!1))}add_new_row(t,e,i,n,o=!1,s=!1){if(this.is_editable()){if(o?this.grid_pagination.go_to_last_page_to_add_row():s&&this.grid_pagination.go_to_page(1),this.frm){var a=frappe.model.add_child(this.frm.doc,this.df.options,this.df.fieldname,t);n&&(a=this.duplicate_row(a,n)),a.__unedited=!0,this.frm.script_manager.trigger(this.df.fieldname+"_add",a.doctype,a.name),this.refresh()}else{this.df.data||(this.df.data=this.get_data()||[]);let l=this.docfields.reduce((p,y)=>(p[y.fieldname]=y.default,p),{}),f=this.df.data.length+1;this.df.data.push(Pt({idx:f,__islocal:!0},l)),this.df.on_add_row&&this.df.on_add_row(f),this.refresh()}return i&&(t?this.wrapper.find("[data-idx='"+t+"']").data("grid_row").toggle_view(!0,e):this.allow_on_grid_editing()||this.wrapper.find(".grid-row:last").data("grid_row").toggle_view(!0,e)),a}}renumber_based_on_dom(){$(this.parent).find(".rows").find(".grid-row").each((e,i)=>{let n=$(i),o=(this.grid_pagination.page_index-1)*this.grid_pagination.page_length+e,s=this.grid_rows_by_docname[n.attr("data-name")].doc;s.idx=o+1,n.attr("data-idx",s.idx),this.frm&&(this.frm.doc[this.df.fieldname][o]=s),this.data[o]=s,this.grid_rows[o]=this.grid_rows_by_docname[s.name]})}duplicate_row(t,e){return $.each(e,function(i,n){["creation","modified","modified_by","idx","owner","parent","doctype","name","parentfield"].includes(i)||(t[i]=n)}),t}set_focus_on_row(t){!t&&t!==0&&(t=this.grid_rows.length-1),setTimeout(()=>{this.grid_rows[t].row.find('input[type="checkbox"],input[type="Text"],textarea,select').filter(":visible:first").focus()},100)}setup_visible_columns(){if(!(this.visible_columns&&this.visible_columns.length>0)){this.user_defined_columns=[],this.setup_user_defined_columns();var t=1,e=this.user_defined_columns&&this.user_defined_columns.length>0?this.user_defined_columns:this.editable_fields||this.docfields;this.visible_columns=[];for(var i in e){var n=e[i];if(a=this.user_defined_columns&&this.user_defined_columns.length>0?n:this.fields_map[n.fieldname],a&&!a.hidden&&(this.editable_fields||a.in_list_view)&&(this.frm&&this.frm.get_perm(a.permlevel,"read")||!this.frm)&&!frappe.model.layout_fields.includes(a.fieldtype)){if(a.columns?a.colsize=a.columns:this.update_default_colsize(a),a.fieldtype=="Link"&&!a.formatter&&a.parent&&frappe.meta.docfield_map[a.parent]){let f=frappe.meta.docfield_map[a.parent][a.fieldname];f&&f.formatter&&(a.formatter=f.formatter)}t+=a.colsize,this.visible_columns.push([a,a.colsize])}}for(var o=0;t<11&&o<12;){for(var s in this.visible_columns){var a=this.visible_columns[s][0],l=this.visible_columns[s][1];if(l>1&&l<11&&frappe.model.is_non_std_field(a.fieldname)){if(o<3&&["Int","Currency","Float","Check","Percent"].indexOf(a.fieldtype)!==-1)continue;this.visible_columns[s][1]+=1,t++}if(t>10)break}o++}}}update_default_colsize(t){var e=2;switch(t.fieldtype){case"Text":break;case"Small Text":e=3;break;case"Check":e=1}t.colsize=e}setup_user_defined_columns(){if(!this.frm)return;let t=frappe.get_user_settings(this.frm.doctype,"GridView");t&&t[this.doctype]&&t[this.doctype].length&&(this.user_defined_columns=t[this.doctype].map(e=>{let i=frappe.meta.get_docfield(this.doctype,e.fieldname);if(i)return i.in_list_view=1,i.columns=e.columns,i.sticky=e.sticky,i}).filter(Boolean))}is_editable(){return this.display_status=="Write"&&!this.static_rows}is_sortable(){return this.sortable_status||this.is_editable()}only_sortable(t){(t===void 0||t)&&(this.sortable_status=!0,this.static_rows=!0)}set_multiple_add(t,e){if(!this.multiple_set){var i=frappe.meta.get_docfield(this.df.options,t),n=$(this.wrapper).find(".grid-add-multiple-rows");n.removeClass("hidden"),n.on("click",()=>(new frappe.ui.form.LinkSelector({doctype:i.options,fieldname:t,qty_fieldname:e,get_query:i.get_query,target:this,txt:""}),this.grid_pagination.go_to_last_page_to_add_row(),!1)),this.multiple_set=!0}}setup_allow_bulk_edit(){var e;let t=this;if(this.frm&&((e=this.frm.get_docfield(this.df.fieldname))==null?void 0:e.allow_bulk_edit)){this.setup_download();let i={Date:n=>n&&frappe.datetime.user_to_str(n),Int:n=>cint(n),Check:n=>cint(n),Float:n=>flt(n),Currency:n=>flt(n)};frappe.flags.no_socketio=!0,$(this.wrapper).find(".grid-upload").removeClass("hidden").on("click",()=>(new frappe.ui.FileUploader({as_dataurl:!0,allow_multiple:!1,restrictions:{allowed_file_types:[".csv"]},on_success(n){var o=frappe.utils.csv_to_array(frappe.utils.get_decoded_string(n.dataurl));cint(o.length)-7>5e3&&frappe.throw(__("Cannot import table with more than 5000 rows."));var s=o[2];t.frm.clear_table(t.df.fieldname),$.each(o,(a,l)=>{if(a>6){var f=!0;if($.each(l,function(y,h){if(h)return f=!1,!1}),!f){var p=t.frm.add_child(t.df.fieldname);$.each(l,(y,h)=>{var d=s[y],u=frappe.meta.get_docfield(t.df.options,d);u&&(p[s[y]]=i[u.fieldtype]?i[u.fieldtype](h):h)})}}}),t.frm.refresh_field(t.df.fieldname),frappe.msgprint({message:__("Table updated"),title:__("Success"),indicator:"green"})}}),!1))}}setup_download(){let t=this.df.label||frappe.model.unscrub(this.df.fieldname);$(this.wrapper).find(".grid-download").removeClass("hidden").on("click",()=>{var e=[],i=[];return e.push([__("Bulk Edit {0}",[t])]),e.push([]),e.push([]),e.push([]),e.push([__("The CSV format is case sensitive")]),e.push([__("Do not edit headers which are preset in the template")]),e.push(["------"]),$.each(frappe.get_meta(this.df.options).fields,(n,o)=>{if(frappe.model.is_value_type(o.fieldtype)){e[1].push(o.label),e[2].push(o.fieldname);let s=(o.description||"")+" ";o.fieldtype==="Date"&&(s+=frappe.boot.sysdefaults.date_format),e[3].push(s),i.push(o)}}),$.each(this.frm.doc[this.df.fieldname]||[],(n,o)=>{var s=[];$.each(e[2],(a,l)=>{var f=o[l];i[a].fieldtype==="Date"&&f&&(f=frappe.datetime.str_to_user(f)),s.push(f||"")}),e.push(s)}),frappe.tools.downloadify(e,null,t),!1})}add_custom_button(t,e,i="bottom"){let n=i==="top"?this.grid_custom_buttons:this.grid_buttons,o=this.custom_buttons[t];return o?o.removeClass("hidden"):(o=$('<button type="button" class="btn btn-secondary btn-xs btn-custom">').html(__(t)).prependTo(n).on("click",e),this.custom_buttons[t]=o),o}clear_custom_buttons(){this.grid_buttons.find(".btn-custom").addClass("hidden")}update_docfield_property(t,e,i){var n;if(!!this.grid_rows){for(let o of this.grid_rows){let s=(n=o==null?void 0:o.docfields)==null?void 0:n.find(a=>a.fieldname===t);if(s)s[e]=i;else throw`field ${t} not found`}if(this.docfields.find(o=>o.fieldname===t)[e]=i,this.user_defined_columns&&this.user_defined_columns.length>0){let o=this.user_defined_columns.find(s=>s.fieldname===t);o&&Object.keys(o).includes(e)&&(o[e]=i)}this.debounced_refresh()}}};frappe.ui.form.ControlTable=class extends frappe.ui.form.Control{make(){super.make(),this.grid=new no({frm:this.frm,df:this.df,parent:this.wrapper,control:this}),this.frm&&(this.frm.grids[this.frm.grids.length]=this);let t=this;this.$wrapper.on("keydown",e=>{if(e.which==9)if(e.shiftKey){let i=t.set_current_row(e.target);i&&this.grid.grid_rows[i-1].toggle_editable_row(!0)}else this.grid.grid_rows.length>0&&this.grid.grid_rows[this.grid.grid_rows.length-1].toggle_editable_row(!0)}),this.$wrapper.on("paste",":text",e=>{let i=this.df.fieldname,n=this.grid,o=n.grid_pagination,s=n.grid_rows,a=n.doctype,l=$(e.target).closest(".grid-row").data("name"),f=$(e.target).closest(".form-in-grid").length,p={Date:_=>_&&frappe.datetime.user_to_str(_),Int:_=>cint(_),Check:_=>cint(_),Float:_=>flt(_),Currency:_=>flt(_)},y=frappe.utils.get_clipboard_data(e);if(!y||f)return;let h=frappe.utils.csv_to_array(y,"	");if(h.length===1&&h[0].length===1)return;let d=[],u=[];if(this.get_field(h[0][0]))h[0].forEach(_=>{d.push(this.get_field(_));let g=frappe.meta.get_docfield(a,this.get_field(_));u.push(g?g.fieldtype:"")}),h.shift();else{let _=s[0].get_visible_columns(),g=!1;_.forEach(v=>{if(g||v.fieldname===$(e.target).data("fieldname")){d.push(v.fieldname);let w=frappe.meta.get_docfield(a,v.fieldname);u.push(w?w.fieldtype:""),g=!0}})}let c=locals[a][l].idx,m=h.length;return h.forEach((_,g)=>{setTimeout(()=>{if(!!_.filter(Boolean).length){c>this.frm.doc[i].length&&this.grid.add_new_row(),c>1&&(c-1)%o.page_length===0&&o.go_to_page(o.page_index+1);let w=s[c-1].doc.name;if(_.forEach((x,b)=>{d[b]&&(x=p[u[b]]?p[u[b]](x):x,frappe.model.set_value(a,w,d[b],x))}),c++,m>=10){let x=g+1;frappe.show_progress(__("Processing"),x,m,null,!0)}}},0)}),!1})}get_field(t){var i,n;let e;return t=t.toLowerCase(),(n=(i=this.grid)==null?void 0:i.meta)==null||n.fields.some(o=>{if(frappe.model.no_value_type.includes(o.fieldtype))return!1;if((()=>o.fieldname.toLowerCase()===t||(o.label||"").toLowerCase()===t||(__(o.label,null,o.parent)||"").toLowerCase()===t)())return e=o.fieldname,!0}),e}refresh_input(){this.grid.refresh()}get_value(){if(this.grid)return this.grid.get_data()}set_input(){}validate(){return this.get_value()}check_all_rows(){this.$wrapper.find(".grid-row-check")[0].click()}set_current_row(t){let e=null;for(let i=0;i<this.grid.grid_rows.length;i++)this.grid.grid_rows[i].wrapper.get(0).contains(t)&&(e=i+1);return e}};var Ir={get_hue(r){return this.get_hsv(r)[0]},get_hsv(r){return typeof r=="string"&&(r.startsWith("#")?r=this.hex_to_rgb_values(r):r=this.get_rgb_values(r)),this.rgb_to_hsv(...r)},get_rgb_values(r){return r.replace(/[()rgb\s]/g,"").split(",").map(t=>parseInt(t))},rgb_to_hsv(r,t,e){r/=255,t/=255,e/=255;let i=Math.max(r,t,e),n=Math.min(r,t,e),o,s,a=i,l=i-n;if(s=i==0?0:l/i,i==n)o=0;else{switch(i){case r:o=(t-e)/l+(t<e?6:0);break;case t:o=(e-r)/l+2;break;case e:o=(r-t)/l+4;break}o/=6}return[Math.round(o*360),Math.round(s*100),Math.round(a*100)]},component_to_hex(r){let t=r.toString(16);return t.length==1?"0"+t:t},rgb_to_hex(r,t,e){return"#"+this.component_to_hex(r)+this.component_to_hex(t)+this.component_to_hex(e)},hex_to_rgb_values(r){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},hsv_to_hex(r,t,e){t/=100,e/=100,r/=360;let i,n,o,s=Math.floor(r*6),a=r*6-s,l=e*(1-t),f=e*(1-a*t),p=e*(1-(1-a)*t);switch(s%6){case 0:i=e,n=p,o=l;break;case 1:i=f,n=e,o=l;break;case 2:i=l,n=e,o=p;break;case 3:i=l,n=f,o=e;break;case 4:i=p,n=l,o=e;break;case 5:i=e,n=l,o=f;break}return i=Math.round(i*255),n=Math.round(n*255),o=Math.round(o*255),this.rgb_to_hex(i,n,o)},clamp(r,t,e){return t>e?e:t<r?r:t}};var su=class{constructor(t){this.parent=t.parent,this.width=t.width,this.height=t.height,this.set_color(t.color),this.swatches=t.swatches,this.setup_picker()}refresh(){this.set_selector_position(!0),this.update_color_map()}setup_picker(){let t=document.createElement("template");t.innerHTML=`
			<div class="color-picker">
				<div class="swatch-section">
					${__("SWATCHES")}<br>
					<div class="swatches"></div>
				</div>
				${__("COLOR PICKER")}<br>
				<div class="color-map">
					<div class="color-selector"></div>
				</div>
				<div class="hue-map">
					<div class="hue-selector"></div>
				</div>
			</div>
		`.trim(),this.color_picker_wrapper=t.content.firstElementChild.cloneNode(!0),this.parent.appendChild(this.color_picker_wrapper),this.color_map=this.color_picker_wrapper.getElementsByClassName("color-map")[0],this.color_selector_circle=this.color_map.getElementsByClassName("color-selector")[0],this.hue_map=this.color_picker_wrapper.getElementsByClassName("hue-map")[0],this.swatches_wrapper=this.color_picker_wrapper.getElementsByClassName("swatches")[0],this.hue_selector_circle=this.hue_map.getElementsByClassName("hue-selector")[0],this.refresh(),this.setup_events(),this.setup_swatches()}setup_events(){this.setup_hue_event(),this.setup_color_event()}setup_swatches(){let t=document.createElement("template");t.innerHTML='<div class="swatch" tabindex=0></div>',this.swatches.forEach(e=>{let i=t.content.firstElementChild.cloneNode(!0);this.swatches_wrapper.appendChild(i);let n=()=>{this.set_color(e),this.set_selector_position(),this.update_color_map()};i.addEventListener("click",()=>{n()}),i.onkeydown=o=>{let s=o.keyCode;[13,32].includes(s)&&(o.preventDefault(),n())},i.style.backgroundColor=e})}set_selector_position(t){this.hue=Ir.get_hue(this.get_color()),this.color_selector_position=this.get_pointer_coords(),this.hue_selector_position={x:this.hue*this.hue_map.offsetWidth/360,y:this.hue_map.offsetHeight/2},this.update_color_selector(t),this.update_hue_selector(t)}setup_color_event(){let t=(e,i)=>{this.color_selector_position.x=e,this.color_selector_position.y=i,this.update_color(),this.update_color_selector()};this.setup_drag_event(this.color_map,t)}update_color(){let t=this.color_selector_position.x,e=this.color_selector_position.y,i=this.color_map.offsetWidth,n=this.color_map.offsetHeight,o=Ir.hsv_to_hex(this.hue,Math.round(t/i*100),Math.round((1-e/n)*100));this.set_color(o)}update_color_selector(t){let e=this.color_selector_position.x,i=this.color_selector_position.y;this.color_selector_circle.style.top=i-this.color_selector_circle.offsetHeight/2+"px",this.color_selector_circle.style.left=e-this.color_selector_circle.offsetWidth/2+"px",this.color_map.style.color=this.get_color(),!t&&this.on_change&&this.on_change(this.get_color())}setup_hue_event(){let t=(e,i)=>{this.hue_selector_position.x=e,this.hue=Math.round(e*360/this.hue_map.offsetWidth),this.update_color_map(),this.update_hue_selector(),this.update_color(),this.update_color_selector()};this.setup_drag_event(this.hue_map,t)}update_color_map(){this.color_map.style.background=`
			linear-gradient(0deg, black, transparent),
			linear-gradient(90deg, white, transparent),
			hsl(${this.hue}, 100%, 50%)
		`}update_hue_selector(){let t=this.hue_selector_position.x-1,e=this.hue_map.offsetHeight/2-1;this.hue_selector_circle.style.top=e-this.hue_selector_circle.offsetHeight/2+"px",this.hue_selector_circle.style.left=t-this.hue_selector_circle.offsetWidth/2+"px",this.hue_map.style.color=`hsl(${this.hue}, 100%, 50%)`}get_pointer_coords(){let t,e,i;[t,e,i]=Ir.get_hsv(this.get_color());let n=this.color_map.offsetWidth,o=this.color_map.offsetHeight,s=Ir.clamp(0,e*n/100,n),a=Ir.clamp(0,(1-i/100)*o,o);return{x:s,y:a}}setup_drag_event(t,e){let i=(n,o)=>{if(t.drag_enabled||o){n.preventDefault(),n=n.touches?n.touches[0]:n;let s=t.getBoundingClientRect(),a=n.clientX-s.left,l=n.clientY-s.top;a=Ir.clamp(0,a,s.width),l=Ir.clamp(0,l,s.height),e(a,l)}};t.addEventListener("mousedown",()=>t.drag_enabled=!0),document.addEventListener("mouseup",()=>t.drag_enabled=!1),document.addEventListener("mousemove",i),t.addEventListener("click",n=>i(n,!0)),t.addEventListener("touchstart",()=>t.drag_enabled=!0),t.addEventListener("touchend",()=>t.drag_enabled=!1),t.addEventListener("touchcancel",()=>t.drag_enabled=!1),t.addEventListener("touchmove",n=>{n.touches.length==1?i(n):t.drag_enabled=!1})}set_color(t){this.color=t||"#ffffff"}get_color(){return this.color||"#ffffff"}},$m=su;frappe.ui.form.ControlColor=class extends frappe.ui.form.ControlData{make_input(){this.df.placeholder=this.df.placeholder||__("Choose a color"),super.make_input(),this.make_color_input()}make_color_input(){let t=$("<div>");this.picker=new $m({parent:t[0],color:this.get_color(),swatches:["#449CF0","#ECAD4B","#29CD42","#761ACB","#CB2929","#ED6396","#29CD42","#4463F0","#EC864B","#4F9DD9","#39E4A5","#B4CD29"]}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover color-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>t,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.picker.refresh()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.color-popover"),$(window).off("hashchange.color-popover")}),this.picker.on_change=e=>{this.set_value(e)},this.selected_color||(this.selected_color=$('<div class="selected-color"></div>'),this.selected_color.insertAfter(this.$input)),this.$wrapper.find(".selected-color").parent().on("click",e=>{this.$wrapper.popover("toggle"),this.get_color()||this.$input.val(""),e.stopPropagation(),$("body").on("click.color-popover",i=>{$(i.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.color-popover",()=>{this.$wrapper.popover("hide")})})}refresh(){super.refresh();let t=this.get_color();this.picker&&this.picker.color!==t&&(this.picker.color=t,this.picker.refresh())}set_formatted_input(t){var e,i,n;super.set_formatted_input(t),(e=this.$input)==null||e.val(t),(i=this.selected_color)==null||i.css({"background-color":t||"transparent"}),(n=this.selected_color)==null||n.toggleClass("no-value",!t)}get_color(){return this.validate(this.get_value())}validate(t){if(t==="")return"";var e=/^#[0-9A-F]{6}$/i.test(t);return e?t:null}};frappe.ui.form.ControlSignature=class extends frappe.ui.form.ControlData{make(){var t=this;this.saving=!1,this.loading=!1,super.make(),this.df.label&&$(this.wrapper).find("label").text(__(this.df.label,null,this.df.parent)),this.set_doc_url(),frappe.require("/assets/frappe/js/lib/jSignature.min.js").then(()=>{t.body=$('<div class="signature-field"></div>').prependTo(t.$input_wrapper),new ResizeObserver(()=>t.make_pad()).observe(t.body[0])}),this.img_wrapper=$(`<div class="signature-display">
			<div class="missing-image attach-missing-image">
				${frappe.utils.icon("restriction","md")}</i>
			</div></div>`).prependTo(this.$input_wrapper),this.img=$("<img class='img-responsive attach-image-display'>").appendTo(this.img_wrapper).toggle(!1)}make_pad(){let t=this.body.width();t>0&&!this.$pad&&(this.$pad=this.body.jSignature({height:200,color:"var(--text-color)",decorColor:"black",width:t,lineWidth:2,backgroundColor:"var(--control-bg)"}).on("change",this.on_save_sign.bind(this)),this.load_pad(),this.$reset_button_wrapper=$(`
					<div class="signature-btn-row">
						<a href="#" type="button" class="signature-reset btn icon-btn">
							${frappe.utils.icon("es-line-reload","sm")}
						</a>
					</div>
				`).appendTo(this.$pad).on("click",".signature-reset",()=>(this.on_reset_sign(),!1)),this.refresh_input())}refresh_input(){!this.body||(this.make_pad(),this.$wrapper.find(".control-input").toggle(!1),this.set_editable(this.get_status()=="Write"),this.load_pad(),this.get_status()=="Read"&&$(this.disp_area).toggle(!1))}set_image(t){t?($(this.img_wrapper).find(".missing-image").toggle(!1),this.img.attr("src",t).toggle(!0)):($(this.img_wrapper).find(".missing-image").toggle(!0),this.img.toggle(!1))}load_pad(){if(!this.saving){var t=this.get_value();if(this.$pad){if(this.loading=!0,this.$pad.jSignature("reset"),t)try{this.$pad.jSignature("setData",t),this.set_image(t)}catch(e){console.log("Cannot set data for signature",t,e)}this.loading=!1}}}set_editable(t){this.$pad&&this.$pad.toggle(t),this.img_wrapper.toggle(!t),this.$reset_button_wrapper&&(this.$reset_button_wrapper.toggle(t),t?this.$reset_button_wrapper.addClass("editing"):this.$reset_button_wrapper.removeClass("editing"))}set_my_value(t){this.saving||this.loading||(this.saving=!0,this.set_value(t),this.saving=!1)}get_value(){return this.value?this.value:this.get_model_value()}on_reset_sign(){this.$pad.jSignature("reset"),this.set_my_value("")}on_save_sign(){if(!(this.saving||this.loading)){var t=this.$pad.jSignature("getData");this.set_my_value(t),this.set_image(this.get_value())}}on_section_collapse(){this.refresh()}};var au;frappe.ui.form.ControlPassword=(au=class extends frappe.ui.form.ControlData{make(){super.make(),this.enable_password_checks=!0}make_input(){var t=this;super.make_input(),this.indicator=$(`<div class="password-strength-indicator hidden">
				<div class="progress-text"></div>
				<div class="progress">
					<div class="progress-bar" role="progressbar"
						aria-valuenow="0"
						aria-valuemin="0" aria-valuemax="100">
					</div>
				</div>
			</div>`).insertAfter(this.$input),this.progress_text=this.indicator.find(".progress-text"),this.progress_bar=this.indicator.find(".progress-bar"),this.message=this.$wrapper.find(".help-box"),this.$input.on("keyup",frappe.utils.debounce(()=>{let e=t.$input.val()&&!t.$input.val().includes("*");t.toggle_password.toggleClass("hidden",!e),t.get_password_strength(t.$input.val())},500)),this.toggle_password=$(`
			<div class="toggle-password hidden">
				${frappe.utils.icon("unhide","sm")}
			</div>
		`).insertAfter(this.$input),this.toggle_password.on("click",()=>{this.$input.attr("type")==="password"?(this.$input.attr("type","text"),this.toggle_password.html(frappe.utils.icon("hide","sm"))):(this.$input.attr("type","password"),this.toggle_password.html(frappe.utils.icon("unhide","sm")))}),!this.value&&this.toggle_password.removeClass("hidden")}disable_password_checks(){this.enable_password_checks=!1}get_password_strength(t){if(!!this.enable_password_checks){if(!t){this.indicator.addClass("hidden"),this.message.addClass("hidden");return}var e=this;frappe.call({type:"POST",method:"frappe.core.doctype.user.user.test_password_strength",args:{new_password:t||""},callback:function(i){if(i.message.score!==void 0&&i.message.score!==null){let n=["red","red","orange","blue","green"];e.set_strength_indicator(n[i.message.score])}}})}}set_strength_indicator(t){let e={red:[__("Weak"),"danger",25],orange:[__("Average"),"warning",50],blue:[__("Strong"),"info",75],green:[__("Excellent"),"success",100]},i=e[t][0],n=e[t][1],o=e[t][2];this.indicator.removeClass("hidden"),this.progress_text.html(i).css("color",`var(--${t}-500)`),this.progress_bar.css("width",o+"%").attr("aria-valuenow",o).removeClass().addClass("progress-bar progress-bar-"+n);let s=__("Include symbols, numbers and capital letters in the password");this.message.html(s).toggleClass("hidden",t=="green")}},at(au,"input_type","password"),au);frappe.ui.form.ControlButton=class extends frappe.ui.form.ControlData{can_write(){return!0}make_input(){var t=this;let e=this.df.primary?"btn-primary":"btn-default",i=this.df.btn_size?`btn-${this.df.btn_size}`:"btn-xs";this.$input=$(`<button
				class="btn ${frappe.utils.escape_html(i)} ${frappe.utils.escape_html(e)}"
				title="${frappe.utils.escape_html(this.df.label)}"
			>`).prependTo(t.input_area).on("click",function(){t.onclick()}),this.input=this.$input.get(0),this.set_input_attributes(),this.has_input=!0,this.toggle_label(!1)}onclick(){this.frm&&this.frm.doc?this.frm.script_manager.has_handlers(this.df.fieldname,this.doctype)?this.frm.script_manager.trigger(this.df.fieldname,this.doctype,this.docname):this.df.options&&this.run_server_script():this.df.click&&this.df.click()}run_server_script(){var t=this;this.frm&&this.frm.docname&&frappe.call({method:"run_doc_method",args:{docs:this.frm.doc,method:this.df.options},btn:this.$input,callback:function(e){e.exc||t.frm.refresh_fields()}})}hide(){this.$input.hide()}set_input_areas(){super.set_input_areas(),$(this.disp_area).removeClass().addClass("hide")}set_empty_description(){this.$wrapper.find(".help-box").empty().toggle(!1)}set_label(t){t&&(this.df.label=t),t=(this.df.icon?frappe.utils.icon(this.df.icon):"")+__(this.df.label,null,this.df.parent),$(this.label_span).html("&nbsp;"),this.$input&&this.$input.html(t)}};frappe.ui.form.ControlHTML=class extends frappe.ui.form.Control{make(){super.make(),this.disp_area=this.wrapper}refresh_input(){var t=this.get_content();t&&this.$wrapper.html(t)}get_content(){var t=this.df.options||"";t=__(t);try{return frappe.render(t,this)}catch(e){return t}}html(t){this.$wrapper.html(t||this.get_content())}set_value(t){return t.appendTo?t.appendTo(this.$wrapper.empty()):(this.df.options=t,this.html(t)),Promise.resolve()}};var lu;frappe.ui.form.ControlMarkdownEditor=(lu=class extends frappe.ui.form.ControlCode{make_ace_editor(){var e,i,n;if(super.make_ace_editor(),this.markdown_container)return;let t=this.constructor.editor_class;this.ace_editor_target.wrap(`<div class="${t}-container">`),this.markdown_container=(e=this.$input_wrapper)==null?void 0:e.find(`.${t}-container`),this.editor.getSession().setUseWrapMode(!0),this.showing_preview=!1,this.preview_toggle_btn=$(`<button class="btn btn-default btn-xs ${t}-toggle">${__("Preview")}</button>`).click(o=>{this.showing_preview||this.update_preview();let s=$(o.target);this.markdown_preview.toggle(!this.showing_preview),this.ace_editor_target.toggle(this.showing_preview),this.showing_preview=!this.showing_preview,s.text(this.showing_preview?__("Edit"):__("Preview"))}),(i=this.markdown_container)==null||i.prepend(this.preview_toggle_btn),this.markdown_preview=$(`<div class="${t}-preview border rounded">`).hide(),(n=this.markdown_container)==null||n.append(this.markdown_preview),this.setup_image_drop()}set_language(){this.df.options||(this.df.options="Markdown"),super.set_language()}update_preview(){if(!this.markdown_preview)return;let t=this.get_value()||"";this.markdown_preview.html(frappe.markdown(t))}set_formatted_input(t){super.set_formatted_input(t).then(()=>{this.update_preview()})}set_disp_area(t){this.disp_area&&$(this.disp_area).text(t)}setup_image_drop(){this.ace_editor_target.on("drop",t=>{var n;t.stopPropagation(),t.preventDefault();let{dataTransfer:e}=t.originalEvent;if(!((n=e==null?void 0:e.files)!=null&&n.length))return;let i=e.files;if(!i[0].type.includes("image")){frappe.show_alert({message:__("You can only insert images in Markdown fields",[i[0].name]),indicator:"orange"});return}new frappe.ui.FileUploader({dialog_title:__("Insert Image in Markdown"),doctype:this.doctype,docname:this.docname,frm:this.frm,files:i,folder:"Home/Attachments",allow_multiple:!1,restrictions:{allowed_file_types:["image/*"]},on_success:o=>{this.frm&&!this.frm.is_new()&&this.frm.attachments.attachment_uploaded(o),this.editor.session.insert(this.editor.getCursorPosition(),`![](${encodeURI(o.file_url)})`)}})})}},at(lu,"editor_class","markdown"),lu);var uu;frappe.ui.form.ControlHTMLEditor=(uu=class extends frappe.ui.form.ControlMarkdownEditor{set_language(){this.df.options="HTML",super.set_language()}update_preview(){if(!this.markdown_preview)return;let t=this.get_value()||"";t=frappe.dom.remove_script_and_style(t),this.markdown_preview.html(t)}},at(uu,"editor_class","html"),uu);frappe.ui.form.ControlHeading=class extends frappe.ui.form.ControlHTML{get_content(){return"<h4>"+__(this.df.label,null,this.df.parent)+"</h4>"}};var fu=Gt(ln());var cu;frappe.ui.form.ControlAutocomplete=(cu=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.setup_awesomplete(),this.set_options()}set_options(){if(this.df.options){let t=this.df.options||[];this.set_data(t)}}format_for_input(t){if(t==null)return"";if(this._data&&this._data.length){let e=this._data.find(i=>i.value==t);return e?e.label:t}else return t}get_input_value(){var t;if(this.$input){let e=this.$input.val(),i=(t=this._data)==null?void 0:t.find(n=>n.label==e);return i?i.value:e}}get_awesomplete_settings(){var t=this;return{tabSelect:!0,minChars:0,maxItems:this.df.max_items||99,autoFirst:!0,list:this.get_data(),data:function(e){if(typeof e!="object"){var i={value:e};e=i}return{label:e.label||e.value,value:e.value}},filter:function(e,i){let n=e.label+e.value;return fu.default.FILTER_CONTAINS(n,i)},item:function(e){var i=this.get_item(e.value);i||(i=e),i.label||(i.label=i.value);var n=t.translate_values?__(i.label,null,i.parent):i.label,o="<strong>"+n+"</strong>";return i.description&&(o+='<br><span class="small">'+__(i.description)+"</span>"),$("<li></li>").data("item.autocomplete",i).prop("aria-selected","false").html("<a><p>"+o+"</p></a>").get(0)},sort:()=>0}}setup_awesomplete(){this.awesomplete=new fu.default(this.input,this.get_awesomplete_settings()),$(this.input_area).find(".awesomplete ul").css("min-width","100%"),this.$input.on("input",t=>{this.get_query||this.df.get_query?this.execute_query_if_exists(t.target.value):this.awesomplete.list=this.get_data()}),this.$input.on("focus",()=>{this.$input.val()||(this.$input.val(""),this.$input.trigger("input"))}),this.$input.on("blur",()=>{if(this.selected){this.selected=!1;return}var t=this.get_input_value();t!==this.last_value&&this.parse_validate_and_set_in_model(t)}),this.$input.on("awesomplete-open",()=>{this.autocomplete_open=!0}),this.$input.on("awesomplete-close",()=>{this.autocomplete_open=!1}),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.trigger("change")})}validate(t){if(this.df.ignore_validation)return t||"";let e=this.awesomplete._list.map(i=>i.value);return!e.length||e.includes(t)?t:""}parse_options(t){return typeof t=="string"&&t[0]==="["&&(t=frappe.utils.parse_json(t)),typeof t=="string"&&(t=t.split(`
`)),typeof t[0]=="string"&&(t=t.map(e=>({label:e,value:e}))),t=t.map(e=>(typeof e!="string"&&(e.label=__(cstr(e.label)),e.value=cstr(e.value)),e)),t}execute_query_if_exists(t){let e={txt:t},i=this.get_query||this.df.get_query;if(!i)return;let n=function(a){return $.each(a,function(l,f){f!==void 0&&(a[l]=f)}),a},o=function(a){a.query&&(e.query=a.query),a.params&&(n(a.params),Object.assign(e,a.params)),a.translate_values!==void 0&&(this.translate_values=a.translate_values)};if($.isPlainObject(i))o(i);else if(typeof i=="string")e.query=i;else{var s=i(this.frm&&this.frm.doc||this.doc,this.doctype,this.docname);typeof s=="string"?e.query=s:$.isPlainObject(s)&&o(s)}e.query&&frappe.call({method:e.query,args:e,callback:({message:a})=>{!this.$input.is(":focus")||this.set_data(a)}})}get_data(){return this._data||[]}set_data(t){t=this.parse_options(t),this.awesomplete&&(this.awesomplete.list=t),this._data=t}},at(cu,"trigger_change_on_input_event",!1),cu);var s_=Gt(o_());frappe.ui.form.ControlBarcode=class extends frappe.ui.form.ControlData{make_wrapper(){super.make_wrapper(),this.default_svg="<svg height=80></svg>";let t=this.$wrapper.find(".control-input-wrapper");this.barcode_area=$(`<div class="barcode-wrapper">${this.default_svg}</div>`),this.barcode_area.appendTo(t)}parse(t){return t?t.startsWith("<svg")?t:this.get_barcode_html(t):""}set_formatted_input(t){let e=t,i="";this.set_empty_description(),t&&t.startsWith("<svg")&&(i=$(e).attr("data-barcode-value")),!i&&this.doc&&(e=this.get_barcode_html(t),this.doc[this.df.fieldname]=e),this.$input.val(i||t),this.barcode_area.html(e||this.default_svg)}get_barcode_html(t){if(t){let e=this.barcode_area.find("svg")[0];try{return(0,s_.default)(e,t,this.get_options(t)),$(e).attr("data-barcode-value",t),$(e).attr("width","100%"),this.barcode_area.html()}catch(i){this.set_description(`Invalid Barcode: ${String(i)}`)}}}get_options(t){let e={};return e.fontSize="16",e.width="3",e.height="50",frappe.utils.is_json(this.df.options)&&(e=JSON.parse(this.df.options),e.format&&e.format==="EAN"&&(e.format=t.length==8?"EAN8":"EAN13"),e.valueField&&this.frm&&this.frm.set_value(e.valueField,t)),e}};frappe.provide("frappe.utils");var mc;frappe.ui.form.ControlGeolocation=(mc=class extends frappe.ui.form.ControlData{async make(){super.make(),$(this.input_area).addClass("hidden")}set_disp_area(t){!this.disp_area||(this.map_id||(this.map_id=frappe.dom.get_unique_id(),this.map_area=$(`<div class="map-wrapper border">
					<div id="${this.map_id}" style="min-height: 400px; z-index: 1; max-width:100%"></div>
				</div>`),$(this.disp_area).html(this.map_area)),$(this.disp_area).removeClass("like-disabled-input"),$(this.disp_area).css("display","block"),this.frm?(this.make_map(),t&&this.bind_leaflet_data(t)):$(document).on("frappe.ui.Dialog:shown",()=>{this.make_map(),t&&this.bind_leaflet_data(t)}))}make_map(t){this.map||(this.customize_draw_controls(),this.bind_leaflet_map()),this.disabled?(this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.doubleClickZoom.disable(),this.map.scrollWheelZoom.disable(),this.map.boxZoom.disable(),this.map.keyboard.disable(),this.map.zoomControl.remove()):(this.bind_leaflet_draw_control(),this.bound_event_listeners||this.bind_leaflet_event_listeners(),this.locate_control||this.bind_leaflet_locate_control())}bind_leaflet_data(t){this.clear_editable_layers();let e=new L.FeatureGroup().addLayer(L.geoJson(JSON.parse(t),{pointToLayer:this.point_to_layer,style:this.set_style,onEachFeature:this.on_each_feature}));this.add_non_group_layers(e,this.editableLayers),this.editableLayers.addTo(this.map),this.fit_and_recenter_map()}point_to_layer(t,e){return t.properties.point_type=="circle"?L.circle(e,{radius:t.properties.radius}):t.properties.point_type=="circlemarker"?L.circleMarker(e,{radius:t.properties.radius}):L.marker(e)}set_style(t){return{}}on_each_feature(t,e){}customize_draw_controls(){let t=L.Circle.prototype.toGeoJSON;L.Circle.include({toGeoJSON:function(){let e=t.call(this);return e.properties={point_type:"circle",radius:this.getRadius()},e}}),L.CircleMarker.include({toGeoJSON:function(){let e=t.call(this);return e.properties={point_type:"circlemarker",radius:this.getRadius()},e}}),L.Icon.Default.imagePath=frappe.utils.map_defaults.image_path}bind_leaflet_map(){this.map=L.map(this.map_id),this.map.setView(frappe.utils.map_defaults.center,frappe.utils.map_defaults.zoom),L.tileLayer(frappe.utils.map_defaults.tiles,frappe.utils.map_defaults.options).addTo(this.map),this.editableLayers=new L.FeatureGroup}bind_leaflet_locate_control(){this.locate_control=L.control.locate({position:"topright"}),this.locate_control.addTo(this.map)}bind_leaflet_draw_control(){this.draw_control||(this.draw_control=this.get_leaflet_controls()),this.disp_status=="Write"?this.draw_control.addTo(this.map):this.draw_control.remove()}get_leaflet_controls(){return new L.Control.Draw({position:"topleft",draw:{polyline:{shapeOptions:{color:frappe.ui.color.get("blue"),weight:10}},polygon:{allowIntersection:!1,drawError:{color:frappe.ui.color.get("orange"),message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:frappe.ui.color.get("blue")}},circle:!0,rectangle:{shapeOptions:{clickable:!1}}},edit:{featureGroup:this.editableLayers,remove:!0}})}bind_leaflet_event_listeners(){this.bound_event_listeners=!0,this.map.on("draw:created",t=>{var e=t.layerType,i=t.layer;e==="marker"&&i.bindPopup("Marker"),this.editableLayers.addLayer(i),this.set_value(JSON.stringify(this.editableLayers.toGeoJSON()))}),this.map.on("draw:deleted draw:edited",t=>{let{layer:e}=t;this.editableLayers.removeLayer(e),this.set_value(JSON.stringify(this.editableLayers.toGeoJSON()))})}add_non_group_layers(t,e){t instanceof L.LayerGroup?t.eachLayer(i=>{this.add_non_group_layers(i,e)}):e.addLayer(t)}clear_editable_layers(){this.editableLayers.eachLayer(t=>{this.editableLayers.removeLayer(t)})}fit_and_recenter_map(){try{this.map.invalidateSize(),this.map.fitBounds(this.editableLayers.getBounds(),{padding:[50,50]})}catch(t){}}on_section_collapse(t){!t&&this.fit_and_recenter_map()}},at(mc,"horizontal",!1),mc);var gc=Gt(ln());frappe.ui.form.ControlMultiSelect=class extends frappe.ui.form.ControlAutocomplete{get_awesomplete_settings(){let t=super.get_awesomplete_settings();return Object.assign(t,{filter:function(e,i){let n=this.get_item(e.value);if(!n)return gc.default.FILTER_CONTAINS(e,i.match(/[^,]*$/)[0]);let o=a=>gc.default.FILTER_CONTAINS(a,i.match(/[^,]*$/)[0]),s=o(n.label);return!s&&n.value&&(s=o(n.value)),!s&&n.description&&(s=o(n.description)),s},replace:function(e){let i=this.input.value.match(/^.+,\s*|/)[0];this.input.value=i+e+", "}})}get_value(){let t=super.get_value();return this.df.options&&this.df.options.length&&this.df.options[0].label&&(t=t.split(",").map(e=>e.trim()),t=t.map(e=>{let i=this.df.options.find(n=>n.label===e);return i?i.value:null}).filter(e=>e!=null).join(", ")),t}set_formatted_input(t){!t||(this.df.options&&this.df.options.length&&this.df.options[0].label&&(t=t.split(",").map(e=>e.trim()).map(e=>{let i=this.df.options.find(n=>n.value===e);return i?i.label:e}).filter(e=>e!=null).join(", ")),super.set_formatted_input(t))}get_values(){return(this.get_value()||"").split(/\s*,\s*/).filter(e=>e)}get_data(){let t;this.df.get_data?(t=this.df.get_data(),t&&this.set_data(t)):t=super.get_data();let e=this.get_values()||[];return t&&t.filter(i=>!e.includes(i)),t}validate(t){if(this.df.ignore_validation)return t||"";let e=this.awesomplete._list.map(o=>o.value);return!e.length||t.replace(/,\s*$/,"").split(",").every(o=>e.includes(o))?t:""}};frappe.ui.form.ControlMultiCheck=class extends frappe.ui.form.Control{make(){super.make(),this.df.label&&(this.$label=$(`<label class="control-label">${this.df.label}</label>`).appendTo(this.wrapper)),this.$load_state=$(`<div class="load-state text-muted small">${__("Loading")}...</div>`),this.$select_buttons=this.get_select_buttons().appendTo(this.wrapper),this.$load_state.appendTo(this.wrapper);let t=this.df.columns;this.$checkbox_area=$('<div class="checkbox-options"></div>').appendTo(this.wrapper),this.$checkbox_area.get(0).style.setProperty("--checkbox-options-columns",t)}refresh(){this.set_options(),this.bind_checkboxes(),super.refresh()}refresh_input(){this.select_options(this.selected_options)}set_options(){this.$load_state.show(),this.$select_buttons.hide(),this.parse_df_options(),this.df.get_data?typeof this.df.get_data().then=="function"?this.df.get_data().then(t=>{this.options=t,this.make_checkboxes()}):(this.options=this.df.get_data(),this.make_checkboxes()):this.make_checkboxes()}parse_df_options(){if(Array.isArray(this.df.options))this.options=this.df.options;else if(this.df.options&&this.df.options.length>0&&frappe.utils.is_json(this.df.options)){let t=JSON.parse(this.df.options);Array.isArray(t)?this.options=t:Array.isArray(t.options)&&(this.options=t.options)}else this.options=[]}make_checkboxes(){this.$load_state.hide(),this.$checkbox_area.empty(),this.df.sort_options!=!1&&this.options.sort((t,e)=>cstr(t.label).localeCompare(cstr(e.label))),this.options.forEach(t=>{let e=this.get_checkbox_element(t).appendTo(this.$checkbox_area);t.danger&&e.find(".label-area").addClass("text-danger"),t.$checkbox=e}),this.df.select_all&&this.setup_select_all(),this.set_checked_options()}bind_checkboxes(){$(this.wrapper).on("change",":checkbox",t=>{let e=$(t.target),i=e.attr("data-unit");if(e.is(":checked")){if(this.selected_options.includes(i))return;this.selected_options.push(i)}else{let n=this.selected_options.indexOf(i);n>-1&&this.selected_options.splice(n,1)}this.df.on_change&&this.df.on_change()})}set_checked_options(){this.selected_options=this.options.filter(t=>t.checked).map(t=>t.value),this.select_options(this.selected_options)}setup_select_all(){this.$select_buttons.show(),this.$select_buttons.find(".select-all").on("click",()=>{this.select_all()}),this.$select_buttons.find(".deselect-all").on("click",()=>{this.select_all(!0)})}select_all(t=!1){$(this.wrapper).find(":checkbox").prop("checked",t).trigger("click")}select_options(t){this.options.map(e=>e.value).forEach(e=>{let i=$(this.wrapper).find(`:checkbox[data-unit="${e}"]`)[0];i&&(i.checked=t.includes(e))})}get_value(){return this.selected_options}get_checked_options(){return this.get_value()}get_unchecked_options(){return this.options.map(t=>t.value).filter(t=>!this.selected_options.includes(t))}get_checkbox_element(t){return $(`
			<div class="checkbox unit-checkbox">
				<label title="${t.description||""}">
					<input type="checkbox" data-unit="${t.value}"></input>
					<span class="label-area" data-unit="${t.value}">${t.label}</span>
				</label>
			</div>
		`)}get_select_buttons(){return $(`
		<div class="bulk-select-options">
			<button class="btn btn-xs btn-default select-all">
				${__("Select All")}
			</button>
			<button class="btn btn-xs btn-default deselect-all">
				${__("Unselect All")}
			</button>
		</div>
		`)}};var _c;frappe.ui.form.ControlTableMultiSelect=(_c=class extends frappe.ui.form.ControlLink{make_input(){super.make_input(),this.$input_area.addClass("form-control table-multiselect"),this.$input.removeClass("form-control"),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.val("").focus()}),this.rows=[],this._rows_list=[],this.$input_area.on("click",t=>{t.target===this.$input_area.get(0)&&this.$input.focus()}),this.$input_area.on("click",".btn-remove",t=>{let i=$(t.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value),o=this.get_link_field();this.rows=this.rows.filter(s=>{if(s[o.fieldname]!==n)return s;frappe.run_serially([()=>this.frm.script_manager.trigger(`before_${this.df.fieldname}_remove`,this.df.options,s.name),()=>(frappe.model.clear_doc(this.df.options,s.name),this.frm.dirty(),this.refresh(),this.frm.script_manager.trigger(`${this.df.fieldname}_remove`,this.df.options,s.name))])})}),this.$input_area.on("click",".btn-link-to-form",t=>{let i=$(t.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value),o=this.get_link_field();frappe.set_route("Form",o.options,n)}),this.$input.on("keydown",t=>{t.keyCode==frappe.ui.keyCode.BACKSPACE&&t.target.value===""&&(this.rows=this.rows.slice(0,this.rows.length-1),this.parse_validate_and_set_in_model(""))})}setup_buttons(){this.$input_area.find(".link-btn").remove()}parse(t,e){if(typeof t=="object"||!this.rows)return t;let i=this.get_link_field();if(t&&(t=t.trim(),this.awesomplete.get_item(t))){if(this.frm){let n=frappe.model.add_child(this.frm.doc,this.df.options,this.df.fieldname);n[i.fieldname]=t,this.rows=this.frm.doc[this.df.fieldname],this.frm.script_manager.trigger(`${this.df.fieldname}_add`,this.df.options,n.name)}else this.rows.push({[i.fieldname]:t});frappe.utils.add_link_title(i.options,t,e)}return this._rows_list=this.rows.map(n=>n[i.fieldname]),this.rows}get_model_value(){let t=super.get_model_value();return t&&t.filter(e=>!e.__islocal)}validate(t){let e=(t||[]).slice();if(this.df.ignore_link_validation)return e;let i=this.get_link_field();if(e.length===0)return e;let n=e.slice(0,e.length-1),s=e[e.length-1][i.fieldname];return!s||n.map(a=>a[i.fieldname]).includes(s)?n:this.validate_link_and_fetch(s).then(a=>(a===s||e.pop(),e))}set_formatted_input(t){this.rows=t||[];let e=this.get_link_field(),i=this.rows.map(n=>n[e.fieldname]);this.set_pill_html(i)}set_pill_html(t){let e=t.map(i=>this.get_pill_html(i)).join("");this.$input_area.find(".tb-selected-value").remove(),this.$input_area.prepend(e)}get_pill_html(t){let e=this.get_link_field(),i=encodeURIComponent(t),n=frappe.utils.get_link_title(e.options,t)||t;return`
			<button class="data-pill btn tb-selected-value" data-value="${i}">
				<span class="btn-link-to-form">${__(frappe.utils.escape_html(n))}</span>
				<span class="btn-remove">${frappe.utils.icon("close")}</span>
			</button>
		`}get_options(){return(this.get_link_field()||{}).options}get_link_field(){var t;if(!this._link_field){let e=frappe.get_meta(this.df.options);if(this._link_field=(t=e==null?void 0:e.fields)==null?void 0:t.find(i=>i.fieldtype==="Link"),!this._link_field)throw new Error("Table MultiSelect requires a Table with atleast one Link field")}return this._link_field}custom_awesomplete_filter(t){let e=this;t.filter=function(i){return!e._rows_list.includes(i.value)}}get_input_value(){return this.$input?this.$input.val():void 0}update_value(){let t=this.get_input_value();t!==this.last_value&&this.parse_validate_and_set_in_model(t)}},at(_c,"horizontal",!1),_c);var yc=Gt(ln());frappe.ui.form.ControlMultiSelectPills=class extends frappe.ui.form.ControlAutocomplete{make_input(){super.make_input(),this.$input_area=$(this.input_area),this.$multiselect_wrapper=$("<div>").addClass("form-control table-multiselect").appendTo(this.$input_area),this.$input.removeClass("form-control"),this.$input_area.find(".awesomplete").appendTo(this.$multiselect_wrapper),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.val("").focus()}),this.rows=[],this.$input_area.on("click",".btn-remove",t=>{let i=$(t.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value);this.rows=this.rows.filter(o=>o!==n),this.parse_validate_and_set_in_model("")}),this.$input.on("keydown",t=>{t.keyCode==frappe.ui.keyCode.BACKSPACE&&t.target.value===""&&(this.rows=this.rows.slice(0,this.rows.length-1),this.parse_validate_and_set_in_model(""))})}parse(t){return typeof t=="object"||!this.rows?t:(t&&this.rows.push(t),this.rows)}validate(t){let e=(t||[]).slice();if(e.length===0)return e;let i=e.slice(0,e.length-1),n=e[e.length-1];return!n||i.includes(n)?i:e}set_formatted_input(t){this.rows=t||[],this.set_pill_html(this.rows)}set_pill_html(t){let e=t.map(i=>this.get_pill_html(i)).join("");this.$multiselect_wrapper.find(".tb-selected-value").remove(),this.$multiselect_wrapper.prepend(e)}get_pill_html(t){let e=this.get_label(t);return`
			<button class="data-pill btn tb-selected-value" data-value="${encodeURIComponent(t)}">
				<span class="btn-link-to-form">${__(e||frappe.utils.escape_html(t))}</span>
				<span class="btn-remove">${frappe.utils.icon("close")}</span>
			</button>
		`}get_label(t){var i;let e=(i=this._data)==null?void 0:i.find(n=>n.value===t);return e?e.label||e.value:null}get_awesomplete_settings(){let t=super.get_awesomplete_settings();return Object.assign(t,{filter:function(e,i){let n=this.get_item(e.value);if(!n)return yc.default.FILTER_CONTAINS(e,i.match(/[^,]*$/)[0]);let o=a=>yc.default.FILTER_CONTAINS(a,i.match(/[^,]*$/)[0]),s=o(n.label);return!s&&n.value&&(s=o(n.value)),!s&&n.description&&(s=o(n.description)),s}})}get_value(){return this.rows}get_values(){return this.rows}get_data(){let t;if(this.df.get_data){let i=this.$input.val();t=this.df.get_data(i),t&&t.then?(t.then(n=>{this.set_data(n)}),t=this.get_value()):this.set_data(t)}else t=super.get_data();let e=this.get_values()||[];return t&&t.filter(i=>!e.includes(i)),t}};var vc;frappe.ui.form.ControlMultiSelectList=(vc=class extends frappe.ui.form.ControlData{make_input(){let t=`
			<div class="multiselect-list dropdown">
				<div class="form-control cursor-pointer input-xs" data-toggle="dropdown" tabindex=0>
					<div class="status-text ellipsis"></div>
				</div>
				<ul class="dropdown-menu">
					<li class="dropdown-input-wrapper">
						<input type="text" class="form-control input-xs">
					</li>
					<div class="selectable-items">
					</div>
					<li class="text-right">
						<button class="btn btn-primary btn-xs clear-selections text-nowrap">
							${__("Clear All")}
    					</button>
					</li>
				</ul>
			</div>
		`;this.$list_wrapper=$(t),this.$input=$("<input>"),this.input=this.$input.get(0),this.has_input=!0,this.$list_wrapper.prependTo(this.input_area),this.$filter_input=this.$list_wrapper.find("input"),this.values=[],this._options=[],this._selected_values=[],this.highlighted=-1,this.$list_wrapper.on("click",".dropdown-menu",e=>{e.stopPropagation()}),this.$list_wrapper.on("click",".clear-selections",e=>{this.clear_all_selections()}),this.$list_wrapper.on("click",".selectable-item",e=>{let i=$(e.currentTarget);this.toggle_select_item(i)}),this.$list_wrapper.on("input","input",frappe.utils.debounce(e=>{this.set_options().then(()=>{let i=e.target.value,n=this._options.filter(s=>{let a=!1;return this.values.includes(s.value)?!0:(a=Awesomplete.FILTER_CONTAINS(s.label,i)||Awesomplete.FILTER_CONTAINS(s.value,i)||Awesomplete.FILTER_CONTAINS(s.description,i),a)}),o=this._selected_values.concat(n).uniqBy(s=>s.value);this.set_selectable_items(o)})},300)),this.$list_wrapper.on("keydown","input",e=>{if(e.key==="ArrowDown")this.highlight_item(1);else if(e.key==="ArrowUp")this.highlight_item(-1);else if(e.key==="Enter"&&this._$last_highlighted)return this.toggle_select_item(this._$last_highlighted),!1}),this.$list_wrapper.on("keydown",e=>{$(e.target).is("input")||e.key==="Backspace"&&this.set_value([])}),this.$list_wrapper.on("show.bs.dropdown",()=>{this.set_options().then(()=>{(!this._selected_values||!this._selected_values.length)&&(this._selected_values=this.process_options(this.values)),this._options=this._selected_values.concat(this._options).uniqBy(e=>e.value),this.set_selectable_items(this._options)})}),this.set_input_attributes()}set_input_attributes(){this.$list_wrapper.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname),this.set_status(this.get_placeholder_text()),this.doctype&&this.$list_wrapper.attr("data-doctype",this.doctype),this.df.input_css&&this.$list_wrapper.css(this.df.input_css),this.df.input_class&&this.$list_wrapper.addClass(this.df.input_class)}clear_all_selections(){this.values=[],this._selected_values=[],this.update_status(),this.set_selectable_items(this._options),this.parse_validate_and_set_in_model("")}toggle_select_item(t){t.toggleClass("selected");let e=decodeURIComponent(t.data().value);t.hasClass("selected")?(this.values=this.values.slice(),this.values.push(e)):this.values=this.values.filter(i=>i!==e),this.update_selected_values(e),this.parse_validate_and_set_in_model(""),this.update_status()}set_value(t){return t&&(this._selected_values=[],typeof t=="string"&&(t=[t]),this.values.forEach(e=>{this.$list_wrapper.find(`.selectable-item[data-value=${CSS.escape(e)}]`).toggleClass("selected")}),this.values=t,this.values.forEach(e=>{this.update_selected_values(e),this.$list_wrapper.find(`.selectable-item[data-value=${CSS.escape(e)}]`).toggleClass("selected")}),this.parse_validate_and_set_in_model(""),this.update_status()),Promise.resolve()}update_selected_values(t){this._selected_values=this._selected_values||[];let e=this._options.concat(this._selected_values).uniqBy(i=>i.value).find(i=>i.value===t);e&&(this.values.includes(t)?this._selected_values.push(e):this._selected_values=this._selected_values.filter(i=>i.value!==t))}update_status(){let t;if(this.values.length===0)t=this.get_placeholder_text();else if(this.values.length===1){let e=this.values[0],i=this._options.find(n=>n.value===e);t=i?i.label:e}else t=__("{0} values selected",[this.values.length]);this.set_status(t)}get_placeholder_text(){return`<span class="text-extra-muted">${this.df.placeholder||""}</span>`}set_status(t){this.$list_wrapper.find(".status-text").html(t)}process_options(t){return t.map(e=>typeof e=="string"?{label:e,value:e,description:""}:(e.label||(e.label=e.value),e))}set_options(){let t=Promise.resolve();if(this.df.get_data){let e=this.$filter_input.val(),i=this.df.get_data(e);i?i.then?t=i.then(n=>{this._options=this.process_options(n)}):this._options=this.process_options(i):this._options=[]}else this._options=this.process_options(this.df.options);return t}set_selectable_items(t){let e=t.map(i=>{let n=encodeURIComponent(i.value);return`<li class="selectable-item ${this.values.includes(i.value)?"selected":""}" data-value="${n}">
				<div>
					<strong>${i.label}</strong>
					<div class="small">${i.description}</div>
				</div>
				<div class="multiselect-check">${frappe.utils.icon("tick","xs")}</div>
			</li>`}).join("");e||(e=`<li class="text-muted">${__("No values to show")}</li>`),this.$list_wrapper.find(".selectable-items").html(e),this.highlighted=-1}get_value(){return this.values}highlight_item(t){this.highlighted+=t,this.highlighted<0&&(this.highlighted=0);let e=this.$list_wrapper.find(".selectable-item");this.highlighted>e.length-1&&(this.highlighted=e.length-1);let i=e[this.highlighted];this._$last_highlighted&&this._$last_highlighted.removeClass("highlighted"),this._$last_highlighted=$(i).addClass("highlighted"),this.scroll_dropdown_if_needed(i)}scroll_dropdown_if_needed(t){t.scrollIntoView?t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}):t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop}},at(vc,"trigger_change_on_input_event",!1),vc);frappe.ui.form.ControlRating=class extends frappe.ui.form.ControlFloat{make_input(){super.make_input();let t="",e=this.df.options||5;Array.from({length:cint(e)},(o,s)=>s+1).forEach(o=>{t+=`<svg class="icon icon-md" data-rating=${o} viewBox="0 0 24 24" fill="none">
				<path class="right-half" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`});let i=`
			<div class="rating">
				${t}
			</div>
		`;if($(this.input_area).html(i),this.disabled)return;let n=this;$(this.input_area).find("svg").on("mousemove",function(o){n.update_rating(o)}).on("mouseout",function(o){$(o.currentTarget).parent().children("svg").each(function(){$(this).find(".left-half, .right-half").removeClass("star-hover")})}),$(this.input_area).find("svg").click(o=>{this.update_rating(o,!0)})}update_rating(t,e){let i=$(t.currentTarget),n=i.data("rating"),o=!1,s="star-click",a=this.df.options||5;if(e||(s="star-hover"),t.pageX-i.offset().left<i.width()/2&&(o=!0,n--),e&&!this.df.reqd){let l=n;o&&(l+=.5),this.get_value()==l/a&&(n=0,o=!1)}i.parent().children("svg").each(function(l){l<n?$(this).find(".left-half, .right-half").addClass(s):l==n&&o?($(this).find(".left-half").addClass(s),$(this).find(".right-half").removeClass(s),e&&(n+=.5)):$(this).find(".left-half, .right-half").removeClass(s)}),e&&(n=n/a,this.validate_and_set_in_model(n,t),this.doctype&&this.docname&&this.set_input(n))}get_value(){return this.value}set_formatted_input(t){let e=this.df.options||5;t=t*e,t=Math.round(t*2)/2,$(this.input_area).find("svg").children("svg").prevObject.each(function(n){n<t?($(this).find(".left-half, .right-half").addClass("star-click"),n==Math.floor(t)&&t%1==.5&&$(this).find(".right-half").removeClass("star-click")):$(this).find(".left-half, .right-half").removeClass("star-click")})}validate(t){return parseFloat(t)}};frappe.ui.form.ControlDuration=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.make_picker()}validate(t){return t?super.validate(t):null}make_picker(){this.inputs=[],this.set_duration_options(),this.$picker=$(`<div class="duration-picker">
				<div class="picker-row row"></div>
			</div>`),this.$wrapper.append(this.$picker),this.build_numeric_input("days",this.duration_options.hide_days,0,__("Days",null,"Duration")),this.build_numeric_input("hours",!1,0,__("Hours",null,"Duration")),this.build_numeric_input("minutes",!1,0,__("Minutes",null,"Duration")),this.build_numeric_input("seconds",this.duration_options.hide_seconds,0,__("Seconds",null,"Duration")),this.set_duration_picker_value(this.value),this.$picker.hide(),this.bind_events(),this.refresh()}build_numeric_input(t,e,i,n){let o=$(`
			<input class="input-sm duration-input" data-duration="${t}" type="number" min="0" value="0">
		`),s=$('<div class="row duration-row"></div>').prepend(o);i&&o.attr("max",i),this.inputs[t]=o;let a=$(`
			<div class="col duration-col">
				<div class="row duration-row duration-label">${n}</div>
			</div>`);e&&a.addClass("hidden"),a.prepend(s),a.appendTo(this.$picker.find(".picker-row"))}set_duration_options(){this.duration_options=frappe.utils.get_duration_options(this.df)}set_duration_picker_value(t){let e=frappe.utils.seconds_to_duration(t||0,this.duration_options);this.$picker&&Object.keys(e).forEach(i=>{this.inputs[i].prop("value",e[i])})}bind_events(){let t=!1;this.$wrapper.find(".duration-input").mousedown(()=>{t=!0}),this.$picker.on("change",".duration-input",()=>{t=!1;let e=this.get_duration(),i=frappe.utils.duration_to_seconds(e.days,e.hours,e.minutes,e.seconds);this.set_value(i),this.set_focus()}),this.$input.on("focus",()=>{this.$picker.show(),this.is_duration_picker_set(this.inputs)||this.set_duration_picker_value(this.value)}),this.$input.on("blur",()=>{t?t=!1:this.$picker.hide(),this.set_formatted_input(this.value)})}get_value(){return cint(this.value)}parse(t){var n,o;if(t){if(/^\s*\d+\s*$/.test(t))return parseInt(t)}else return"";(n=this.DURATION_PARSE_REGEX)!=null||(this.DURATION_PARSE_REGEX=B5());let e=String(t).trim().match(this.DURATION_PARSE_REGEX);if(!(e!=null&&e.groups)||!Object.values(e.groups).some(s=>!!s))return null;let i=0;for(let[s,a]of Object.entries($5))i+=parseInt(((o=e.groups)==null?void 0:o[s])||0)*a;return i}set_formatted_input(t){super.set_formatted_input(t),this.set_duration_picker_value(t)}refresh_input(){super.refresh_input(),this.set_duration_options(),this.set_duration_picker_value(this.value)}format_for_input(t){return frappe.utils.get_formatted_duration(t,this.duration_options)}get_duration(){let t={minutes:0,hours:0,days:0,seconds:0};return this.inputs&&(t.minutes=parseInt(this.inputs.minutes.val()),t.hours=parseInt(this.inputs.hours.val()),this.duration_options.hide_days||(t.days=parseInt(this.inputs.days.val())),this.duration_options.hide_seconds||(t.seconds=parseInt(this.inputs.seconds.val()))),t}is_duration_picker_set(t){let e=!1;return Object.values(t).forEach(i=>{i.prop("value")!=0&&(e=!0)}),e}};var $5={weeks:7*24*60*60,days:24*60*60,hours:60*60,minutes:60,seconds:1};function B5(){let r=(t,e)=>{let i=`(?<${t}>\\d+)`,n="(?:"+e.join("|")+")";return"\\s*(?:"+i+"\\s*"+n+")?\\s*"};return new RegExp([r("days",[__("d",null,"Days (Field: Duration)")]),r("hours",[__("h",null,"Hours (Field: Duration)")]),r("minutes",[__("m",null,"Minutes (Field: Duration)")]),r("seconds",[__("s",null,"Seconds (Field: Duration)")]),".*"].join(""),"i")}var bc=class{constructor(t){this.parent=t.parent,this.width=t.width,this.height=t.height,this.set_icon(t.icon),this.icons=t.icons,this.setup_picker()}refresh(){this.update_icon_selected(!0)}setup_picker(){this.icon_picker_wrapper=$(`
			<div class="icon-picker">
				<div class="search-icons">
					<input type="search" placeholder="${__("Search for icons...")}" class="form-control">
					<span class="search-icon">${frappe.utils.icon("search","sm")}</span>
				</div>
				<div class="icon-section">
					<div class="icons"></div>
				</div>
			</div>
		`),this.parent.append(this.icon_picker_wrapper),this.icon_wrapper=this.icon_picker_wrapper.find(".icons"),this.search_input=this.icon_picker_wrapper.find(".search-icons > input"),this.refresh(),this.setup_icons()}setup_icons(){this.icons.forEach(t=>{let e=$(`<div id="${t}" class="icon-wrapper">${frappe.utils.icon(t,"md")}</div>`);this.icon_wrapper.append(e);let i=()=>{this.set_icon(t),this.update_icon_selected()};e.on("click",()=>{i()}),e.keydown(n=>{let o=n.keyCode;[13,32].includes(o)&&(n.preventDefault(),i())})}),this.search_input.keyup(t=>{t.preventDefault(),this.filter_icons()}),this.search_input.on("search",()=>{this.filter_icons()})}filter_icons(){let t=this.search_input.val();t?(this.icon_wrapper.find(".icon-wrapper").addClass("hidden"),this.icon_wrapper.find(`.icon-wrapper[id*='${t}']`).removeClass("hidden")):this.icon_wrapper.find(".icon-wrapper").removeClass("hidden")}update_icon_selected(t){!t&&this.on_change&&this.on_change(this.get_icon())}set_icon(t){this.icon=t||""}get_icon(){return this.icon||""}},a_=bc;frappe.ui.form.ControlIcon=class extends frappe.ui.form.ControlData{make_input(){this.df.placeholder=this.df.placeholder||__("Choose an icon"),super.make_input(),this.get_all_icons(),this.make_icon_input()}get_all_icons(){frappe.symbols=[],$("#all-symbols > svg > symbol[id]").each(function(){this.id.includes("icon-")&&frappe.symbols.push(this.id.replace("icon-",""))})}make_icon_input(){let t=$("<div>");this.picker=new a_({parent:t,icon:this.get_icon(),icons:frappe.symbols}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4.5}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover icon-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>t,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.picker.refresh()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.icon-popover"),$(window).off("hashchange.icon-popover")}),this.picker.on_change=e=>{this.set_value(e)},this.selected_icon||(this.selected_icon=$(`<div class="selected-icon">${frappe.utils.icon("folder-normal","md")}</div>`),this.selected_icon.insertAfter(this.$input)),this.$wrapper.find(".selected-icon").parent().on("click",e=>{this.$wrapper.popover("toggle"),this.get_icon()||this.$input.val(""),e.stopPropagation(),$("body").on("click.icon-popover",i=>{$(i.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.icon-popover",()=>{this.$wrapper.popover("hide")})})}refresh(){super.refresh();let t=this.get_icon();this.picker&&this.picker.icon!==t&&(this.picker.icon=t,this.picker.refresh())}set_formatted_input(t){super.set_formatted_input(t),this.$input.val(t),this.selected_icon.find("use").attr("href","#icon-"+(t||"folder-normal")),this.selected_icon.toggleClass("no-value",!t)}get_icon(){return this.get_value()||"folder-normal"}};var kc=Gt(u_());var xc=class{constructor(t){this.parent=t.parent,this.width=t.width,this.height=t.height,this.country=t.country,t.country&&this.set_country(t.country),this.countries=t.countries,this.setup_picker()}refresh(){this.update_icon_selected(!0)}setup_picker(){this.phone_picker_wrapper=$(`
			<div class="phone-picker">
				<div class="search-phones">
					<input type="search" placeholder="${__("Search for countries...")}" class="form-control">
					<span class="search-phone">${frappe.utils.icon("search","sm")}</span>
				</div>
				<div class="phone-section">
					<div class="phones"></div>
				</div>
			</div>
		`),this.parent.append(this.phone_picker_wrapper),this.phone_wrapper=this.phone_picker_wrapper.find(".phones"),this.search_input=this.phone_picker_wrapper.find(".search-phones > input"),this.refresh(),this.setup_countries()}setup_countries(){Object.entries(this.countries).forEach(([t,e])=>{if(!e.isd)return;let i=$(`
				<div id="${t.toLowerCase()}" class="phone-wrapper">
					${frappe.utils.flag(e.code)}
					<span class="country">${t} (${e.isd})</span>
				</div>
			`);this.phone_wrapper.append(i);let n=()=>{this.set_country(t),this.update_icon_selected()};i.on("click",()=>{n()}),i.hover(()=>{i.toggleClass("bg-gray-100")}),this.search_input.keydown(o=>{let s=o.keyCode;[13].includes(s)&&(o.preventDefault(),n())}),this.search_input.keyup(o=>{o.preventDefault(),this.filter_icons(t,e.isd)}),this.search_input.on("search",()=>{this.filter_icons(t,e.isd)})})}filter_icons(t,e){let i=this.search_input.val();i?!e.includes(i)&&!t.toLowerCase().includes(i.toLowerCase())?this.phone_wrapper.find(`.phone-wrapper[id='${t.toLowerCase()}']`).addClass("hidden"):this.phone_wrapper.find(`.phone-wrapper[id='${t.toLowerCase()}']`).removeClass("hidden"):this.phone_wrapper.find(".phone-wrapper").removeClass("hidden")}update_icon_selected(t){!t&&this.on_change&&this.on_change(this.get_country())}set_country(t){this.country=t||""}get_country(){return this.country}reset(){this.set_country(),this.update_icon_selected()}},c_=xc;frappe.ui.form.ControlPhone=class extends frappe.ui.form.ControlData{async make_input(){await this.setup_country_codes(),super.make_input(),this.setup_country_code_picker(),this.input_events()}async setup_country_codes(){let t="country_code_info",e=await kc.default.getItem(t);if(e)this.country_codes=e;else{let i=await frappe.xcall("frappe.geo.country_info.get_country_timezone_info");this.country_codes=i==null?void 0:i.country_info,kc.default.setItem(t,this.country_codes)}}input_events(){this.$input.keydown(t=>{let e=t.keyCode;[frappe.ui.keyCode.BACKSPACE].includes(e)&&this.$input.val().length==0&&this.country_code_picker.reset()}),this.country_code_picker.on_change=t=>{if(!t)return this.reset_input();let e=this.country_codes[t].code,i=this.country_codes[t].isd;this.set_flag(e),this.$icon=this.selected_icon.find("svg"),this.$flag=this.selected_icon.find("img"),this.$icon.hasClass("hide")||this.$icon.toggleClass("hide"),this.$flag.length||this.selected_icon.prepend(this.get_country_flag(t)),this.$isd.length?this.$isd.text(i):this.selected_icon.append($(`<span class= "country"> ${i}</span>`)),this.$input.val()&&this.set_value(this.get_country(t)+"-"+this.$input.val()),this.update_padding(),this.$wrapper.popover("hide"),this.$input.focus()},this.$wrapper.find(".selected-phone").on("click",t=>{this.$wrapper.popover("toggle"),t.stopPropagation(),$("body").on("click.phone-popover",e=>{$(e.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.phone-popover",()=>{this.$wrapper.popover("hide")})})}setup_country_code_picker(){let t=$("<div>");this.country_code_picker=new c_({parent:t,countries:this.country_codes}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4.5}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover phone-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>t,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.country_code_picker.refresh(),this.country_code_picker.search_input.focus()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.phone-popover"),$(window).off("hashchange.phone-popover")}),this.selected_icon=this.$wrapper.find(".selected-phone");let e=this.get_input_value();this.selected_icon.length||(this.selected_icon=$(`<div class="selected-phone">${frappe.utils.icon("down","sm")}</div>`),this.selected_icon.insertAfter(this.$input),this.selected_icon.append($('<span class= "country"></span>')),this.$isd=this.selected_icon.find(".country"),e&&e.split("-").length==2&&this.$isd.text(this.value.split("-")[0]))}refresh(){super.refresh(),this.get_value()||this.reset_input()}reset_input(){!this.$input||(this.$input.val(""),this.$wrapper.find(".country").text(""),this.selected_icon.find("svg").hasClass("hide")&&(this.selected_icon.find("svg").toggleClass("hide"),this.selected_icon.find("img").addClass("hide")),this.$input.css("padding-left",30))}async set_formatted_input(t){if(this.country_codes||await this.setup_country_codes(),t&&t.includes("-")&&t.split("-").length==2){this.selected_icon.find("svg").hasClass("hide")||this.selected_icon.find("svg").toggleClass("hide");let e=this.value.split("-")[0];this.get_country_code_and_change_flag(e),this.country_code_picker.set_country(e),this.country_code_picker.refresh(),this.country_code_picker.country&&this.country_code_picker.country!==this.$isd.text()&&this.$isd.length&&this.$isd.text(e),this.update_padding(),this.$input.val(t.split("-").pop())}else if(this.$isd.text().trim()&&this.value){let e=this.$isd.text()+"-"+t;this.set_value(e)}}get_value(){return this.value}set_flag(t){this.selected_icon.find("img").attr("src",`https://flagcdn.com/${t}.svg`),this.$icon=this.selected_icon.find("img"),this.$icon.hasClass("hide")&&this.$icon.toggleClass("hide")}get_country_code_and_change_flag(t){let e=this.country_codes,i=this.selected_icon.find("img");for(let n in e)if(Object.values(e[n]).includes(t)){let o=e[n].code;i=this.selected_icon.find("img"),i.length?this.set_flag(o):(this.selected_icon.prepend(this.get_country_flag(n)),this.selected_icon.find("svg").addClass("hide"))}}get_country(t){return this.country_codes[t].isd}get_country_flag(t){let i=this.country_codes[t].code;return frappe.utils.flag(i)}update_padding(){let t=this.$isd.text().length,e=t-2;t>2?this.$input.css("padding-left",60+e*7):this.$input.css("padding-left",60)}};frappe.ui.form.ControlJSON=class extends frappe.ui.form.ControlCode{set_language(){this.editor.session.setMode("ace/mode/json"),this.editor.setKeyboardHandler("ace/keyboard/vscode")}};frappe.ui.form.make_control=function(r){var t="Control"+r.df.fieldtype.replace(/ /g,"");if(frappe.ui.form[t])return new frappe.ui.form[t](r);console.log("Invalid Control Name: "+r.df.fieldtype)};})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
* Quill Editor v1.3.7
* https://quilljs.com/
* Copyright (c) 2014, Jason Chen
* Copyright (c) 2013, salesforce.com
*/
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/
/*! https://mths.be/punycode v1.4.1 by @mathias */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
//# sourceMappingURL=controls.bundle.4SIZHD4Z.js.map
